import{r as t,Y as te,Z as ne,$ as re,W as se,a5 as oe,a0 as V,au as ae,a1 as X,S as G,bN as ie,bO as le,at as ce}from"./index-C_KJhDjU.js";import{r as de}from"./row-RUGv5-_1.js";import{u as ue}from"./useBreakpoint-CRX574pZ.js";import{P as fe}from"./index-B5bk0S5b.js";const W=t.createContext({}),ge=e=>{const{antCls:s,componentCls:o,iconCls:n,avatarBg:a,avatarColor:z,containerSize:h,containerSizeLG:v,containerSizeSM:p,textFontSize:g,textFontSizeLG:C,textFontSizeSM:N,borderRadius:m,borderRadiusLG:u,borderRadiusSM:O,lineWidth:R,lineType:w}=e,E=(r,f,$)=>({width:r,height:r,borderRadius:"50%",[`&${o}-square`]:{borderRadius:$},[`&${o}-icon`]:{fontSize:f,[`> ${n}`]:{margin:0}}});return{[o]:Object.assign(Object.assign(Object.assign(Object.assign({},re(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:z,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:a,border:`${se(R)} ${w} transparent`,"&-image":{background:"transparent"},[`${s}-image-img`]:{display:"block"}}),E(h,g,m)),{"&-lg":Object.assign({},E(v,C,u)),"&-sm":Object.assign({},E(p,N,O)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},me=e=>{const{componentCls:s,groupBorderColor:o,groupOverlapping:n,groupSpace:a}=e;return{[`${s}-group`]:{display:"inline-flex",[s]:{borderColor:o},"> *:not(:first-child)":{marginInlineStart:n}},[`${s}-group-popover`]:{[`${s} + ${s}`]:{marginInlineStart:a}}}},pe=e=>{const{controlHeight:s,controlHeightLG:o,controlHeightSM:n,fontSize:a,fontSizeLG:z,fontSizeXL:h,fontSizeHeading3:v,marginXS:p,marginXXS:g,colorBorderBg:C}=e;return{containerSize:s,containerSizeLG:o,containerSizeSM:n,textFontSize:Math.round((z+h)/2),textFontSizeLG:v,textFontSizeSM:a,groupSpace:g,groupOverlapping:-p,groupBorderColor:C}},q=te("Avatar",e=>{const{colorTextLightSolid:s,colorTextPlaceholder:o}=e,n=ne(e,{avatarBg:o,avatarColor:s});return[ge(n),me(n)]},pe);var Se=function(e,s){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&s.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(o[n[a]]=e[n[a]]);return o};const he=(e,s)=>{const[o,n]=t.useState(1),[a,z]=t.useState(!1),[h,v]=t.useState(!0),p=t.useRef(null),g=t.useRef(null),C=oe(s,p),{getPrefixCls:N,avatar:m}=t.useContext(V),u=t.useContext(W),O=()=>{if(!g.current||!p.current)return;const i=g.current.offsetWidth,l=p.current.offsetWidth;if(i!==0&&l!==0){const{gap:S=4}=e;S*2<l&&n(l-S*2<i?(l-S*2)/i:1)}};t.useEffect(()=>{z(!0)},[]),t.useEffect(()=>{v(!0),n(1)},[e.src]),t.useEffect(O,[e.gap]);const R=()=>{const{onError:i}=e;(i==null?void 0:i())!==!1&&v(!1)},{prefixCls:w,shape:E,size:r,src:f,srcSet:$,icon:b,className:I,rootClassName:L,alt:B,draggable:A,children:x,crossOrigin:j}=e,y=Se(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),c=ae(i=>{var l,S;return(S=(l=r??(u==null?void 0:u.size))!==null&&l!==void 0?l:i)!==null&&S!==void 0?S:"default"}),k=Object.keys(typeof c=="object"?c||{}:{}).some(i=>["xs","sm","md","lg","xl","xxl"].includes(i)),M=ue(k),F=t.useMemo(()=>{if(typeof c!="object")return{};const i=de.find(S=>M[S]),l=c[i];return l?{width:l,height:l,fontSize:l&&(b||x)?l/2:18}:{}},[M,c]),d=N("avatar",w),T=X(d),[Z,D,J]=q(d,T),K=G({[`${d}-lg`]:c==="large",[`${d}-sm`]:c==="small"}),_=t.isValidElement(f),Q=E||(u==null?void 0:u.shape)||"circle",U=G(d,K,m==null?void 0:m.className,`${d}-${Q}`,{[`${d}-image`]:_||f&&h,[`${d}-icon`]:!!b},J,T,I,L,D),ee=typeof c=="number"?{width:c,height:c,fontSize:b?c/2:18}:{};let P;if(typeof f=="string"&&h)P=t.createElement("img",{src:f,draggable:A,srcSet:$,onError:R,alt:B,crossOrigin:j});else if(_)P=f;else if(b)P=b;else if(a||o!==1){const i=`scale(${o})`,l={msTransform:i,WebkitTransform:i,transform:i};P=t.createElement(ie,{onResize:O},t.createElement("span",{className:`${d}-string`,ref:g,style:Object.assign({},l)},x))}else P=t.createElement("span",{className:`${d}-string`,style:{opacity:0},ref:g},x);return delete y.onError,delete y.gap,Z(t.createElement("span",Object.assign({},y,{style:Object.assign(Object.assign(Object.assign(Object.assign({},ee),F),m==null?void 0:m.style),y.style),className:U,ref:C}),P))},Y=t.forwardRef(he),H=e=>{const{size:s,shape:o}=t.useContext(W),n=t.useMemo(()=>({size:e.size||s,shape:e.shape||o}),[e.size,e.shape,s,o]);return t.createElement(W.Provider,{value:n},e.children)},ve=e=>{var s,o,n,a;const{getPrefixCls:z,direction:h}=t.useContext(V),{prefixCls:v,className:p,rootClassName:g,style:C,maxCount:N,maxStyle:m,size:u,shape:O,maxPopoverPlacement:R,maxPopoverTrigger:w,children:E,max:r}=e,f=z("avatar",v),$=`${f}-group`,b=X(f),[I,L,B]=q(f,b),A=G($,{[`${$}-rtl`]:h==="rtl"},B,b,p,g,L),x=le(E).map((c,k)=>ce(c,{key:`avatar-key-${k}`})),j=(r==null?void 0:r.count)||N,y=x.length;if(j&&j<y){const c=x.slice(0,j),k=x.slice(j,y),M=(r==null?void 0:r.style)||m,F=((s=r==null?void 0:r.popover)===null||s===void 0?void 0:s.trigger)||w||"hover",d=((o=r==null?void 0:r.popover)===null||o===void 0?void 0:o.placement)||R||"top",T=Object.assign(Object.assign({content:k},r==null?void 0:r.popover),{classNames:{root:G(`${$}-popover`,(a=(n=r==null?void 0:r.popover)===null||n===void 0?void 0:n.classNames)===null||a===void 0?void 0:a.root)},placement:d,trigger:F});return c.push(t.createElement(fe,Object.assign({key:"avatar-popover-key",destroyTooltipOnHide:!0},T),t.createElement(Y,{style:M},`+${y-j}`))),I(t.createElement(H,{shape:O,size:u},t.createElement("div",{className:A,style:C},c)))}return I(t.createElement(H,{shape:O,size:u},t.createElement("div",{className:A,style:C},x)))},Ce=Y;Ce.Group=ve;export{Ce as A};
