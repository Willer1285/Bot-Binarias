import{a as Nn,r as Ot,t as je,j as ye,bI as Fl,bJ as Bn,bX as Wn,bK as Rn,aX as El,l as Il,g as Ol,v as qn,D as bn,J as Nl,F as Yn,f as Cn,bS as Bl,h as zn,G as ki,q as Ai,b as ci,bY as or,bZ as Jt,b_ as tn,T as Ja,u as xn,x as Wl}from"./index-C_KJhDjU.js";import{m as Rl,T as ql,C as Yl,S as zl}from"./index-CJvzMZ5m.js";import{u as Hl}from"./useSymbols-D7S_5IXe.js";import{P as Vl}from"./index-B5bk0S5b.js";import{b as Jr}from"./response.type-C55kdV9s.js";import{M as rn}from"./index-BjrAweWy.js";import{s as Sn}from"./styles.module-BQvH19fR.js";const Ql="_container_15ccm_1",jl="_containerOperation_15ccm_25",Ul="_containerOperation__wrapper_15ccm_54",Zl="_containerOperation__wrapper__text_15ccm_66",Xl="_containerOperation__wrapper__value_15ccm_70",Jl="_containerTradingView_15ccm_10",ai={container:Ql,containerOperation:jl,containerOperation__wrapper:Ul,containerOperation__wrapper__text:Zl,containerOperation__wrapper__value:Xl,containerTradingView:Jl},Kl="_container_1ewiu_1",Gl={container:Kl};function $l(){const{isMobile:W}=Nn(),[e,t]=Ot.useState(!1),a=je(u=>u.selectedSymbol),{isError:r,isLoading:i,refetch:n,fetch:s,data:h}=Hl({refetchInterval:60*1e3});Ot.useEffect(()=>{e&&!h.length&&s()},[e]);function o(){t(!1)}function l(){t(u=>!u)}return ye.jsx("div",{className:Gl.container,children:ye.jsx(Vl,{open:e,arrow:!1,placement:"bottomLeft",trigger:"click",onOpenChange:u=>{if(!u){t(!1);return}W||t(!0)},content:ye.jsx(ql,{onClose:o}),overlayClassName:"symbols-popover",style:{inset:"0",backgroundColor:"var(--ant-layout-sider-bg) !important"},children:ye.jsx(Rl,{showIcon:!0,open:e,onClick:l,refetch:n,isError:r,isLoading:i,symbol:a})})})}var lr={exports:{}},Ka={};function Hn(W){var e,t,a="";if(typeof W=="string"||typeof W=="number")a+=W;else if(typeof W=="object")if(Array.isArray(W))for(e=0;e<W.length;e++)W[e]&&(t=Hn(W[e]))&&(a&&(a+=" "),a+=t);else for(e in W)W[e]&&(a&&(a+=" "),a+=e);return a}function kn(){for(var W,e,t=0,a="";t<arguments.length;)(W=arguments[t++])&&(e=Hn(W))&&(a&&(a+=" "),a+=e);return a}const eh=Object.freeze(Object.defineProperty({__proto__:null,clsx:kn,default:kn},Symbol.toStringTag,{value:"Module"})),th=Fl(eh);var Tt={},pi={},An;function Kr(){if(An)return pi;An=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.dontSetMe=r,pi.findInArray=W,pi.int=a,pi.isFunction=e,pi.isNum=t;function W(i,n){for(let s=0,h=i.length;s<h;s++)if(n.apply(n,[i[s],s,i]))return i[s]}function e(i){return typeof i=="function"||Object.prototype.toString.call(i)==="[object Function]"}function t(i){return typeof i=="number"&&!isNaN(i)}function a(i){return parseInt(i,10)}function r(i,n,s){if(i[n])return new Error("Invalid prop ".concat(n," passed to ").concat(s," - do not set this, set it on the child."))}return pi}var gi={},wn;function ih(){if(wn)return gi;wn=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.browserPrefixToKey=t,gi.browserPrefixToStyle=a,gi.default=void 0,gi.getPrefix=e;const W=["Moz","Webkit","O","ms"];function e(){var i;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const s=(i=window.document)===null||i===void 0||(i=i.documentElement)===null||i===void 0?void 0:i.style;if(!s||n in s)return"";for(let h=0;h<W.length;h++)if(t(n,W[h])in s)return W[h];return""}function t(i,n){return n?"".concat(n).concat(r(i)):i}function a(i,n){return n?"-".concat(n.toLowerCase(),"-").concat(i):i}function r(i){let n="",s=!0;for(let h=0;h<i.length;h++)s?(n+=i[h].toUpperCase(),s=!1):i[h]==="-"?s=!0:n+=i[h];return n}return gi.default=e(),gi}var Tn;function an(){if(Tn)return Tt;Tn=1,Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.addClassName=S,Tt.addEvent=s,Tt.addUserSelectStyles=m,Tt.createCSSTransform=y,Tt.createSVGTransform=d,Tt.getTouch=b,Tt.getTouchIdentifier=f,Tt.getTranslation=g,Tt.innerHeight=u,Tt.innerWidth=c,Tt.matchesSelector=i,Tt.matchesSelectorAndParentsTo=n,Tt.offsetXYFromParent=p,Tt.outerHeight=o,Tt.outerWidth=l,Tt.removeClassName=w,Tt.removeEvent=h,Tt.removeUserSelectStyles=C;var W=Kr(),e=a(ih());function t(k){if(typeof WeakMap!="function")return null;var D=new WeakMap,v=new WeakMap;return(t=function(x){return x?v:D})(k)}function a(k,D){if(k&&k.__esModule)return k;if(k===null||typeof k!="object"&&typeof k!="function")return{default:k};var v=t(D);if(v&&v.has(k))return v.get(k);var x={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in k)if(T!=="default"&&Object.prototype.hasOwnProperty.call(k,T)){var _=A?Object.getOwnPropertyDescriptor(k,T):null;_&&(_.get||_.set)?Object.defineProperty(x,T,_):x[T]=k[T]}return x.default=k,v&&v.set(k,x),x}let r="";function i(k,D){return r||(r=(0,W.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(v){return(0,W.isFunction)(k[v])})),(0,W.isFunction)(k[r])?k[r](D):!1}function n(k,D,v){let x=k;do{if(i(x,D))return!0;if(x===v)return!1;x=x.parentNode}while(x);return!1}function s(k,D,v,x){if(!k)return;const A={capture:!0,...x};k.addEventListener?k.addEventListener(D,v,A):k.attachEvent?k.attachEvent("on"+D,v):k["on"+D]=v}function h(k,D,v,x){if(!k)return;const A={capture:!0,...x};k.removeEventListener?k.removeEventListener(D,v,A):k.detachEvent?k.detachEvent("on"+D,v):k["on"+D]=null}function o(k){let D=k.clientHeight;const v=k.ownerDocument.defaultView.getComputedStyle(k);return D+=(0,W.int)(v.borderTopWidth),D+=(0,W.int)(v.borderBottomWidth),D}function l(k){let D=k.clientWidth;const v=k.ownerDocument.defaultView.getComputedStyle(k);return D+=(0,W.int)(v.borderLeftWidth),D+=(0,W.int)(v.borderRightWidth),D}function u(k){let D=k.clientHeight;const v=k.ownerDocument.defaultView.getComputedStyle(k);return D-=(0,W.int)(v.paddingTop),D-=(0,W.int)(v.paddingBottom),D}function c(k){let D=k.clientWidth;const v=k.ownerDocument.defaultView.getComputedStyle(k);return D-=(0,W.int)(v.paddingLeft),D-=(0,W.int)(v.paddingRight),D}function p(k,D,v){const A=D===D.ownerDocument.body?{left:0,top:0}:D.getBoundingClientRect(),T=(k.clientX+D.scrollLeft-A.left)/v,_=(k.clientY+D.scrollTop-A.top)/v;return{x:T,y:_}}function y(k,D){const v=g(k,D,"px");return{[(0,e.browserPrefixToKey)("transform",e.default)]:v}}function d(k,D){return g(k,D,"")}function g(k,D,v){let{x,y:A}=k,T="translate(".concat(x).concat(v,",").concat(A).concat(v,")");if(D){const _="".concat(typeof D.x=="string"?D.x:D.x+v),L="".concat(typeof D.y=="string"?D.y:D.y+v);T="translate(".concat(_,", ").concat(L,")")+T}return T}function b(k,D){return k.targetTouches&&(0,W.findInArray)(k.targetTouches,v=>D===v.identifier)||k.changedTouches&&(0,W.findInArray)(k.changedTouches,v=>D===v.identifier)}function f(k){if(k.targetTouches&&k.targetTouches[0])return k.targetTouches[0].identifier;if(k.changedTouches&&k.changedTouches[0])return k.changedTouches[0].identifier}function m(k){if(!k)return;let D=k.getElementById("react-draggable-style-el");D||(D=k.createElement("style"),D.type="text/css",D.id="react-draggable-style-el",D.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,D.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,k.getElementsByTagName("head")[0].appendChild(D)),k.body&&S(k.body,"react-draggable-transparent-selection")}function C(k){if(k)try{if(k.body&&w(k.body,"react-draggable-transparent-selection"),k.selection)k.selection.empty();else{const D=(k.defaultView||window).getSelection();D&&D.type!=="Caret"&&D.removeAllRanges()}}catch{}}function S(k,D){k.classList?k.classList.add(D):k.className.match(new RegExp("(?:^|\\s)".concat(D,"(?!\\S)")))||(k.className+=" ".concat(D))}function w(k,D){k.classList?k.classList.remove(D):k.className=k.className.replace(new RegExp("(?:^|\\s)".concat(D,"(?!\\S)"),"g"),"")}return Tt}var ri={},_n;function Vn(){if(_n)return ri;_n=1,Object.defineProperty(ri,"__esModule",{value:!0}),ri.canDragX=r,ri.canDragY=i,ri.createCoreData=s,ri.createDraggableData=h,ri.getBoundPosition=t,ri.getControlPosition=n,ri.snapToGrid=a;var W=Kr(),e=an();function t(u,c,p){if(!u.props.bounds)return[c,p];let{bounds:y}=u.props;y=typeof y=="string"?y:o(y);const d=l(u);if(typeof y=="string"){const{ownerDocument:g}=d,b=g.defaultView;let f;if(y==="parent"?f=d.parentNode:f=g.querySelector(y),!(f instanceof b.HTMLElement))throw new Error('Bounds selector "'+y+'" could not find an element.');const m=f,C=b.getComputedStyle(d),S=b.getComputedStyle(m);y={left:-d.offsetLeft+(0,W.int)(S.paddingLeft)+(0,W.int)(C.marginLeft),top:-d.offsetTop+(0,W.int)(S.paddingTop)+(0,W.int)(C.marginTop),right:(0,e.innerWidth)(m)-(0,e.outerWidth)(d)-d.offsetLeft+(0,W.int)(S.paddingRight)-(0,W.int)(C.marginRight),bottom:(0,e.innerHeight)(m)-(0,e.outerHeight)(d)-d.offsetTop+(0,W.int)(S.paddingBottom)-(0,W.int)(C.marginBottom)}}return(0,W.isNum)(y.right)&&(c=Math.min(c,y.right)),(0,W.isNum)(y.bottom)&&(p=Math.min(p,y.bottom)),(0,W.isNum)(y.left)&&(c=Math.max(c,y.left)),(0,W.isNum)(y.top)&&(p=Math.max(p,y.top)),[c,p]}function a(u,c,p){const y=Math.round(c/u[0])*u[0],d=Math.round(p/u[1])*u[1];return[y,d]}function r(u){return u.props.axis==="both"||u.props.axis==="x"}function i(u){return u.props.axis==="both"||u.props.axis==="y"}function n(u,c,p){const y=typeof c=="number"?(0,e.getTouch)(u,c):null;if(typeof c=="number"&&!y)return null;const d=l(p),g=p.props.offsetParent||d.offsetParent||d.ownerDocument.body;return(0,e.offsetXYFromParent)(y||u,g,p.props.scale)}function s(u,c,p){const y=!(0,W.isNum)(u.lastX),d=l(u);return y?{node:d,deltaX:0,deltaY:0,lastX:c,lastY:p,x:c,y:p}:{node:d,deltaX:c-u.lastX,deltaY:p-u.lastY,lastX:u.lastX,lastY:u.lastY,x:c,y:p}}function h(u,c){const p=u.props.scale;return{node:c.node,x:u.state.x+c.deltaX/p,y:u.state.y+c.deltaY/p,deltaX:c.deltaX/p,deltaY:c.deltaY/p,lastX:u.state.x,lastY:u.state.y}}function o(u){return{left:u.left,top:u.top,right:u.right,bottom:u.bottom}}function l(u){const c=u.findDOMNode();if(!c)throw new Error("<DraggableCore>: Unmounted during event!");return c}return ri}var hr={},Zr={},Dn;function Qn(){if(Dn)return Zr;Dn=1,Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.default=W;function W(){}return Zr}var Ln;function rh(){if(Ln)return hr;Ln=1,Object.defineProperty(hr,"__esModule",{value:!0}),hr.default=void 0;var W=o(Bn()),e=s(Rn()),t=s(Wn()),a=an(),r=Vn(),i=Kr(),n=s(Qn());function s(g){return g&&g.__esModule?g:{default:g}}function h(g){if(typeof WeakMap!="function")return null;var b=new WeakMap,f=new WeakMap;return(h=function(m){return m?f:b})(g)}function o(g,b){if(g&&g.__esModule)return g;if(g===null||typeof g!="object"&&typeof g!="function")return{default:g};var f=h(b);if(f&&f.has(g))return f.get(g);var m={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in g)if(S!=="default"&&Object.prototype.hasOwnProperty.call(g,S)){var w=C?Object.getOwnPropertyDescriptor(g,S):null;w&&(w.get||w.set)?Object.defineProperty(m,S,w):m[S]=g[S]}return m.default=g,f&&f.set(g,m),m}function l(g,b,f){return b=u(b),b in g?Object.defineProperty(g,b,{value:f,enumerable:!0,configurable:!0,writable:!0}):g[b]=f,g}function u(g){var b=c(g,"string");return typeof b=="symbol"?b:String(b)}function c(g,b){if(typeof g!="object"||g===null)return g;var f=g[Symbol.toPrimitive];if(f!==void 0){var m=f.call(g,b);if(typeof m!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(g)}const p={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let y=p.mouse,d=class extends W.Component{constructor(){super(...arguments),l(this,"dragging",!1),l(this,"lastX",NaN),l(this,"lastY",NaN),l(this,"touchIdentifier",null),l(this,"mounted",!1),l(this,"handleDragStart",b=>{if(this.props.onMouseDown(b),!this.props.allowAnyClick&&typeof b.button=="number"&&b.button!==0)return!1;const f=this.findDOMNode();if(!f||!f.ownerDocument||!f.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:m}=f;if(this.props.disabled||!(b.target instanceof m.defaultView.Node)||this.props.handle&&!(0,a.matchesSelectorAndParentsTo)(b.target,this.props.handle,f)||this.props.cancel&&(0,a.matchesSelectorAndParentsTo)(b.target,this.props.cancel,f))return;b.type==="touchstart"&&b.preventDefault();const C=(0,a.getTouchIdentifier)(b);this.touchIdentifier=C;const S=(0,r.getControlPosition)(b,C,this);if(S==null)return;const{x:w,y:k}=S,D=(0,r.createCoreData)(this,w,k);(0,n.default)("DraggableCore: handleDragStart: %j",D),(0,n.default)("calling",this.props.onStart),!(this.props.onStart(b,D)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,a.addUserSelectStyles)(m),this.dragging=!0,this.lastX=w,this.lastY=k,(0,a.addEvent)(m,y.move,this.handleDrag),(0,a.addEvent)(m,y.stop,this.handleDragStop))}),l(this,"handleDrag",b=>{const f=(0,r.getControlPosition)(b,this.touchIdentifier,this);if(f==null)return;let{x:m,y:C}=f;if(Array.isArray(this.props.grid)){let k=m-this.lastX,D=C-this.lastY;if([k,D]=(0,r.snapToGrid)(this.props.grid,k,D),!k&&!D)return;m=this.lastX+k,C=this.lastY+D}const S=(0,r.createCoreData)(this,m,C);if((0,n.default)("DraggableCore: handleDrag: %j",S),this.props.onDrag(b,S)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const D=document.createEvent("MouseEvents");D.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(D)}return}this.lastX=m,this.lastY=C}),l(this,"handleDragStop",b=>{if(!this.dragging)return;const f=(0,r.getControlPosition)(b,this.touchIdentifier,this);if(f==null)return;let{x:m,y:C}=f;if(Array.isArray(this.props.grid)){let D=m-this.lastX||0,v=C-this.lastY||0;[D,v]=(0,r.snapToGrid)(this.props.grid,D,v),m=this.lastX+D,C=this.lastY+v}const S=(0,r.createCoreData)(this,m,C);if(this.props.onStop(b,S)===!1||this.mounted===!1)return!1;const k=this.findDOMNode();k&&this.props.enableUserSelectHack&&(0,a.removeUserSelectStyles)(k.ownerDocument),(0,n.default)("DraggableCore: handleDragStop: %j",S),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,k&&((0,n.default)("DraggableCore: Removing handlers"),(0,a.removeEvent)(k.ownerDocument,y.move,this.handleDrag),(0,a.removeEvent)(k.ownerDocument,y.stop,this.handleDragStop))}),l(this,"onMouseDown",b=>(y=p.mouse,this.handleDragStart(b))),l(this,"onMouseUp",b=>(y=p.mouse,this.handleDragStop(b))),l(this,"onTouchStart",b=>(y=p.touch,this.handleDragStart(b))),l(this,"onTouchEnd",b=>(y=p.touch,this.handleDragStop(b)))}componentDidMount(){this.mounted=!0;const b=this.findDOMNode();b&&(0,a.addEvent)(b,p.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const b=this.findDOMNode();if(b){const{ownerDocument:f}=b;(0,a.removeEvent)(f,p.mouse.move,this.handleDrag),(0,a.removeEvent)(f,p.touch.move,this.handleDrag),(0,a.removeEvent)(f,p.mouse.stop,this.handleDragStop),(0,a.removeEvent)(f,p.touch.stop,this.handleDragStop),(0,a.removeEvent)(b,p.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,a.removeUserSelectStyles)(f)}}findDOMNode(){var b,f;return(b=this.props)!==null&&b!==void 0&&b.nodeRef?(f=this.props)===null||f===void 0||(f=f.nodeRef)===null||f===void 0?void 0:f.current:t.default.findDOMNode(this)}render(){return W.cloneElement(W.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};return hr.default=d,l(d,"displayName","DraggableCore"),l(d,"propTypes",{allowAnyClick:e.default.bool,children:e.default.node.isRequired,disabled:e.default.bool,enableUserSelectHack:e.default.bool,offsetParent:function(g,b){if(g[b]&&g[b].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:e.default.arrayOf(e.default.number),handle:e.default.string,cancel:e.default.string,nodeRef:e.default.object,onStart:e.default.func,onDrag:e.default.func,onStop:e.default.func,onMouseDown:e.default.func,scale:e.default.number,className:i.dontSetMe,style:i.dontSetMe,transform:i.dontSetMe}),l(d,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),hr}var Mn;function ah(){return Mn||(Mn=1,function(W){Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"DraggableCore",{enumerable:!0,get:function(){return h.default}}),W.default=void 0;var e=c(Bn()),t=l(Rn()),a=l(Wn()),r=l(th),i=an(),n=Vn(),s=Kr(),h=l(rh()),o=l(Qn());function l(f){return f&&f.__esModule?f:{default:f}}function u(f){if(typeof WeakMap!="function")return null;var m=new WeakMap,C=new WeakMap;return(u=function(S){return S?C:m})(f)}function c(f,m){if(f&&f.__esModule)return f;if(f===null||typeof f!="object"&&typeof f!="function")return{default:f};var C=u(m);if(C&&C.has(f))return C.get(f);var S={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in f)if(k!=="default"&&Object.prototype.hasOwnProperty.call(f,k)){var D=w?Object.getOwnPropertyDescriptor(f,k):null;D&&(D.get||D.set)?Object.defineProperty(S,k,D):S[k]=f[k]}return S.default=f,C&&C.set(f,S),S}function p(){return p=Object.assign?Object.assign.bind():function(f){for(var m=1;m<arguments.length;m++){var C=arguments[m];for(var S in C)Object.prototype.hasOwnProperty.call(C,S)&&(f[S]=C[S])}return f},p.apply(this,arguments)}function y(f,m,C){return m=d(m),m in f?Object.defineProperty(f,m,{value:C,enumerable:!0,configurable:!0,writable:!0}):f[m]=C,f}function d(f){var m=g(f,"string");return typeof m=="symbol"?m:String(m)}function g(f,m){if(typeof f!="object"||f===null)return f;var C=f[Symbol.toPrimitive];if(C!==void 0){var S=C.call(f,m);if(typeof S!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(f)}class b extends e.Component{static getDerivedStateFromProps(m,C){let{position:S}=m,{prevPropsPosition:w}=C;return S&&(!w||S.x!==w.x||S.y!==w.y)?((0,o.default)("Draggable: getDerivedStateFromProps %j",{position:S,prevPropsPosition:w}),{x:S.x,y:S.y,prevPropsPosition:{...S}}):null}constructor(m){super(m),y(this,"onDragStart",(C,S)=>{if((0,o.default)("Draggable: onDragStart: %j",S),this.props.onStart(C,(0,n.createDraggableData)(this,S))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),y(this,"onDrag",(C,S)=>{if(!this.state.dragging)return!1;(0,o.default)("Draggable: onDrag: %j",S);const w=(0,n.createDraggableData)(this,S),k={x:w.x,y:w.y,slackX:0,slackY:0};if(this.props.bounds){const{x:v,y:x}=k;k.x+=this.state.slackX,k.y+=this.state.slackY;const[A,T]=(0,n.getBoundPosition)(this,k.x,k.y);k.x=A,k.y=T,k.slackX=this.state.slackX+(v-k.x),k.slackY=this.state.slackY+(x-k.y),w.x=k.x,w.y=k.y,w.deltaX=k.x-this.state.x,w.deltaY=k.y-this.state.y}if(this.props.onDrag(C,w)===!1)return!1;this.setState(k)}),y(this,"onDragStop",(C,S)=>{if(!this.state.dragging||this.props.onStop(C,(0,n.createDraggableData)(this,S))===!1)return!1;(0,o.default)("Draggable: onDragStop: %j",S);const k={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:v,y:x}=this.props.position;k.x=v,k.y=x}this.setState(k)}),this.state={dragging:!1,dragged:!1,x:m.position?m.position.x:m.defaultPosition.x,y:m.position?m.position.y:m.defaultPosition.y,prevPropsPosition:{...m.position},slackX:0,slackY:0,isElementSVG:!1},m.position&&!(m.onDrag||m.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var m,C;return(m=(C=this.props)===null||C===void 0||(C=C.nodeRef)===null||C===void 0?void 0:C.current)!==null&&m!==void 0?m:a.default.findDOMNode(this)}render(){const{axis:m,bounds:C,children:S,defaultPosition:w,defaultClassName:k,defaultClassNameDragging:D,defaultClassNameDragged:v,position:x,positionOffset:A,scale:T,..._}=this.props;let L={},M=null;const P=!!!x||this.state.dragging,E=x||w,O={x:(0,n.canDragX)(this)&&P?this.state.x:E.x,y:(0,n.canDragY)(this)&&P?this.state.y:E.y};this.state.isElementSVG?M=(0,i.createSVGTransform)(O,A):L=(0,i.createCSSTransform)(O,A);const I=(0,r.default)(S.props.className||"",k,{[D]:this.state.dragging,[v]:this.state.dragged});return e.createElement(h.default,p({},_,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(S),{className:I,style:{...S.props.style,...L},transform:M}))}}W.default=b,y(b,"displayName","Draggable"),y(b,"propTypes",{...h.default.propTypes,axis:t.default.oneOf(["both","x","y","none"]),bounds:t.default.oneOfType([t.default.shape({left:t.default.number,right:t.default.number,top:t.default.number,bottom:t.default.number}),t.default.string,t.default.oneOf([!1])]),defaultClassName:t.default.string,defaultClassNameDragging:t.default.string,defaultClassNameDragged:t.default.string,defaultPosition:t.default.shape({x:t.default.number,y:t.default.number}),positionOffset:t.default.shape({x:t.default.oneOfType([t.default.number,t.default.string]),y:t.default.oneOfType([t.default.number,t.default.string])}),position:t.default.shape({x:t.default.number,y:t.default.number}),className:s.dontSetMe,style:s.dontSetMe,transform:s.dontSetMe}),y(b,"defaultProps",{...h.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})}(Ka)),Ka}var Pn;function nh(){if(Pn)return lr.exports;Pn=1;const{default:W,DraggableCore:e}=ah();return lr.exports=W,lr.exports.default=W,lr.exports.DraggableCore=e,lr.exports}var sh=nh();const oh=El(sh);function lh(){const W=je(u=>u.selectedSymbol),e=Il(u=>u.isDemo),{serverTime:t}=Ol(u=>u),a=qn(u=>u.pending),[r,i]=Ot.useState("00:00"),n=a.filter(u=>u.isDemo===e).filter(u=>u.symbol===(W==null?void 0:W.ticker)).filter(u=>u.result==="OPEN");Ot.useEffect(()=>{const u=n.slice().sort((g,b)=>b.closeTime-g.closeTime);if(!u.length)return;const c=u[0],p=bn.fromMillis(Nl()),y=bn.fromMillis(c.closeTime).diff(p,"seconds");let d=y.toFormat("mm:ss");y.seconds<=0&&(d="00:00"),i(d)},[t]);function s(u){let c="#ffffff";return u>0?c="#00C853":u<0&&(c="#FF1744"),c}const h=u=>{if(!W)return!1;const c=Bl(W.ticker);return u.direction==="BUY"&&c>u.openPrice||u.direction==="SELL"&&c<u.openPrice?"WIN":u.openPrice===c?"DRAW":"LOSE"},o=()=>{let u=0;return n.forEach(c=>{const p=h(c);let y=0;p==="WIN"?y=c.amount*(c.payout/100):p==="LOSE"?y=-c.amount:y=0,u+=y}),u},l=n.reduce((u,c)=>u+c.amount,0);return ye.jsx(ye.Fragment,{children:n.length?ye.jsx(oh,{children:ye.jsx("div",{className:ai.containerOperation,children:ye.jsx("div",{className:ai.containerOperation__wrapper,children:ye.jsxs(Yn,{gap:12,children:[ye.jsxs("div",{children:[ye.jsx("div",{className:ai.containerOperation__wrapper__value,children:r}),ye.jsx("div",{className:ai.containerOperation__wrapper__text,children:"Expiration time"})]}),ye.jsxs("div",{children:[ye.jsx("div",{className:ai.containerOperation__wrapper__value,children:Cn(l)}),ye.jsx("div",{className:ai.containerOperation__wrapper__text,children:"Invested"})]}),ye.jsxs("div",{children:[ye.jsx("div",{className:ai.containerOperation__wrapper__value,style:{color:s(o())},children:Cn(o())}),ye.jsx("div",{className:ai.containerOperation__wrapper__text,children:"Expected PNL"})]})]})})})}):null})}function Pu({hideSymbols:W,hideOperations:e}){const{tenant:t}=zn();return ye.jsxs(ye.Fragment,{children:[!W&&ye.jsx("div",{className:`${ai.container} ${t.defaultChart===Jr.TRADING_VIEW?ai.containerTradingView:""}`,children:ye.jsx($l,{})}),!e&&ye.jsx(lh,{})]})}const hh="_container_1k8b9_1",uh="_container__title_1k8b9_8",ch="_container__content_1k8b9_14",Ga={container:hh,container__title:uh,container__content:ch},fh="_container_1wpyq_1",dh="_skeleton_1wpyq_32",$a={container:fh,"container--selected":"_container--selected_1wpyq_22",skeleton:dh};function Fn({data:W,isLoading:e}){const t=je(h=>h.interval),a=je(h=>h.setInverval),r=t===W,{pathname:i}=ki(),n=Ai();function s(){n(i),a(W)}return e?ye.jsx(Yl,{className:$a.skeleton}):ye.jsx("button",{className:`${$a.container} ${r?$a["container--selected"]:""}`,onClick:s,children:W})}function ph(){var r;const{t:W}=ci(),e=je(i=>i.selectedSymbol),t=(r=e==null?void 0:e.allowedIntervals)==null?void 0:r.map(i=>ye.jsx(Fn,{data:i},`chart-unit-${i}`)),a=Array.from({length:9}).map((i,n)=>ye.jsx(Fn,{data:"",isLoading:!0},`chart-unit-${n}`));return ye.jsxs("div",{className:Ga.container,children:[ye.jsx("span",{className:Ga.container__title,children:W("chart.time_interval_title")}),ye.jsx("div",{className:Ga.container__content,children:e?t:a})]})}const gh="_container_1qxef_1",mh={container:gh},yh="_container_hlf8i_1",vh="_container__label_hlf8i_23",bh="_container__icon_hlf8i_31",Xr={container:yh,"container--selected":"_container--selected_hlf8i_18",container__label:vh,container__icon:bh};function Ch({image:W,label:e,value:t}){const{t:a}=ci(),r=je(l=>l.type),i=je(l=>l.setType),n=r===t,{pathname:s}=ki(),h=Ai();function o(){h(s),i(t)}return ye.jsxs("button",{className:`${Xr.container} ${n?Xr["container--selected"]:""}`,onClick:o,children:[ye.jsx("img",{className:Xr.container__icon,src:`/icons/type/${W}`,alt:a(e),height:24,width:24}),ye.jsx("span",{className:Xr.container__label,children:a(`chart.${e}`)})]})}const xh=[{label:"candle",value:or.Candle,image:"candle.svg"},{label:"area",value:or.Area,image:"area.svg"},{label:"hollow",value:or.Hollow,image:"hollow.svg"},{label:"heikinashi",value:or.HeikinAshi,image:"heikinashi.svg"},{label:"ohlc",value:or.OHLC,image:"ohlc.svg"}];function Sh(){const W=xh.map(e=>ye.jsx(Ch,{...e},`chart-type-${e.value}`));return ye.jsx("div",{className:mh.container,children:W})}const kh="_container_cpghv_1",Ah="_container__divider_cpghv_8",En={container:kh,container__divider:Ah};function wh(){return ye.jsxs("div",{className:En.container,children:[ye.jsx(Sh,{}),ye.jsx("div",{className:En.container__divider}),ye.jsx(ph,{})]})}const Th="_container_1cwm8_1",_h={container:Th};var Gr=(W=>(W.TradingChartIndicators="trading-chart-indicators",W.TradingChartInformation="trading-chart-information",W.TradingChartSettings="trading-chart-settings",W.TradingChartDraw="trading-chart-draw",W))(Gr||{});function Fu(){const{t:W}=ci(),{hash:e,pathname:t}=ki(),a=e==null?void 0:e.includes(`#${Gr.TradingChartSettings}`),r=Ai();function i(){r(t)}return ye.jsx(rn,{centered:!0,closable:!0,open:a,footer:!1,onCancel:i,title:W("chart.settings"),className:_h.container,children:ye.jsx(wh,{})})}const Dh="_container_1uvn1_1",Lh={container:Dh},Mh="_container_jxw5h_1",Ph="_container__label_jxw5h_21",Fh="_container__wrapper_jxw5h_41",Eh="_container__icon_jxw5h_55",Ih="_container__delete_icon_jxw5h_60",bi={container:Mh,"container--selected":"_container--selected_jxw5h_17",container__label:Ph,"container--active":"_container--active_jxw5h_25",container__wrapper:Fh,container__icon:Eh,container__delete_icon:Ih};(function(){const W="2099/12/31",e=["127.0.0.1","localhost"];let t;if(t=new Date(W).getTime(),t){const a=new Date().getTime();t<=a&&console.error("This license has expired!")}typeof document<"u"&&e&&e.length>0&&document.location.href})();J[198498]=function(){for(var W=2;W!==9;)switch(W){case 1:return globalThis;case 5:var e;try{for(var t=2;t!==6;)switch(t){case 4:t=typeof dDF47>"u"?3:9;break;case 9:delete e.dDF47;var a=Object.prototype;delete a.MhERs,t=6;break;case 2:Object.defineProperty(Object.prototype,"MhERs",{get:function(){for(var r=2;r!==1;)switch(r){case 2:return this}},configurable:!0}),e=MhERs,e.dDF47=e,t=4;break;case 3:throw""}}catch{e=window}return e;case 2:W=typeof globalThis=="object"?1:5;break}}();Oh(J[198498]);J.s8L=function(){return typeof J[227856].E3BrgIJ=="function"?J[227856].E3BrgIJ.apply(J[227856],arguments):J[227856].E3BrgIJ};J[481611]=!0;J.s1t=function(){return typeof J[227856].P1IEEU7=="function"?J[227856].P1IEEU7.apply(J[227856],arguments):J[227856].P1IEEU7};J.p4Q=function(){return typeof J[131553].K9GamRN=="function"?J[131553].K9GamRN.apply(J[131553],arguments):J[131553].K9GamRN};function J(){}J.A0h=function(){return typeof J[633704].F3I3$Fk=="function"?J[633704].F3I3$Fk.apply(J[633704],arguments):J[633704].F3I3$Fk};J.g5k=function(){return typeof J[227856].E3BrgIJ=="function"?J[227856].E3BrgIJ.apply(J[227856],arguments):J[227856].E3BrgIJ};J.F_p=function(){return typeof J[50435].l2ga0dB=="function"?J[50435].l2ga0dB.apply(J[50435],arguments):J[50435].l2ga0dB};J[185837]=function(){var W=function(t,a){var r=a&65535,i=a-r;return(i*t|0)+(r*t|0)|0},e=function(t,a,r){for(var i=3432918353,n=461845907,s=r,h=a&-4,o=0;o<h;o+=4){var l=t.d9ybW(o)&255|(t.d9ybW(o+1)&255)<<8|(t.d9ybW(o+2)&255)<<16|(t.d9ybW(o+3)&255)<<24;l=W(l,i),l=(l&131071)<<15|l>>>17,l=W(l,n),s^=l,s=(s&524287)<<13|s>>>19,s=s*5+3864292196|0}switch(l=0,a%4){case 3:l=(t.d9ybW(h+2)&255)<<16;case 2:l|=(t.d9ybW(h+1)&255)<<8;case 1:l|=t.d9ybW(h)&255,l=W(l,i),l=(l&131071)<<15|l>>>17,l=W(l,n),s^=l}return s^=a,s^=s>>>16,s=W(s,2246822507),s^=s>>>13,s=W(s,3266489909),s^=s>>>16,s};return{N$mYWS6:e}}();J[595602]=!0;J.z5n=function(){return typeof J[50435].l2ga0dB=="function"?J[50435].l2ga0dB.apply(J[50435],arguments):J[50435].l2ga0dB};J[245730]=628;J.h8g=function(){return typeof J[131553].K9GamRN=="function"?J[131553].K9GamRN.apply(J[131553],arguments):J[131553].K9GamRN};J.s3C=function(){return typeof J[227856].P1IEEU7=="function"?J[227856].P1IEEU7.apply(J[227856],arguments):J[227856].P1IEEU7};J.R8u=function(){return typeof J[50435].r2f4Pjv=="function"?J[50435].r2f4Pjv.apply(J[50435],arguments):J[50435].r2f4Pjv};J[633704]=function(W){for(var e=2;e!==10;)switch(e){case 7:r=a.F7uJZ3(new t[s]("^['-|]"),"S"),e=6;break;case 2:var t,a,r,i;e=1;break;case 1:e=i--?4:5;break;case 11:return{F3I3$Fk:function(u){for(var c=2;c!==6;)switch(c){case 2:var p=new t[W[0]]()[W[1]](),p=1669864376e3;c=1;break;case 4:h=l(p),c=3;break;case 3:c=i--?8:9;break;case 1:c=p>o?5:8;break;case 8:var y=function(d,g){for(var b=2;b!==10;)switch(b){case 8:var f=t[g[4]](d[g[2]](S),16)[g[3]](2),m=f[g[2]](f[g[5]]-1);b=6;break;case 2:b=typeof d>"u"&&typeof u<"u"?1:5;break;case 4:g=W,b=3;break;case 11:return C;case 3:var C,S=0;b=9;break;case 1:d=u,b=5;break;case 13:S++,b=9;break;case 5:b=typeof g>"u"&&typeof W<"u"?4:3;break;case 14:C=m,b=13;break;case 9:b=S<d[g[5]]?8:11;break;case 12:C=C^m,b=13;break;case 6:b=S===0?14:12;break}}(void 0,void 0);return y?h:!h;case 9:o=p+6e4,c=8;break;case 5:c=i--?3:4;break}}};case 5:t=J[198498],e=4;break;case 6:e=i--?13:14;break;case 9:a=typeof n,e=8;break;case 4:var n="fromCharCode",s="RegExp";e=3;break;case 8:e=i--?6:7;break;case 14:W=W.b_iP9L(function(u){for(var c=2;c!==13;)switch(c){case 5:y="",c=4;break;case 9:y+=t[r][n](u[p]+91),c=8;break;case 4:var p=0;c=3;break;case 2:var y;c=1;break;case 8:p++,c=3;break;case 7:c=y?14:6;break;case 6:return;case 1:c=i--?4:5;break;case 3:c=p<u.length?9:7;break;case 14:return y}}),e=13;break;case 12:var h,o=0;e=11;break;case 3:e=i--?8:9;break;case 13:e=i--?11:12;break}function l(u){for(var c=2;c!==15;)switch(c){case 2:var p,y,d,g,b,f,m;c=1;break;case 7:c=i--?14:6;break;case 19:return p;case 16:p=g-u>y,c=19;break;case 20:p=u-f>y&&g-u>y,c=19;break;case 10:c=f>=0&&g>=0?20:18;break;case 12:c=i--?10:11;break;case 1:c=i--?4:5;break;case 3:y=27,c=9;break;case 18:c=f>=0?17:16;break;case 5:m=t[W[4]],c=4;break;case 6:g=d&&m(d,y),c=14;break;case 8:d=W[6],c=7;break;case 4:c=i--?9:3;break;case 17:p=u-f>y,c=19;break;case 9:c=i--?7:8;break;case 13:b=W[7],c=12;break;case 14:c=i--?12:13;break;case 11:f=(b||b===0)&&m(b,y),c=10;break}}}([[-23,6,25,10],[12,10,25,-7,14,18,10],[8,13,6,23,-26,25],[25,20,-8,25,23,14,19,12],[21,6,23,24,10,-18,19,25],[17,10,19,12,25,13],[-38,21,-40,11,-38,-37,19,10,-43],[]]);function Oh(W){function e(l){for(var u=2;u!==5;)switch(u){case 2:var c=[arguments];return c[0][0].Function}}function t(l){for(var u=2;u!==5;)switch(u){case 2:var c=[arguments];return c[0][0].RegExp}}function a(l){for(var u=2;u!==5;)switch(u){case 2:var c=[arguments];return c[0][0].Array}}function r(l){for(var u=2;u!==5;)switch(u){case 2:var c=[arguments];return c[0][0].String}}function i(l){for(var u=2;u!==5;)switch(u){case 2:var c=[arguments];return c[0][0]}}for(var n=2;n!==151;)switch(n){case 3:s[6]="d",s[1]="",s[1]="h",s[9]="",n=6;break;case 129:h(i,"String",s[89],s[46]),n=128;break;case 26:s[52]="Z3",s[34]="6mN",s[40]="",s[40]="J",n=22;break;case 121:h(a,"push",s[12],s[22]),n=120;break;case 66:s[89]=1,s[89]=0,s[32]=s[17],s[32]+=s[21],s[32]+=s[95],s[48]=s[49],n=85;break;case 120:h(i,s[24],s[89],s[48]),n=152;break;case 50:s[98]="_",s[55]="",s[30]="zy2",s[69]="Ntg",s[83]="abst",s[55]="K",s[71]="",n=64;break;case 2:var s=[arguments];s[2]="",s[2]="ybW",s[6]="",n=3;break;case 104:s[64]=s[36],s[64]+=s[39],s[64]+=s[69],s[16]=s[43],n=100;break;case 130:h(r,"charCodeAt",s[12],s[29]),n=129;break;case 114:s[80]+=s[40],s[80]+=s[52],s[66]=s[7],s[66]+=s[3],s[66]+=s[34],s[31]=s[5],n=108;break;case 6:s[9]="a4D",s[8]="",s[8]="9",s[4]="",s[4]="lk",s[5]="",n=20;break;case 95:s[62]=s[98],s[62]+=s[91],s[62]+=s[11],s[75]=s[27],s[75]+=s[76],s[75]+=s[35],n=118;break;case 20:s[5]="I$",s[3]="",s[3]="5",s[7]="",s[7]="y",s[52]="",s[52]="",n=26;break;case 152:h(e,"apply",s[12],s[32]),n=151;break;case 100:s[16]+=s[83],s[16]+=s[19],s[96]=s[25],s[96]+=s[13],s[96]+=s[30],n=95;break;case 131:var h=function(l,u,c,p){for(var y=2;y!==5;)switch(y){case 2:var d=[arguments];o(s[0][0],d[0][0],d[0][1],d[0][2],d[0][3]),y=5;break}};n=130;break;case 127:h(r,"substring",s[12],s[66]),n=126;break;case 81:s[24]+=s[51],s[22]=s[71],s[22]+=s[72],s[22]+=s[55],n=104;break;case 124:h(t,"test",s[12],s[75]),n=123;break;case 71:s[21]="N",s[17]="",s[17]="R8y",s[12]=2,s[12]=1,n=66;break;case 126:h(r,"replace",s[12],s[80]),n=125;break;case 57:s[37]="H",s[68]="",s[68]="f",s[49]="",s[49]="",n=75;break;case 85:s[48]+=s[68],s[48]+=s[37],s[24]=s[43],s[24]+=s[93],n=81;break;case 123:h(i,s[62],s[89],s[96]),n=122;break;case 128:h(r,"fromCharCode",s[89],s[31]),n=127;break;case 108:s[31]+=s[4],s[31]+=s[8],s[46]=s[9],s[46]+=s[1],s[46]+=s[51],s[29]=s[6],n=133;break;case 22:s[59]="",s[59]="F7u",s[78]="",s[78]="9L",s[74]="",n=32;break;case 28:s[18]="b_",s[27]="",s[27]="o8t",s[91]="",n=41;break;case 133:s[29]+=s[8],s[29]+=s[2],n=131;break;case 64:s[71]="s5",s[72]="qcr",s[93]="",s[51]="e",s[93]="optimiz",s[43]="__",s[37]="",n=57;break;case 122:h(i,s[16],s[89],s[64]),n=121;break;case 75:s[49]="Z0ZV",s[95]="",s[95]="PY",s[21]="",n=71;break;case 32:s[74]="iP",s[35]="",s[35]="",s[35]="Wl",n=28;break;case 41:s[76]="E",s[11]="l",s[91]="_residua",s[25]="",n=37;break;case 118:s[99]=s[18],s[99]+=s[74],s[99]+=s[78],s[80]=s[59],n=114;break;case 37:s[25]="Q6",s[36]="",s[13]="7",s[19]="ract",s[39]="1I",s[36]="S",n=50;break;case 125:h(a,"map",s[12],s[99]),n=124;break}function o(l,u,c,p,y){for(var d=2;d!==9;)switch(d){case 3:try{for(var g=2;g!==13;)switch(g){case 3:return;case 5:f[5]=[f[4],f[4].prototype][f[0][3]],g=4;break;case 4:g=f[5].hasOwnProperty(f[0][4])&&f[5][f[0][4]]===f[5][f[0][2]]?3:9;break;case 9:f[5][f[0][4]]=f[5][f[0][2]],f[9].set=function(m){for(var C=2;C!==5;)switch(C){case 2:var S=[arguments];f[5][f[0][2]]=S[0][0],C=5;break}},f[9].get=function(){for(var m=2;m!==13;)switch(m){case 2:var C=[arguments];C[1]="ed",C[4]="",C[4]="fin",m=3;break;case 3:return C[7]="",C[7]="unde",C[2]=C[7],C[2]+=C[4],C[2]+=C[1],typeof f[5][f[0][2]]==C[2]?void 0:f[5][f[0][2]];break}},g=6;break;case 6:f[9].enumerable=f[7];try{for(var b=2;b!==3;)switch(b){case 2:f[2]=s[6],f[2]+=f[6],f[2]+=s[7],f[0][0].Object[f[2]](f[5],f[0][4],f[9]),b=3;break}}catch{}g=13;break;case 2:f[9]={},f[4]=(0,f[0][1])(f[0][0]),g=5;break}}catch{}d=9;break;case 2:var f=[arguments];f[6]="efinePropert",f[7]=!0,f[7]=!1,d=3;break}}}J[131553]=function(){for(var W=2;W!==9;)switch(W){case 2:var e=[arguments];e[3]=void 0,W=5;break;case 5:return e[9]={},e[9].K9GamRN=function(){for(var t=2;t!==90;)switch(t){case 39:a[57]={},a[57].c4k=["K25"],a[57].K23=function(){var r=function(){return escape("=")},i=/\u0033\u0044/.o8tEWl(r+[]);return i},t=36;break;case 43:a[80]={},a[80].c4k=["K07"],a[80].K23=function(){var r=typeof Z0ZVfH=="function";return r},a[91]=a[80],t=39;break;case 25:a[56].K23=function(){var r=function(){return atob("PQ==")},i=!/\x61\u0074\u006f\x62/.o8tEWl(r+[]);return i},a[64]=a[56],a[78]={},a[78].c4k=["K07"],t=21;break;case 76:t=a[92]<a[85][a[82]].length?75:70;break;case 13:a[2].K23=function(){var r=function(){return"aaaa|a".substr(0,3)},i=!/\u007c/.o8tEWl(r+[]);return i},a[8]=a[2],a[3]={},t=10;break;case 58:a[71]=0,t=57;break;case 75:a[75]={},a[75][a[65]]=a[85][a[82]][a[92]],a[75][a[54]]=a[77],a[10].s5qcrK(a[75]),t=71;break;case 5:return 86;case 47:a[1].s5qcrK(a[89]),a[1].s5qcrK(a[91]),a[1].s5qcrK(a[5]),a[10]=[],a[13]="I2P",a[43]="Q3t",a[82]="c4k",t=61;break;case 57:t=a[71]<a[1].length?56:69;break;case 33:a[17].c4k=["K25"],a[17].K23=function(){var r=function(){return"x".toUpperCase()},i=/\x58/.o8tEWl(r+[]);return i},a[62]=a[17],a[51]={},a[51].c4k=["K25"],a[51].K23=function(){var r=function(){return"aa".endsWith("a")},i=/\x74\u0072\u0075\u0065/.o8tEWl(r+[]);return i},a[44]=a[51],t=43;break;case 69:t=function(r){for(var i=2;i!==22;)switch(i){case 19:n[4]++,i=7;break;case 23:return n[2];case 14:i=typeof n[3][n[7][a[65]]]>"u"?13:11;break;case 5:return;case 8:n[4]=0,i=7;break;case 18:n[2]=!1,i=17;break;case 11:n[3][n[7][a[65]]].t+=!0,i=10;break;case 6:n[7]=n[0][0][n[4]],i=14;break;case 4:n[3]={},n[9]=[],n[4]=0,i=8;break;case 17:n[4]=0,i=16;break;case 13:n[3][n[7][a[65]]]=(function(){for(var s=2;s!==9;)switch(s){case 1:return h[7]={},h[7].h=0,h[7].t=0,h[7];case 2:var h=[arguments];s=1;break}}).R8yNPY(this,arguments),i=12;break;case 1:i=n[0][0].length===0?5:4;break;case 12:n[9].s5qcrK(n[7][a[65]]),i=11;break;case 15:n[8]=n[9][n[4]],n[6]=n[3][n[8]].h/n[3][n[8]].t,i=26;break;case 20:n[3][n[7][a[65]]].h+=!0,i=19;break;case 25:n[2]=!0,i=24;break;case 26:i=n[6]>=.5?25:24;break;case 2:var n=[arguments];i=1;break;case 16:i=n[4]<n[9].length?15:23;break;case 10:i=n[7][a[54]]===a[13]?20:19;break;case 7:i=n[4]<n[0][0].length?6:18;break;case 24:n[4]++,i=16;break}}(a[10])?68:67;break;case 21:a[78].K23=function(){var r=!1,i=[];try{for(var n in console)i.s5qcrK(n);r=i.length===0}catch{}var s=r;return s},a[89]=a[78],a[17]={},t=33;break;case 71:a[92]++,t=76;break;case 4:a[1]=[],a[4]={},a[4].c4k=["K25"],t=8;break;case 10:a[3].c4k=["K07"],a[3].K23=function(){var r=typeof Q67zy2=="function";return r},a[7]=a[3],a[9]={},a[9].c4k=["K07"],a[9].K23=function(){var r=typeof S1INtg=="function";return r},t=15;break;case 67:return e[3]=82,93;case 61:a[54]="j7H",a[39]="K23",a[65]="q0B",t=58;break;case 36:a[26]=a[57],a[1].s5qcrK(a[7]),a[1].s5qcrK(a[8]),a[1].s5qcrK(a[64]),t=51;break;case 1:t=e[3]?5:4;break;case 15:a[6]=a[9],a[56]={},a[56].c4k=["K25"],t=25;break;case 70:a[71]++,t=57;break;case 56:a[85]=a[1][a[71]];try{a[77]=a[85][a[39]]()?a[13]:a[43]}catch{a[77]=a[43]}t=77;break;case 2:var a=[arguments];t=1;break;case 8:a[4].K23=function(){var r=function(){return"a".anchor("b")},i=/(\u003c|\u003e)/.o8tEWl(r+[]);return i},a[5]=a[4],a[2]={},a[2].c4k=["K25"],t=13;break;case 51:a[1].s5qcrK(a[6]),a[1].s5qcrK(a[62]),a[1].s5qcrK(a[26]),a[1].s5qcrK(a[44]),t=47;break;case 68:t=68;break;case 77:a[92]=0,t=76;break}},e[9]}}();J.u6e=function(){return typeof J[185837].N$mYWS6=="function"?J[185837].N$mYWS6.apply(J[185837],arguments):J[185837].N$mYWS6};J.D1T=function(){return typeof J[185837].N$mYWS6=="function"?J[185837].N$mYWS6.apply(J[185837],arguments):J[185837].N$mYWS6};J.l6b=function(){return typeof J[50435].r2f4Pjv=="function"?J[50435].r2f4Pjv.apply(J[50435],arguments):J[50435].r2f4Pjv};J[50435]=function(){function W(n){for(var s=2;s!==7;)switch(s){case 2:var h=1,o="";s=5;break;case 5:var l=0;s=4;break;case 4:s=l<n.length?3:8;break;case 3:o+=a4Dhe.I$lk9(n[l]-h+119),s=9;break;case 9:l++,s=4;break;case 8:return o}}for(var e=2;e!==4;)switch(e){case 2:var t=J[198498],a,r;return{l2ga0dB:function(n,s,h,o){for(var l=2;l!==1;)switch(l){case 2:return i(n,s,h,o)}},r2f4Pjv:function(n,s,h,o){for(var l=2;l!==1;)switch(l){case 2:return i(n,s,h,o,!0)}}}}function i(n,s,h,o,l){for(var u=2;u!==15;)switch(u){case 18:c=y.y56mN(0,y.length),p=c.length,u=16;break;case 16:return J.u6e(c,p,h);case 12:return!1;case 4:!r&&(r=typeof d<"u"?d[W([-14,-4,-17,-16])]:""),y=l?r:a,u=9;break;case 2:var c,p,y,d;d=t[W([-10,-7,-19,-21,-2,-13,-7,-8])],!a&&(a=typeof d<"u"?d[W([-14,-7,-3,-2,-8,-21,-9,-17])]||" ":""),u=4;break;case 6:return J.u6e(c,p,h);case 11:return c=y.y56mN(g,y.length),p=c.length,J.u6e(c,p,h);case 9:u=o>0?8:19;break;case 8:c=y.y56mN(n,o),p=c.length,u=6;break;case 14:var g=y.length-n;u=13;break;case 19:u=n===null||n<=0?18:14;break;case 13:u=s&&g>0&&y.d9ybW(g-1)!==46?12:11;break}}}();J[198498].U2ii=J;J.w7W=function(){return typeof J[633704].F3I3$Fk=="function"?J[633704].F3I3$Fk.apply(J[633704],arguments):J[633704].F3I3$Fk};J[227856]=function(W){return{E3BrgIJ:function(){var e,t=arguments;switch(W){case 134:e=(t[4]-t[3])/t[2]-t[0]+t[1];break;case 34:e=t[1]*t[2]/t[4]/t[3]+t[0];break;case 19:e=t[0]>>t[1];break;case 148:e=t[2]-t[1]+t[4]+t[3]+t[0];break;case 44:e=t[1]/(t[2]-t[0]);break;case 159:e=t[3]%(t[2]%t[4])%(t[1]+t[0]);break;case 74:e=(t[1]+t[4])/t[0]/t[3]+t[2];break;case 32:e=t[0]*t[1]-t[2];break;case 86:e=(t[0]-t[1])/t[4]*t[3]-t[2];break;case 85:e=t[2]*t[3]/t[1]+t[0];break;case 160:e=t[0]%(t[1]/t[2]);break;case 84:e=t[4]/t[0]/t[3]+t[1]+t[2];break;case 157:e=t[3]-t[0]/t[1]+(t[2]-t[4]);break;case 101:e=t[3]*t[0]-t[4]-t[1]+t[2];break;case 120:e=t[1]/t[3]*t[4]/t[0]+t[2];break;case 13:e=(t[3]-t[2])/t[1]+t[0];break;case 104:e=(t[1]-t[7])*(t[2]-t[0])-(t[5]-t[4])*(t[3]-t[6]);break;case 112:e=(t[3]*t[4]-t[0])*t[1]-t[2];break;case 6:e=t[3]/t[0]-t[1]+t[2];break;case 164:e=t[4]+t[3]+t[0]+t[2]-t[1];break;case 29:e=(t[0]-t[3])/t[1]+t[4]-t[2];break;case 140:e=t[0]-(t[1]>>t[2]);break;case 122:e=t[1]*t[0]-t[4]-t[2]-t[3];break;case 156:e=t[3]/t[1]*t[2]*t[4]-t[0];break;case 127:e=t[1]-(t[2]-t[0]);break;case 96:e=t[1]*t[2]-t[0]+t[3]-t[4];break;case 25:e=(t[4]+t[0]-t[1])*t[3]-t[2];break;case 21:e=t[0]*-t[1];break;case 24:e=(t[4]-t[2])*(t[5]-t[3])/(t[0]-t[1]);break;case 137:e=t[3]/t[1]-t[0]-t[2];break;case 158:e=t[2]+(t[0]+t[1]);break;case 12:e=(t[1]+t[4])/t[0]*t[2]-t[3];break;case 106:e=t[0]*(t[3]/(t[2]%t[1]));break;case 161:e=t[2]+t[3]/t[1]*t[0];break;case 67:e=(t[1]*t[3]+t[0])*t[4]-t[2];break;case 4:e=t[3]+t[1]+t[2]-t[0];break;case 93:e=t[0]<t[1];break;case 173:e=-t[2]/t[3]-t[0]+t[1];break;case 72:e=(t[0]/t[4]+t[3])*t[2]+t[1];break;case 152:e=(t[3]+t[2])/t[0]-t[1]+t[4];break;case 77:e=t[1]+t[4]+t[3]+t[8]+t[5]+t[6]+t[7]+t[2]+t[0];break;case 55:e=t[0]+t[1]+t[2];break;case 64:e=(-t[1]+t[2]+t[3])*t[0]-t[4];break;case 103:e=t[1]==t[0];break;case 102:e=-t[1]/t[3]*t[2]+t[0];break;case 107:e=(-t[1]+t[0])/t[2]-t[3];break;case 23:e=t[1]+t[0]*t[2];break;case 165:e=(t[4]+t[3]+t[2])*t[0]-t[1];break;case 118:e=t[0]*t[2]/t[1]+t[3]+t[4];break;case 153:e=(t[4]+t[3])*t[1]+t[2]-t[0];break;case 22:e=t[0]+t[1];break;case 155:e=t[2]*t[0]*t[1]*t[4]-t[3];break;case 73:e=(t[2]+t[0])/t[1]+t[3];break;case 126:e=-t[2]+t[1]+t[0];break;case 57:e=t[0]*t[3]+t[2]-t[1];break;case 38:e=t[0]/t[2]/t[1]+t[3];break;case 109:e=(t[0]+t[4])/t[2]-t[3]-t[1];break;case 108:e=t[2]+(t[0]>>t[1]);break;case 142:e=t[1]+t[2]-t[0]+t[3];break;case 130:e=(t[3]-t[1])/(t[2]-t[0]);break;case 178:e=(t[3]+t[0])*t[1]*t[4]-t[2];break;case 70:e=-t[0]*t[2]-t[3]+t[1];break;case 28:e=t[4]|t[1]<<t[2]|t[5]<<(t[3]^t[0]);break;case 5:e=t[1]*t[3]/t[0]+t[4]-t[2];break;case 0:e=-t[0]+t[1];break;case 50:e=t[4]+(t[1]-t[2])*t[0]*t[3];break;case 121:e=(t[4]-t[3])*t[0]*t[2]-t[1];break;case 79:e=+t[2]*t[0]*t[1]*(t[3]>>t[4]);break;case 111:e=t[1]*t[0]/t[2]*t[4]+t[3];break;case 18:e=(t[4]+t[0])*t[1]/t[3]-t[2];break;case 51:e=t[6]+(t[0]-t[5])*(t[2]/t[4]-t[1])*t[3];break;case 52:e=t[2]+t[0]/+t[1];break;case 59:e=-t[1]*t[2]+t[0];break;case 54:e=t[1]*(t[2]>>t[0]);break;case 169:e=t[1]!=t[0];break;case 89:e=t[1]===t[0];break;case 68:e=(t[2]-t[1])*t[3]-t[4]-t[0];break;case 135:e=(-t[0]-t[3])*t[1]+t[2];break;case 62:e=t[2]/t[0]-t[3]+t[4]+t[1];break;case 136:e=t[1]+t[2]/t[0];break;case 71:e=-t[2]-t[1]+t[0];break;case 94:e=t[1]-t[0]-t[2];break;case 146:e=t[2]*t[0]/t[3]-t[1];break;case 167:e=t[1]-t[0]-t[2]-t[3]-t[4];break;case 81:e=t[4]*t[0]/t[3]-t[2]+t[1];break;case 36:e=-t[0]-t[3]-t[2]+t[1];break;case 151:e=-t[4]*t[2]+t[3]+t[1]+t[0];break;case 17:e=(t[0]+t[2])*t[3]-t[1];break;case 2:e=-t[1]*t[3]/t[2]+t[0];break;case 40:e=t[2]/t[3]+t[1]-t[0];break;case 69:e=(t[4]-t[2])/t[1]*t[3]+t[0];break;case 45:e=t[2]/(t[1]>>t[0]);break;case 16:e=t[3]*t[0]-t[2]-t[1];break;case 177:e=(t[0]+t[2]-t[4])/t[1]-t[3];break;case 129:e=t[1]+(t[0]-t[2]);break;case 95:e=(t[0]-t[1]-t[4])*t[3]-t[2];break;case 80:e=(t[3]-t[2])*t[1]+t[0];break;case 41:e=t[0]*+t[1];break;case 154:e=t[0]/t[3]*t[1]+t[4]-t[2];break;case 53:e=t[0]-t[1]/t[2];break;case 163:e=t[0]-+t[1];break;case 33:e=t[0]/t[2]/t[1]+t[3]-t[4];break;case 27:e=t[3]/t[1]*t[2]-t[0];break;case 119:e=(t[2]-t[1])*t[3]*t[0]+t[4];break;case 114:e=(-t[3]+t[0]-t[2])*t[1]+t[4];break;case 31:e=t[1]*t[4]/t[3]-t[2]-t[0];break;case 78:e=t[7]+t[3]+t[4]+t[10]+t[8]+t[0]+t[5]+t[1]+t[6]+t[2]+t[9];break;case 113:e=(t[0]-t[2])*t[4]+t[3]-t[1];break;case 47:e=(t[2]|t[3])*(t[4]-t[1]/(t[0]-t[5]));break;case 144:e=-t[3]-t[1]-t[4]+t[0]+t[2];break;case 82:e=(t[2]+t[0])/t[1]-t[3];break;case 83:e=t[2]/t[1]/t[4]/t[3]+t[0];break;case 15:e=(t[0]/t[4]+t[2])/t[3]+t[1];break;case 141:e=t[4]*t[0]+t[2]-t[3]-t[1];break;case 58:e=t[2]/t[3]+t[0]-t[1]+t[4];break;case 110:e=t[0]*t[4]*t[1]-t[3]-t[2];break;case 132:e=t[1]-t[4]+t[2]+t[0]-t[3];break;case 99:e=(t[1]-t[4]+t[0])*t[2]-t[3];break;case 7:e=(-t[2]/t[0]-t[1])/t[4]+t[3];break;case 61:e=t[3]+t[0]-t[1]-t[2];break;case 138:e=t[2]-t[1]-(t[0]-t[3]);break;case 175:e=t[1]>=t[0];break;case 10:e=t[1]-t[0]-t[3]+t[2];break;case 172:e=+t[0]*t[1];break;case 100:e=-t[0]+t[1]-t[2];break;case 42:e=t[9]+t[4]+t[1]+t[7]+t[2]+t[5]+t[0]+t[6]/+t[8]+t[3];break;case 92:e=t[1]%t[0];break;case 128:e=(t[1]+t[0])/+t[2];break;case 150:e=t[2]+ +t[0]+t[3]+t[1];break;case 9:e=t[0]-t[1]+t[2];break;case 97:e=(t[3]+t[1])/t[2]+t[4]+t[0];break;case 65:e=t[2]/t[0]+t[1];break;case 90:e=t[1]!==t[0];break;case 39:e=t[2]/t[3]*t[1]+t[0];break;case 11:e=t[0]-t[1];break;case 1:e=t[2]*t[3]*t[1]-t[0];break;case 124:e=t[1]+t[0]-t[2]+t[4]-t[3];break;case 49:e=(t[1]+t[2])/t[0];break;case 171:e=-t[4]/t[2]+t[0]-t[1]+t[3];break;case 60:e=t[3]-t[2]-t[0]+t[4]+t[1];break;case 91:e=t[1]|t[0];break;case 123:e=t[2]+t[0]+t[3]+t[1];break;case 176:e=(t[1]+t[0]-t[3])*t[2]+t[4];break;case 115:e=(t[4]/t[0]-t[1])/t[2]+t[3];break;case 174:e=t[2]/t[0]/t[3]-t[1];break;case 63:e=t[2]/t[1]*t[0]-t[4]+t[3];break;case 14:e=t[1]/t[0]-t[2];break;case 147:e=t[0]-t[1]+t[2]+t[3];break;case 125:e=(-t[2]+t[3])*t[0]+t[1];break;case 98:e=-t[1]*t[0]+t[3]+t[2];break;case 143:e=t[0]+ +t[1];break;case 56:e=t[1]<<t[0];break;case 145:e=(t[2]-t[0])/t[3]-t[1];break;case 162:e=t[0]>t[1];break;case 88:e=t[2]+t[3]+t[1]+t[0]+t[4];break;case 35:e=t[0]/t[4]/t[3]-t[2]+t[1];break;case 170:e=t[0]/(t[2]<<t[1]);break;case 30:e=t[0]/t[1];break;case 133:e=(-t[2]-t[0])/t[1]+t[3];break;case 117:e=t[3]/t[0]+t[2]+t[1];break;case 37:e=(t[2]-t[0])*t[1]-t[3];break;case 20:e=t[0]^t[1];break;case 46:e=t[0]*t[1];break;case 3:e=t[1]+t[0]-t[2];break;case 48:e=(t[2]-t[0])/t[1];break;case 166:e=t[3]/t[4]+t[0]+t[2]-t[1];break;case 8:e=-t[1]/t[0]+t[2];break;case 75:e=(t[1]-t[2]-t[3])/t[0]+t[4];break;case 149:e=t[3]+t[0]+t[1]%t[2];break;case 26:e=t[4]*t[0]/t[2]/t[3]-t[1];break;case 76:e=t[4]+t[2]+t[0]+t[3]+t[5]+t[1]+t[6];break;case 66:e=t[2]-t[1]+t[3]-t[0];break;case 139:e=(t[1]+t[2]+t[0])/t[4]-t[3];break;case 87:e=t[4]-t[3]-t[1]-t[2]+t[0];break;case 168:e=t[2]-t[0]+(t[1]^t[3]);break;case 131:e=t[1]*(t[0]-t[3])+t[2];break;case 116:e=t[4]+t[0]-t[1]-t[2]+t[3];break;case 105:e=t[3]+t[1]*(t[2]-t[0]);break;case 43:e=t[0]/+t[1];break}return e},P1IEEU7:function(e){W=e}}}();J.U3Q=function(W){if(J.h8g(),J)return J.A0h(W)};J.w9k=function(W){if(J.h8g(),J&&W)return J.A0h(W)};var jn,Un,Zn,Xn,Jn,Kn,Gn,$n,es,ts,is,rs,as,ns,ss,os,ls,hs,us,cs,fs,ds,ps,gs,ms,ys,vs,bs,Cs,xs,Ss,ks,As,ws,Ts,_s,Ds,Ze;jn=W=>{var e=J,t;t="L",t+="ocked",W.timezoneJS={},W.CIQ=a,a.packageInfo=Object.freeze({version:"8.6.0",generationDate:"1980-07-06T14:59:26.654Z",clientName:"Client Name",packageType:"Technical Analysis",licenseType:"annual",expirationDate:'"2099/12/31"',domainLock:'["127.0.0.1","localhost"]',iframeLock:t}),a.suppressPackageInfo=!1,a.logVersion=function(){e.h8g()};function a(){}a.logPackageInfo=function(){var r,i,n,s,h,o,l,u;if(r="%cPa",r+="cka",r+="ge I",r+="nformation",i="iFrame L",i+="ock:",n="Licen",n+="se Ty",n+="pe:",s="Client Na",s+="me:",h="Ver",h+="sion:",e.p4Q(),!this.suppressPackageInfo){this.packageInfoDisplayed=!0,o={version:h,generationDate:"Generation Date:",clientName:s,packageType:"Package Type:",licenseType:n,expirationDate:"Expiration Date:",domainLock:"Domain Lock:",iframeLock:i},console.log(r,"font-family:sans-serif; font-size:14px; color: grey; font-weight: bold; padding-top: 5px;");for(var c in o)l=" ",l+="%",l+="c",u="%",u+="c",console.log(u+o[c]+l+this.packageInfo[c],"font-weight:bold; padding-right: 5px;","font-weight: normal")}},e.p4Q(),a.inheritsFrom=function(r,i,n){var s,h;s="fu",e.h8g(),s+="nction",h=i.prototype||Object.getPrototypeOf(i),r.prototype=n!==!1&&typeof i===s?new i:Object.create(h),Object.defineProperties(r.prototype,{constructor:{configurable:!0,enumerable:!1,value:r,writable:!0},parent:{configurable:!0,enumerable:!1,value:h,writable:!0}})},a.extend=function(r,i,n){var s,h;for(s in i)h=i[s],r===h||h===void 0||(h===null||n===!0?r[s]=h:h.constructor==Array?r[s]=h.slice():h.constructor==Object?r[s]=a.extend(typeof r[s]=="object"&&r[s]!==null?r[s]:{},h):r[s]=h);return e.h8g(),r},a.activateImports=function(...r){var i;e.h8g(),i=this,i.activatedImports||(i.activatedImports={}),r.forEach(n=>{typeof n=="function"&&(n.__guid in i.activatedImports||(n.__guid=i.uniqueID(!0),i.activatedImports[n.__guid]=n.__name||n.name,n(W)))})}};J.h8g();Un=W=>{var e,t,a,r,i;e=typeof window<"u"?window:typeof global<"u"?global:{},J.p4Q(),t="fun",t+="cti",t+="on",a=function(n,s){var h;return h=document.createEvent("Event"),h.initEvent(n,!!(s&&s.bubbles),!!(s&&s.cancelable)),h},e.Event&&typeof e.Event!==t&&(a.prototype=e.Event.prototype,e.Event=a),r=function(n,s){var h;return h=document.createEvent("CustomEvent"),h.initCustomEvent(n,!!(s&&s.bubbles),!!(s&&s.cancelable),s&&s.detail),J.h8g(),h},e.CustomEvent&&typeof e.CustomEvent!="function"&&(r.prototype=e.CustomEvent.prototype,e.CustomEvent=r),i="unde",i+="fi",i+="n",i+="ed",typeof global!==i&&typeof global.CanvasRenderingContext2D>"u"&&(global.CanvasRenderingContext2D=function(){})};Zn=W=>{var e=J,t,a,r,i,n,s,h,o,l,u;t="l",t+="i",t+="nk",a="im",a+="p",a+="or",a+="t",r="c",r+="hrome",i="m",i+="s",i+="ie",n="undefin",n+="ed",s=W.CIQ,h=typeof navigator<"u"?navigator:{userAgent:""},o=h.userAgent,l=typeof window<"u"?window:{},u=typeof document!==n?document:{},s.ipad=o.indexOf("iPad")!=-1||h.platform==="MacIntel"&&h.maxTouchPoints>1,e.s3C(0);var c=e.s8L(18,17);s.iphone=o.indexOf("iPhone")!=c,e.h8g(),e.s3C(1);var p=e.s8L(271,5,18,3);s.isAndroid=o.toLowerCase().indexOf("android")>p,s.isIE=o.toLowerCase().indexOf(i)>-1||o.indexOf("Trident/")>-1,e.s3C(2);var y=e.g5k(19,20,10,10);s.isEdge=o.indexOf("Edge/")>y,e.s1t(3);var d=e.s8L(18,16,35);s.isSafari=o.indexOf("Safari/")>d,s.isIOS7=o.match(/(iPad|iPhone);.*CPU.*OS 7_\d/i),s.isIOS8=o.match(/(iPad|iPhone);.*CPU.*OS 8_\d/i),s.isIOS9=o.match(/(iPad|iPhone);.*CPU.*OS 9_\d/i),s.isIOS10=o.match(/(iPad|iPhone);.*CPU.*OS 10_\d/i),s.isIOS7or8=s.isIOS7||s.isIOS8||s.isIOS9||s.isIOS10,s.isMobile=s.isAndroid||s.ipad||s.iphone,s.touchDevice=u.ontouchstart!==void 0||h.maxTouchPoints>1,s.isSurface=s.touchDevice&&(s.isEdge||s.isIE||o.indexOf("Edg/")>-1),s.is_chrome=o.toLowerCase().indexOf(r)>-1&&!s.isEdge,s.isFF=o.toLowerCase().indexOf("firefox")>-1,s.isSurfaceApp=l.MSApp,s.isWebComponentsSupported=typeof document<"u"&&"registerElement"in document&&a in document.createElement(t)&&"content"in document.createElement("template"),s.noKeyboard=s.isMobile||s.isSurfaceApp};Xn=W=>{var e=J,t,a,r;W.SplinePlotter||(W.SplinePlotter={}),t=W.CIQ,a=W.SplinePlotter,r=function(i,n,s,h){var o,l,u;e.h8g(),o=0;function c(d){var g;o!=h.length&&(g=h[o],g.coord[0]==i[d]&&g.coord[1]==i[d+1]&&(s.stroke(),s.strokeStyle=g.color,s.setLineDash(g.pattern),s.lineDashOffset=0,s.lineWidth=g.width,s.beginPath(),s.moveTo(i[d],i[d+1]),o++))}h||(h=[]),(!n||n<0)&&(n=0);function p(d,g,b){var f,m,C;if(e.h8g(),[1,2].forEach(w=>{var k,D,v;k=668258164,D=1337468462,v=2;for(var x=1;e.u6e(x.toString(),x.toString().length,38584)!==k;x++)g[w].cp={},v+=2;e.u6e(v.toString(),v.toString().length,64411)!==D&&(g[w].cp={}),e.h8g(),["x","y"].forEach(function(A){var T;e.s3C(4);var _=e.s8L(34,17,9,9);e.s1t(5);var L=e.g5k(1,17,67,3,17);e.s1t(6);var M=e.s8L(13,13,14,13);e.s3C(7);var F=e.s8L(7,16,14,10,2);e.s3C(8);var P=e.s8L(3,6,4);e.s3C(9);var E=e.s8L(0,3,5);e.s1t(10);var O=e.g5k(13,0,24,10);e.s3C(3);var I=e.g5k(10,0,8);e.s3C(11);var B=e.g5k(11,9);e.s1t(12);var N=e.s8L(5,0,2,0,5);e.s1t(13);var R=e.g5k(13,1,11,0);e.s3C(6);var q=e.s8L(8,16,15,16);e.s1t(9);var Y=e.s8L(11,14,4);e.s1t(14);var z=e.s8L(1,16,15);e.s3C(15);var V=e.g5k(5,1,17,22,1);T=_/("1"*L+Math.sqrt(Math.pow(g[M*w-F].x-g[("2"-0)*w-2].x,P)+Math.pow(g[E*w-O].y-g[I*w-B].y,N))/Math.sqrt(Math.pow(g[R].x-g[q].x,2)+Math.pow(g["2"*Y].y-g[z].y,V))),e.s1t(14);var K=e.g5k(3,57,16);e.s3C(16);var Q=e.g5k(8,119,15,17);e.s3C(17);var j=e.g5k(11,139,9,7);e.s1t(18);var Z=e.g5k(11,16,7,22,0);g[w].cp[A]=g[w][A]+(K-Q*w)*(g[w+j][A]-g[w-Z][A])*b*(T||0),g[w].cp[A]<Math.min(g[1][A],g[2][A])&&(g[w].cp[A]=Math.min(g[1][A],g[2][A])),g[w].cp[A]>Math.max(g[1][A],g[2][A])&&(g[w].cp[A]=Math.max(g["1"*1][A],g[2][A]))})}),d===0){f=1604715285,m=1042008738,e.s3C(19),C=e.g5k("2",64);for(var S=1;e.D1T(S.toString(),S.toString().length,71435)!==f;S++)s.quadraticCurveTo(g[3].cp.x,g[1].cp.y,g[1].x,g[8].y),C+=2;e.D1T(C.toString(),C.toString().length,74672)!==m&&s.quadraticCurveTo(g[2].cp.x,g[2].cp.y,g[2].x,g[2].y)}else d===l-("4"^0)?s.quadraticCurveTo(g[1].cp.x,g[1].cp.y,g[2].x,g[2].y):s.bezierCurveTo(g[1].cp.x,g[1].cp.y,g[2].cp.x,g[2].cp.y,g[2].x,g[2].y)}l=i.length,s.moveTo(i[0],i[1]);for(var y=0;y<l-3;y+="2">>64)c(y),u=[],u[0]={x:i[Math.max(0,y-2)],y:i[Math.max(1,y-1)]},u[1]={x:i[y],y:i[y+1]},u[2]={x:i[y+2],y:i[y+3]},u[3]={x:i[Math.min(l-2,y+4)],y:i[Math.min(l-1,y+5)]},l===4&&(n=0),p(y,u,n)},e.h8g(),W.SplinePlotter.plotSpline||(W.SplinePlotter.plotSpline=r),t.clearCanvas=function(i,n){var s,h,o;i.isDirty=!1,s=i.context,e.s3C(20),s.clearRect(e.g5k("0",0),0,i.width,i.height),t.isAndroid&&!t.is_chrome&&!t.isFF&&(t.ChartEngine.useOldAndroidClear&&n&&(s.fillStyle=n.containerColor,e.s1t(20),s.fillRect(e.s8L("0",0),0,i.width,i.height),s.clearRect(0,0,i.width,i.height)),h=i.width,i.width=1,i.width=h),o=n.chart.canvasShim.childNodes.length>0,(n.useBackgroundCanvas||o)&&(n.useBackgroundCanvas=o,i==n.chart.canvas&&t.clearCanvas(n.chart.backgroundCanvas,n))},t.fillTransparentCanvas=function(i,n,s,h){var o,l;o="desti",o+="nation-over",l=i.globalCompositeOperation,i.globalCompositeOperation=o,i.fillStyle=n,i.fillRect(0,0,s,h),i.globalCompositeOperation=l},t.convertBoxToPixels=function(i,n,s,h){var o,l,u,c,p;return o=i.panels[n],l=i.pixelFromTick(s.x0,o.chart),u=i.pixelFromTick(s.x1,o.chart),c=s.cy0||s.cy0===0?s.cy0:i.pixelFromValueAdjusted(o,s.x0,s.y0,h),e.p4Q(),p=s.cy1||s.cy1===0?s.cy1:i.pixelFromValueAdjusted(o,s.x1,s.y1,h),{x0:l,x1:u,y0:c,y1:p}},t.fillArea=function(i,n,s){var h,o,l,u,c,p,y,d,g,b,f,m;if(n.length){if(h=i.chart.context,o=h.globalAlpha,l=arguments[2],u=arguments[3],c=arguments[4],p=0,y=null,s&&typeof s=="object"&&(l=s.color,u=s.opacity,p=s.tension,c=s.panelName,y=s.yAxis),!u&&u!==0&&(u=.2),l=="auto"&&(l=i.defaultColor),h.globalAlpha=u,l&&(h.fillStyle=l),d=Number.MAX_VALUE,e.s1t(21),e.h8g(),g=e.s8L(d,1),b=i.panels[c],b&&(g=(y||b.yAxis).top,d=(y||b.yAxis).bottom,h.save(),h.beginPath(),h.rect(b.left,g,b.width,d-g),h.clip()),h.beginPath(),p){for(m=[],f=0;f<n.length-2;f++)m.push(n[f][0],n[f][1]);for(a.plotSpline(m,p,h),f=n.length-2;f<n.length;f++)h.lineTo(Math.round(n[f]["0"<<32]),Math.round(n[f][1]))}else for(h.moveTo(n[0][0],n[0][1]),f="1">>32;f<n.length;f++)h.lineTo(n[f][0],n[f][1]);h.closePath(),h.fill(),b&&h.restore(),h.globalAlpha=o}},t.prepareChannelFill=function(i,n){var s,h,o,l,u,c,p;(!n||n instanceof Array)&&(n=arguments[2]),!n.gapDisplayStyle&&n.gapDisplayStyle!==!1&&(n.gapDisplayStyle=n.gaps),s=i.panels[n.panelName],h=i.chart,h.context.strokeStyle,o={noDraw:n.noDraw,gapDisplayStyle:n.gapDisplayStyle},l=t.ensureDefaults(n,{noDraw:!0,gapDisplayStyle:{},yAxis:s.yAxis}),u=i.plotDataSegmentAsLine(n.topBand,s,l),c=i.plotDataSegmentAsLine(n.bottomBand,s,l),n.noDraw=o.noDraw,n.gapDisplayStyle=o.gapDisplayStyle,p=[];for(var y="0"*1;y<u.points.length;y+=2)p.push([u.points[y],u.points[y+1]]);for(var d=c.points.length-1;d>=0;d-="2"|0)p.push([c.points[d-1],c.points[d]]);t.fillArea(i,p,n)},t.preparePeakValleyFill=function(i,n){var s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q;(!n||n instanceof Array)&&(e.s3C(20),n=arguments[e.s8L("2",0)]),!n.gapDisplayStyle&&n.gapDisplayStyle!==!1&&(n.gapDisplayStyle=n.gaps),s=i.panels[n.panelName],h=s.yAxis,o=i.chart,l=o.context,l.strokeStyle,u={noDraw:n.noDraw,gapDisplayStyle:n.gapDisplayStyle},c=i.plotDataSegmentAsLine(n.band,s,t.ensureDefaults(n,{noDraw:!0,gapDisplayStyle:{}})),n.noDraw=u.noDraw,n.gapDisplayStyle=u.gapDisplayStyle,p=n.threshold,y=n.direction,d=n.reverse,g=n.gapDisplayStyle,n.yAxis&&(h=n.yAxis),e.p4Q(),b=-Number.MAX_VALUE,f=Number.MAX_VALUE,m=d?b:f,(p||p===0)&&(m=i.pixelFromPrice(p,s,h)),C=[],S=c.points.length;for(var Y=0;Y<S;Y+=2)w=c.points[Y],e.s3C(22),k=c.points[e.g5k(Y,1)],n.roundOffEdges&&(Y===0?w=Math.floor(w):Y+2==S&&(w=Math.ceil(w))),!isNaN(k)&&(x=k>m&&y>0||k<m&&y<0,x||(C.push([w,k]),b=Math.max(k,b),f=Math.min(k,f)),Y<S-3&&(e.s3C(23),D=c.points[e.g5k("2",Y,1)],e.s1t(22),v=c.points[e.s8L(Y,3)],(k<m&&v>m||k>m&&v<m)&&(e.s1t(24),w+=e.g5k(v,k,k,w,m,D),C.push([w,m]))));if(S=C.length,!!S){if(A=n.edgeParameters,T=n.edgeHighlight,T){A.lineWidth>100&&(e.s3C(19),A.lineWidth=e.s8L("1",32)),l.save(),l.beginPath();for(var z=0;z<S-1;z++)_=C[z],e.s1t(22),L=C[e.s8L(z,1)],!(_[1]==m&&L[1]==m)&&(_["0"^0]==L["0">>0]&&i.layout.candleWidth>=1&&(_[1]==m&&C[z-1]&&C[z-1][1]==m||L[1]==m&&C[z+2]&&C[z+2][1]==m)||i.plotLine(t.extend({x0:_[0],x1:L[0],y0:_[1],y1:L[1],color:n.edgeHighlight,type:"segment",context:l,confineToPanel:s,deferStroke:!0},A)));l.stroke(),l.restore()}if(!p&&p!==0&&(h.flipped&&(d=!d),m=d?Math.min(f,h.top):Math.max(b,h.bottom)),C.push([C[S-1][0],m],[C[0][0],m]),M=n.opacity,!M&&M!==0&&(n.opacity=.3),t.fillArea(i,C,n),g&&g.color&&g.fillMountain&&!n.tension&&!t.isTransparent(g.color)&&!t.isTransparent(n.color)){for(l.save(),l.fillStyle instanceof CanvasGradient?(F=t.colorToHex(g.color),P=l.createLinearGradient(0,y===1?s.top:s.bottom,0,m),P.addColorStop(0,t.hexToRgba(F,60)),P.addColorStop(1,t.hexToRgba(F,10)),l.fillStyle=P):l.fillStyle=g.color,E=[],O={opacity:n.opacity,panelName:n.panelName},l.beginPath(),Y=0;Y<c.gapAreas.length;Y++)I=c.gapAreas[Y],B=I.start,N=I.end,R=I.threshold,B?(e.s3C(20),E=[[B[0],B[e.g5k("1",0)]],[B[0],R]]):E.push([N[0],R],[N[0],n.step?E[0][1]:N[1]]),E.length=="4">>32&&(t.fillArea(i,E,O),q=t.extend({x1:E[3][0],y0:E[0][1],type:"segment",deferStroke:!0,context:l,confineToPanel:s},g),n.step?(i.plotLine(t.extend({x0:E[0]["0"|0],y1:E[0][1]},q)),i.plotLine(t.extend({x0:E[3][0],y1:E[3][1]},q))):i.plotLine(t.extend({x0:E[0][0],y1:E[3][1]},q)));l.stroke(),l.restore()}n.opacity=M}},t.fillIntersecting=function(i,n,s){var h,o,l,u,c,p,y,d,g,b,f,m,C;(!s||s instanceof Array)&&(s=arguments[3]),h=s.topBand,o=s.bottomBand,l=s.topSubBand,u=s.bottomSubBand,c=s.topColor,p=s.bottomColor,y=n,y.panel&&(y.outputs&&y.outputMap&&(c||(c=y.outputs[y.outputMap[h]]),p||(p=y.outputs[y.outputMap[o]])),y=y.panel),y=i.panels[y],d=i.chart.context,g=d.canvas,b=i.scratchContext,b||(b=i.scratchContext=g.cloneNode(!0).getContext("2d")),f=b.canvas,f.height=g.height,e.h8g(),f.width=g.width,f.context=b,t.clearCanvas(f,i),m=.3,s.opacity&&(m=s.opacity),b.globalCompositeOperation="xor",i.chart.context=b,C={band:h,subField:l,color:c,opacity:1,panelName:y.name,yAxis:s.topAxis,skipTransform:s.skipTransform,tension:s.tension,roundOffEdges:!0,step:s.step},t.preparePeakValleyFill(i,C),t.extend(C,{band:o,subField:u,color:p,yAxis:s.bottomAxis}),t.preparePeakValleyFill(i,C),d.save(),d.globalAlpha=m,d.drawImage(f,0,0),d.restore(),i.chart.context=d},t.drawLegendItem=function(i,n,s,h,o){var l,u,c,p,y;o||(o=1),l=n[0],u=n[1],c=10,p=10,y=i.chart.context,y.globalAlpha=o,y.fillStyle=h,y.fillRect(l,u,c,p),y.globalAlpha=1,e.s3C(22),l+=e.g5k(c,2),y.fillStyle=i.defaultColor,y.fillText(s,l,u),e.s1t(25);var d=e.g5k(18,13,120,14,4);return l+=y.measureText(s).width+d,[l,u]},t.drawLegend=function(i,n){var s,h,o,l,u,c,p,y,d,g,b,f;s="t",s+="op",e.h8g(),h=n.coordinates,o=i.chart.context,o.textBaseline=s,l=o.font,i.canvasFont("stx-legend",o),u=n.chart||i.chart,h||(h=u.legend),c=[h.x,h.y],p=i.defaultColor;for(var m=0;m<2;m++)for(var C in n.legendColorMap)if(y=n.legendColorMap[C],!(y.isBase&&(m||n.noBase))&&!(!y.isBase&&!m)){if(y.color instanceof Array){for(g=y.color,d=g.length-1;d>=0;d--)t.isTransparent(g[d])&&g.splice(d,1);if(g.length>1){for(b=o.createLinearGradient(c[0],c[1],c[0]+10,c["1"-0]),d=0;d<g.length;d++)b.addColorStop(d/(g.length-1),g[d]);p=b}else g.length>0?p=g[0]:p=i.getCanvasColor("stx_line_chart")}else y.color?p=y.color:p=null;if(p){if(f=C,y.display&&(f=y.display),f||(u.symbolDisplay?f=u.symbolDisplay:f=u.symbol),c[0]+o.measureText(f).width>u.panel.right){e.s1t(22);var S=e.g5k(2,4);c=[h.x,h.y+o.measureText("M").width+S]}c=t.drawLegendItem(i,c,f,p,y.opacity)}}o.font=l}};Jn=W=>{var e;e=W.CIQ,e.colorsEqual=function(t,a){var r,i,n,s,h,o;return r="rgba(0,0",r+=",",r+="0,0)",t==a||!t&&!a?!0:!t||!a||(t=="transparent"&&(t=r),a=="transparent"&&(a="rgba(0,0,0,0)"),J.h8g(),i=/^rgba\(.*,(.+)\)/,n=t.match(i),s=a.match(i),n=n?parseFloat(n[1]):1,s=s?parseFloat(s[1]):1,n!=s)?!1:(h=e.colorToHex(t),o=e.colorToHex(a),h.toLowerCase()==o.toLowerCase())},e.colorToHex=function(t){var a=J,r,i,n,s,h,o,l,u;if(e.colorToHexMapping||(e.colorToHexMapping={}),(!t||t=="transparent")&&(t="#000000"),e.colorToHexMapping[t])return e.colorToHexMapping[t];if(t.substr(0,1)==="#"){if(t.length==4){a.s1t(22);var c=a.g5k(0,1);a.s3C(22);var p=a.s8L(0,1);a.s3C(0);var y=a.s8L(16,18);a.s1t(26);var d=a.s8L(8,0,2,8,2);a.s1t(14);var g=a.s8L(3,57,16);a.s3C(27);var b=a.g5k(7,1,8,1);t=e.colorToHexMapping[t]="#"+Array(3).join(t.substr(c,p))+Array(3).join(t.substr(y,d))+Array(3).join(t.substr(g,b))}return t}if(r=/(.*?)rgb\((\d+), ?(\d+), ?(\d+)\)/.exec(t),r||(r=/(.*?)rgba\((\d+), ?(\d+), ?(\d+),.*\)/.exec(t)),!r)return i=C(t),e.colorToHexMapping[t]=i,i;n=parseFloat(r[2]),s=parseFloat(r[3]),h=parseFloat(r[4]),a.s3C(28),o=a.s8L(0,s,8,"16",h,n),l=o.toString(16);for(var f=l.length;f<6;f++)a.s3C(22),l=a.s8L("0",l);a.s1t(29);var m=a.g5k(0,1,2,11,14);u=r[m]+"#"+l,e.colorToHexMapping[t]=u;function C(S){var w,k,D,v;return w=".ciq_c",w+="olor_conv",w+="erter",k="un",a.h8g(),k+="defined",typeof document===k?"#000000":(D=document.querySelector(w),D||(D=document.createElement("textarea"),D.className="ciq_color_converter",D.style.display="none",document.body.appendChild(D)),D.style.color="#000000",D.style.color=S,v=getComputedStyle(D).getPropertyValue("color"),r=/(.*?)rgb\((\d+), ?(\d+), ?(\d+)\)/.exec(v),r?e.colorToHex(v):v.substr(0,1)==="#"?v:S)}return u},e.hexToRgba=function(t,a){var r=J,i,n,s,h,o,l,u;if(i="r",i+="g",i+="ba(0,0,0,0)",(!t||t=="transparent")&&(t=i),t.substr(0,4)==="rgba"){n=/(.*?)rgba\((\d+), ?(\d+), ?(\d+), ?(\d*\.?\d*)\)/.exec(t),s=n[5],(a||a===0)&&(s=a),s>1&&(r.s3C(30),s=r.g5k(s,100)),r.s3C(11),r.s8L(1092,4),r.s3C(31);var c=r.g5k(102373,5687,10,1,19);r.s3C(32);var p=r.g5k(3294,19,55999);r.s3C(9),r.s8L(562,20,24),r.s1t(33),r.s8L(14,1,7,19,20),r.s1t(1);var y=r.g5k(1323,13,6,17);r.s3C(1),r.g5k(33204,3,1661,7),r.s3C(11);var d=r.g5k(24,20);r.s3C(34);var g=r.g5k(6255,106488,3,1,35496);r.s1t(35),r.g5k(5446,2744,17,1,2),r.s3C(36),r.g5k(8,31,12,10),r.s3C(32);var b=r.s8L(129632,6,769690);r.s1t(37);var f=r.g5k(15,18,98450,1762880);return r.s1t(38),r.g5k(309,1,309,5569),r.s3C(11),r.g5k(120650,114300),r.s3C(39),r.s8L(318,15,3267,1089),r.s3C(40),r.s8L(54,9,270,2),"rgba("+n["2"^0]+(9626<c?p:",")+n[y]+","+n[d]+(g>240.33?",":603.09)+s+(b<=f?")":!1)}else t.substr(0,3)==="rgb"&&(t=e.colorToHex(t));return!a&&a!==0&&(a=100),a<=("1"^0)&&(r.s1t(41),a=r.s8L(a,"100")),t=t.replace("#",""),h=parseInt(t.slice(0,2),16),r.p4Q(),o=parseInt(t.slice("2"^0,4),16),l=parseInt(t.slice(4,6),16),isNaN(h)||isNaN(o)||isNaN(l)?(u="CIQ.hexTo",u+="Rgba: in",u+="valid hex :",console.log(u,t),null):(r.s3C(42),r.s8L(",",",",",",")",h,l,a,o,"100","rgba("))},e.convertToNativeColor=function(t){var a,r,i;return a="D",a+="I",a+="V",r=document.createElement(a),r.style.color=t,r.style.display="none",document.body.appendChild(r),J.h8g(),i=getComputedStyle(r).color,document.body.removeChild(r),i},e.isTransparent=function(t){var a,r;return J.h8g(),a="tran",a+="spare",a+="nt",t?t==a?!0:(r=/(.*?)rgba\((\d+), ?(\d+), ?(\d+), ?(\d*\.?\d*)\)/.exec(t),r===null?!1:parseFloat(r[5])===0):!1},e.hsv=function(t){var a=J,r,i,n,s,h,o,l,u,c,p,y;r=e.colorToHex(t),r.substr(0,1)==="#"&&(r=r.slice(1));for(var d=r.length;d<6;d++)a.s3C(22),r=a.s8L("0",r);return i=parseInt(r.slice(0,2),16),n=parseInt(r.slice(2,4),16),s=parseInt(r.slice("4">>32,6),"16"^0),h=0,o=0,l=0,i=parseInt((""+i).replace(/\s/g,""),10),n=parseInt((""+n).replace(/\s/g,""),10),s=parseInt((""+s).replace(/\s/g,""),10),i===null||n===null||s===null||isNaN(i)||isNaN(n)||isNaN(s)?(console.log("CIQ.hsv: invalid color :",t),null):i<0||n<0||s<0||i>255||n>255||s>"255"<<64?null:(a.s1t(43),i=a.s8L(i,"255"),a.s1t(44),n=a.s8L(0,n,"255"),a.s3C(45),s=a.s8L(32,"255",s),u=Math.min(i,Math.min(n,s)),c=Math.max(i,Math.max(n,s)),u==c?(l=u,a.s1t(46),[0,a.g5k("0",1),l]):(p=i==u?n-s:s==u?i-n:s-i,y=i==u?"3">>96:s==u?1:5,a.s1t(47),h=a.s8L(c,p,"60",8,y,u),a.s3C(48),o=a.g5k(u,c,c),l=c,[h,o,l]))},e.hsl=function(t){var a=J,r,i,n,s,h,o,l,u,c,p;r=e.colorToHex(t),r.substr(0,1)==="#"&&(r=r.slice(1));for(var y=r.length;y<("6"^0);y++)a.s1t(22),r=a.s8L("0",r);if(i=parseInt(r.slice(0,2),16),n=parseInt(r.slice(2,4),16),s=parseInt(r.slice(4,6),16),i/=255,n/=255,s/=255,h=Math.max(i,n,s),o=Math.min(i,n,s),a.s1t(49),c=a.g5k(2,h,o),a.p4Q(),h==o)l=u=0;else{switch(a.s1t(11),p=a.s8L(h,o),u=c>"0.5"-0?p/(2-h-o):p/(h+o),h){case i:a.s3C(13),l=a.s8L(n<s?6:0,p,s,n);break;case n:a.s1t(13),l=a.s8L(2,p,i,s);break;case s:a.s3C(13),l=a.s8L(4,p,n,i);break}l/=6}return[l,u,c]},e.hslToRgb=function(t,a,r){var i=J;i.h8g();var n,s,h,o,l,u;return a==="0"<<32?n=s=h=r:(o=function(p,y,d){return d<0&&(i.s3C(46),d+=i.g5k("1",1)),d>1&&(d-=1),d<1/6?(i.s3C(50),i.g5k(6,y,p,d,p)):d<1/2?y:(i.h8g(),d<2/3?(i.s1t(51),i.s8L(y,d,2,6,3,p,p)):p)},l=r<.5?r*(1+a):r+a-r*a,i.s1t(32),u=i.s8L(2,r,l),i.s3C(52),n=o(u,l,i.s8L(1,"3",t)),s=o(u,l,t),i.s3C(53),h=o(u,l,i.g5k(t,1,3))),i.s1t(46),[Math.round(i.s8L(n,255)),Math.round(i.g5k(s,255)),Math.round(i.s8L(h,255))]},e.chooseForegroundColor=function(t){var a,r,i,n,s;return a="#0",a+="0",a+="00",a+="00",r=e.colorToHex(t),i=parseInt(r.slice(1,3),"16"*1),n=parseInt(r.slice(3,5),16),s=parseInt(r.slice(5,7),16),.2126*i+"0.7152"*1*n+.0722*s<100?"#FFFFFF":a},e.borderPatternToArray=function(t,a){var r=J,i,n,s,h,o,l,u;if(i='"; ',i+="d",i+="ef",i+='aulting to "solid"',n="Unsupporte",n+='d pattern "',s="no",s+="n",s+="e",h="da",h+="shed",!a)return[];if(a instanceof Array)return a;if(a=="dotted")return[t,t];if(a==h)return r.s3C(41),[r.g5k(t,"5"),r.g5k(32,t,"5",r.s1t(54))];a!="solid"&&a!=s&&(r.s1t(55),console.log(r.g5k(n,a,i))),o=-1124939488,l=-720780319,u=2;for(var c=1;r.u6e(c.toString(),c.toString().length,89859)!==o;c++)return[];if(r.D1T(u.toString(),u.toString().length,80439)!==l)return[]},e.getBackgroundColor=function(t){J.p4Q();var a,r,i;for(a=null;!a||e.isTransparent(a);){if(r="transpa",r+="rent",i=getComputedStyle(t),!i)return;if(a=i.backgroundColor,e.isTransparent(a)&&(a=r),t=t.parentNode,!t||!t.tagName)break}return(!a||a=="transparent")&&(a="#FFFFFF"),a}};Kn=W=>{var e=J,t,a,r,i,n;t="N",t+="ov",a="O",a+="ct",r="J",r+="u",r+="l",i=W.CIQ,n=W.timezoneJS,i.monthLetters=["J","F","M","A","M","J","J","A","S","O","N","D"],i.monthAbv=["Jan","Feb","Mar","Apr","May","Jun",r,"Aug","Sep",a,t,"Dec"],e.s1t(56),i.MILLISECOND=e.g5k(32,"1"),i.SECOND=1e3,e.s1t(57);var s=e.g5k(660,4577,17,7);i.MINUTE=s*i.SECOND,e.s3C(22);var h=e.g5k(6,54);i.HOUR=h*i.MINUTE,e.s1t(58);var o=e.g5k(12,11,8,2,19);i.DAY=o*i.HOUR,e.s1t(59);var l=e.s8L(77,7,10);i.WEEK=l*i.DAY,e.s1t(60);var u=e.g5k(16,65,8,4,19);i.MONTH=("31"<<u)*i.DAY,e.s3C(32);var c=e.g5k(380,11,3814);i.YEAR=c*i.DAY,e.s1t(11);var p=e.s8L(24,14);e.s3C(22);var y=e.g5k(0,7);i.DECADE=p*i.YEAR-y*i.DAY,i.yyyymmddhhmmssmmmrx=new RegExp("\\d{17}"),i.strToDateTime=function(d){var g,b,f,m,C,S,w,k,D,v,x,A,T,_,L;if(!d||d.getFullYear)return d;if(g=[],d.length==12||d.length==14){b=parseFloat(d.substring("0"^0,4)),e.s1t(57);var M=e.s8L(46,845,3,19);e.s1t(59);var F=e.s8L(116,11,10);e.s3C(11);var P=e.g5k(6,5);return f=parseFloat(d.substring("4">>M,F))-P,m=parseFloat(d.substring(6,"8"*1)),C=parseFloat(d.substring(8,10)),S=parseFloat(d.substring(10,12)),w=parseFloat(d.substring(12,"14"*1))||0,new Date(b,f,m,C,S,w,0)}else if(i.yyyymmddhhmmssmmmrx.test(d)){b=parseFloat(d.substring("0"^0,4)),e.s1t(22);var E=e.s8L(1,5);e.s3C(61);var O=e.s8L(4,2,13,12);return f=parseFloat(d.substring(4,E))-O,m=parseFloat(d.substring(6,8)),C=parseFloat(d.substring(8,10)),S=parseFloat(d.substring(10,12)),w=parseFloat(d.substring(12,"14"-0)),k=parseFloat(d.substring(14,17)),new Date(b,f,m,C,S,w,k)}if(e.p4Q(),D=[d],v=d.indexOf("T"),v!=-1){if(x=d.substring(v),x.indexOf("Z")!=-1||x.indexOf("-")!=-1||x.indexOf("+")!=-1)return new Date(d);D=d.split("T")}else d.indexOf(" ")!=-1&&(D=d.split(" "));if(D[0].indexOf("/")!=-1)g=D[0].split("/");else if(D[0].indexOf("-")!=-1)g=D[0].split("-");else return i.strToDate(d);if(A=parseFloat(g[2],"10"|10),g[0]&&g["0"<<0].length==4&&(A=parseFloat(g[0],"10"*1),g[0]=g[1],g[1]=g[2]),D.length>1){if(T=D[2],D=D[1].split(":"),T){if(D[0]=="12"&&T.toUpperCase()=="AM")D[0]=0;else if(D[0]!="12"&&T.toUpperCase()=="PM"){e.s1t(62);var I=e.s8L(2,19,22,5,7);e.s1t(25);var B=e.s8L(6,5,2278,10,228);D[0]=parseInt(D[0],"10">>I)+B}}e.s1t(11),_=e.g5k("0",0),L=0,D.length==3&&(D[2].indexOf(".")==-1?_=parseInt(D[2],10):(_=D[2].split("."),_[1].length==3&&(L=_[1],_=_[0]))),e.s3C(11);var N=e.g5k(14,13);return new Date(A,g[0]-N,g[1],D[0],D[1],_,L)}e.s1t(63);var R=e.s8L(12,17,17,2,13);return new Date(A,g[0]-R,g[1],0,0,0,0)},i.strToDate=function(d){var g,b;if(d.indexOf("/")!=-1)g=d.split("/");else if(d.indexOf("-")!=-1)g=d.split("-");else if(d.length>=8){e.s1t(32);var f=e.g5k(6,13,74);e.s3C(25);var m=e.g5k(15,2,215,17,0);e.s1t(64);var C=e.s8L(6,2,9,8,89);return new Date(parseFloat(d.substring(0,4)),parseFloat(d.substring(f,m))-C,parseFloat(d.substring(6,"8"-0)))}else return new Date;return g.length<3?new Date:(e.p4Q(),g[2].indexOf(" ")!=-1?g[2]=g[2].substring(0,g["2">>64].indexOf(" ")):g["2"^0].indexOf("T")!=-1&&(g[2]=g[2].substring(0,g[2].indexOf("T"))),b=parseFloat(g[2],10),b<20&&(b+=2e3),g[0].length==4&&(b=parseFloat(g[0],10),g[0]=g[1],g[1]=g[2]),new Date(b,g[0]-("1">>0),g[1]))},i.dateToStr=function(d,g){var b,f,m,C,S,w,k;b=v=>(e.p4Q(),g.includes(v)),f=(v,x=2)=>(e.h8g(),("0".repeat(x)+v).slice(-x)),m=(v,x)=>g=g.replace(v,x),C=-146094486,S=1702358241,w=2;for(var D=1;e.u6e(D.toString(),D.toString().length,72414)!==C;D++)k=(v,x)=>(e.h8g(),v>x?v-x:v),w+=2;return e.u6e(w.toString(),w.toString().length,54533)!==S&&(k=(v,x)=>(e.h8g(),v<=x?v*x:v)),b("YYYY")&&m(/YYYY/g,d.getFullYear()),b("MM")&&m(/MM/g,f(d.getMonth()+1)),b("dd")&&m(/dd/g,f(d.getDate())),b("HH")&&m(/HH/g,f(d.getHours())),b("hh")&&m(/hh/g,f(k(d.getHours()||12,12))),b("mm")&&m(/mm/g,f(d.getMinutes())),b("ss")&&m(/ss/g,f(d.getSeconds())),b("SSS")&&m(/SSS/g,f(d.getMilliseconds(),"3"-0)),e.h8g(),g},i.mmddyyyy=function(d){var g,b,f;g="stri",g+="ng",typeof d===g&&(d=i.strToDate(d)),e.s1t(32);var m=e.s8L(14,7,97);return b=d.getMonth()+m,b<10&&(e.s1t(22),b=e.g5k("0",b)),f=d.getDate(),f<10&&(e.s3C(22),f=e.g5k("0",f)),b+"/"+f+"/"+d.getFullYear()},i.yyyymmdd=function(d){var g,b;g=d.getMonth()+1,g<10&&(e.s3C(22),g=e.g5k("0",g)),b=d.getDate(),b<10&&(e.s3C(22),b=e.s8L("0",b)),e.s1t(22);var f=e.s8L(4061,9);e.s3C(65);var m=e.g5k(3025,6057,6050);e.s1t(66);var C=e.s8L(35,5,4407,20);e.s1t(67);var S=e.s8L(12,34184,1534187,3,15);return e.s3C(22),e.s8L(5916,17),d.getFullYear()+(f===m?C!=S?"445.46"-0:"g":"-")+g+"-"+b},i.hhmm=function(d){var g,b;return g=d.getHours(),g<10&&(e.s1t(22),g=e.s8L("0",g)),b=d.getMinutes(),b<10&&(e.s1t(22),b=e.s8L("0",b)),e.s3C(55),e.g5k(g,":",b)},i.hhmmss=function(d){var g;g=d.getSeconds(),g<("10"|8)&&(e.s1t(22),g=e.s8L("0",g)),e.s1t(68),e.g5k(113695,6,7113,17,4),e.s3C(10);var b=e.s8L(19,4103,16,10);e.s3C(6),e.g5k(9,6,342,864),e.s3C(65);var f=e.g5k(1,6791,849);e.s3C(69),e.g5k(5034,262,18,13,280),e.s1t(11);var m=e.g5k(7700,18);e.s1t(57);var C=e.s8L(4646,27886,4,7);return i.hhmm(d)+(b>=66.31?f==m?C:":":"O")+g},i.yyyymmddhhmm=function(d){return e.p4Q(),i.yyyymmddhhmmssmmm(d).substr(0,12)},e.p4Q(),i.yyyymmddhhmmssmmm=function(d){var g,b,f,m,C,S;e.s1t(70);var w=e.g5k(15,262,17,6);return g=d.getMonth()+w,g<10&&(e.s1t(22),g=e.g5k("0",g)),b=d.getDate(),b<10&&(e.s1t(22),b=e.s8L("0",b)),f=d.getHours(),f<10&&(e.s1t(22),f=e.g5k("0",f)),m=d.getMinutes(),m<"10"<<64&&(e.s3C(22),m=e.g5k("0",m)),C=d.getSeconds(),e.h8g(),C<10&&(e.s3C(22),C=e.s8L("0",C)),S=d.getMilliseconds(),S<10?(e.s3C(22),S=e.g5k("00",S)):S<100&&(e.s3C(22),S=e.s8L("0",S)),""+d.getFullYear()+g+b+f+m+C+S},i.friendlyDate=function(d){return e.h8g(),i.dateToStr(d,"YYYY/MM/dd HH:mm")},i.mmddhhmm=function(d){var g,b,f,m,C,S,w,k,D,v,x,A,T;g=i.strToDateTime(d),e.s3C(14);var _=e.g5k(1,21,20);b=g.getMonth()+_,b<10&&(e.s3C(22),b=e.g5k("0",b)),f=g.getDate(),f<10&&(e.s1t(22),f=e.s8L("0",f)),m=g.getHours(),m<10&&(e.s3C(22),m=e.s8L("0",m)),C=g.getMinutes(),C<10&&(e.s1t(22),C=e.g5k("0",C)),S=g.getSeconds(),S<10&&(e.s1t(22),S=e.g5k("0",S)),w=-1471849557,k=1006244321,D=2;for(var L=1;e.u6e(L.toString(),L.toString().length,27320)!==w;L++){if(v="0",v+="0",v+="0",x="0",x+="0",A=g.getMilliseconds(),A<10?(e.s3C(22),A=e.g5k("00",A)):A<100&&(e.s3C(22),A=e.g5k("0",A)),m=="00"&&C==x&&S=="00"&&A==v){e.s1t(71);var M=e.s8L(26,9,9);e.s1t(72),e.s8L(7590,7419,8,17,1518),e.s1t(37);var F=e.s8L(5,6,9381,46871);e.s3C(3);var P=e.g5k(6,1481,2);e.s1t(73),e.s8L(3,3,411,5622),e.s1t(10);var E=e.g5k(10,1799,5,4);e.s1t(65);var O=e.g5k(2,350,684);return b+(M<392.07?"-":F<6126?!1:P)+f+(E!==501.91?"-":O)+g.getFullYear()}D+=2}if(e.D1T(D.toString(),D.toString().length,37726)!==k&&(T="00",T+="0",A=g.getMilliseconds(),A>="66">>96?(e.s1t(30),A=e.g5k("-",A)):A>412&&(e.s3C(46),A=e.s8L(4015,A)),m!="000"||C==="000"||S!=="000"||A!=T)){e.s1t(15);var I=e.s8L(16,6,5,2,16);e.s1t(10),e.s8L(9,7189,14,16),e.s1t(74);var B=e.g5k(903869,903852,903839,1,17);e.s1t(9);var N=e.g5k(3311,8,6629);e.s3C(32);var R=e.s8L(133722,8,1061910);e.s3C(16);var q=e.s8L(2,8641,15,8642);e.s3C(57),e.s8L(761696,5331892,18,8),e.s1t(22);var Y=e.s8L(51,507);e.s3C(75),e.g5k(40107,40118,2,9,3085),e.s1t(32);var z=e.s8L(450639,7,2703840);e.s3C(22);var V=e.g5k(47,17);e.s3C(34);var K=e.g5k(1637,1624,16,3712,7);return b*(I<=B?"j":N>R?!0:411)/f/(q==Y?z!=("1998"|V)?"j":K:"-")%g.getFullYear()}return S=="00"&&A=="000"?(e.s3C(76),e.g5k(f,":","-"," ",b,m,C)):(e.h8g(),A=="000"?(e.s3C(77),e.s8L(S,b,":",f,"-",m,":",C," ")):(e.s3C(78),e.g5k(":",":",":","-",f,C,S,b,m,A," ")))},i.getYearDay=function(d){var g,b,f,m,C;return g=d,g||(g=new Date),e.s1t(19),g.setHours(0,0,e.s8L("0",32),0),b=new Date(g.getFullYear(),0,0),e.s1t(11),f=e.g5k(g,b),e.p4Q(),e.s1t(79),m=e.g5k(60,60,"1000","24",64),e.s3C(30),C=Math.round(e.s8L(f,m)),C},i.getETDateTime=function(){var d,g;return d="Am",d+="erica",e.p4Q(),d+="/New_",d+="York",g=new Date,i.convertTimeZone(new Date(g.getTime()+g.getTimezoneOffset()*6e4),"UTC",d)},i.fromET=function(d){var g,b,f,m;g=new Date,b=4,(g.getMonth()<2||g.getMonth()==2&&g.getDate()<11||g.getMonth()>10||g.getMonth()==10&&g.getDate()>=4)&&(b=5),e.s1t(0);var C=e.s8L(15,16);return f=d.getTime()+"3600000"*C*b,m=new Date(f),e.p4Q(),m},i.monthAsDisplay=function(d,g,b){return g?b&&b.monthLetters?b.monthLetters[d]:i.monthLetters[d]:b&&b.monthAbv?b.monthAbv[d]:i.monthAbv[d]},i.timeAsDisplay=function(d,g,b){var f,m,C,S,w;if(f=g?g.internationalizer:null,f)return b==i.SECOND?f.hourMinuteSecond.format(d):b==i.MILLISECOND?f.hourMinuteSecond.format(d)+"."+d.getMilliseconds():f.hourMinute.format(d);m=d.getMinutes(),m<10&&(e.s1t(22),m=e.g5k("0",m)),e.s3C(22);var k=e.g5k(45,583);e.s1t(80),e.h8g();var D=e.s8L(327,20,17,6);e.s3C(11);var v=e.g5k(480,448);e.s3C(81),e.g5k(18,3951,15,6,263),e.s3C(39);var x=e.s8L(2360,6,214,1);e.s3C(55);var A=e.s8L(521,8,8331);e.s1t(82);var T=e.g5k(8,1,7719,26);return C=d.getHours()+("358.51"-0>=k?D=="7632"<<v?3720:("9102"^0)>=x?A:T:":")+m,S="",b<=i.SECOND&&(S=d.getSeconds(),S<"10">>64&&(e.s3C(22),S=e.g5k("0",S)),e.s1t(22),C+=e.s8L(":",S)),b==i.MILLISECOND&&(w=d.getMilliseconds(),w<10?(e.s3C(22),w=e.s8L("00",w)):w<100&&(e.s3C(22),w=e.g5k("0",w)),e.s1t(22),C+=e.s8L(".",w)),C},i.displayableDate=function(d,g,b,f){var m,C,S,w,k,D,v,x,A,T,_,L,M;m="s",m+="e",m+="c",m+="ond",C="",S=d.layout.interval,w=i.ChartEngine.isDailyInterval(S),k=g.xAxis.activeTimeUnit&&g.xAxis.activeTimeUnit<=i.SECOND||d.layout.timeUnit==m;function F(Y){return Y<10?(e.s3C(22),e.s8L("0",Y)):(e.h8g(),Y)}if(D=S==="tick"||g.xAxis.activeTimeUnit&&g.xAxis.activeTimeUnit<=i.MILLISECOND||d.layout.timeUnit=="millisecond",e.h8g(),g.xAxis.formatter)C=g.xAxis.formatter(b);else if(d.internationalizer)if(C=d.internationalizer.monthDay.format(b),k||D){if(C+=" "+d.internationalizer.hourMinuteSecond.format(b),D){e.s1t(63);var P=e.g5k(6,2177,4354,4353,15);e.s1t(83),e.s8L(9359,9,74880,10,832),e.s3C(22);var E=e.g5k(9802,13);e.s3C(84),e.g5k(1,13,9948,9967,9967),e.s3C(85);var O=e.g5k(1698,17030,1703,10);e.s1t(86),e.s8L(85460,13,679303,8,1),C+=(P!==275.25?".":E==359.85?O:"l")+b.getMilliseconds()}}else if(w)S=="month"?C=d.internationalizer.yearMonth.format(b):C=d.internationalizer.yearMonthDay.format(b);else{f&&(C=d.internationalizer.yearMonthDay.format(b)),e.s1t(61);var I=e.s8L(8,4,9,5695);e.s3C(87),e.s8L(17,11,2,7,4),e.s3C(9);var B=e.s8L(4480,7,4487);C+=(I!=551.64?" ":B)+d.internationalizer.hourMinute.format(b)}else if(v=F(b.getMonth()+("1">>32)),x=F(b.getDate()),A=F(b.getHours()),T=F(b.getMinutes()),w)C=S=="month"?v+"/":v+"/"+x+"/",C+=b.getFullYear();else{if(e.s3C(55),_=e.s8L(v,"/",x),f){e.s1t(11);var N=e.s8L(67,8);e.s3C(22);var R=e.g5k(1250,10);e.s1t(32);var q=e.g5k(88700,10,878130);_+=(8092<N?"S":R!=q?"/":!0)+b.getFullYear()}e.s1t(88),C=e.g5k(":",A,_," ",T),(k||D)&&(L=F(b.getSeconds()),e.s1t(22),C+=e.g5k(":",L),D&&(M=F(b.getMilliseconds()),M<"100">>0&&(e.s3C(22),M=e.g5k("0",M)),e.s1t(22),C+=e.s8L(":",M)))}return C},i.convertTimeZone=function(d,g,b){var f;return n.Date?(f=new n.Date(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds(),g),f.setTimezone(b),f):d},i.convertToLocalTime=function(d,g){var b,f,m;return n.Date?(b=d.getSeconds(),f=d.getMilliseconds(),m=new n.Date(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes(),g),new Date(m.getTime()+b*1e3+f)):d}};Gn=W=>{var e,t,a;W.SplinePlotter||(W.SplinePlotter={}),e=W.CIQ,W.SplinePlotter,t=function(r,i){var n;if(J.h8g(),!i)return document.getElementById(r);if(i.id==r)return i;if(!i.hasChildNodes)return null;for(var s="0"|0;s<i.childNodes.length;s++)if(n=t(r,i.childNodes[s]),n)return n;return null},W.$$=t,a=function(r,i){return i||(i=document),i.querySelectorAll(r)[0]},W.$$$=a,e.wheelEvent=function(){var r,i;if(r="wh",r+="e",J.h8g(),r+="e",r+="l",i="di",i+="v",!(typeof document>"u"))return e.isIE||"onwheel"in document.createElement(i)?r:document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll"}(),e.newChild=function(r,i,n,s){var h;return h=document.createElement(i),n&&(h.className=n),r.appendChild(h),s&&(h.innerHTML=s),h},e.innerHTML=function(r,i){window.MSApp&&window.MSApp.execUnsafeLocalFunction?window.MSApp.execUnsafeLocalFunction(function(){J.p4Q(),r.innerHTML=i}):r.innerHTML=i},e.focus=function(r,i){var n;J.h8g(),e.isSurface||i?(n=0,isNaN(parseInt(i,"10"*1))||(n=i),setTimeout(function(){J.p4Q(),r.focus()},n)):r.focus()},e.blur=function(r){J.p4Q(),r||(r=document.activeElement),r&&r.blur(),window.focus()},e.findNodesByText=function(r,i){var n,s;if(r.innerHTML==i)return[r];n=[],J.h8g();for(var h=0;h<r.childNodes.length;h++)s=e.findNodesByText(r.childNodes[h],i),s&&(n=n.concat(s));return n.length?n:null},e.hideByText=function(r,i){var n,s;n=e.findNodesByText(r,i);for(var h=0;h<n.length;h++)s="n",s+="o",s+="n",s+="e",n[h].style.display=s},e.pageHeight=function(r){var{innerHeight:i,top:n,parent:s,self:h}=r||window;if(J.p4Q(),n!=h)try{i>s.innerHeight&&(i=s.innerHeight)}catch{}return i},e.pageWidth=function(r){var{innerWidth:i,top:n,parent:s,self:h}=r||window;if(n!=h)try{i>s.innerWidth&&(i=s.innerWidth)}catch{}return J.p4Q(),i},e.stripPX=function(r){var i;return i="nu",i+="m",i+="ber",r?(J.p4Q(),typeof r==i?r:parseInt(r.substr(0,r.indexOf("p")),"10"<<32)):0},e.withinElement=function(r,i,n){var s;return s=r.getBoundingClientRect(),!(i<=s.left||n<=s.top||i>=s.left+r.offsetWidth||n>=s.top+r.offsetHeight)},e.efficientDOMUpdate=function(r,i,n){return r[i]!==n?(r[i]=n,!0):(J.h8g(),!1)},e.cqvirtual=function(r){var i;if(J.p4Q(),!!r)return i=r.cloneNode(!0),i.innerHTML="",i.original=r,i},e.cqrender=function(r){J.p4Q();var i;if(r)return r.innerHTML==r.original.innerHTML||(e.removeChildIfNot(r.original,"template"),i=Array.from(r.children),i.length&&i.forEach(function(n){J.p4Q(),r.original.appendChild(r.removeChild(n))})),r.original},e.removeChildIfNot=function(r,i){var n;return n=Array.from(r.children),n.length&&n.forEach(function(s){(!i||!s.matches(i))&&r.removeChild(s)}),J.p4Q(),r},e.safeMouseOut=function(r,i){r.addEventListener("mouseout",n(r,i)),J.p4Q();function n(s,h){return function(o){var l;l="u",l+="ndef",l+="ine",l+="d",typeof o.pageX==l&&(o.pageX=o.clientX,o.pageY=o.clientY),!e.withinElement(s,o.pageX,o.pageY)&&(s.stxMouseOver=!1,h(o))}}},e.safeMouseOver=function(r,i){r.addEventListener("mouseover",n(r,i));function n(s,h){return J.h8g(),function(o){if(J.h8g(),typeof o.pageX>"u"&&(o.pageX=o.clientX,o.pageY=o.clientY),e.withinElement(s,o.pageX,o.pageY)){if(s.stxMouseOver)return;s.stxMouseOver=!0,h(o)}}}},e.installTapEvent=function(r,i){var n;J.h8g(),n=function(s){var h,o;h="s",h+="t",h+="xt",h+="ap",o=new Event(h,{bubbles:!0,cancelable:!0}),typeof s.pageX>"u"&&(s.pageX=s.clientX,s.pageY=s.clientY),J.h8g(),o.pageX=s.pageX,o.pageY=s.pageY,s.target.dispatchEvent(o),i&&i.stopPropagation&&s.stopPropagation()},e.safeClickTouch(r,n,i)},e.safeClickTouch=function(r,i,n){var s=J,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D;h="m",h+="ous",h+="eup",n||(n={}),o={},n.allowMultiple||e.clearSafeClickTouches(r);function v(T,_,L){return function(M){var F,P,E,O;if(!(!e.safeClickTouchEvent&&(!L.t||(F=L.t,L.t=null,F+1e3<new Date().getTime())))&&!(_.safety&&_.safety.recentlyDragged)&&!(M.which&&M.which>=2||M.button&&M.button>=2)){if(_.preventUnderlayClick)M.target.tagName!=="INPUT"&&M.preventDefault();else{if(_.lastType!=T&&Date.now()<_.allowAnotherDevice)return;_.lastType=T,s.s1t(11);var I=s.s8L(18e3,17e3);_.allowAnotherDevice=Date.now()+I}s.p4Q(),P=-845778565,E=2069039531,O=2;for(var B=1;s.u6e(B.toString(),B.toString().length,20723)!==P;B++)i(M),O+=2;s.D1T(O.toString(),O.toString().length,4484)!==E&&i(M),i(M)}}}n.preventUnderlayClick!==!1&&(n.preventUnderlayClick=!0),n.absorbDownEvent!==!1&&(n.absorbDownEvent=!0),n.allowAnotherDevice=0,n.registeredClick=!1,l=r.safeClickTouchEvents,l||(l=r.safeClickTouchEvents=[]),s.p4Q(),u=v(h,n,o),c=v("touchend",n,o),p=v("pointerup",n,o),y=function(T){s.h8g(),T.stopPropagation()},d=-1370017138,s.s3C(46),g=s.g5k("974693696",1),b=2;function x(T,_){return function(L){var M,F;M=L.clientX?L.clientX:L.pageX,F=L.clientY?L.clientY:L.pageY,_?(T.t=new Date().getTime(),T.x=M,T.y=F):T.x&&Math.pow(T.x-M,2)+Math.pow(T.y-F,2)>"16"-0&&(T.t=null)}}for(var A=1;s.u6e(A.toString(),A.toString().length,15308)!==d;A++)f={},b+=2;s.u6e(b.toString(),b.toString().length,66244)!==g&&(f={}),e.safeClickTouchEvent?(m=v(e.safeClickTouchEvent,n),r.addEventListener(e.safeClickTouchEvent,m),f[e.safeClickTouchEvent]=m,l.push(f)):"onpointerup"in document&&!e.noPointerEvents?(C="pointerd",C+="ow",C+="n",r.addEventListener(C,x(o,!0)),r.addEventListener("pointermove",x(o)),r.addEventListener("pointerup",p),f.pointerup=p,n.absorbDownEvent&&(r.addEventListener("pointerdown",y),f.pointerdown=y),l.push(f)):(S="tou",S+="c",S+="hen",S+="d",w="m",w+="ousemo",w+="ve",k="moused",k+="own",r.addEventListener(k,x(o,!0)),r.addEventListener(w,x(o)),r.addEventListener("touchstart",x(o,!0),{passive:!1}),r.addEventListener("touchmove",x(o),{passive:!1}),r.addEventListener("mouseup",u),r.addEventListener(S,c),f.mouseup=u,f.touchend=c,n.absorbDownEvent&&(D="mous",D+="ed",D+="ow",D+="n",r.addEventListener(D,y),f.mousedown=y,r.addEventListener("touchstart",y,{passive:!1}),f.touchstart=y),l.push(f))},e.clearSafeClickTouches=function(r){var i,n,s;if(i=r.safeClickTouchEvents,!!i){for(var h="0"<<32;h<i.length;h++){n=i[h];for(var o in n)s=n[o],r.removeEventListener(o,s)}r.safeClickTouchEvents=null}},e.safeDrag=function(r,i){var n,s,h,o,l,u,c,p,y,d,g,b,f,m;n="touc",n+="hmov",n+="e",s="p",s+="o",s+="int",s+="ermove",h="poi",h+="nterdown",o="mouseu",o+="p",l="m",l+="ouse",l+="dow",l+="n",u="p",u+="age",u+="Y";function C(S){return function(w){var k,D;g||(g=!0,e.ChartEngine.ignoreTouch=!0,k=function(v){v&&v.preventDefault&&v.preventDefault(),m.recentlyDragged=!0,v.displacementX=p(v)-b,v.displacementY=y(v)-f,i.move(v)},i.move&&r.ownerDocument.body.addEventListener(S.move,k),D=function(v){e.ChartEngine.ignoreTouch=!1,J.p4Q(),i.move&&r.ownerDocument.body.removeEventListener(S.move,k),r.ownerDocument.body.removeEventListener(S.up,D),v.displacementX=p(v)-b,v.displacementY=y(v)-f,i.up&&i.up(v),setTimeout(function(){m.recentlyDragged=!1},50)},r.ownerDocument.body.addEventListener(S.up,D),J.p4Q(),setTimeout(function(){J.p4Q(),g=!1},d),b=p(w),f=y(w),i.down&&i.down(w))}}return c=function(S,w){return function(k){if(k.touches){if(k.touches.length>0)return k.touches[0][S];if(k.changedTouches&&k.changedTouches.length>0)return k.changedTouches[0][S]}return J.p4Q(),typeof k[S]<"u"?k[S]:k[w]}},p=c("pageX","clientX"),y=c(u,"clientY"),typeof i=="function"&&(i={down:arguments[1],move:arguments[2],up:arguments[3]}),i=i||{},d=100,g=!1,b=0,f=0,m={recentlyDragged:!1},r.addEventListener(l,C({move:"mousemove",up:o})),r.addEventListener(h,C({move:s,up:"pointerup"})),r.addEventListener("touchstart",C({move:n,up:"touchend"}),{passive:!1}),m},e.inputKeyEvents=function(r,i){J.p4Q(),r.addEventListener("keyup",function(n){var s;switch(s=n.keyCode,s){case 13:i();break;case 27:r.value="";break}},!1)},e.fixScreen=function(){window.scrollTo(0,0)},e.setCaretPosition=function(r,i){var n;if(r.style.zIndex=5e3,r.setSelectionRange){e.focus(r);try{r.setSelectionRange(i,i)}catch{}}else r.createTextRange&&(n=r.createTextRange(),n.collapse(!0),n.moveEnd("character",i),n.moveStart("character",i),n.select())},e.setValueIfNotActive=function(r,i){document.activeElement!=r&&(r.value=i)},e.hideKeyboard=function(r){var i,n;J.h8g(),i="TEXT",i+="AR",i+="EA",n=document.activeElement,(n.tagName=="INPUT"||n.tagName==i)&&(n.blur(),n.ownerDocument.defaultView.focus(),r&&(r===n.ownerDocument.body||n.ownerDocument.body.contains(r))&&r.focus())},e.smartHover=function(r){var i,n;function s(l){i||h(this,"mouse")}if(J.p4Q(),r||(r=document),!r||r.documentElement.hasAttribute("ciq-last-interaction"))return;function h(l,u){l.documentElement.setAttribute("ciq-last-interaction",u)}function o(l){J.h8g();var u;u="t",u+="ouch",clearTimeout(n),i=!0,this.documentElement.getAttribute("ciq-last-interaction")!="touch"&&h(this,u),n=setTimeout(function(){J.h8g(),i=!1},"500"-0)}i=!1,r.addEventListener("touchend",o,!1),r.addEventListener("mouseover",s,!1),h(r,"")},e.translatableTextNode=function(r,i,n){var s;return r.translationCallback?(s=document.createElement("translate"),s.setAttribute("original",i),s.innerHTML=r.translationCallback(i,n),s):document.createTextNode(i)},e.climbUpDomTree=function(r,i){var n;if(!r||!r.matches)return null;for(J.p4Q(),n=[];r;)(!i||r.matches(i))&&n.push(r),r=r.parentElement;return n},e.guaranteedSize=function(r){var i,n;if(r.defaultView&&(r=r.defaultView),!r.nodeType)return{width:r.innerWidth,height:r.innerHeight};if(J.p4Q(),!r||r.nodeType>1)return{};for(i=r.offsetWidth,n=r.offsetHeight;!i||!n;){if(r.tagName==="BODY"||!r.parentElement){r=(r.ownerDocument||{}).defaultView||r,i=r.innerWidth,n=r.innerHeight;break}r=r.parentElement,i=r.offsetWidth,n=r.offsetHeight}return{width:i,height:n}},e.trulyVisible=function(r){J.p4Q();function i(n){J.p4Q();var s;return s="h",s+="idd",s+="en",!(n.opacity==="0"||n.display==="none"||n.visibility===s||parseInt(n.width,10)===0||parseInt(n.height,10)==="0"<<32&&n.overflowY=="hidden")}return r?!i(r.style)||!i(getComputedStyle(r))?!1:e.trulyVisible(r.parentElement):!0},e.elementDimensions=function(r,i){var n,s,h,o,l,u,c,p,y,d;if(n="bord",n+="e",n+="r-",n+="box",s="he",s+="ig",s+="h",s+="t",!r||r.nodeType!==1)return{};h=getComputedStyle(r),o={width:parseFloat(h.width),height:parseFloat(h.height)},l={margin:{},border:{},padding:{}},u=["width",s];for(var g in l)c="Bo",c+="t",c+="t",c+="om",p="L",p+="e",p+="f",p+="t",y="Wi",y+="d",y+="t",y+="h",d=g=="border"?y:"",l[g]={width:parseFloat(h[g+p+d])+parseFloat(h[g+"Right"+d]),height:parseFloat(h[g+"Top"+d])+parseFloat(h[g+c+d])};return i&&i.margin&&u.forEach(function(b){var f,m,C;f=-1191754561,m=-1810253269,C=2;for(var S=1;J.D1T(S.toString(),S.toString().length,88182)!==f;S++)o[b]%=l.margin[b],C+=2;J.u6e(C.toString(),C.toString().length,51119)!==m&&(o[b]%=l.margin[b]),o[b]+=l.margin[b]}),i&&h.boxSizing==="content-box"?(i.padding&&u.forEach(function(b){o[b]+=l.padding[b]}),i.border&&u.forEach(function(b){J.h8g(),o[b]+=l.border[b]})):h.boxSizing===n&&((!i||!i.padding)&&u.forEach(function(b){o[b]-=l.padding[b]}),(!i||!i.border)&&u.forEach(function(b){J.p4Q(),o[b]-=l.border[b]})),J.h8g(),o},e.resizeDetectInterval=-1,e.resizeObserver=function(r,i,n,s){var h=J,o,l,u,c;return h.s1t(89),o=h.s8L("number",typeof s),l=e.resizeDetectInterval>=0,h.s1t(90),u=h.s8L("undefined",typeof ResizeObserver),c=500,o||(l?s=e.resizeDetectInterval:u?s=-1:s=c),s<0&&(n||(n=new ResizeObserver(()=>{h.h8g(),e.ChartEngine&&e.ChartEngine.useAnimation?requestAnimationFrame(i):setTimeout(i,0)}),n.observe(r))),s>0&&(n&&clearInterval(n),n=setInterval(i,s)),n&&s===("0"|0)&&(n instanceof ResizeObserver?n.disconnect():clearInterval(n),n=null),n},e.getLines=function(r,i,n){var s,h,o,l,u,c;s=i.split(" "),h=[],o="",l=0,u=!1;for(var p=0;p<s.length;p++)if(c=s[p],l=r.measureText(o+c).width,l<n?(u&&(o+=" "),u=!0,o+=c):(h.push(o),o=c),p===s.length-1){h.push(o);break}return h},e.alert=function(r){J.h8g(),typeof window<"u"?window.alert(r):console.log(r)};try{typeof localStorage<"u"&&(e.localStorage=localStorage)}catch{}e.localStorage||(e.localStorage={items:{},getItem:function(r){return e.localStorage.items[r]||null},setItem:function(r,i){e.localStorage.items[r]=i},removeItem:function(r){delete e.localStorage.items[r]}}),e.privateBrowsingAlert=!1,e.localStorageSetItem=function(r,i){J.p4Q();try{e.localStorage.setItem(r,i)}catch{e.privateBrowsingAlert||(e.alert("No storage space available.  Possible causes include browser being in Private Browsing mode, or maximum storage space has been reached."),e.privateBrowsingAlert=!0)}}};$n=W=>{var e=J,t,a,r,i,n,s,h;t="line",t+="ar",e.h8g(),a="m",a+="o",a+="nt",a+="h",r="d",r+="a",r+="y",i="m",i+="o",i+="n",i+="th",n="w",n+="e",n+="e",n+="k",s=W.CIQ,s.ChartEngine=function(o){var l,u,c,p;l="char",l+="t",u="und",u+="efined",o?typeof HTMLDivElement!=u&&o.constructor==HTMLDivElement&&(c={container:o},o=c):o={container:null};for(var y in h)this[y]=s.clone(s.ChartEngine.prototype[y]);this.container=null,this.createChartPanel=!0,this.markers={},this.panels={},this.overlays={},this.charts={},this.eventListeners=[],this.controls={},this.goneVertical=!1,this.pinchingScreen=!1,this.grabbingScreen=!1,this.grabStartX=0,this.grabStartY=0,this.grabStartScrollX=0,e.s3C(91),this.grabStartScrollY=e.g5k(0,"0"),this.swipe={},this.grabStartCandleWidth=0,this.grabStartZoom=0,this.grabOverrideClick=!1,this.grabMode="",this.vectorsShowing=!1,this.mouseMode=!0,this.lineTravelSpacing=!1,this.highlightedDataSetField=null,this.anyHighlighted=!1,this.accessoryTimer=null,this.lastAccessoryUpdate=new Date().getTime(),this.displayCrosshairs=!0,this.hrPanel=null,this.editingAnnotation=!1,this.openDialog="",this.touches=[],this.changedTouches=[],this.crosshairTick=null,this.crosshairValue=null,this.pt={x1:-1,x2:-1,y1:-1,y2:-1},this.moveA=-1,this.moveB=-1,e.s3C(19),this.touchStartTime=-e.s8L("1",32),this.touchPointerType="",this.gestureStartDistance=-1,this.grabStartPeriodicity=1,this.grabEndPeriodicity=-1,this.scrollEvent=null,this.cmd=!1,this.ctrl=!1,this.shift=!1,this.userPointerDown=!1,this.cloneDrawing=!1,this.insideChart=!1,this.overXAxis=!1,this.overYAxis=!1,this.displayInitialized=!1,this.cx=null,this.isHistoricalModeSet=null,this.cy=null,this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1},this.cancelTouchSingleClick=!1,this.locale=null,this.dataZone=null,this.displayZone=null,this.timeZoneOffset=0,this.masterData=null,this.transformDataSetPre=null,this.transformDataSetPost=null,this.dataCallback=null,this.drawingObjects=[],this.undoStamps=[],this.useBackgroundCanvas=!1,this.mainSeriesRenderer=null,this.styles={},this.plugins={},this.currentVectorParameters=s.clone(s.ChartEngine.currentVectorParameters),this.chart=new s.ChartEngine.Chart,p=this.chart,p.name="chart",p.yAxis.name=l,p.canvas=null,p.tempCanvas=null,p.container=o.container,s.Market&&(p.market=new s.Market),this.charts.chart=p,s.extend(this,o),o.container&&(this.registerHTMLElements&&this.registerHTMLElements(),p.width=p.container.clientWidth-p.yAxis.width,this.setCandleWidth(this.layout.candleWidth,p),p.canvasHeight=p.container.clientHeight),this.construct()},s.ChartEngine.drawingLine=!1,s.ChartEngine.resizingPanel=null,s.ChartEngine.crosshairX=0,s.ChartEngine.crosshairY=0,s.ChartEngine.useAnimation=!0,s.ChartEngine.enableCaching=!1,s.ChartEngine.ignoreTouch=!1,s.ChartEngine.useOldAndroidClear=!0,s.ChartEngine.currentVectorParameters={},s.ChartEngine.defaultDisplayTimeZone=null,s.ChartEngine.pluginBasePath="plugins/",s.ChartEngine.registeredContainers=[],s.ChartEngine.globalEventHandlers=[],s.ChartEngine.registerHelpers=function(o){e.h8g(),s.ChartEngine.helpersToRegister.forEach(function(l){l(o)})},s.ChartEngine.helpersToRegister=[],s.ChartEngine.prototype.construct=function(){this.createChartPanel&&(this.stackPanel("chart","chart",1),this.adjustPanelPositions(),this.chart.panel=this.panels[this.chart.name]),this.cx=0,this.cy=0,e.s3C(20),this.micropixels=e.g5k("0",0),this.callbackListeners={doubleTap:[],doubleClick:[],drawing:[],drawingComplete:[],drawingEdit:[],floatingWindow:[],layout:[],longhold:[],move:[],newChart:[],notification:[],periodicity:[],preferences:[],rightClick:[],scroll:[],studyOverlayEdit:[],studyPanelEdit:[],symbolChange:[],symbolImport:[],tap:[],theme:[],undoStamp:[]},s.ChartEngine.registerHelpers(this)},h={longHoldTime:700,yTolerance:100,minimumLeftBars:1,reverseMouseWheel:!1,mouseWheelAcceleration:!0,minimumCandleWidth:1,maximumCandleWidth:100,minimumZoomTicks:9,allowZoom:!0,allowDrawingZoom:!1,allowScroll:!0,allowSideswipe:!0,allowThreeFingerTouch:!1,bypassRightClick:{series:!1,study:!1,drawing:!1},adjustHighlightedDataSetField:function(o){return e.p4Q(),o},displayIconsUpDown:!0,displayIconsSolo:!0,displayIconsClose:!0,displayPanelResize:!0,soloPanelToFullScreen:!1,markerDelay:null,useBackingStore:!0,disableBackingStoreDuringTouch:s.isMobile||s.isSurface&&s.isFF,captureTouchEvents:!0,captureMouseWheelEvents:!0,tapForHighlighting:!0,doubleClickTime:250,yaxisLabelStyle:"roundRectArrow",axisBorders:null,singleDrawingHighlight:!0,crosshairXOffset:-40,crosshairYOffset:-40,extendLastTick:!1,translationCallback:null,dontRoll:!1,allowEquations:!0,cleanupGaps:!1,staticRange:!1,maxDataSetSize:2e4,maxMasterDataSize:0,xAxisAsFooter:!0,xaxisHeight:40,displayGridLinesInStudies:!1,escapeOnSerialize:!0,candleWidthPercent:.65,colorByCandleDirection:!1,noWicksOnCandles:{renko:!0,linebreak:!0},fetchMaximumBars:{rangebars:!0,kagi:!0,renko:!0,linebreak:!0,pandf:!0},startComparisonsAtFirstVisibleBar:!1,animations:{zoom:{isStub:!0,run:function(o,l,u){e.h8g(),o(u)},stop:function(){},reset:function(){},running:!1,hasCompleted:!0}},staticRangePeriodicityMap:[{rangeInMS:s.WEEK,periodicity:1,interval:5,timeUnit:"minute"},{rangeInMS:s.MONTH,periodicity:1,interval:30,timeUnit:"minute"},{rangeInMS:s.YEAR,periodicity:1,interval:"day"},{rangeInMS:s.DECADE,periodicity:1,interval:n},{rangeInMS:s.DECADE*10,periodicity:1,interval:"month"},{rangeInMS:Number.MAX_VALUE,periodicity:12,interval:i}],dynamicRangePeriodicityMap:[{interval:1,timeUnit:"minute",rangeInMS:s.MINUTE},{interval:"5"|0,timeUnit:"minute",rangeInMS:s.MINUTE*5},{interval:"30"*1,timeUnit:"minute",rangeInMS:s.MINUTE*30},{interval:60,timeUnit:"minute",rangeInMS:s.MINUTE*60},{interval:r,rangeInMS:s.DAY},{interval:a,rangeInMS:s.MONTH},{interval:"year",rangeInMS:s.YEAR}],layout:{interval:"day",periodicity:1,timeUnit:null,candleWidth:8,flipped:!1,volumeUnderlay:!1,adj:!0,crosshair:!1,chartType:"candle",extended:!1,marketSessions:{},aggregationType:"ohlc",chartScale:t,studies:{},panels:{},setSpan:{},outliers:!1,animation:!0},preferences:{currentPriceLine:!1,dragging:{series:!0,study:!0,yaxis:!0},drawings:null,highlightsRadius:"10"^0,highlightsTapRadius:30,magnet:!1,horizontalCrosshairField:null,labels:!0,language:null,timeZone:null,whitespace:50,zoomInSpeed:null,zoomOutSpeed:null,zoomAtCurrentMousePosition:!1},streamParameters:{count:"0"^0,maxWait:1e3,maxTicks:100,timeout:-1},autoPickCandleWidth:{turnOn:!1,candleWidth:5}},s.extend(s.ChartEngine.prototype,h),s.ChartEngine.NONE=0,s.ChartEngine.CLOSEUP=1,s.ChartEngine.CLOSEDOWN=2,s.ChartEngine.CLOSEEVEN=4,e.s3C(11),s.ChartEngine.CANDLEUP=e.s8L("8",0),s.ChartEngine.CANDLEDOWN=16,s.ChartEngine.CANDLEEVEN=32};es=W=>{var e;e=W.CIQ,e.convertFutureMonth=function(t){var a;if(a=t.toString(),a.length<=0||a.length>"2"*1)return"";switch(J.p4Q(),a){case"1":return"F";case"2":return"G";case"3":return"H";case"4":return"J";case"5":return"K";case"6":return"M";case"7":return"N";case"8":return"Q";case"9":return"U";case"10":return"V";case"11":return"X";case"12":return"Z";case"F":return"1";case"G":return"2";case"H":return"3";case"J":return"4";case"K":return"5";case"M":return"6";case"N":return"7";case"Q":return"8";case"U":return"9";case"V":return"10";case"X":return"11";case"Z":return"12"}return a},e.money=function(t,a,r){return J.h8g(),r||(r="$"),r.length==3&&(r+=" "),!a&&a!==0&&(a=2),r+e.commas((Math.round(t*1e4)/("10000"*1)).toFixed(a))},e.convertCurrencyCode=function(t){var a,r,i,n,s,h,o,l,u,c,p,y,d,g,b,f;return a="C",a+="F",a+="A",r="FC",r+="F",r+="A",i="N",i+="T",i+="$",n="S",n+="$",s="",s+="",h="N",h+="Z$",o="k",o+="r",l="MX",l+="$",u="F",u+="t",c="H",J.h8g(),c+="K",c+="$",p="C",p+="N",p+="",y="CA",y+="$",d="R",d+="$",g="A",g+="$",b={JPY:"",USD:"$",AUD:g,BRL:d,CAD:y,CNY:p,CZK:"K",DKK:"kr",EUR:"",GBP:"",HKD:c,HUF:u,ILS:"",INR:"",KRW:"",MXN:l,NOK:o,NZD:h,PLN:"z",RUB:s,SAR:"",SEK:"kr",SGD:n,THB:"",TRY:"",TWD:i,VND:"",XAF:r,XCD:"EC$",XOF:a,XPF:"CFPF",ZAR:"R"},f=b[t],f||t},e.commas=function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},e.cleanPeriodicity=function(t,a,r){var i=J,n,s,h,o,l,u,c;if(n="h",n+="our",s="t",s+="i",s+="c",s+="k",isNaN(t)&&(t=1),a||(a=1),!isNaN(a)&&r?(h="se",h+="cond",o="ho",o+="ur",r==o||r=="minute"||r==h||r=="millisecond"||(a=r,r=null)):a==s?r=null:!r&&!isNaN(a)&&(r="minute"),r==n&&(r="minute",i.s3C(46),a=i.s8L(a,60)),a=="year"){a="month",l=-1925569054,u=966735763,c=2;for(var p=1;i.D1T(p.toString(),p.toString().length,79443)!==l;p++)t||(t=1),i.s3C(46),t=i.s8L(t,12),i.s1t(56),c+=i.g5k(96,"2");i.D1T(c.toString(),c.toString().length,93267)!==u&&(+t&&(t=5),i.s1t(92),t=i.s8L(36,t))}return{period:t,interval:a,timeUnit:r}},e.readablePeriodicity=function(t){var a,r,i,n;return a="numbe",a+="r",r="n",r+="um",r+="be",r+="r",i=t.layout.periodicity,n=t.layout.interval,typeof t.layout.interval==r&&t.layout.timeUnit?(i=t.layout.interval*t.layout.periodicity,n=t.layout.timeUnit):typeof t.layout.interval==a&&!t.layout.timeUnit&&(i=t.layout.interval*t.layout.periodicity,n="minute"),i%60===0&&n=="minute"&&(i/=60,n="hour"),i+" "+t.translateIf(e.capitalize(n))},e.fixPrice=function(t){var a;if(!t&&t!=="0"<<0)return null;a=t.toFixed(10);for(var r=a.length-1;r>1&&a.charAt(r)=="0";r--);return J.h8g(),J.s3C(22),a=a.substring(0,J.g5k(r,1)),parseFloat(a)},e.condenseInt=function(t){var a=J,r,i;if(r="unde",r+="f",r+="ined",t===null||typeof t==r)return"";if(t===1/0||t===-1/0)return"n/a";if(a.s1t(93),i=a.g5k(t,0),isNaN(t))t=t.toString();else if(t=Math.abs(t),t>1e12){a.s1t(16);var n=a.g5k(5,51,19,16);a.s3C(11);var s=a.s8L(16100,8050);a.s1t(94);var h=a.g5k(8,8244,6);a.s1t(9),a.s8L(8796,20,30),a.s3C(9),a.s8L(2008,11,6036),a.s1t(95);var o=a.g5k(1114,20,17245,17,15);a.s1t(17);var l=a.g5k(449,3408,14,19);a.s3C(96),a.s8L(16,1954,9,6,15615),a.s1t(22),a.s8L(58,348),t=Math.round(t/1e11)/n+(s>=h?o<l?"Z":"T":"t")}else if(t>1e11){a.s3C(61);var u=a.g5k(4,3,5000000001,6e9);a.s3C(22);var c=a.s8L(940,8);a.s3C(9);var p=a.s8L(1818,7,15);a.s1t(38),a.g5k(9240,1,2,4627),a.s3C(97);var y=a.g5k(5067,5,509,5085,13);a.s3C(65);var d=a.s8L(6,1691,2034);a.s3C(22),a.g5k(49,48),a.s3C(11);var g=a.g5k(50512,43296);a.s3C(65);var b=a.s8L(320,2888,2880);t=Math.round(t/u)+(c===p?"Q":y==d?(g>=b,!1):"b")}else if(t>"10000000000"-0)t=(Math.round(t/1e8)/10).toFixed("1"^0)+"b";else if(t>1e9){a.s1t(98);var f=a.s8L(12,16,183,11);a.s1t(94),a.g5k(8,16744,12550),a.s3C(11);var m=a.g5k(48e3,44800);a.s1t(95),a.g5k(8998,3,98780,12,15),a.s3C(16);var C=a.g5k(12,436e3,10,36950);a.s3C(65),a.g5k(2365,472,2365),a.s3C(38);var S=a.g5k(320,4,5,48);a.s3C(11);var w=a.s8L(13826,6913);a.s1t(9);var k=a.s8L(8890,2,22);a.s1t(11);var D=a.s8L(2469,19);t=(Math.round(t/1e7)/100).toFixed(f)+(m===475.88?C!=921.18?334.37>="6570"<<S?w:k:D:"b")}else if(t>1e8){a.s3C(29);var v=a.g5k(7e6,3,1333337,19,10);t=Math.round(t/v)+"m"}else if(t>1e7){a.s1t(22);var x=a.s8L(0,1);a.s1t(22);var A=a.g5k(1856,7424);a.s1t(99);var T=a.g5k(7,649,20,8400,9);t=(Math.round(t/1e5)/10).toFixed(x)+(A<T?!1:"m")}else if(t>1e6){a.s3C(32);var _=a.g5k(18,20,358);a.s3C(11),a.s8L(7618,8),a.s3C(55);var L=a.g5k(21,13,28);a.s1t(73);var M=a.g5k(3,448,1789,1773);a.s1t(11);var F=a.g5k(4,3);a.s1t(11);var P=a.g5k(9513,3);t=(Math.round(t/1e4)/100).toFixed(_)+(962.32>=("3070"|L)?!0:M>="3530"*F?P:"m")}else if(t>1e5){a.s3C(58);var E=a.s8L(5,11,991,1,15);t=Math.round(t/E)+"k"}else if(t>1e4){a.s1t(100);var O=a.s8L(6,8,1);a.s3C(11);var I=a.g5k(19760,17290);a.s3C(17),a.g5k(337,552,11,19),t=(Math.round(t/100)/("10"|10)).toFixed(O)+(1166>=I?"V":"k")}else if(t>1e3){a.s1t(14);var B=a.s8L(4,16,2);a.s1t(22);var N=a.g5k(3155,5);a.s3C(101);var R=a.s8L(11,20,3723,411,14);a.s3C(25);var q=a.g5k(16,8,57410,17,3579);t=(Math.round(t/10)/100).toFixed(B)+(N===R?"p":q<=1009?"i":"k")}else t=t.toString();return i&&(a.s3C(22),t=a.g5k("-",t)),t},e.calculateTradingDecimalPlaces=function(t){var a=J,r,i,n,s,h,o,l,u,c,p;if(r=t.chart,i=2,a.s3C(91),a.p4Q(),n=a.g5k(16,"50"),s=r.masterData,s&&s.length>n){for(var y=2;y<n&&(h=s.length-y,!(h<0));y++)if(o=s[h],o.Close&&typeof o.Close=="number"&&(l=o.Close.toString(),u=l.indexOf("."),u!=-1)){a.s1t(0);var d=a.g5k(4,5);c=l.length-u-d,c>i&&(i=c)}}return p=r.yAxis.maxDecimalPlaces,i>p&&p!==null&&(i=p),i},e.minMax=function(t,a,r,i){var n,s,h,o,l,u,c,p,y;n=Number.MAX_VALUE,J.s1t(9),J.h8g();var d=J.g5k(0,6,5);s=Number.MAX_VALUE*d,r||(r="Close"),h=i?"High":r,o=i?"Low":r;for(var g=0;g<t.length;g++)l="ob",l+="jec",l+="t",u="ob",u+="ject",c=t[g],c&&(p=c[a],!(!p&&p!==0)&&(y=p,typeof p===u&&(y=p[h]),!isNaN(y)&&(y||y===0)&&(s=Math.max(s,y)),typeof p===l&&(y=p[o]),!isNaN(y)&&(y||y===0)&&(n=Math.min(n,y))));return[n,s]},e.symbolEqual=function(t,a){var r,i;return!t||!a?!1:(typeof t!="object"&&(t={symbol:t}),J.p4Q(),typeof a!="object"&&(a={symbol:a}),typeof t.equals=="function"?t.equals(a):(r=t.symbol,i=a.symbol,r&&(r=r.toUpperCase()),i&&(i=i.toUpperCase()),!(r!=i||t.source!=a.source)))},e.addMemberToMasterdata=function(t){var a=J,r,i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L;t.constructor===e.ChartEngine&&(t={stx:arguments[0],label:arguments[1],data:arguments[2],fields:arguments[3],createObject:arguments[4],fieldForLabel:arguments[5]}),r=t.stx,i=t.label,n=t.data,s=t.fields,a.p4Q();function M(N,R){a.h8g();var q,Y;if(!N||typeof N!="object")return N=R,N;q={Close:N.Close,High:N.High,Low:N.Low,Open:N.Open,Volume:N.Volume},N=R;for(var z in q)Y="n",Y+="umb",Y+="er",N.Close===null?N[z]!==void 0&&(N[z]=null):typeof N[z]!==Y?N[z]=q[z]:typeof q[z]=="number"&&(z=="Open"?N.Open=q.Open:z=="Low"&&N.Low>q.Low?N.Low=q.Low:z=="High"&&N.High<q.High?N.High=q.High:z=="Volume"&&(N.Volume+=q.Volume));return N}h=t.createObject,o=t.fieldForLabel,l=t.chart?t.chart:r.chart,t.noCleanupDates||r.doCleanupDates(n,r.layout.interval),u=[],r.getSeries&&(u=r.getSeries({symbol:i,chart:l})),n&&n.constructor==Object&&(n=[n]);function F(N,R){var q,Y,z,V,K,Q;if(s&&s.length)if(s[0]=="*")e.extend(N,R);else for(var j=0;j<s.length;j++)N[s[j]]=R[s[j]];else if(h){if(q="n",q+="umber",Y="ag",Y+="grega",Y+="t",Y+="e",R.Value!==void 0){N[i]=R.Value;return}else h==Y?N[i]=M(N[i],R):N[i]=R;z=N[i],typeof z.Close=="number"&&(V="numb",V+="e",V+="r",typeof z.Open!="number"&&(z.Open=z.Close),K=Math.max(z.Open,z.Close),Q=Math.min(z.Open,z.Close),(typeof z.High!=V||z.High<K)&&(z.High=K),(typeof z.Low!="number"||z.Low>Q)&&(z.Low=Q)),z.Volume&&typeof z.Volume!==q&&(z.Volume=parseInt(z.Volume,10))}else o?N[i]=R[o]:m&&f&&R[f]!==void 0?N[i]=R[f]:d.adj&&R.Adj_Close!==void 0?N[i]=R.Adj_Close:R.Close!==void 0?N[i]=R.Close:R.Value!==void 0?N[i]=R.Value:N[i]=R[i]}if(!n||!n.length)return;for(c=0,p=0,y=l.masterData,d=r.layout,y||(y=[]),f=l&&l.defaultPlotField||null,m=r.mainSeriesRenderer&&!r.mainSeriesRenderer.highLowBars,C=d.chartType,!m&&C&&(S=e.Renderer.produce(C,{}),S&&(m=!S.highLowBars)),w=e.yyyymmddhhmmssmmm;n&&c<y.length&&p<n.length;){if(b=n[p],g=y[c],!b.DT||typeof b.DT>"u"?b.DT=e.strToDateTime(b.Date):(k="num",k+="ber",typeof b.DT==k&&(b.DT=new Date(b.DT)),(!b.Date||b.Date.length!=("17"|17))&&(b.Date=w(b.DT))),p===0)for(var P=0;P<u.length;P++)(!u[P].endPoints.begin||u[P].endPoints.begin>b.DT)&&(u[P].endPoints.begin=b.DT);if(+b.DT==+g.DT){F(g,b),p++,c++;continue}b.DT<g.DT?y.splice(c,0,{DT:b.DT,Date:b.Date}):B(b.DT)}if(c>=y.length)for(;n&&p<n.length;)b=n[p],!b.DT||typeof b.DT>"u"?b.DT=e.strToDateTime(b.Date):(D="nu",D+="m",D+="be",D+="r",typeof b.DT==D&&(b.DT=new Date(b.DT)),(!b.Date||b.Date.length!=17)&&(b.Date=w(b.DT))),g={DT:b.DT,Date:b.Date},F(g,b),y.push(g),p++;if(t.fillGaps&&y.length){v=44954753,x=1642191403,A=2;for(var E=1;a.u6e(E.toString(),E.toString().length,49156)!==v;E++)T={noCleanupDates:!1,cleanupGaps:t.fillGaps},A+=2;if(a.u6e(A.toString(),A.toString().length,"19871"^0)!==x&&(T={noCleanupDates:!1,cleanupGaps:t.fillGaps}),T={noCleanupDates:!0,cleanupGaps:t.fillGaps},s)for(var O=0;O<s.length;O++)T.field=s[O],r.doCleanupGaps(y,l,T);else T.field=i,r.doCleanupGaps(y,l,T)}for(var I=0;I<u.length;I++)_=u[I].endPoints,(!_.end||!i||_.end<=g[i].DT)&&(_.end=i?g[i].DT:g.DT,L=i||u[I].parameters&&u[I].parameters.field||l.defaultPlotField,u[I].lastQuote=r.getFirstLastDataRecord(y,L,!0));function B(N){var R,q,Y;a.h8g(),R=c,a.s1t(11);var z=a.g5k(17,16);if(q=y.length-z,y[q].DT<N){a.s1t(22),c=a.g5k(q,1);return}else if(+y[q].DT==+N){c=q;return}for(c++,Y=0;++Y<("100"^0);){switch(V()){case 0:return;case 1:R=c;break;case-1:q=c;break}a.s3C(49),c=Math.round(a.g5k(2,q,R))}Y>=100&&(console.log("!!!Warning: addMemberToMasterdata() did not find insertion point."),c=y.length-1);function V(){return+y[c].DT==+N?0:y[c].DT<N?(a.s1t(91),a.s8L(1,"1")):y[c-"1"*1].DT>N?-1:(+y[c-"1"*1].DT==+N&&c--,a.s3C(91),a.g5k(0,"0"))}}r.setMasterData(y,l,{noCleanupDates:!0})}};ts=W=>{var e=J,t;t=W.CIQ,t.xor=function(a,r){var i,n;return i=!a,n=!r,e.s3C(90),e.h8g(),e.s8L(n,i)},t.round=function(a,r){return e.h8g(),+(Math.round(a+"e"+r)+"e-"+r)},t.countDecimals=function(a){var r;if(typeof a!="number"||isNaN(a)||Math.floor(a)===Number(a))return 0;if(r=a.toString().split("e-"),r.length>1){e.s1t(102);var i=e.g5k(129,8,16,1);return t.countDecimals(Number(r[0]))+Number(r[i])}return e.h8g(),r[0].indexOf(".")>-1?r["0"-0].split(".")[1].length:0},t.isValidNumber=function(a){return e.p4Q(),isFinite(a)&&+a===a},t.log10=function(a){return e.p4Q(),Math.log(a)/Math.LN10},t.boxIntersects=function(a,r,i,n,s,h,o,l,u){var c,p,y,d,g,b;if(arguments[9]!==void 0&&console.warn("CIQ.boxIntersects() no longer supports isLog argument, please be sure arguments are passed in as pixels."),c=Math.min(a,i),p=Math.max(a,i),y=Math.min(r,n),d=Math.max(r,n),e.s1t(103),g=e.s8L("ray",u),isNaN(s)||isNaN(o)||isNaN(h)||isNaN(l)||u!="line"&&(s<c&&o<c&&(!g||s>o)||s>p&&o>p&&(!g||s<o)||h<y&&l<y&&(!g||h>l)||h>d&&l>d&&(!g||h<l))||(b={a:f(a,r),b:f(a,n),c:f(i,r),d:f(i,n)},b.a>0&&b.b>"0"-0&&b.c>0&&b.d>0))return!1;function f(m,C){return e.s3C(104),e.h8g(),e.g5k(s,C,o,l,s,m,h,h)}return!(b.a<0&&b.b<0&&b.c<0&&b.d<0)},t.linesIntersect=function(a,r,i,n,s,h,o,l,u){var c,p,y,d,g,b,f,m;if(c="r",c+="a",c+="y",p="ver",p+="ti",p+="cal",y="seg",y+="ment",e.s3C(104),d=e.s8L(a,l,r,n,s,h,i,o),e.s3C(104),g=e.g5k(o,h,i,a,o,l,s,s),e.s3C(104),b=e.g5k(o,r,i,a,i,n,s,a),d===0)return g===0&&b===0;if(e.s1t(30),f=e.s8L(g,d),e.s1t(30),m=e.g5k(b,d),u==y){if(f>=0&&f<=1&&m>=0&&m<=1)return!0}else if(u=="line"||u=="horizontal"||u==p){if(f>=0&&f<="1"*1)return!0}else if(u==c&&f>=0&&f<=1&&m>=0)return!0;return!1},t.yIntersection=function(a,r){var i,n,s,h,o,l,u,c,p,y,d,g,b,f,m;if(i=a.x0,n=a.x1,s=r,h=r,o=a.y0,l=a.y1,e.s1t(20),u=e.g5k("0",0),c=1e4,e.s3C(104),p=e.s8L(i,c,n,l,s,h,o,u),e.s3C(104),y=e.s8L(u,h,o,i,u,c,s,s),e.s1t(30),d=e.s8L(y,p),p===0){g=2014089254,b=1785133564,f=2;for(var C="1"-0;e.D1T(C.toString(),C.toString().length,"62965"<<0)!==g;C++){if(y===0)d=1;else return null;f+=2}if(e.D1T(f.toString(),f.toString().length,79054)!==b)if(y!=6)d=8;else return 1}return e.s1t(105),m=e.s8L(o,d,l,o),m},t.xIntersection=function(a,r){var i,n,s,h,o,l,u,c,p,y,d,g;if(i=a.x0,n=a.x1,s=0,h=1e4,o=a.y0,l=a.y1,u=r,c=r,e.s3C(104),p=e.g5k(i,c,n,l,s,h,o,u),e.s3C(104),y=e.s8L(u,h,o,i,u,c,s,s),e.s1t(30),d=e.g5k(y,p),p===0)if(y===0)d=1;else return null;return e.s1t(105),g=e.g5k(i,d,n,i),g},t.intersectLineLineX=function(a,r,i,n,s,h,o,l){var u,c,p;return e.s3C(104),u=e.g5k(o,h,i,a,o,l,s,s),e.s1t(104),c=e.g5k(a,l,r,n,s,h,i,o),e.s3C(30),p=e.g5k(u,c),e.s1t(105),e.s8L(a,p,r,a)},e.h8g(),t.intersectLineLineY=function(a,r,i,n,s,h,o,l){e.p4Q();var u,c,p,y,d,g;e.s3C(104),u=e.g5k(o,h,i,a,o,l,s,s),e.s3C(104),c=e.g5k(a,l,r,n,s,h,i,o),p=32870011,y=927934943,d=2;for(var b="1"<<32;e.D1T(b.toString(),b.toString().length,69763)!==p;b++)return e.s3C(22),g=e.s8L(u,c),e.s1t(106),e.g5k(i,i,n,g);if(e.D1T(d.toString(),d.toString().length,14195)!==y)return e.s1t(30),g=e.s8L(u,c),e.s1t(105),e.g5k(i,g,n,i)}};is=W=>{var e=J,t;t=W.CIQ,t.deleteRHS=function(a,r){var i;i=!1,e.h8g();for(var n in a)a[n]==r&&(delete a[n],i=!0);return i},t.scrub=function(a,r){var i;e.p4Q();for(var n in a)i="u",i+="n",i+="defined",typeof a[n]==i&&delete a[n],r&&a[n]===null&&delete a[n]},t.dataBindSafeAssignment=function(a,r){t.extend(a,r),e.p4Q();for(var i in a)typeof r[i]>"u"&&(a[i]=void 0)},t.clone=function(a,r){var i,n;if(i="obje",e.h8g(),i+="ct",a===null||typeof a!=i)return a;if(n=a.constructor,n==Date||n==RegExp||n==String||n==Number||n==Boolean)return new n(a.valueOf());if(n==Function)return function(){return e.p4Q(),a.apply(this,arguments)};if(!r)try{r=new n}catch{r=Object.create(Object.getPrototypeOf(a))}for(var s in a)r[s]=r[s]!==a[s]?t.clone(a[s],null):r[s];return r},t.shallowClone=function(a){var r;if(!a)return a;if(a.constructor==Array){r=new Array(a.length);for(var i=0;i<a.length;i++)r[i]=a[i];return r}r={};for(var n in a)r[n]=a[n];return r},t.ensureDefaults=function(a,r){for(var i in r)typeof a[i]>"u"&&(a[i]=r[i]);return e.h8g(),a},t.transferObject=function(a,r){var i;for(i in a)a.hasOwnProperty(i)&&delete a[i];for(i in r)r.hasOwnProperty(i)&&(a[i]=r[i]);return a},e.p4Q(),t.equals=function(a,r,i){var n;if(a===r)return!0;if(!a&&r||a&&!r||typeof a!=typeof r)return!1;n=[...new Set(Object.keys(a).concat(Object.keys(r)))];for(var s of n)if(!(i&&i[s])){if(typeof a[s]=="object"){if(t.equals(a[s],r[s]))continue;return!1}if(r[s]!=a[s])return!1}return!0},t.isEmpty=function(a){for(var r in a)if(a.hasOwnProperty(r))return!1;return!0},t.first=function(a){for(var r in a)return r;return null},t.last=function(a){var r;r=null;for(var i in a)r=i;return r},t.objLength=function(a){e.h8g();var r;if(!a)return 0;e.s3C(11),r=e.s8L("0",0);for(var i in a)r++;return r},t.deriveFromObjectChain=function(a,r){var i,n;if(r.indexOf(".")==-1)return{obj:a,member:r};i=r.split(".");for(var s=0;s<i.length-1;s++)n=i[s],!a[n]&&a[n]!==0&&(a[n]={}),a=a[n];return e.h8g(),{obj:a,member:i[s]}},t.createObjectChainNames=function(a,r){var i,n;i=[];for(var s=0;s<r.length;s++)n="-",n+="->",i.push(a+n+r[s]);return i},t.getObjectChainRoot=function(a){return a?a.split("-->")[0]:null},t.existsInObjectChain=function(a,r){var i,n,s;if(i="-",i+="-",i+=">",r.indexOf(i)==-1)return n=a[r],!n&&n!==0?null:{obj:a,member:r};s=r.split("-->");for(var h=0;h<s.length;h++){if(n=a[s[h]],!n&&n!==0)return null;if(h<s.length-1)a=n;else return{obj:a,member:s[h]}}},t.derivedFrom=function(a,r){return!!(r.isPrototypeOf(a)||a instanceof r)},t.replaceFields=function(a,r){var i,n,s,h,o;if(!a)return a;i={};for(var l in a)if(n=a[l],s=r[l],s||(s=l),n&&typeof n=="object")if(n.constructor==Array){h=i[s]=new Array(n.length);for(var u=0;u<h.length;u++)o=n[u],typeof o=="object"?h[u]=t.replaceFields(o,r):h[u]=o}else i[s]=t.replaceFields(n,r);else i[s]=n;return i},t.removeNullValues=function(a){var r;r=t.clone(a);for(var i in r)r[i]||delete r[i];return r},t.reverseObject=function(a){e.h8g();var r;r={};for(var i in a)r[a[i]]=i;return r},t.getFromNS=(a,r,i)=>{e.h8g();var n,s,h;if(a){n=a,s=r.split(".");for(var o=0;o<s.length&&(h=s[o],!(typeof n[h]>"u"));o++)n=n[h];if(o===s.length)return n}return i},t.getFnFromNS=(a,r,i)=>(e.h8g(),t.getFromNS(a,r,function(){return i})),t.get=(a,r)=>t.getFromNS(t,a,r),t.getFn=(a,r)=>t.getFromNS(t,a,function(){return e.p4Q(),r})};rs=W=>{var e;e=W.CIQ,e.Plotter=function(){this.seriesArray=[],this.seriesMap={}},e.extend(e.Plotter.prototype,{Series:function(t,a,r,i,n,s){this.name=t,this.strokeOrFill=a,this.color=r,this.moves=[],this.text=[],(!i||i>1||i<0)&&(J.s1t(11),i=J.g5k("1",0)),this.opacity=i,(!n||n>25||n<1)&&(n=1),this.width=n,this.pattern=e.borderPatternToArray(n,s)},newSeries:function(t,a,r,i,n){var s;r.constructor==String?s=new this.Series(t,a,r,i,n):s=new this.Series(t,a,r.color,r.opacity,n>=0?n:e.stripPX(r.width),r.borderTopStyle),this.seriesArray.push(s),this.seriesMap[t]=s},reset:function(t){J.p4Q();var a;for(var r in this.seriesMap)t&&t!=r||(a=this.seriesMap[r],a&&(a.moves=[],a.text=[]))},moveTo:function(t,a,r){var i;i=this.seriesMap[t],i.moves.push({action:"moveTo",x:a,y:r})},lineTo:function(t,a,r){J.p4Q();var i,n,s;i="li",i+="n",i+="e",i+="To",n=this.seriesMap[t],s=n.pattern,n.moves.push({action:i,x:a,y:r,pattern:s})},dashedLineTo:function(t,a,r,i){J.p4Q();var n;n=this.seriesMap[t],n.moves.push({action:"lineTo",x:a,y:r,pattern:i})},quadraticCurveTo:function(t,a,r,i,n){var s,h,o;s="quad",s+="raticCurveTo",h=this.seriesMap[t],o=h.pattern,h.moves.push({action:s,x0:a,y0:r,x:i,y:n,pattern:o})},bezierCurveTo:function(t,a,r,i,n,s,h){J.p4Q();var o,l;o=this.seriesMap[t],l=o.pattern,o.moves.push({action:"bezierCurveTo",x0:a,y0:r,x1:i,y1:n,x:s,y:h,pattern:l})},addText:function(t,a,r,i,n,s,h){var o;o=this.seriesMap[t],J.h8g(),o.text.push({text:a,x:r,y:i,bg:n})},drawText:function(t,a){for(var r,i,n,s,h=0;h<a.text.length;h++)r=a.text[h],r.bg&&(i=r.width?r.width:t.measureText(r.text).width,n=r.height?r.height:12,s=t.fillStyle,t.fillStyle=r.bg,t.textAlign=="right"?t.fillRect(r.x,r.y-n/2,-i,-n):t.fillRect(r.x,r.y-n/2,i,n),t.fillStyle=s),t.fillText(r.text,r.x,r.y)},draw:function(t,a){var r,i,n,s,h,o,l,u,c,p;r=t.lineWidth,i=t.fillStyle,n=t.strokeStyle,s=t.globalAlpha;for(var y=0;y<this.seriesArray.length;y++)if(h="f",h+="ill",o=this.seriesArray[y],!(a&&o.name!=a)){t.beginPath(),t.lineWidth=o.width,t.globalAlpha=o.opacity,t.fillStyle=o.color,t.strokeStyle=o.color,t.save(),l=[0,0];for(var d=0;d<o.moves.length;d++)u=o.moves[d],u.pattern||(u.pattern=[]),JSON.stringify(t.getLineDash())!==JSON.stringify(u.pattern)&&(c="f",c+="i",c+="ll",p="f",p+="ill",t[o.strokeOrFill==p?c:"stroke"](),t.beginPath(),t.moveTo(l[0],l[1])),t.setLineDash(u.pattern),t.lineDashOffset=0,u.action=="quadraticCurveTo"?t[u.action](u.x0,u.y0,u.x,u.y):u.action=="bezierCurveTo"?t[u.action](u.x0,u.y0,u.x1,u.y1,u.x,u.y):t[u.action](u.x,u.y),l=[u.x,u.y];t[o.strokeOrFill=="fill"?h:"stroke"](),t.closePath(),t.restore(),this.drawText(t,o),t.lineWidth=1}t.lineWidth=r,t.fillStyle=i,t.strokeStyle=n,t.globalAlpha=s}},!0)};as=W=>{var e;e=W.CIQ,e.Renderer=function(){},e.Renderer.produce=function(t,a){J.p4Q();var r,i,n;if(r="lin",r+="e",i=null,t){for(var s in e.Renderer)if(n=e.Renderer[s],n.requestNew&&(i=n.requestNew(t.split("_"),a)),i)return i}return a.type=r,new e.Renderer.Lines({params:a})},e.Renderer.colorFunctions={},e.Renderer.registerColorFunction=function(t,a){J.p4Q(),e.Renderer.colorFunctions[t]=a},e.Renderer.unregisterColorFunction=function(t){J.p4Q(),delete e.Renderer.colorFunctions[t]},e.Renderer.prototype.init={},e.Renderer.prototype.adjustYAxis=function(){},e.Renderer.prototype.draw=function(){},e.Renderer.prototype.drawIndividualSeries=function(t,a){},e.Renderer.prototype.construct=function(t){var a;t||(t={}),a=t.params?t.params:{},this.init&&e.ensureDefaults(a,this.init),a.name||(a.name=e.uniqueID()),a.heightPercentage||(a.heightPercentage=.7),a.opacity||(a.opacity=1),a.highlightable!==!1&&(a.highlightable=!0),a.panel||(a.panel="chart"),a.yAxis&&(a.yAxis=new e.ChartEngine.YAxis(a.yAxis),a.yAxis.name||(a.yAxis.name=a.name)),J.h8g(),this.cb=t.callback,this.params=a,this.seriesParams=[],this.caches={},this.colors={}},e.Renderer.prototype.attachSeries=function(t,a){var r=J,i,n,s,h,o,l,u,c,p,y,d,g,b;if(i="au",i+="to",n=this.stx,!n)return this;if(s=n.chart.series[t],s||(s={parameters:{}}),h=this.params,o=s.parameters,l={id:t,chartType:h.type,display:o.display,border_color_up:h.defaultBorders?i:null,fill_color_up:o.color,opacity_up:h.opacity,border_color_down:h.defaultBorders?"auto":null,fill_color_down:o.color,opacity_down:h.opacity,color:o.color,symbol:o.symbol,symbolObject:e.clone(o.symbolObject)},typeof a=="string")l.color=l.fill_color_down=l.fill_color_up=a;else if(typeof a=="object"){for(var f in a)l[f]=a[f];u=l.color,c=l.border_color,u&&(l.fill_color_up||(l.fill_color_up=u),l.fill_color_down||(l.fill_color_down=u),l.fill_color_even||(l.fill_color_even=u)),c&&(l.border_color_up||(l.border_color_up=c),l.border_color_down||(l.border_color_down=c),l.border_color_even||(l.border_color_even=c))}for(l.symbol&&l.field!=l.symbol&&(l.subField=l.field,l.field=l.symbol),l.id||(l.id=e.uniqueID()),p=0;p<this.seriesParams.length;++p)if(this.seriesParams[p].id===l.id){this.removeSeries(l.id,!0);break}return this.seriesParams.splice(p,0,l),l.fill_color_up!=l.fill_color_down?(y=" do",y+="wn",d=" ",d+="u",d+="p",r.s1t(22),this.colors[r.g5k(t," up")]={color:l.fill_color_up,opacity:l.opacity_up,display:l.display?l.display+" up":t+d},r.s1t(22),this.colors[r.s8L(t," dn")]={color:l.fill_color_down,opacity:l.opacity_down,display:l.display?l.display+y:t+" down"}):this.colors[t]={color:l.fill_color_up,opacity:l.opacity_up,display:l.display?l.display:t},g=h.panel,n.panels[g]?h.yAxis?(h.yAxis=n.addYAxis(n.panels[g],h.yAxis),h.yAxis.needsInitialPadding=!0,o.yAxis=h.yAxis,n.resizeChart()):l.yAxis&&(h.yAxis=l.yAxis):(b=h.yAxis,b||(b=new e.ChartEngine.YAxis,b.needsInitialPadding=!0),b.name=g,n.createPanel(g,g,null,null,b)),r.p4Q(),this},e.Renderer.prototype.removeSeries=function(t,a){var r=J;r.h8g();var i,n,s,h,o,l,u,c,p;i=" ",i+="d",i+="n",n=null,s=!1,h=this.stx,o=h.chart;for(var y in o.seriesRenderers){l=o.seriesRenderers[y];for(var d=0;d<l.seriesParams.length;d++)u=l.seriesParams[d],u.id==t&&this===l?n=d:u.isComparison&&u.panel==o.panel.name&&(!u.yAxis||u.yAxis==o.yAxis)&&(s=!0)}if(n!==null&&(o.forcePercentComparison&&!s&&this.seriesParams[n].isComparison&&h.layout.chartScale!="linear"&&h.setChartScale(),this.seriesParams.splice(n,1)),r.s1t(22),delete this.colors[r.g5k(t," up")],r.s1t(22),delete this.colors[r.s8L(t,i)],delete this.colors[t],!a){for(var g in o.seriesRenderers){p=o.seriesRenderers[g];for(var b=0;b<p.seriesParams.length;b++){if(p.seriesParams[b].id==t){c=!0;break}c=!1}if(c)break}(c===!1||n!==null)&&h.deleteSeries&&h.deleteSeries(t,o)}return h.deleteYAxisIfUnused(h.panels[this.params.panel],this.params.yAxis),h.resizeChart(),this},e.Renderer.prototype.modifyRenderer=function(t){var a;this.params;var{stx:r}=this;for(var i in t)switch(a=t[i],i){case"baseline":a?(typeof a=="object"&&(this.params.baseline=e.ensureDefaults(a,e.ChartEngine.Chart.prototype.baseline)),r.registerBaselineToHelper(this)):r.removeBaselineFromHelper(this);break;case"type":this.params.type=a;break;case"style":this.params.style=a;break}},e.Renderer.prototype.getDependents=function(t){var a,r;J.h8g(),a=[];for(var i in t.chart.seriesRenderers)r=t.chart.seriesRenderers[i],r.params.dependentOf==this.params.name&&a.push(r);return a},e.Renderer.prototype.undraggable=function(t){return this==t.mainSeriesRenderer?!0:(J.h8g(),this.params.dependentOf==t.mainSeriesRenderer.params.name)},e.Renderer.prototype.removeAllSeries=function(t){J.p4Q();var a;if(t||this===this.stx.mainSeriesRenderer){a=[];for(var r=0;r<this.seriesParams.length;r++)a.push(this.seriesParams[r].id);for(var i=0;i<a.length;i++)this.removeSeries(a[i])}return this.seriesParams=[],this.colors={},this.stx.deleteYAxisIfUnused(this.stx.panels[this.params.panel],this.params.yAxis),this.stx.resizeChart(),this},e.Renderer.prototype.getYAxis=function(t){var a,r;if(this.params)if(this.params.yAxis)a=this.params.yAxis;else{if(r=t.panels[this.params.panel],!r)return!1;a=r.yAxis}else a=t.chart.panel.yAxis;return a},e.Renderer.prototype.ready=function(){return this.stx.createDataSet(),this.stx.draw(),this},e.Renderer.Lines=function(t){var a,r,i;a="li",a+="n",a+="e",this.construct(t);var{params:n}=this;if(n.type||(n.type=a),!n.style)switch(r="s",r+="tx_colored_mount",r+="ain_c",r+="hart",i="stx_base",i+="line_delta_",i+="mountain",n.type){case"mountain":n.baseline?n.style=i:n.colored?n.style=r:n.style="stx_mountain_chart";break;default:n.style="stx_line_chart"}this.supportsAnimation=!0,n.type=="wave"||n.type=="channel"?(n.step=n.vertex=n.baseline=n.colored=!1,this.highLowBars=this.barsHaveWidth=!0,this.supportsAnimation=!1):n.type=="step"&&(n.step=!0);var{baseline:s}=n;s&&typeof s=="object"&&e.ensureDefaults(n.baseline,e.ChartEngine.Chart.prototype.baseline)},e.inheritsFrom(e.Renderer.Lines,e.Renderer,!1),e.Renderer.Lines.requestNew=function(t,a){var r,i,n,s,h,o,l,u,c,p,y,d;r=null,i=a.step,n=a.colored,s=a.baseline,h=a.vertex;for(var g=0;g<t.length;g++)switch(o="de",o+="l",o+="t",o+="a",l="s",l+="t",l+="ep",u="base",u+="line",c="cha",c+="n",c+="n",c+="el",p="w",p+="a",p+="v",p+="e",y="m",y+="ou",y+="ntai",y+="n",d=t[g],d){case"line":case y:case p:case c:r=d;break;case u:s=!0;break;case"colored":n=!0;break;case l:i=!0;break;case"vertex":h=!0;break;case o:break;default:return null}return r===null&&!s&&!i?null:new e.Renderer.Lines({params:e.extend(a,{type:r,step:i,colored:n,baseline:s,vertex:h})})},e.Renderer.Lines.prototype.draw=function(){var t,a,r,i,n,s,h,o,l,u,c,p;t=this.stx,a=this.stx.panels[this.params.panel],r=a.chart,i={};function y(g){var b,f,m,C,S;return b="stx_",b+="line_do",b+="w",b+="n",J.h8g(),f="s",f+="tx_line_u",f+="p",m=g.fill_color_up||t.getCanvasColor(f),C=g.fill_color_down||t.getCanvasColor(b),S=g.color||t.getCanvasColor("stx_line_chart"),function(w,k,D){return J.p4Q(),!k.iqPrevClose&&k.iqPrevClose!==0?S:k.Close>k.iqPrevClose?m:k.Close<k.iqPrevClose?C:S}}for(s=this.seriesParams,h=this.params.colorFunction,n=0;n<s.length;n++){if(o=s[n],this.params.colored){l=["_color_up","_color_down","_color"];for(var d=0;d<l.length;d++)u="bo",u+="r",u+="de",u+="r",c=o[u+l[d]],c&&c!="auto"&&(o["fill"+l[d]]=c);h||(h=y(o)),this.params.colorFunction=h}p={},r.series[o.id]&&(p=e.clone(r.series[o.id].parameters)),i[o.id]={parameters:e.extend(e.extend(p,this.params),o),yValueCache:this.caches[o.id]},this==t.mainSeriesRenderer&&r.customChart&&r.customChart.colorFunction&&(i[o.id].parameters.colorFunction=r.customChart.colorFunction)}t.drawSeries(r,i,this.params.yAxis,this);for(n in i)this.caches[n]=i[n].yValueCache},e.Renderer.Lines.prototype.drawIndividualSeries=function(t,a){var r,i,n,s,h,o;if(r="mount",r+="a",r+="in",!a.invalid&&(i=this.stx,n=t.context,s=null,h=a.colorFunction,o=i.panels[a.panel]||t.panel,!(typeof h=="string"&&(h=e.Renderer.colorFunctions[h],!h))))return a.vertex&&(n.save(),n.lineJoin="bevel"),a.type=="wave"?s=i.drawWaveChart(o,a):a.baseline?(s=i.drawBaselineChart(o,a),i.positionBaselineHandle(this)):a.type==r?(a.returnObject=!0,s=i.drawMountainChart(o,a,h)):a.type=="channel"?(a.returnObject=!0,s=i.drawChannelChart(o,h,a)):(a.returnObject=!0,s=i.drawLineChart(o,a.style,h,a)),a.vertex&&(i.scatter(o,{yAxis:a.yAxis,field:a.symbol||a.field,subField:a.subField,symbol:a.symbol,color:a.vertex_color,highlight:a.highlight}),n.restore()),s},e.Renderer.OHLC=function(t){var a;this.construct(t),a=this.params,a.type||(a.type="candle"),this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,a.histogram&&(a.type="candle",this.highLowBars=!1,a.volume=a.hollow=!1),a.type=="bar"&&(a.volume=a.hollow=a.histogram=!1),a.type=="candle"&&(a.hlc=a.colored=!1),a.volume&&(a.hollow=!0)},e.inheritsFrom(e.Renderer.OHLC,e.Renderer,!1),e.Renderer.OHLC.requestNew=function(t,a){var r,i,n;r=null,i=a.histogram;for(var s=0;s<t.length;s++)switch(n=t[s],n){case"candle":r=n;break;case"histogram":i=!0,r="candle";break;default:return null}return r===null?null:new e.Renderer.OHLC({params:e.extend(a,{type:r,histogram:i})})},e.Renderer.OHLC.getChartParts=function(t,a){var r,i,n,s,h,o,l,u,c,p,y,d,g,b,f,m;return r="fill_color_",r+="dow",r+="n",i="stx",i+="_candle_do",i+="wn",n="c",n+="an",n+="dle",s="ca",s+="n",s+="dl",s+="e",h="stx_candl",h+="e_",h+="u",h+="p",o="cand",o+="le",l="stx_candle_shadow_e",l+="ve",l+="n",u="cand",u+="l",u+="e",c="s",c+="tx_candl",c+="e_sh",c+="adow_up",p="candl",p+="e",y="candl",y+="e",d="fill_color_eve",d+="n",g="stx_hist",g+="ogram_",g+="e",g+="ven",b=8,f=16,m=32,[{type:"histogram",drawType:"histogram",style:"stx_histogram_up",condition:b,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_down",condition:f,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:g,condition:m,fill:d,border:"border_color_even",skipIfPass:!0,useColorInMap:!0,useBorderStyleProp:!0},{type:y,drawType:"shadow",style:"stx_candle_shadow",border:"border_color_up"},{type:p,drawType:"shadow",style:c,condition:b,border:"border_color_up"},{type:u,drawType:"shadow",style:"stx_candle_shadow_down",condition:f,border:"border_color_down"},{type:"candle",drawType:"shadow",style:l,condition:m,border:"border_color_even",skipIfPass:!0},{type:o,drawType:"candle",style:h,condition:b,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:s,drawType:n,style:i,condition:f,fill:r,border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0}]},e.Renderer.OHLC.prototype.draw=function(){var t,a,r,i,n,s,h,o;for(t=this.stx,a=this.stx.panels[this.params.panel],r=a.chart,i={},s=this.seriesParams,J.h8g(),n=0;n<s.length;n++)h=s[n],o={},r.series[h.id]&&(o=e.clone(r.series[h.id].parameters)),i[h.id]={parameters:e.extend(e.extend(o,this.params),h)},this==t.mainSeriesRenderer&&r.customChart&&r.customChart.colorFunction&&(i[h.id].parameters.colorFunction=r.customChart.colorFunction);t.drawSeries(r,i,this.params.yAxis,this);for(n in i)i[n].yValueCache&&(this.caches[n]=i[n].yValueCache)},e.Renderer.OHLC.prototype.getColor=function(t,a,r,i,n,s){var h,o,l,u,c,p;return h=s||r.color,o=this.params.yAxis||a.yAxis,i&&(h=s||r.borderLeftColor||r["border-left-color"],!h)?null:n?(l=t.pixelFromTransformedValue(o.highValue,a),isNaN(l)&&(l=0),u=r.backgroundColor,h&&!e.isTransparent(h)?(c="bo",c+="t",c+="to",c+="m",p=t.chart.context.createLinearGradient(0,l,0,2*o[o.flipped?"top":c]-l),p.addColorStop(0,h),p.addColorStop(1,u),p):u):h},e.Renderer.OHLC.prototype.drawIndividualSeries=function(t,a){var r,i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B;if(r="st",r+="r",r+="i",r+="ng",!a.invalid&&(i=this.stx,n=t.context,s=a.colorFunction,h=i.panels[a.panel]||t.panel,!(typeof s==r&&(s=e.Renderer.colorFunctions[s],!s)))){if(o=i.layout.candleWidth-t.tmpWidth<=2&&t.tmpWidth<="3">>32,t.state.chartType||(t.state.chartType={}),l=t.state.chartType.pass={},u=i.colorByCandleDirection,a.colorBasis&&(u=a.colorBasis=="open"),c=a.histogram,p=a.type,y=a.hollow,d=i.noWicksOnCandles[p],i.startClip(h.name),g=null,b={colors:[],cache:[]},f=[],s)m={isHistogram:c,field:a.field,yAxis:a.yAxis,isVolume:a.volume,highlight:a.highlight},!c&&p=="bar"?(C="s",C+="tx_",C+="bar_chart",m.type=a.hlc?"hlc":"bar",b=i.drawBarChart(h,C,s,m)):(S="c",S+="andl",S+="e",p==S&&!d&&i.drawShadows(h,s,m),b=i.drawCandles(h,s,m),m.isOutline=!0,(y||!o)&&i.drawCandles(h,s,m));else{w=c&&a.gradient!==!1,k=e.Renderer.OHLC.getChartParts(a.style,u);for(var N=0;N<k.length;N++)if(D="can",D+="d",D+="le",v=k[N],!(v.skipIfPass&&!l.even)){if(c){if(x="his",x+="tog",x+="ram",v.type!=x)continue}else if(p=="bar"){if(v.type!="bar")continue;if(a.colored&&!v.condition)continue;if(!a.colored&&v.condition)continue}else if(y){if(A="sha",A+="do",A+="w",v.type!="hollow")continue;if(v.drawType==A&&d)continue}else if(p=="candle"){if(T="ca",T+="n",T+="dl",T+="e",v.type!=T)continue;if(v.drawType=="shadow"){if(d)continue;if(_=a.border_color_up||i.getCanvasColor("stx_candle_shadow_up"),L=a.border_color_down||i.getCanvasColor("stx_candle_shadow_down"),M=a.border_color_even||i.getCanvasColor("stx_candle_shadow_even"),!e.colorsEqual(_,L)||!e.colorsEqual(_,M)||!e.colorsEqual(_,i.defaultColor)){if(!v.condition)continue}else if(v.condition)continue}}else continue;F=i.canvasStyle(v.style),P=this.getColor(i,h,F,!1,!1,a[v.fill]),E=this.getColor(i,h,F,!1,w,a[v.fill]),O=this.getColor(i,h,F,v.useBorderStyleProp&&!o,w,a[v.border]),v.drawType==D&&(I="h",I+="o",I+="llow",v.type==I?(!e.isTransparent(E)&&e.colorsEqual(O,E)&&(O=v.useColorInMap?"transparent":E),v.useColorInMap||(E=i.containerColor)):v.type=="candle"&&o&&(e.isTransparent(E)?E=O:O=E)),n.globalAlpha=a.opacity,f.push(i.drawBarTypeChartInner({fillColor:E,borderColor:O,condition:v.condition,style:v.style,type:p=="bar"&&a.hlc?"hlc":v.drawType,panel:h,field:a.field,yAxis:a.yAxis,volume:a.volume&&a.hollow,highlight:a.highlight})),g||(g={}),v.useColorInMap&&(J.s1t(19),g[P]=J.g5k("1",64))}}i.endClip();for(var R in g)(!a.hollow||!e.equals(R,i.containerColor))&&b.colors.push(R);for(R=0;R<f.length;R++)for(var q=0;q<f[R].cache.length;q++)B=f[R].cache[q],(B||B===0)&&(b.cache[q]=B);return b}},e.Renderer.Candles=function(t){var a,r;a="c",a+="andle",this.construct(t),r=this.params,r.type=a,this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,r.hlc=r.colored=r.histogram=!1,J.p4Q(),r.volume&&(r.hollow=!0)},e.inheritsFrom(e.Renderer.Candles,e.Renderer.OHLC,!1),e.Renderer.SimpleHistogram=function(t){J.h8g();var a;this.construct(t),a=this.params,a.type="candle",a.histogram=!0,this.barsHaveWidth=this.standaloneBars=!0,this.highLowBars=!1,a.hlc=a.colored=a.hollow=a.volume=!1},e.inheritsFrom(e.Renderer.SimpleHistogram,e.Renderer.Candles,!1)};ns=W=>{var e;e=W.CIQ,e.capitalize=function(t){if(!t)return"";J.s1t(107);var a=J.g5k(2,1,1,0);return t.charAt(0).toUpperCase()+t.slice(a)},e.camelCaseRegExp=/-([a-z])/g,e.makeCamelCase=function(t){return t.replace(e.camelCaseRegExp,function(a){return a[1].toUpperCase()})},e.uniqueID=function(t){var a,r,i,n,s;return t?(a="un",a+="defined",r=new Date().getTime(),typeof window!==a&&window.performance&&typeof window.performance.now=="function"&&(r+=window.performance.now()),i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(h){var o=J,l;o.h8g(),o.s1t(32);var u=o.s8L(1,20,4);o.s1t(22);var c=o.s8L(1,15);return l=(r+Math.random()*u)%c|0,o.s3C(30),r=Math.floor(o.g5k(r,16)),(h=="x"?l:l&3|8).toString(16)}),i):(n=new Date,s=n.getTime().toString(36),s+=Math.floor(Math.random()*Math.pow(36,2)).toString(36),s.toUpperCase())}};ss=W=>{J.h8g()};os=W=>{var e;e=W.CIQ,e.getHostName=function(t){try{return t.match(/:\/\/(.[^/]+)/)[1]}catch{return""}},e.qs=function(t){var a,r,i,n;a={},t||(t=window.location.search.substring(1)),r=t.split("&");for(var s=0;s<r.length;s++)i=r[s].indexOf("="),i>0?(n=r[s].substring(0,i),J.s1t(108),a[n]=r[s].substring(J.s8L("1",32,i))):(n=r[s],a[n]=null);return a},e.postAjax=function(t,a,r,i,n){var s,h,o,l,u,c,p,y;function d(b){var f,m,C,S;if(f={},!!t.responseHeaders){m=b.getAllResponseHeaders(),C=m.split(`
`);for(var w="0"^0;w<C.length;w++){for(S=C[w].split(":");S[1]&&S[1].charAt(0)==" ";)S[1]=S[1].substring(1);S[0]!==""&&(f[S.shift()]=S.join(":"))}return f}}if(s="P",s+="O",s+="S",s+="T",typeof t=="string"&&(t={url:t,payload:a,cb:r,contentType:i,noEpoch:n,method:null,responseHeaders:!1}),h=t.url,o=t.cb,l=t.payload,o||(o=function(){}),!t.ungovernable&&e.Extras&&e.Extras.RequestLimiter&&e.Extras.RequestLimiter.hitRequestLimit(h)){o(429,null,{});return}if(u=new XMLHttpRequest,!u)return!1;if(c=new Date,t.noEpoch||(h.indexOf("?")==-1?h+="?ciqrandom="+c.getTime():h+="&ciqrandom="+c.getTime()),p=t.method,y=t.headers,p||(p=l?s:"GET"),u.open(p,h,!0),t.contentType||(t.contentType="application/x-www-form-urlencoded"),l&&u.setRequestHeader("Content-Type",t.contentType),y)for(var g in y)u.setRequestHeader(g,y[g]);t.timeout&&(u.timeout=t.timeout),u.ontimeout=function(){J.p4Q(),o(408,null,{})},u.onload=function(){this.status===0?this.status="0":this.status||(J.s1t(11),this.status=J.s8L("200",0)),o(this.status,this.responseText,d(this))},u.onerror=function(){J.h8g(),o("0",null,{})};try{u.send(l)}catch(b){o("0",b,{})}return!0},e.loadUI=function(t,a,r){var i=J,n,s,h,o,l,u;if(i.p4Q(),(!a||typeof a=="function")&&(r=a,a=document.body),n=a.ownerDocument,i.s1t(55),s=n.querySelector(i.g5k('iframe[original-url="',t,'"]')),h=function(){var k,D,v,x,A;k=null;try{k=this.contentDocument}catch(_){return r(_)}if(k&&!k.title){D=k.body.innerHTML,v=document.createElement("div"),e.innerHTML(v,D);for(var T=0;T<v.children.length;T++)x=v.children[T].cloneNode(!0),a.appendChild(x);r(null)}else A="iFrame not found o",A+="r document has a titl",A+="e",r(new Error(A))},s){o=null;try{o=s.contentDocument}catch(k){return r(k)}o.readyState==="complete"&&o.location&&o.location.href!=="about:blank"?h.call(s):s.addEventListener("load",h)}else{l="l",l+="o",l+="a",l+="d",u="i",u+="fr",u+="ame",s=document.createElement(u),s.setAttribute("original-url",t),i.s1t(55);var c=i.s8L(418,12,2910);i.s1t(22),i.s8L(3510,18),i.s1t(109),i.g5k(2576,0,1,9,14),i.s3C(11);var p=i.g5k(928,18);i.s3C(22);var y=i.g5k(398,7554);i.s1t(110),i.s8L(4415,4,167751,19,10),i.s1t(100);var d=i.s8L(14,16,3);i.s1t(32),i.g5k(4345,15,60845),i.s3C(22);var g=i.s8L(1663,1662);i.s3C(9);var b=i.s8L(3536,11,17);i.s3C(111);var f=i.s8L(5,4413,4413,4405,5);i.s1t(57),i.s8L(1034,2088,20,4),i.s3C(11);var m=i.s8L(5910,20);i.s3C(22);var C=i.s8L(356,6046);i.s3C(22);var S=i.s8L(157,2983);i.s1t(9);var w=i.s8L(620,19,9320);i.s1t(3),i.s8L(4,4823,7),s.src=t+(t.indexOf(c>=711.73?"?":4330>p?y:3850)===d?g!==1.44?b>76.95?956.66>=f?m:"?":!0:C:S!=9770?"&":w>155.19?"g":!1)+e.uniqueID(),s.hidden=!0,s.addEventListener(l,h),n.body.appendChild(s)}},e.loadScript=function(t,a,r,i){var n=J,s,h,o,l,u,c;if(e.loadedScripts||(e.loadedScripts={}),n.p4Q(),e.loadedScripts[t]){a&&a();return}if(s=document.createElement("SCRIPT"),r?(s.type="module",s.crossOrigin="use-credentials"):s.async=!0,s.onload=function(){e.loadedScripts[t]=!0,a&&a()},h=t,h.indexOf("?")==-1){n.s1t(17);var p=n.g5k(707,7248,18,11);n.s3C(112),n.g5k(6,5,910,467,4),n.s3C(11);var y=n.g5k(23200,18560);n.s1t(22),n.g5k(498,1492),n.s1t(11);var d=n.s8L(7023,13);h=h+(p!==461.73?"?":y===146.1?!0:d)+Date.now()}else{o=1674441237,l=978138135,u=2;for(var g="1"-0;n.D1T(g.toString(),g.toString().length,29669)!==o;g++){n.s3C(73);var b=n.g5k(6,1,2327,32572);n.s3C(61),n.g5k(11,19,10,11475),n.s1t(22);var f=n.g5k(29614,533053);n.s1t(35);var m=n.g5k(6326,6345,17,3163,2);n.s3C(37),n.s8L(2,20,15598,310502),n.s3C(32);var C=n.g5k(72,15,139);n.s3C(66);var S=n.s8L(19,13,3684308,20);n.s3C(113),n.s8L(2887599,19991034,7,13,7),n.s3C(11);var w=n.g5k(138465,130320);h=(h-(b===607623?4712<=f&&m!=C?S:"&":w))%Date.now(),u+=2}if(n.D1T(u.toString(),u.toString().length,20819)!==l){n.s1t(11),n.s8L(47,15),n.s1t(27);var k=n.g5k(593547,1,18,34914);n.s1t(114),n.g5k(12,14,7,15,141),n.s1t(115);var D=n.g5k(3,2,1,405090,607605);n.s3C(66);var v=n.s8L(84820,16,89528,20);n.s3C(116),n.g5k(2,7,2,10827,637),n.s3C(117);var x=n.g5k(1125334,562655,4,9002672);n.s1t(61);var A=n.s8L(19,10,15,38);n.s3C(3),n.s8L(8,1429,19),n.s1t(22);var T=n.s8L(928,13);n.s3C(22);var _=n.g5k(3684287,9);n.s1t(118),n.s8L(11691,3,9,5,187045),h=(h-(k===D?v<=x&&"6329"<<A!=T?_:"&":8145))%Date.now()}n.s1t(65);var L=n.s8L(1,8,2872);n.s3C(32);var M=n.s8L(75040,3,220430);n.s1t(32);var F=n.s8L(14912,20,297308);n.s1t(9);var P=n.g5k(83,12,1419);n.s1t(2),n.s8L(33,4,1,8),h=h+(L>838.95?M==F?P:"&":"O")+Date.now()}s.src=h,c=(i||document).getElementsByTagName("script")[0],c?c.parentNode.insertBefore(s,c.nextSibling):(i||document).body.append(s)},e.loadStylesheet=function(t,a,r){var i=J,n,s,h,o;n="l",n+="i",n+="n",n+="k",s=document.createElement("link"),s.rel="stylesheet",s.type="text/css",s.media="screen",i.s1t(22),i.g5k(313,4377),i.s1t(117);var l=i.g5k(2,5049,5,532);i.s3C(16),i.g5k(2,6324,4,6317),i.s1t(35);var u=i.s8L(4034,4061,8,2017,2);i.s3C(11),i.s8L(9723,6),i.s3C(32);var c=i.g5k(28276,12,332243);i.s3C(119);var p=i.s8L(4,6,4,8,96);i.s1t(82);var y=i.g5k(13,1,4,18);i.s3C(120),i.s8L(8,2016,808,4,19),i.s1t(32),i.g5k(1335,11,6673),i.h8g(),s.href=t+(t.indexOf(l<=985.52?"z":u==c?"0x254a">>p:"?")===y?"?":"&")+Date.now(),s.onload=function(){this.loaded||(this.loaded=!0,a&&a())},h=(r||document).getElementsByTagName(n),i.s3C(14);var d=i.s8L(15,15,0);o=h[h.length-d],o?o.parentNode.insertBefore(s,o.nextSibling):(r||document).head.append(s)},e.loadWidget=function(t,a,r,i){var n=J;n.h8g();var s;(!a||typeof a=="function")&&(r=a,a=document.body),s=a.ownerDocument,n.s3C(22),e.loadStylesheet(n.g5k(t,".css"),function(){n.s1t(22),n.h8g(),e.loadUI(n.g5k(t,".html"),a,function(h){var o;n.h8g(),o=".",o+="j",o+="s",h?r(h):(n.s1t(22),e.loadScript(n.g5k(t,o),r,i,s))})},s)},e.waitForPlugins=function(t,a,r){var i=J,n,s,h,o,l;if(i.s3C(46),n=i.g5k("0",1),s=t.length,!s){a();return}for(var u="0"|0;u<s;u++)h="c",h+="q",h+="-",o=h+t[u],l=(r||document).getElementsByTagName(o)[0],l&&l.hasAttribute("loaded")&&n++;if(i.h8g(),s!==n)return setTimeout(function(){i.p4Q(),e.waitForPlugins(t,a,r)},0);a()},J.h8g(),e.addInternalStylesheet=function(t,a,r){var i,n,s;i="p",i+="a",i+="t",i+="h",n="str",n+="ing",t&&(t.default&&(t=t.default),typeof t===n&&(a&&(r||document).querySelector('style[path="'+a+'"]')||(s=document.createElement("style"),s.setAttribute("type","text/css"),s.setAttribute(i,a||""),s.innerText=t,(r||document).head.appendChild(s))))}};ls=W=>{var e;e=W.CIQ,e.ChartEngine.prototype.registerHTMLElements=function(){var t=J,a,r,i,n,s,h;a=this.chart.container;for(var o in e.ChartEngine.htmlControls)if(typeof this.chart[o]>"u"&&typeof this.controls[o]>"u"){if(!this.allowZoom&&o=="chartControls")continue;if(t.s3C(22),r=a.querySelector(t.s8L(".",o)),r)this.chart[o]=r,this.controls[o]=r;else{if(i=e.ChartEngine.htmlControls[o],!i)continue;n=document.createElement("DIV"),n.innerHTML=i.replace(/[\t\n\r]/gm,""),r=n.firstChild,a.appendChild(r),this.chart[o]=r,this.controls[o]=r,r.classList.add(o)}}var{chartControls:l,home:u}=this.controls;l&&(s=l.querySelector(".stx-zoom-in"),h=l.querySelector(".stx-zoom-out"),e.safeClickTouch(s,function(c){return t.p4Q(),function(p){if(!c.allowZoom||c.activeDrawing&&!c.allowDrawingZoom){p.stopPropagation();return}c.zoomIn(p),p.stopPropagation()}}(this)),e.safeClickTouch(h,function(c){return t.h8g(),function(p){if(!c.allowZoom||c.activeDrawing&&!c.allowDrawingZoom){p.stopPropagation();return}t.p4Q(),c.zoomOut(p),p.stopPropagation()}}(this)),e.touchDevice||(this.makeModal(s),this.makeModal(h))),u&&(e.safeClickTouch(u,function(c){return t.p4Q(),function(p){if(p.stopPropagation(),!c.isHistoricalMode()){c.home({animate:!0});return}delete c.layout.range,c.loadChart(c.chart.symbol,function(){t.p4Q(),c.home({animate:!1})})}}(this)),e.touchDevice||this.makeModal(u)),this.allowDragControls&&this.allowDragControls()},e.ChartEngine.prototype.home=function(t){var a=J,r,i,n,s,h,o,l;this.swipe.amplitude=0,r=this.layout;function u(d){a.h8g();var g;for(var b in d.panels){g=d.panels[b].yaxisLHS.concat(d.panels[b].yaxisRHS);for(var f=0;f<g.length;f++)g[f].lockScale||d.calculateYAxisMargins(g[f])}}if(typeof t!="object"&&(t={maintainWhitespace:t}),typeof t.maintainWhitespace>"u"&&(t.maintainWhitespace=!0),this.chart.draggingControls=null,this.cancelTouchSingleClick=!0,!this.chart.dataSet||!this.chart.dataSet.length){this.draw();return}a.s3C(56),this.micropixels=a.s8L(64,"0"),i=Math.floor(this.chart.width/r.candleWidth);function c(d,g,b){return a.p4Q(),function(){u(d),g.scroll=b,a.p4Q(),d.draw()}}for(var p in this.charts)if(n=this.charts[p],!(t.chart&&t.chart!=n)){for(s=0,t.maintainWhitespace&&this.preferences.whitespace>=0&&(s=this.preferences.whitespace),(t.whitespace||t.whitespace===0)&&(s=t.whitespace),h=this.getLabelOffsetInPixels(n,r.chartType),h>s&&(s=h),o=Math.min(i,n.dataSet.length),this.chart.allowScrollPast&&(o=i),this.micropixels=this.chart.width-o*r.candleWidth-s,this.preferences.whitespace=s;this.micropixels>r.candleWidth;)o++,this.micropixels-=r.candleWidth;for(;this.micropixels<0;)o--,this.micropixels+=r.candleWidth;if(this.micropixels-=r.candleWidth,o++,!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars){a.s3C(11);var y=a.s8L(16,14);this.micropixels+=r.candleWidth/y}t.animate?(l=this,this.scrollTo(n,o,c(l,n,o))):(n.scroll=o,u(this))}this.draw()},e.ChartEngine.prototype.headsUpHR=function(){var t,a,r,i,n,s;t="hea";function h(o){J.h8g(),e.efficientDOMUpdate(i,"innerHTML",o)}t+="dsUpHR",!this.runPrepend(t,arguments)&&(a=this.currentPanel,a&&(r=a.chart,this.updateFloatHRLabel(a),i=this.controls.floatDate,i&&!r.xAxis.noDraw&&(n=this.barFromPixel(this.cx),s=r.xaxis[n],s&&s.DT?h(e.displayableDate(this,r,s.DT)):s&&s.index?h(s.index):h("")),this.runAppend("headsUpHR",arguments)))},e.ChartEngine.prototype.modalBegin=function(){var t;t="mo",t+="dal",this.openDialog=t,this.undisplayCrosshairs()},e.ChartEngine.prototype.modalEnd=function(){J.p4Q(),this.cancelTouchSingleClick=!0,this.openDialog="",this.doDisplayCrosshairs()},e.ChartEngine.prototype.makeModal=function(t){var a;J.p4Q(),a=this,t.onmouseover=function(r){J.h8g(),a.modalBegin()},t.onmouseout=function(r){J.h8g(),a.modalEnd()}},e.ChartEngine.prototype.updateChartAccessories=function(){var t=J,a,r,i,n,s,h,o;if(this.accessoryTimer!==null&&clearTimeout(this.accessoryTimer),!e.ChartEngine.drawingLine&&e.touchDevice&&new Date().getTime()-this.lastAccessoryUpdate<100){this.accessoryTimer=setTimeout(function(c){return t.h8g(),function(){t.h8g(),c.updateChartAccessories()}}(this),10);return}if(this.chart.dataSet&&!this.runPrepend("updateChartAccessories",arguments)){if(this.accessoryTimer=null,this.lastAccessoryUpdate=new Date().getTime(),a=this.controls.floatDate,a&&(r=this.currentPanel,r||(r=this.chart.panel),r)){i="p",i+="x",n=r.chart,s=this.xAxisAsFooter===!0?0:this.chart.canvasHeight-r.chart.bottom,t.s1t(35);var l=t.g5k(14,15,20,1,2);if(h=a.offsetWidth/l-.5,o=this.pixelFromTick(this.crosshairTick,n)-h,o<0)o=0;else if(o>this.width-2*h-1){t.s1t(13);var u=t.g5k(1,4,2,6);o=this.width-u*h-1}e.efficientDOMUpdate(a.style,"left",o+"px"),e.efficientDOMUpdate(a.style,"bottom",s+i)}this.positionCrosshairsAtPointer(),this.headsUpHR(),this.runAppend("updateChartAccessories",arguments)}},e.ChartEngine.prototype.positionSticky=function(t){var a=J,r,i,n,s;r="ri",r+="gh",r+="t",i=Math.max(this.cy-t.offsetHeight-60,0),n=Math.min(this.chart.canvasWidth-(this.cx-50),this.chart.canvasWidth-t.offsetWidth),s=t.style,a.s1t(22),e.efficientDOMUpdate(s,"top",a.g5k(i,"px")),e.efficientDOMUpdate(s,"left","auto"),a.s1t(22),e.efficientDOMUpdate(s,r,a.s8L(n,"px"))},e.ChartEngine.prototype.displaySticky=function(t){var a=J,r,i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_;if(a.p4Q(),r="o",r+="bject",i=".stickyLon",i+="gPressText",n=this.controls.mSticky,!!n&&(s=n.querySelector(".mStickyInterior"),!!s)){h=n.querySelector(".overlayTrashCan"),o=n.querySelector(".overlayEdit"),l=n.querySelector(".overlayText"),u=n.querySelector(".mouseDeleteInstructions"),c=n.querySelector(i),p=n.querySelector(".customInstructions"),u.classList.remove("no_edit"),(!t||typeof t!=r)&&(t={message:arguments[0],backgroundColor:arguments[1],forceShow:arguments[2],noDelete:arguments[3],type:arguments["4">>32]});var{forceShow:L,noDelete:M,noEdit:F,type:P,noText:E}=t;a.s3C(91),y=-a.g5k(18,"515439634"),d=2046888722,g=2;for(var O=1;a.u6e(O.toString(),O.toString().length,240)!==y;O++){var{message:I,backgroundColor:B}=t;g+=2}if(a.u6e(g.toString(),g.toString().length,35073)!==d)var{message:I,backgroundColor:B}=t;if(!L&&!I)b="n",b+="o",b+="n",b+="e",f="n",f+="one",s.innerHTML="",n.style.display="none",h&&(h.style.display="none"),o&&(o.style.display=f),l&&(l.style.display="none"),u&&(u.style.display=b),c&&(c.style.display="none");else{m="r",m+="ightclick_",I||(I="");var{defaultColor:N,highlightedDraggable:R}=this;B=="auto"&&(B=N),L&&!I?(s.style.backgroundColor="",s.style.color="",s.style.display="none"):B?(s.style.backgroundColor=B,s.style.color=e.isTransparent(B)?N:e.chooseForegroundColor(B),s.style.display="inline-block"):(s.style.backgroundColor="",s.style.color="",s.style.display="inline-block"),s.innerHTML=I,C=n.querySelector(".mStickyRightClick"),C.className="mStickyRightClick",P&&(a.s3C(22),C.classList.add(a.g5k(m,P))),C.style.display="",n.style.display="inline-block",(!R||R&&R.undraggable&&R.undraggable(this))&&(S="n",S+="o",S+="n",S+="e",c.style.display=S),M||this.bypassRightClick===!0||this.bypassRightClick[P]?C.style.display="none":this.highlightViaTap||this.touches.length?(w="inli",w+="ne-block",h&&(h.style.display=w),o&&!F&&(o.style.display="inline-block"),l&&!E&&(l.style.display="inline-block"),u&&(u.style.display="none"),c&&(c.style.display="none"),n.classList[I===""?"add":"remove"]("hide")):(F&&u.classList.add("no_edit"),u&&(u.style.display="block"),c&&(c.style.display="none",k=this.preferences.dragging,k&&t.panel&&!t.panel.noDrag&&(D="s",D+="er",D+="ies",v="bl",v+="o",v+="c",v+="k",(k===!0||k.study)&&P=="study"?c.style.display=v:(k===!0||k.series)&&P==D&&(c.style.display="block")))),p&&P&&(x="non",x+="e",a.s3C(55),A=p.querySelector(`${a.s8L("[typ","e","=")}${P}]`),p.style.display=A?"block":x),T=P||"default",n.setAttribute("cq-sticky-type",T),_=t.positioner||this.positionSticky,_.call(this,n)}}},e.ChartEngine.prototype.displayNotification=function(t,a,r={}){var i,n,s,h,o,l;if(this.controls.notificationTray){var{callback:u,dismissalListeners:c}=r;i=this.controls.notificationTray,n=i.querySelector("template").content.cloneNode(!0),s=n.firstElementChild,s.className=t,s.querySelector(".message").textContent=a,u&&(h="tou",h+="chend",o="po",o+="i",o+="nterup",l=window.PointerEvent?o:h,s.handler=s.addEventListener(l,u)),c&&(s.listeners={},c.forEach(p=>{s.listeners[t]=this.addEventListener(p.type,p.callback)})),this.makeModal(s),i.appendChild(s)}},e.ChartEngine.prototype.removeNotification=function(t){var a,r;if(this.controls.notificationTray&&(a=this.controls.notificationTray,r=a.querySelector(`.${t}`),J.p4Q(),r)){if(r.handler&&r.removeEventListener(r.handler),r.listeners)for(var i in r.listeners)this.removeEventListener(r.listeners[i]);this.modalEnd(),a.removeChild(r)}},e.ChartEngine.prototype.setMeasure=function(t,a,r,i,n,s){var h=J,o,l,u,c,p,y,d,g,b,f,m,C;if(o="setMea",o+="sure",!this.runPrepend("setMeasure",arguments)){if(l=(this.drawingContainer||document).querySelector(".mMeasure"),u="",!t&&t!==0)!this.anyHighlighted&&this.currentVectorParameters.vectorType===""&&this.clearMeasure();else{if(a!==!1&&(c=Math.round(Math.abs(t-a)*this.chart.roundit)/this.chart.roundit,c=c.toFixed(this.chart.yAxis.printDecimalPlaces),this.internationalizer?u+=this.internationalizer.numbers.format(c):u+=c,t>"0">>32&&a>0)){if(y=" ",y+="(",h.s1t(48),p=h.g5k(t,t,a),Math.abs(p)>.1)h.s1t(46),p=Math.round(h.g5k(p,100));else if(Math.abs(p)>.01){h.s1t(22);var S=h.s8L(6,2);p=Math.round(p*1e3)/("10"|S)}else{h.s1t(121);var w=h.g5k(19,2461976,13,7,10015);h.s3C(9);var k=h.s8L(96,9,13);p=Math.round(p*w)/k}this.internationalizer?(h.s3C(43),p=this.internationalizer.percent.format(h.g5k(p,"100"))):(h.s1t(22),p=h.s8L(p,"%")),h.s3C(55),u+=h.g5k(y,p,")")}if(i!==!1){d="B",d+="a",d+="rs",h.s3C(11),g=Math.abs(h.g5k(i,r)),h.s1t(122);var D=h.s8L(20,17,17,311,11);g=Math.round(g)+D,b=this.translateIf(d),h.s1t(123),u+=h.g5k(g,b," "," ")}l&&(l.innerHTML=u)}this.activeDrawing||(l=this.controls.mSticky,l&&(f=".mStickyInt",f+="erior",m=l.querySelector(f),n?(C="r",C+="e",C+="mo",C+="ve",l.style.display="inline-block",m&&(m.style.display="inline-block",(t||t===0)&&(m.innerHTML=u)),l.classList[u===""?"add":C]("hide"),this.positionSticky(l)):(l.style.display="none",m&&(m.innerHTML=""))),h.h8g(),this.runAppend(o,arguments))}},e.ChartEngine.prototype.clearMeasure=function(){var t;t=(this.drawingContainer||document).querySelector(".mMeasure"),t&&(t.innerHTML="")},e.ChartEngine.prototype.zoomSet=function(t,a){var d,g;var r=J,i,n,s,h,o,l,u;if(a||(a=this.chart),!!a.dataSet){if(t=this.constrainCandleWidth(t),((g=(d=a.tempCanvas)==null?void 0:d.style)==null?void 0:g.display)!="none"&&e.clearCanvas(a.tempCanvas,this),i=this.mainSeriesRenderer||{},!i.params||!i.params.volume){if(this.preferences.zoomAtCurrentMousePosition&&this.zoomInitiatedByMouseWheel&&this.crosshairTick<a.dataSet.length)n=this.crosshairTick||this.tickFromPixel(this.cx,a);else if(this.isHome())n=a.dataSet.length-("1"^0);else if(a.scroll>a.dataSet.length)n=0;else if(this.grabMode=="zoom-x")n=this.tickFromPixel(this.chart.width,a);else{s=508553056,h=-488575541,o=2;for(var c=1;r.D1T(c.toString(),c.toString().length,65511)!==s;c++)n=this.tickFromPixel(this.chart.width%8,a),o+=2;r.u6e(o.toString(),o.toString().length,19860)!==h&&(n=this.tickFromPixel(this.chart.width/2,a))}this.animations.zoom.hasCompleted&&(this.zoomInitiatedByMouseWheel=!1),r.s1t(124);var p=r.s8L(5,14,5,28,15);l=a.dataSet.length-p-n,u=a.scroll,r.s3C(3);var y=r.g5k(9,19,27);a.scroll=Math.round((this.pixelFromTick(n,a)-a.left)/t)+y+l,this.micropixels+=(u-l)*this.layout.candleWidth-(a.scroll-l)*t}this.setCandleWidth(t),a.spanLock=!1,this.draw(),r.p4Q(),this.doDisplayCrosshairs(),this.updateChartAccessories()}}};hs=W=>{var e;e=W.CIQ,e.ChartEngine.prototype.currentBaseline=null,e.ChartEngine.prototype.baselineHelper=null,e.ChartEngine.helpersToRegister.push(function(t){J.p4Q(),t.baselineHelper=new Map}),e.ChartEngine.prototype.registerBaselineToHelper=function(t){var a,r;if(J.p4Q(),!t.params.baseline)return;var{baselineHelper:i}=this;if(a=this,!i.has(t)){var{name:n}=t.params;r=this.controls.baselineHandle,i.set(t,{styleCache:null,display:!1,handle:n==="_main_series"&&r?r:s(n)})}function s(h){J.p4Q();var o;return h=h.replace(" ","_"),o=document.createElement("cq-baseline-handle"),o.classList.add("stx-baseline-handle",h),a.container.append(o),a.controls[`${h} cq-baseline-handle`]=o,o}},e.ChartEngine.prototype.removeBaselineFromHelper=function(t){var a,r,i,n,s,h,{baselineHelper:o}=this;if(o.has(t)){a="_m",a+="ain_series",r=325585439,i=-2064429192,n=2;for(var l=1;J.D1T(l.toString(),l.toString().length,26407)!==r;l++)s=t.params.name.replace("_",!1),n+=2;J.D1T(n.toString(),n.toString().length,"95663"|7)!==i&&(s=t.params.name.replace("_",!1)),s=t.params.name.replace(" ","_"),s!==a&&(h=o.get(t).handle,delete this.controls[`${s} cq-baseline-handle`],this.container.removeChild(h)),o.delete(t)}},e.ChartEngine.prototype.findBaselineHandle=function(t,a){for(var r of this.baselineHelper){var[i,n]=r,{handle:s}=n;if(t.target===s||t.composedPath&&t.composedPath().includes(s))return a&&(this.repositioningBaseline={lastDraw:Date.now(),handle:s,renderer:i},s.classList.add("stx-grab")),this.currentBaseline=i,!0}return!1},e.ChartEngine.prototype.setBaselines=function(t){var a=J,r;t||(t=this.chart),r=this,a.h8g();var{baselineHelper:i}=this;i.forEach(function(s,h){var o,l,u,c,p,{baseline:y}=h.params;a.s1t(89),o=a.s8L(!0,y),o&&(y=t.baseline);var{defaultLevel:d,userLevel:g}=y;l=h.getYAxis(r),a.h8g(),l&&(u=r.getYAxisBaselineRenderer(l),c=u&&u!=r.mainSeriesRenderer&&u.seriesParams.length&&u.seriesParams[0].id,y.actualLevel=g||g==="0"*1?g:d,!y.actualLevel&&y.actualLevel!==0&&(p=n(c,o),p!==null&&(y.actualLevel=p)),s.display=u===h,i.set(h,s))});function n(s,h){a.p4Q();var o,l,u,c,p,y,{dataSegment:d,dataSet:g,defaultPlotField:b}=t;if(o=b,h||(o=s),l=r.getFirstLastDataRecord(d,"tick"),!l)return null;for(u=l.tick;;){if(c=g[u],c){if(!h||o!="Close"){if(a.s1t(11),p=g[a.g5k(u,1)],p&&(p[o]||p[o]===0))return y=p[o],typeof y=="object"?y[b]:y}else if(c.iqPrevClose||c.iqPrevClose===0)return c.iqPrevClose}if(u--,u<0)break}}},e.ChartEngine.prototype.setBaselineUserLevel=function(){var t=J,a,r,i,n,s,h,o;a="o",a+="bj",a+="ec",a+="t";var{chart:l,currentPanel:u}=this,{lastDraw:c,renderer:p}=this.repositioningBaseline;if(p.params.panel==u.name){t.p4Q();var{baseline:y}=l;if(r=typeof p.params.baseline===a?p.params.baseline:y,i=p.getYAxis(this),n=this.valueFromPixel(this.backOutY(e.ChartEngine.crosshairY),u,i),r.userLevel=this.adjustIfNecessary(u,this.crosshairTick,n),Date.now()-c>100){t.s3C(19),s=t.s8L("1256819789",0),t.s3C(11),h=-t.g5k("1204936907",0),o=2;for(var d=1;t.D1T(d.toString(),d.toString().length,27940)!==s;d++)this.draw(),o+=2;t.u6e(o.toString(),o.toString().length,85576)!==h&&this.draw(),this.draw(),this.repositioningBaseline.lastDraw=Date.now()}}},e.ChartEngine.prototype.setBaselineMinMax=function(t,a){var r,i,n,s;r="o",r+="b",r+="j",r+="ect";var{baselineHelper:h,chart:o,repositioningBaseline:l}=this,{baseline:u,seriesRenderers:c}=o;if(i=o.transformFunc&&a===o.panel.yAxis,n=a.renderers.find(g=>h.get(c[g])),!n)return t;var{baseline:p,type:y}=c[n].params;if(y==="mountain")return t;p=typeof p===r?p:u;var{actualLevel:d}=p;return(d||d==="0"-0)&&(i&&(d=o.transformFunc(this,o,d)),s=Math.max(d-t["0"-0],t[1]-d),t[0]=l?a.lowValue:d-s,t[1]=l?a.highValue:d+s),J.h8g(),t},e.ChartEngine.prototype.positionBaselineHandle=function(t){var a=J,r,i,n,s,h,o,l,u,c,p,y,d,g,b,f;if(r="s",r+="t",r+="x-grab",!!this.manageTouchAndMouse){var{baselineHelper:m,chart:C,panels:S}=this,{baseline:w,panel:k}=t.params;i=t.params.yAxis||t.getYAxis(this);var{display:D,handle:v,styleCache:x}=m.get(t);if(w===!0&&(w=C.baseline),w.userLevel===!1||!D){v.style.display="none";return}n=S[k],s=v.classList.contains(r),h="b",h+="l",h+="ock",o=w.actualLevel,i===C.yAxis&&C.transformFunc&&(o=C.transformFunc(this,C,o)),o>i.high?(o=i.high,s||(h="none")):o<i.low&&(o=i.low,s||(h="none")),a.p4Q(),i===C.yAxis&&C.untransformFunc&&(o=C.untransformFunc(this,C,o)),l=this.pixelFromPrice(o,n,i),x||(x=getComputedStyle(v)),u=e.stripPX(x.width),a.s1t(3);var A=a.s8L(5,8,11);c=`${l-e.stripPX(x.height)/A}px`,y=this.baselineHandleBuffer||2,a.s3C(125);var T=a.g5k(19,20,4,3);if(d=n.yaxisRHS.indexOf(i)+T,d)g=d===1?y:y*d,p=`${C.right-u*d-g}px`;else{a.s1t(126);var _=a.g5k(3,3,5);b=n.yaxisLHS.slice(0).reverse().indexOf(i)+_,f=b===1?y:y*b,p=`${C.left+u*b+f-u}px`}Object.assign(v.style,{display:h,top:c,left:p})}},e.ChartEngine.prototype.getYAxisBaselineRenderer=function(t){var a;if(!t.renderers.length)return null;var{baselineHelper:r,chart:i}=this;return a=t.renderers.find(n=>r.get(i.seriesRenderers[n])),a?i.seriesRenderers[a]:null},e.ChartEngine.prototype.getYAxisBaseline=function(t){var a,r;a="o",a+="bj",a+="ec",a+="t",J.h8g();var{baseline:i}=this.chart;if(r=this.getYAxisBaselineRenderer(t),!r)return i;var{baseline:n}=r.params;return typeof n===a?n:i}};us=W=>{var e;J.p4Q(),e=W.CIQ,e.ChartEngine.Chart=function(){this.xAxis=new e.ChartEngine.XAxis,this.yAxis=new e.ChartEngine.YAxis,this.symbolObject={symbol:null},this.series={},this.seriesRenderers={},this.xaxis=[],this.state={},this.endPoints={},J.h8g(),this.defaultChartStyleConfig={},this.baseline=e.clone(this.baseline),this.panel=void 0},e.extend(e.ChartEngine.Chart.prototype,{symbol:null,symbolObject:{symbol:null},symbolDisplay:null,series:{},seriesRenderers:{},scroll:0,isComparison:!1,forcePercentComparison:!0,maxTicks:0,tension:null,currentMarketData:{},masterData:null,dataSet:null,scrubbed:null,dataSegment:null,segmentImage:null,baseline:{includeInDataSegment:!1,defaultLevel:null,userLevel:null,actualLevel:null},xAxis:null,xaxis:[],xaxisFactor:30,decimalPlaces:2,dynamicYAxis:!0,roundit:100,breakpoint:null,legendRenderer:e.drawLegend,customChart:null,yaxisPaddingRight:null,yaxisPaddingLeft:null,tickCache:{},yaxisMarginMultiplier:2.5,allowScrollPast:!0,allowScrollFuture:!0,whiteSpaceFutureTicks:0,hideDrawings:!1,defaultPlotField:"Close",defaultChartStyleConfig:{},lockScroll:!1,includeOverlaysInMinMax:!0,gaplines:null,lineStyle:null,lineApproximation:!0,highLowBars:!1,standaloneBars:!1,barsHaveWidth:!1,calculateTradingDecimalPlaces:e.calculateTradingDecimalPlaces,width:null,height:null,top:null,bottom:null,left:null,right:null,context:null,endPoints:null},!0)};cs=W=>{var e=J,t;t=W.CIQ,t.ChartEngine.prototype.resolveY=function(a){return e.p4Q(),this.top+a},t.ChartEngine.prototype.resolveX=function(a){return e.h8g(),this.left+a},t.ChartEngine.prototype.backOutY=function(a){return Math.max(0,Math.min(this.height,a-this.top))},t.ChartEngine.prototype.backOutX=function(a){return e.s3C(19),e.p4Q(),Math.max(e.g5k("0",64),Math.min(this.width,a-this.left))},t.ChartEngine.prototype.dateFromTick=function(a,r,i,n="dataSet"){var s,h,o,l,u,c;return r||(r=this.chart),s=r[n],h=s.length,c=!1,h===0&&(s[0]={},s[0].DT=new Date,h=s.length,c=!0),a<0?(l=this.standardMarketIterator(s[0].DT),l?o=l.previous(Math.abs(a)):o=s[0].DT):a>=h?(l=this.standardMarketIterator(s[h-1].DT),l?(e.s1t(127),o=l.next(e.g5k(1,a,h))):o=s[h-1].DT):o=s[a].DT,i?u=new Date(o.getTime()):u=t.yyyymmddhhmmssmmm(o).substr(0,12),e.h8g(),c&&delete s[0].DT,u},t.ChartEngine.prototype.tickFromDate=function(a,r,i,n,s="dataSet"){var h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k;if(r||(r=this.chart),h=r[s],!(h&&h.length))return 0;if(i||(i=0),o=a.constructor==Date?a:t.strToDateTime(a),t.ChartEngine.isDailyInterval(this.layout.interval)||o.setMinutes(o.getMinutes()+i),l=o.getTime(),r.tickCache[s]||(r.tickCache[s]={}),u=r.tickCache[s][l],u||u===0)return n?Math.ceil(u):Math.floor(u);if(c=h[0].DT,p=h[h.length-1].DT,o>=c&&o<=p){for(y=0,d=h.length,g=0;++g<100;){if(e.s3C(128),b=Math.floor(e.g5k(y,d,"2")),f=h[b].DT,+f==+o)return r.tickCache[s][l]=b,b;if(f<o&&(y=b),f>o){if(h[b-1].DT<o)return e.s1t(11),r.tickCache[s][l]=e.g5k(b,.5),n?b:b-("1"<<0);if(+h[b-1].DT==+o)return e.s1t(11),r.tickCache[s][l]=e.g5k(b,1),e.s1t(11),e.g5k(b,1);d=b}}if(g>=100)return m="!!!Warning: tickFromDat",m+="e() d",m+="id not",m+=" find match.",console.log(m),h.length}return e.s3C(93),C=e.s8L(o,c),S=C?c:p,w=this.standardMarketIterator(S),k=w?w.futureTick({end:o}):0,u=C?k*-1:h.length-1+k,r.tickCache[s][l]=u,u},t.ChartEngine.prototype.pixelFromBar=function(a,r){var i,n,s;i="nu",i+="mber",r||(r=this.chart),n=0,s=this.chart.segmentImage,s&&s[a]&&typeof s[a].leftOffset===i?n=s[a].leftOffset:n=(a+.5)*this.layout.candleWidth,e.s1t(11);var h=e.s8L(16,15);return n=r.panel.left+Math.floor(n+this.micropixels)-h,n},t.ChartEngine.prototype.barFromPixel=function(a,r){var i,n,s,h,o,l,u,c,p,y,d,g,b;if(r||(r=this.chart),i=this.chart.segmentImage,n=this.micropixels,e.h8g(),s=this.layout.candleWidth,i){h=a-r.panel.left-n,e.s1t(46),o=e.s8L("2",1),u=i.length,e.s1t(30),c=Math.round(e.s8L(u,o)),e.s3C(14);var f=e.s8L(1,16,15);e.s1t(36);var m=e.s8L(17,40,8,13);if(d=i[u-f].leftOffset+i[u-1].candleWidth/m,h>d)return u+Math.floor((a-d-r.panel.left-n)/s);for(var C=1;C<u&&(o*=2,l=i[c],!!l);C++){p=l.leftOffset,e.s3C(11);var S=e.s8L(10,8);if(y=l.candleWidth/S,e.s1t(11),g=e.s8L(p,y),e.s1t(22),b=e.g5k(p,y),c===0||h>=g&&h<b)break;h<g?c-=Math.max(1,Math.round(u/o)):c+=Math.max(1,Math.round(u/o)),c=Math.max(0,Math.min(u-("1"-0),c))}if(!i[c]){for(C=0;C<u;C++)if(l=i[C],!!l){if(p=l.leftOffset,y=l.candleWidth/2,h<p-y)return e.s1t(11),Math.max(0,e.g5k(C,1));if(h<p+y)return C;if(h>=p+y)return e.s1t(129),e.g5k("1",C,0)}}return c}return Math.floor((a-r.panel.left-n)/s)},t.ChartEngine.prototype.tickFromPixel=function(a,r){var i;return r||(r=this.chart),i=r.dataSet.length-r.scroll,r.segmentImage?i+=this.barFromPixel(a,r):i+=Math.floor((a-r.panel.left-this.micropixels)/this.layout.candleWidth),e.h8g(),i},t.ChartEngine.prototype.pixelFromTick=function(a,r){var i,n,s,h,o,l,u,c,p,y,d;if(r||(r=this.chart),i=r.dataSegment,n=r.dataSet,s=r.segmentImage,h=this.micropixels,o=i?i.length:0,l=r.panel,u=r.scroll,c=a-n.length+u,p=o?i[c]:null,s&&(p=s[c]),p&&typeof p.leftOffset=="number")return l.left+Math.floor(p.leftOffset+h);if(y=0,d=0,p=o?i[o-1]:null,s&&(e.s3C(11),p=s[e.g5k(o,1)]),p&&typeof p.leftOffset=="number"&&o<=a-n.length+u){e.s3C(0);var g=e.g5k(5,7);y=p.leftOffset+p.candleWidth/g,d=o}return y+l.left+Math.floor((a-d-n.length+u+.5)*this.layout.candleWidth+h)},t.ChartEngine.prototype.pixelFromDate=function(a,r,i,n){return this.pixelFromTick(this.tickFromDate(a,r,i,n),r)},t.ChartEngine.prototype.transformedPriceFromPixel=function(a,r,i){var n,s,h;if(r||(r=this.chart.panel),n=i||r.yAxis,a=n.bottom-a,n.semiLog)h=a*n.logShadow/n.height,n.flipped?h=n.logHigh-h:h+=n.logLow,s=Math.pow(10,h);else{if(!n.multiplier)return null;s=a/n.multiplier,n.flipped?s=n.high-s:s+=n.low}return s},t.ChartEngine.prototype.priceFromPixel=function(a,r,i){var n;return r||(r=this.chart.panel),n=this.transformedPriceFromPixel(a,r,i),this.charts[r.name]&&r.chart.untransformFunc&&(!i||i==r.yAxis)&&(n=r.chart.untransformFunc(this,r.chart,n,i)),n},e.p4Q(),t.ChartEngine.prototype.valueFromPixel=function(a,r,i){var n,s,h,o;if(r||(r=this.whichPanel(a)),!r&&(n=Object.values(this.panels),n&&n.length))if(a<=0)r=n.shift();else{e.s3C(56),s=e.g5k(64,"180380219"),h=204574887,o=2;for(var l=1;e.D1T(l.toString(),l.toString().length,36958)!==s;l++)r=n.pop(),e.s1t(46),o+=e.g5k("2",1);e.D1T(o.toString(),o.toString().length,88199)!==h&&(r=n.pop())}return this.priceFromPixel(a,r,i)},t.ChartEngine.prototype.valueFromInterpolation=function(a,r,i,n,s){var h,o,l,u,c,p,y,d,g,b,f,m,C,S;return h="undef",h+="ined",a===null||a<0||!r||(n||(n=this.chart.panel),s||(s=n.yAxis),i||(i=this.chart.defaultPlotField),o=this.getPreviousBar(this.chart,r,a),!o)?null:(u=t.existsInObjectChain(o,r),u&&(l=u.obj[u.member]),typeof l=="object"&&(l=l[i]),c=this.getRendererFromSeries(r),c&&c.params.step||this.layout.chartType==="step"?l:(p=this.getNextBar(this.chart,r,a),u=t.existsInObjectChain(p,r),u&&(y=u.obj[u.member]),typeof y=="object"&&(y=y[i]),e.p4Q(),!p||l===null||typeof l>"u"||y===null||typeof y==h?null:(d=this.pixelFromPrice(l,n,s),g=this.pixelFromPrice(y,n,s),b=o.tick,f=p.tick,e.s3C(130),m=e.g5k(b,d,f,g),C=this.chart.dataSegment[a].tick,e.s3C(131),S=e.g5k(C,m,d,b),this.priceFromPixel(S,n,s))))},t.ChartEngine.prototype.pixelFromTransformedValue=function(a,r,i){var n,s,h,o,l;return r||(r=this.chart.panel),n=i||r.yAxis,s=(n.high-a)*n.multiplier,n.semiLog&&(h=Math.max(a,0),o=Math.log(h)/Math.LN10,l=n.height,s=l-l*(o-n.logLow)/n.logShadow),e.p4Q(),s=n.flipped?n.bottom-s:n.top+s,s},t.ChartEngine.prototype.pixelFromPrice=function(a,r,i){return r||(r=this.chart.panel),e.p4Q(),this.charts[r.name]&&r.chart.transformFunc&&(!i||i==r.yAxis)&&(a=r.chart.transformFunc(this,r.chart,a,i)),this.pixelFromTransformedValue(a,r,i)},t.ChartEngine.prototype.pixelFromValueAdjusted=function(a,r,i,n){var s,h;return e.h8g(),this.layout.adj||!this.charts[a.name]?this.pixelFromPrice(i,a,n):(s=Math.round(r),s>0&&s<a.chart.dataSet.length&&(h=a.chart.dataSet[s].ratio)?(e.s3C(46),this.pixelFromPrice(e.s8L(i,h),a,n)):this.pixelFromPrice(i,a,n))},t.ChartEngine.prototype.adjustIfNecessary=function(a,r,i){var n,s;return this.layout.adj||!a||!this.charts[a.name]?i:(n=Math.round(r),n>0&&n<a.chart.dataSet.length&&(s=a.chart.dataSet[n].ratio)?(e.s1t(30),e.g5k(i,s)):i)}};fs=W=>{var e;e=W.CIQ,e.ChartEngine.prototype.positionCrosshairsAtPointer=function(){var t,a,r,i,n,s,h,o;if(t=this.currentPanel,!!t&&!(!this.manageTouchAndMouse||this.mainSeriesRenderer&&this.mainSeriesRenderer.nonInteractive)&&!this.runPrepend("positionCrosshairsAtPointer",arguments)){if(a=t.chart,J.p4Q(),r=this.container.getBoundingClientRect(),this.top=r.top,this.left=r.left,this.right=this.left+this.width,this.bottom=this.top+this.height,i=this.crosshairTick=this.tickFromPixel(this.backOutX(this.crosshairX),a),n=this.pixelFromTick(i,a)-1,n>=t.right||n<=t.left){this.undisplayCrosshairs();return}if(this.controls.crossX&&(J.s3C(22),this.controls.crossX.style.left=J.s8L(n,"px")),s=t.name=="chart"?this.preferences.horizontalCrosshairField:t.horizontalCrosshairField,h=a.dataSet,s&&h&&i<h.length&&i>-1&&(this.crossYActualPos=this.pixelFromPrice(h[i][s],t)),o=this.crossYActualPos>=t.yAxis.bottom&&this.crossYActualPos<=t.bottom,o){this.undisplayCrosshairs();return}this.controls.crossY&&(this.controls.crossY.style.top=this.crossYActualPos+"px"),this.runAppend("positionCrosshairsAtPointer",arguments)}},e.ChartEngine.prototype.doDisplayCrosshairs=function(){J.h8g();var t,a,r;if(!this.runPrepend("doDisplayCrosshairs",arguments)){if(this.displayInitialized){var{floatCanvas:i,controls:n,layout:s}=this,{crossX:h,crossY:o,floatDate:l}=n,{vectorType:u}=this.currentVectorParameters;u===""||!s.crosshair&&!u||e.Drawing&&e.Drawing[u]&&new e.Drawing[u]().dragToDraw||!this.insideChart&&!this.grabbingScreen||this.openDialog!==""?this.undisplayCrosshairs():(h&&h.style.display!==""&&(h.style.display="",o&&(o.style.display=""),this.magnetizedPrice&&u?(t="b",t+="loc",t+="k",a="stx-cros",a+="shair-on",this.container.classList.remove(a),this.chart.tempCanvas.style.display=t):this.container.classList.add("stx-crosshair-on")),l&&!this.chart.xAxis.noDraw&&(l.style.visibility="",this.currentPanel&&this.updateFloatHRLabel(this.currentPanel)),i&&(r="bloc",r+="k",i.style.display=="none"&&e.clearCanvas(i,this),i.style.display=r))}this.runAppend("doDisplayCrosshairs",arguments)}},e.ChartEngine.prototype.undisplayCrosshairs=function(){var t,a,r,i,n,s,h,o,l,u;t="undisplayCrosshai",t+="rs",a="no",a+="n",a+="e",r="stx-c",r+="ro",r+="sshair-o",r+="n",!this.runPrepend("undisplayCrosshairs",arguments)&&(i=this.controls,n=i.crossX,s=i.crossY,n&&n.style.display!="none"&&(h="n",h+="one",n.style.display=h,s&&(s.style.display="none")),J.p4Q(),this.displayInitialized&&i.floatDate&&(i.floatDate.style.visibility="hidden"),this.container.classList.remove(r),o=this.floatCanvas,o&&o.isDirty&&o.style.display!=a&&(e.clearCanvas(o,this),o.style.display!="none"&&(o.style.display="none")),!this.activeDrawing&&!this.repositioningDrawing&&!this.editingAnnotation&&(l="n",l+="o",l+="ne",u=this.chart.tempCanvas,u&&u.style.display!=l&&(u.style.display="none")),this.runAppend(t,arguments))},e.ChartEngine.prototype.hideCrosshairs=function(){J.h8g(),this.displayCrosshairs=!1},e.ChartEngine.prototype.showCrosshairs=function(){this.displayCrosshairs=!0}};ds=W=>{var e,t;e=W.CIQ,t=W.timezoneJS,e.ChartEngine.prototype.loadChart=function(a,r,i){var n,s,h,o,l,u,c,p;!i&&typeof r=="function"?(i=r,r={}):Array.isArray(r)&&(r={masterData:r}),r||(r={});var{chart:y,periodicity:d,range:g,span:b}=r,{layout:f,quoteDriver:m}=this;n={periodicity:f.periodicity,interval:f.interval,timeUnit:f.timeUnit};function C(){var A,T,_;A="ma",A+="s",A+="t",A+="er",T="symbolC",T+="ha",T+="nge",J.h8g(),l.layout.symbols=l.getSymbols({"include-parameters":!0,"exclude-studies":!0}),l.dispatch(l.currentlyImporting?"symbolImport":T,{stx:l,symbol:y.symbol,symbolObject:y.symbolObject,prevSymbol:D,prevSymbolObject:h,action:A}),d&&(_="periodic",_+="i",_+="ty",l.dispatch(_,{stx:l,differentData:!0,prevPeriodicity:n})),m&&m.paused&&m.resume()}d&&(s=e.cleanPeriodicity(d.period?d.period:d.periodicity,d.interval,d.timeUnit),f.interval=s.interval,f.periodicity=s.period,f.timeUnit=s.timeUnit),y||(y=this.chart);var{dataSet:S,market:w,masterData:k,symbol:D,moreAvailable:v,upToDate:x}=y;h=e.clone(y.symbolObject),y.dataSet=[],y.masterData=[],y.moreAvailable=null,y.upToDate=null,a?typeof a=="object"?a.symbol.toUpperCase&&a.symbol.toUpperCase()==="CIQINFO"?e.logPackageInfo():(y.symbol=a.symbol,y.symbolObject=a):a.toUpperCase&&a.toUpperCase()==="CIQINFO"?e.logPackageInfo():(y.symbol=a,y.symbolObject.symbol=a):(y.symbol=null,y.symbolObject={symbol:null}),y.inflectionPoint=null,this.marketFactory&&(o=this.marketFactory(y.symbolObject),this.setMarket(o,y)),this.setMainSeriesRenderer(!0),!g&&!b&&f?(b=f.range?{}:f.setSpan,g=f.range||{}):g&&b&&(b={}),this.clearCurrentMarketData(y),l=this,!r.masterData&&m?(u=function(A){var T;T="orp",T+="hane",T+="d",A&&A!=T&&(y.symbol=D,y.symbolObject=h,y.market=w,l.masterData=y.masterData=k,y.dataSet=S,y.moreAvailable=v,y.upToDate=x),C(),i&&i.call(l,A)},g&&Object.keys(g).length&&this.setRange?(delete r.span,delete f.setSpan,this.chart.masterData=null,this.displayInitialized=!1,d&&(g.periodicity=d),g.forceLoad=!0,this.setRange(g,u)):b&&b.base&&this.setSpan?(b.multiplier=b.multiplier||1,this.chart.masterData=null,this.displayInitialized=!1,d&&(b.maintainPeriodicity=!0),b.forceLoad=!0,this.setSpan(b,u)):m.newChart({symbol:y.symbol,symbolObject:y.symbolObject,chart:y,initializeChart:!0},function(A){J.h8g(),A||(l.adjustPanelPositions(),m.updateSubscriptions(),r.stretchToFillScreen&&l.fillScreen()),u.apply(l,arguments)})):(r.masterData||(c="Warning: No masterData specified a",c+="nd no QuoteFeed config",c+="ured",console.log(c)),y.symbol||(y.symbol=""),this.initializeChart(),p=this.doCleanupGaps(r.masterData,y),this.setMasterData(p,y,{noCleanupDates:!0}),y.endPoints={},p&&p.length&&(y.endPoints={begin:p[0].DT,end:p[p.length-1].DT}),this.createDataSet(),g&&Object.keys(g).length&&this.setRange?this.setRange(g):b&&b.multiplier&&b.base&&this.setSpan?this.setSpan({maintainPeriodicity:!0,multiplier:b.multiplier,base:b.base}):r.stretchToFillScreen?this.fillScreen():p&&p.length&&this.home(),this.adjustPanelPositions(),C(),i&&i.call(l)),e.logVersion()},e.ChartEngine.prototype.loadBlankChart=function(){J.h8g(),this.loadChart(null,[])},e.ChartEngine.prototype.getDataFields=function(a){var r=J,i,n,s,h,o,l,u;i="C",i+="l",i+="o",i+="se",a||(a=this.chart),n=a.defaultPlotField||i,s=["Open","High","Low"],r.h8g(),s.push(n);for(var c in a.series)h=a.series[c].parameters,s.push(h.symbol);o=-140862991,r.s1t(19),l=-r.s8L("8790307",32),u=2;for(var p="1"|1;r.D1T(p.toString(),p.toString().length,39232)!==o;p++)return s;return r.D1T(u.toString(),u.toString().length,26043)!==l,s},e.ChartEngine.prototype.cleanMasterData=function(a,r){var i,n,s,h,o;if(i=a.symbol,n=r.masterData,!n||!n.length)return;s=this.getDataFields(r),h=0;do{if(o=n[h],delete o[i],l.call(this,o,s)){n.splice(h,1);continue}h++}while(h<n.length);n=this.doCleanupGaps(n,r,{noCleanupDates:!0}),this.setMasterData(n,r,{noCleanupDates:!0}),this.clearCurrentMarketData(r,i);function l(u,c){for(var p,y=0;y<c.length;y++)if(p=u[c[y]],typeof p<"u")return!1;return J.p4Q(),!0}},e.ChartEngine.prototype.calculateATR=function(a,r,i){var n=J,s,h,o,l,u,c;i||(i=a.dataSet),s=a.state.calculations.atr,s||(s=a.state.calculations.atr={}),r||(r=20),h=[],s.accum&&(h=s.accum);for(var p=0;p<i.length;p++)if(l=i[p],o=p?i[p-1]:s.q1,!!o){if(u=Math.max(l.High-l.Low,Math.abs(l.High-o.Close),Math.abs(l.Low-o.Close)),h.length<r){if(h.push(u)==r){c=0;for(var y=0;y<h.length;y++)c+=h[y];n.s3C(30),l.atr=n.s8L(c,r)}}else{n.s1t(132);var d=n.g5k(7,0,20,21,5);l.atr=(o.atr*(r-d)+u)/r}l.trueRange=u}a.state.calculations.atr={accum:h,q1:o}},e.ChartEngine.prototype.calculateMedianPrice=function(a,r){var i;J.h8g(),r||(r=a.dataSet);for(var n=0;n<r.length;++n){i=r[n],J.s3C(11);var s=J.s8L(10,8);i["hl/2"]=(i.High+i.Low)/s}},e.ChartEngine.prototype.calculateTypicalPrice=function(a,r){var i,n;r||(r=a.dataSet);for(var s=0;s<r.length;++s)n="hlc/",n+="3",i=r[s],i[n]=(i.High+i.Low+i.Close)/3},e.ChartEngine.prototype.calculateWeightedClose=function(a,r){var i=J,n,s;i.p4Q(),r||(r=a.dataSet);for(var h=0;h<r.length;++h){s="h",s+="lc",s+="c",s+="/4",n=r[h],i.s1t(22);var o=i.s8L(0,2);i.s3C(3);var l=i.s8L(12,0,8);n[s]=(n.High+n.Low+o*n.Close)/l}},e.ChartEngine.prototype.calculateOHLC4=function(a,r){var i;r||(r=a.dataSet);for(var n=0;n<r.length;++n){i=r[n],J.s1t(133);var s=J.s8L(20,1,11,35);i["ohlc/4"]=(i.Open+i.High+i.Low+i.Close)/s}},e.ChartEngine.prototype.currentQuote=function(a){var r;if(!this.chart.dataSet)return null;for(var i=this.chart.dataSet.length-1;i>=0;i--)if(this.chart.dataSet[i]){if(!a)return this.chart.dataSet[i];if(r=this.chart.dataSet[i][a],r||r==="0">>0)return this.chart.dataSet[i]}return null},e.ChartEngine.prototype.mostRecentClose=function(a){var r,i,n;if(!this.chart.dataSet)return null;for(var s=this.chart.dataSet.length-1;s>=0;s--)if(r="nu",r+="m",r+="ber",i=this.chart.dataSet[s],!!i&&!(a&&(i=i[a],!i&&i!==0))){if(n=i.iqPrevClose,typeof i=="object"&&(i=i.Close),typeof i==r)return i;if(typeof n=="number")return n}return J.h8g(),null},e.ChartEngine.prototype.createDataSegment=function(a){var r=J,i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k;if(i="create",i+="DataSegment",!this.runPrepend("createDataSegment",arguments)){for(var D in this.charts){n=this.charts[D],a&&(n=a),e.Comparison&&n.isComparison&&e.Comparison.createComparisonSegmentInner(this,n),s=n.dataSet,h=n.baseline,o=n.scroll,l=n.maxTicks,u=this.layout,c=u.candleWidth,h.actualLevel=h.userLevel?h.userLevel:h.defaultLevel,p=h.includeInDataSegment&&(!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars),d=0,g=n.dataSegment=[],r.s1t(134);var v=r.g5k(3,5,6,6,0);b=s.length-v-o-("1"^0),f=n.defaultPlotField;for(var x=-1;x<o&&x<l;x++)b++,!(x==-1&&!p)&&(b<s.length&&b>=0?(y=s[b],y.candleWidth=null,y&&(d+=y.Volume||1),g.push(y),h.actualLevel===null&&x>=0&&(f&&f!="Close"?(r.s1t(127),m=s[r.s8L(0,b,"1")],m&&(m[f]||m[f]===0)&&(h.actualLevel=m[f])):(y.iqPrevClose||y.iqPrevClose===("0"^0))&&(h.actualLevel=y.iqPrevClose))):b<0&&g.push(null));if(n.segmentImage=null,C=this.mainSeriesRenderer||{},C.params&&C.params.volume){S=n.width-(l-g.length-1)*u.candleWidth,w=0,n.segmentImage=[];for(var A=0;A<g.length;A++)if(y=g[A],n.segmentImage[A]={},k=null,y){if(y.Volume){y.candleWidth=S*y.Volume/d,r.s1t(135);var T=r.g5k(3,3,50,13);k=w+y.candleWidth/T,w+=y.candleWidth}else y.candleWidth=c,r.s1t(136),k=r.s8L(2,w,c),w+=c;n.segmentImage[A]={tick:y.tick,candleWidth:y.candleWidth,leftOffset:k}}else n.segmentImage[A]={tick:null,candleWidth:c,leftOffset:w+c/2},w+=c}if(a)break}n&&n.isComparison&&this.clearPixelCache(),this.positionCrosshairsAtPointer(),r.p4Q(),this.runAppend(i,arguments)}},e.ChartEngine.prototype.getDataSegment=function(a){var r,i,n;return a||(a=this.chart),r=a.dataSegment,J.p4Q(),!r||!r.length?[]:(i=0,n=r.length,this.pixelFromBar(i,a)<a.panel.left&&i++,this.pixelFromBar(n-1,a)>a.panel.right&&n--,r.slice(i,n))},e.ChartEngine.prototype.setMasterData=function(a,r,i){var n,s,h,o,l,u,c,p,y,d;for(n="cha",n+="rt",r||(r=this.chart),this.marketFactory&&(s=this.marketFactory(r.symbolObject),this.setMarket(s,r)),i||(i={}),i.noCleanupDates||this.doCleanupDates(a,this.layout.interval),r.masterData=a,r.name==n&&(this.masterData=a),o=null,h=0;a&&h<a.length;h++)l="n",l+="u",l+="mbe",l+="r",u="nu",u+="mber",c="Val",c+="ue",p=a[h],o===null&&(typeof p.Close=="number"?o="Close":typeof p.Value=="number"&&(y="V",y+="a",y+="l",y+="ue",o=y)),o===c&&typeof p.Value===u&&(p.Close=p.Value),p.DT?(Object.prototype.toString.call(p.DT)!="[object Date]"&&(p.DT=new Date(p.DT)),(!p.Date||p.Date.length!=17)&&(p.Date=e.yyyymmddhhmmssmmm(p.DT))):p.Date?p.DT=e.strToDateTime(p.Date):console.log("setMasterData : Missing DT and Date on masterData object"),p.Volume&&typeof p.Volume!==l&&(p.Volume=parseInt(p.Volume,10)),a.length-h<50&&this.updateCurrentMarketData(p,r,null,{fromTrade:!0});r.calculateTradingDecimalPlaces&&(r.decimalPlaces=r.calculateTradingDecimalPlaces({stx:this,chart:r,symbol:r.symbolObject.symbol,symbolObject:r.symbolObject})),this.setDisplayDates(a),r.roundit=Math.pow(10,r.decimalPlaces);for(h in this.plugins)d=this.plugins[h],d.display&&d.setMasterData&&d.setMasterData(this,r)},e.ChartEngine.prototype.setMasterDataRender=function(a,r,i){J.p4Q(),i||(i=this.chart),i.symbol||(i.symbol=""),this.setMasterData(r,i),r&&(i.endPoints={},r.length&&(i.endPoints={begin:r[0].DT,end:r[r.length-1].DT},i.symbol=a)),this.createDataSet(),this.initializeChart(),this.draw(),(!r||!r.length)&&(i.symbol=null,this.clear()),this.adjustPanelPositions()},e.ChartEngine.prototype.getSymbols=function(a){var r,i,n,s,h,o,l,u;a||(a={}),r=[],n=this.layout;for(var c in this.charts){s=this.charts[c];var{symbol:p,symbolObject:y}=s;y&&y.symbol&&(a.static?y.static&&r.push(m(p,y,n)):r.push(m(p,y,n)));for(var d in s.series){h="inc",h+="lude-",h+="static";var{parameters:g}=s.series[d];if(!(!(a[h]||a.static)&&g.data&&!g.data.useDefaultQuoteFeed)){var{symbol:b,symbolObject:f}=g;i=m(b,f,n),i.id=d,a["include-parameters"]&&(i.parameters=e.clone(g),i.parameters.yAxis&&delete i.parameters.yAxis.yAxisPlotter),!(a["exclude-studies"]&&g.bucket=="study")&&(a["exclude-generated"]&&f.generator||(a.static?f.static&&r.push(i):r.push(i)))}}}J.p4Q();function m(D,v,x){return{symbol:D,symbolObject:v,periodicity:x.periodicity,interval:x.interval,timeUnit:x.timeUnit,setSpan:x.setSpan}}if(a["breakout-equations"]){o={};for(var C=0;C<r.length;C++){var{symbol:S}=r[C];if(this.isEquationChart(S)){if(l=e.formatEquation(S),l){u=l.symbols;for(var w=0;w<u.length;w++)o[u[w]]=m(u[w],r[C].symbolObject,r[C])}}else o[S]=m(S,r[C].symbolObject,r[C])}r=[];for(var k in o)r.push(o[k])}return r},e.ChartEngine.prototype.setDisplayDate=function(a){var r,i,n;if(!e.ChartEngine.isDailyInterval(this.layout.interval)){r=a.DT,J.s1t(137);var s=J.g5k(3,1,16,20);i=r.getSeconds()*("1000"*s)+r.getMilliseconds(),t.Date&&this.displayZone&&(n=new t.Date(r.getTime(),this.displayZone),r=new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes()),r=new Date(r.getTime()+i)),a.displayDate=r}},e.ChartEngine.prototype.setDisplayDates=function(a){var r;if(J.p4Q(),!!a&&!e.ChartEngine.isDailyInterval(this.layout.interval))for(var i=0;i<a.length;i++)r=a[i],r.DT&&this.setDisplayDate(r)},e.ChartEngine.prototype.setTimeZone=function(a,r){var i,n,s,h,o,l;if(i="p",i+="references",!t.Date){this.timeZoneOffset=0;return}n=new Date,s=n.getTimezoneOffset(),h=s,o=s,a&&(this.dataZone=a),this.dataZone&&(h=new t.Date(n,this.dataZone).getTimezoneOffset()),r&&(this.displayZone=r),this.displayZone&&(o=new t.Date(n,this.displayZone).getTimezoneOffset()),J.s1t(138),this.timeZoneOffset=J.g5k(o,s,h,s);for(var u in this.charts)l=this.charts[u],this.setDisplayDates(l.masterData);this.preferences.timeZone=r,this.changeOccurred(i),this.createDataSet()},e.ChartEngine.prototype.updateChartData=function(a,r,i={}){var n=J,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_;s="updateCha",s+="rtData",h="a",h+="pp",n.h8g(),h+="endMasterData";function L(){n.p4Q(),o.createDataSet(null,null,i),o.draw({animationEntry:F}),o.updateChartAccessories(),n.s1t(20),o.streamParameters.count=n.g5k("0",0),o.streamParameters.timeout=-1}r||(r=this.chart),o=this;var{layout:M}=this,{animationEntry:F,secondarySeries:P}=i,{isValidNumber:E}=e;function O(){var Q,j;if(Q="Invalid",Q+=" ",Q+="Date",l=!0,i.useAsLastSale&&i.useAsLastSale.aggregatedVolume&&(u=!0),a.constructor===Array){n.s1t(3);var Z=n.s8L(2,16,17);j=a[a.length-Z],a={},a.DT=j.DT,a.Close=j.Close,a.Volume=j.Volume}else a.Last&&(a.Close=a.Last,delete a.Last);a.DT&&Object.prototype.toString.call(a.DT)!="[object Date]"&&(a.DT=new Date(a.DT)),(!a.DT||a.DT==Q)&&(a.DT=new Date),M.interval!="tick"&&N(),a.Open=a.Close,a.High=a.Close,a.Low=a.Close}var{masterData:I}=r;if(l=!1,u=!1,i.noCleanupDates||this.doCleanupDates(a,M.interval),(i.useAsLastSale||a.constructor==Object&&(a.Last||a.Last===0))&&O(),a&&a.constructor==Object&&(a=[a]),!a||!a.length)return;function B(){var Q,j,Z,ee,$,ie;if(Q=null,j=0,I.length&&(Q=o.getFirstLastDataRecord(I,P||r.defaultPlotField,!0),Q)){Z=-728561477,ee=1872624302,$=2;for(var te=1;n.D1T(te.toString(),te.toString().length,3819)!==Z;te++){if(a[a.length-1].DT<=Q.DT)return;$+=2}if(n.D1T($.toString(),$.toString().length,28742)!==ee&&a[a.length%9].DT>=Q.DT)return;for(;j<a.length;j++)if(+a[j].DT==+Q.DT){o.getFirstLastDataRecord([a[j]],P||r.defaultPlotField)&&(Q=null);break}else if(a[j].DT>Q.DT)break}ie=a.slice(j),Q&&ie.unshift(P?Q[P]:Q),ie=o.doCleanupGaps(ie,r),Q&&ie.shift(),n.p4Q(),a=a.slice(0,j).concat(ie)}if(this.runPrepend(h,[a,r,i]))return;function N(){var Q,j,Z,ee,$,ie,te,re,H,U,G;if(Q="we",Q+="e",Q+="k",!(!e.Market||!r.market)){if(j={market_tz:e.getFromNS(r,"market.market_def.market_tz",null)},n.p4Q(),Z=M.interval,(Z=="month"||Z==Q)&&(ee="d",ee+="a",ee+="y",o.dontRoll||(Z=ee),j=o.chart.market.market_def),$=new e.Market(j),ie={begin:I&&I.length?I[I.length-1].DT:a.DT,interval:Z,periodicity:1,timeUnit:M.timeUnit},te=$.newIterator(ie),re=te.next(),!I)a.DT=new Date(+te.previous());else if(a.DT<re){for(H=0,G=te.previous(),U=a.DT,i.appending=!0;U<G&&H<1e3;)i.appending=!1,G=te.previous(),H++;a.DT=G,i.updating=!i.appending}else if(a.DT>=re){for(n.s3C(11),H=n.s8L("0",0),U=a.DT;U>re&&H<1e3;)a.DT=re,re=te.next(),H++;i.appending=!0}}}if(this.runPrepend(s,[a,r,i]))return;I||(I=[]),n.s1t(8);var R=n.g5k(15,15,2);y=I.length-("1"|R),d=!1,i.fillGaps&&B();function q(Q,j){n.p4Q();var Z,ee,$,ie;if(Z=I[Q],P&&(Z=Z[P]||{}),j.Close===null)Z.Open!==void 0&&(j.Open=null),Z.High!==void 0&&(j.High=null),Z.Low!==void 0&&(j.Low=null),Z.Volume!==void 0&&(j.Volume=null);else{ee="B",ee+="id",$="Clo",$+="s",$+="e",l?(j.Volume&&(j.Volume=parseInt(j.Volume,10)),u||(j.Volume+=Z.Volume)):!E(j.Volume)&&Z.Volume&&(j.Volume=Z.Volume),i.allowReplaceOHL||(E(Z.Open)&&(j.Open=Z.Open),E(Z.High)&&E(j.High)&&Z.High>j.High&&(j.High=Z.High),E(Z.Low)&&E(j.Low)&&Z.Low<j.Low&&(j.Low=Z.Low)),[$,"Open","High","Low",ee,"Ask"].forEach(function(te){E(j[te])||(j[te]=Z[te])});for(c in r.series)ie="u",ie+="nd",ie+="e",ie+="fined",p=r.series[c].parameters.symbolObject.symbol,typeof j[p]>"u"&&typeof Z[p]!=ie&&(j[p]=Z[p])}}if(!a.length)return;for(var Y=0;Y<a.length;Y++){for(g=a[Y],b=g.DT,f=g.Date,b&&Object.prototype.toString.call(b)!="[object Date]"&&(g.DT=b=new Date(b)),b&&(!f||f.length!=17)&&(g.Date=e.yyyymmddhhmmssmmm(g.DT)),b||(b=g.DT=e.strToDateTime(f)),!E(g.Close)&&E(g.Value)&&(g.Close=g.Value);y>=0&&y<I.length;){if(m=I[y].DT,m||(m=e.strToDateTime(I[y].Date)),m.getTime()<=b.getTime()){if(d=!0,n.s1t(91),C=n.s8L(0,"0"),m.getTime()<b.getTime()){if(y<I.length-1&&(S=I[y+1].DT||e.strToDateTime(I[y+1].Date),S.getTime()<=b.getTime())){y++;continue}C=1}if(i.deleteItems){C||z(y,b);break}else M.interval=="tick"&&i.firstLoop!==!1&&(C=1),C||q(y,g),E(g.Close)&&(E(g.Open)||(g.Open=g.Close),w=Math.max(g.Open,g.Close),k=Math.min(g.Open,g.Close),(!E(g.High)||g.High<w)&&(g.High=w),(!E(g.Low)||g.Low>k)&&(g.Low=k)),g.Volume&&!E(g.Volume)&&(g.Volume=parseInt(g.Volume,"10"^0)),y+=C,P?(a.length-Y<50&&this.updateCurrentMarketData(g,r,P,{fromTrade:!0,animationEntry:F}),(M.interval!="tick"||g.Close!==void 0)&&(C&&(I.splice(y,0,{DT:g.DT}),this.setDisplayDate(I[y])),I[y][P]=g)):(a.length-Y<50&&this.updateCurrentMarketData(g,r,null,{fromTrade:!0,animationEntry:F}),(M.interval!="tick"||g.Close!==void 0)&&(I.splice(y,C?0:"1">>0,g),this.setDisplayDate(g)));break}y+=d?1:-1}y<0&&(P?(this.updateCurrentMarketData(g,r,P,{fromTrade:!0,animationEntry:F}),(M.interval!="tick"||g.Close!==void 0)&&(I.splice(0,0,{DT:g.DT}),this.setDisplayDate(I[0]),I[0][P]=g)):(this.updateCurrentMarketData(g,r,null,{fromTrade:!0,animationEntry:F}),(M.interval!="tick"||g.Close!==void 0)&&(n.s1t(56),I.splice(n.g5k(32,"0"),0,g),this.setDisplayDate(g))),d=!0,y=0)}I.length&&(this.masterData=r.masterData=I),this.maxMasterDataSize&&(I=r.masterData=this.masterData=I.slice(-this.maxMasterDataSize));function z(Q,j){var Z,ee;if(P)delete I[Q][P],o.cleanupGaps&&(Z={DT:j,Close:null},o.cleanupGaps!="gap"&&I[Q-1]&&I[Q-1][P]&&(Z.Close=I[Q-1][P].Close,Z.High=Z.Low=Z.Open=Z.Close,Z.Volume=0),I[Q][P]=Z);else{ee=I.splice(Q,1)[0],Z={DT:ee.DT,Close:null,needed:!1};for(c in r.series)p=r.series[c].parameters.symbolObject.symbol,typeof ee[p]<"u"&&(Z[p]=ee[p],delete Z.needed);o.cleanupGaps&&o.cleanupGaps!="gap"&&(delete Z.needed,o.cleanupGaps!="gap"&&I[Q-1]&&(Z.Close=I[Q-1].Close,Z.High=Z.Low=Z.Open=Z.Close,Z.Volume=0)),Z.needed!==!1&&(I.splice(Q,0,Z),o.setDisplayDate(Z))}}D=P?this.getSeries({symbol:P,chart:r}):[r];for(var V="0"*1;V<D.length;V++)v=D[V],(!v.endPoints.begin||v.endPoints.begin>a[0].DT)&&(v.endPoints.begin=a[0].DT),(!v.endPoints.end||v.endPoints.end<a[a.length-1].DT)&&(v.endPoints.end=a[a.length-1].DT),x=v.parameters&&v.parameters.field||r.defaultPlotField,A=this.getFirstLastDataRecord(a,x,!0),A&&(!v.lastQuote||v.lastQuote.DT<=A.DT)&&(v.lastQuote=A),P&&i.deleteItems&&(v.lastQuote=this.getFirstLastDataRecord(I,P,!0)[P]);for(var K in this.plugins)T=this.plugins[K],T.display&&T.appendMasterData&&T.appendMasterData(this,a,r);(!this.masterData||!this.masterData.length)&&(this.masterData=I),i.noCreateDataSet||(_=this.streamParameters,++_.count>_.maxTicks||i.bypassGovernor?(clearTimeout(_.timeout),L()):_.timeout==-1&&(_.timeout=setTimeout(L,_.maxWait))),this.runAppend("appendMasterData",arguments),this.runAppend("updateChartData",arguments)},e.ChartEngine.prototype.updateCurrentMarketData=function(a,r,i,n={}){var s,h,o,l,u,c,p,y,d,g,b,f;if(s="A",s+="sk",s+="L2",h="B",h+="i",h+="d",o="Tim",o+="est",o+="amp",!(!a||!a.DT)){r||(r=this.chart);var{fromTrade:m}=n;if(l=a.DT,!m&&this.layout.interval!="tick"&&r.market){if(r.market.market_def&&(!r.market.isMarketDate(a.DT)||!e.ChartEngine.isDailyInterval(this.layout.interval)&&r.market.getSession(a.DT)===null))return;u={begin:a.DT,interval:this.layout.interval,periodicity:this.layout.periodicity,timeUnit:this.layout.timeUnit},c=new e.Market(r.market.market_def),this.extendedHours&&this.extendedHours.filter&&c.enableAllAvailableSessions(),p=c.newIterator(u),p.next(),a.DT=p.previous()}if(!this.runPrepend("updateCurrentMarketData",arguments)){y=m?"DT":o;var{currentMarketData:C}=r;d=!1,i&&(C[i]||(C[i]={}),C=C[i]),["Last",h,"Ask"].forEach(function(S){J.p4Q();var w,k,D;w="num",w+="b",w+="e",w+="r",a[S]&&typeof a[S]==w&&(k=C[S],(!k||!k[y]||k[y]<=(m?a.DT:l))&&(D="Si",D+="ze",C[S]={DT:a.DT,Price:a[S],Size:a[S+D],Timestamp:l},d=!0))}),["BidL2",s].forEach(function(S){var w,k,D,v;if(a[S]&&a[S]instanceof Array){w=-543640555,k=-1008007620,D=2;for(var x=1;J.u6e(x.toString(),x.toString().length,6603)!==w;x++)v=C[S],D+=2;J.u6e(D.toString(),D.toString().length,5439)!==k&&(v=C[S]),(!v||!v[y]||v[y]<=(m?a.DT:l))&&(C[S]={DT:a.DT,Price_Size:a[S],Timestamp:l},d=!0)}}),a.Close&&(!C.Last||C.Last.Timestamp<=(a.LastTime||l))&&(g=a.Close,b=n&&n.finalClose,(b||b===0)&&(g=b),C.Last={DT:a.DT,Price:g,Size:a.LastSize===void 0&&this.layout.interval=="tick"?a.Volume:a.LastSize,Timestamp:a.LastTime||l},d=!0),d&&!n.animationEntry&&(f=new Date,clearTimeout(C.assignLastTouchAsync),C.assignLastTouchAsync=setTimeout(()=>{C.touched=f})),m||delete a.Last,this.runAppend("updateCurrentMarketData",arguments)}}},e.ChartEngine.prototype.clearCurrentMarketData=function(a,r){var i,n,s,h,o,l;if(!this.runPrepend("clearCurrentMarketData",arguments)){if(n=[],a)n.push(a);else for(i in this.charts)n.push(this.charts[i]);for(i=0;i<n.length;i++)if(s=n[i].currentMarketData,r)delete s[r];else for(var u in s)s[u]=void 0;h=-456923275,o=-1493058980,l=2;for(var c="1"|1;J.u6e(c.toString(),c.toString().length,8838)!==h;c++)this.runAppend("",arguments),l+=2;J.D1T(l.toString(),l.toString().length,91592)!==o&&this.runAppend("",arguments),this.runAppend("clearCurrentMarketData",arguments)}}};ps=W=>{var e=J,t;t=W.CIQ,t.ChartEngine.prototype.changeOccurred=function(a){var r,i;r={stx:this,symbol:this.chart.symbol,symbolObject:this.chart.symbolObject,layout:this.layout,drawings:this.drawingObjects},a=="theme"&&this.dispatch("theme",r),!this.currentlyImporting&&(a=="layout"?this.dispatch("layout",r):a=="vector"?this.dispatch("drawing",r):a=="preferences"&&(i="prefere",i+="nc",i+="es",this.dispatch(i,r)))},t.ChartEngine.prototype.startAsyncAction=function(){this.pendingAsyncs||(this.pendingAsyncs=[]),this.pendingAsyncs.push(!0)},t.ChartEngine.prototype.registerChartDrawnCallback=function(a){return this.asyncCallbacks||(this.asyncCallbacks=[]),this.asyncCallbacks.push(a),{fc:a}},t.ChartEngine.prototype.unregisterChartDrawnCallback=function(a){e.p4Q();for(var r=0;r<this.asyncCallbacks.length;r++)if(this.asyncCallbacks[r]==a.fc){this.asyncCallbacks.splice(r,1);return}},t.ChartEngine.prototype.makeAsyncCallbacks=function(){if(this.asyncCallbacks&&(!this.pendingAsyncs||!this.pendingAsyncs.length))for(var a=0;a<this.asyncCallbacks.length;a++)this.asyncCallbacks[a]()},t.ChartEngine.prototype.completeAsyncAction=function(){e.p4Q(),this.pendingAsyncs.pop(),this.makeAsyncCallbacks()},t.ChartEngine.prototype.addDomEventListener=function(a,r,i,n){e.p4Q(),a.addEventListener(r,i,n),this.eventListeners.push({element:a,event:r,function:i,options:n})},t.ChartEngine.prototype.addEventListener=function(a,r){var i,n;if(a==="*")for(var s in this.callbackListeners)this.callbackListeners[s].push(r);else if(a instanceof Array)for(var h=0;h<a.length;h++)this.callbackListeners[a[h]].push(r);else{if(i=this.callbackListeners[a],!i)throw n="Atte",n+="mpted to add an invalid listener.",new Error(n);i.push(r)}return{type:a,cb:r}},t.ChartEngine.prototype.removeEventListener=function(a,r){e.p4Q();var i,n;if((!a||typeof a!="object")&&(a={type:a,cb:r}),i=function(h,o){for(var l=0;l<h.length;l++)if(h[l]===o){h.splice(l,1);return}},n=this.callbackListeners,a.type==="*"){for(var s in n)i(n[s],a.cb);return}if(!n[a.type])throw new Error("Attempted to remove an invalid listener.");i(n[a.type],a.cb)},t.ChartEngine.prototype.dispatch=function(a,r){var i;if(i=this.callbackListeners[a],i){for(var n=0;n<i.length;n++)if(i[n].call(this,r)===!0)return!0}if(i=this.callbackListeners["*"],i){for(var s=0;s<i.length;s++)if(i[s].call(this,r)===!0)return!0}return!1},t.ChartEngine.prototype.updateListeners=function(a){var r;for(var i in this.plugins)r=this.plugins[i],r.display&&r.listener&&r.listener(this,a)},t.ChartEngine.registerGlobalEvent=function(a,r,i,n){var s,h,o;s=-1858517218,e.s1t(19),h=e.s8L("391932581",0),o=2;for(var l=1;e.D1T(l.toString(),l.toString().length,62767)!==s;l++)~Array.isArray(a)&&(a=[a]),o+=2;e.u6e(o.toString(),o.toString().length,84381)!==h&&(Array.isArray(a)||(a=[a])),a.forEach(u=>{e.p4Q(),t.ChartEngine.globalEventHandlers.push({event:u,listener:r,options:i||!1,isWindow:n,applied:[]})}),t.ChartEngine.attachGlobalEventHandlers()},e.p4Q(),t.ChartEngine.attachGlobalEventHandlers=function(){e.h8g();var a;a=t.ChartEngine.registeredContainers,a.forEach(r=>{e.h8g();var{ownerDocument:i}=r;t.ChartEngine.globalEventHandlers.forEach(function(n){var s,{event:h,listener:o,options:l,isWindow:u,applied:c}=n;e.p4Q(),c.indexOf(i)===-1&&(s=u?i.defaultView:i,s.addEventListener(h,o,l),c.push(i))})})}};gs=W=>{var e;e=W.CIQ,e.ChartEngine.prototype.prepend=function(t,a){var r,i;return J.s3C(22),r=J.s8L("prepend",t),this instanceof e.ChartEngine?(i=this.hasOwnProperty(r)?this[r]:[],this[r]=[a].concat(i)):(i=e.ChartEngine.prototype[r]||[],e.ChartEngine.prototype[r]=[a].concat(i)),J.h8g(),{method:r,func:a}},e.ChartEngine.prototype.append=function(t,a){var r,i,n;return r="a",r+="p",r+="pen",r+="d",J.s3C(22),i=J.g5k(r,t),this instanceof e.ChartEngine?(n=this.hasOwnProperty(i)?this[i]:[],this[i]=n.concat(a)):(n=e.ChartEngine.prototype[i]||[],e.ChartEngine.prototype[i]=n.concat(a)),{method:i,func:a}},e.ChartEngine.prototype.runPrepend=function(t,a,r){var i,n,s;if(J.s3C(22),i=J.g5k("prepend",t),n=this.hasOwnProperty(i)?this[i]:[],n=n.concat(e.ChartEngine.prototype[i]||[]),J.h8g(),!n.length)return!1;r||(r=this);for(var h=0;h<n.length;h++)if(s=n[h].apply(r,a),s)return s;return!1},e.ChartEngine.prototype.runAppend=function(t,a,r){var i,n,s,h;if(i="a",i+="ppend",J.p4Q(),J.s3C(22),n=J.s8L(i,t),s=this.hasOwnProperty(n)?this[n]:[],s=s.concat(e.ChartEngine.prototype[n]||[]),!s.length)return!1;r||(r=this);for(var o=0;o<s.length;o++)if(h=s[o].apply(r,a),h)return h;return!1},e.ChartEngine.prototype.removeInjection=function(t){var a,r;if(J.h8g(),a=t.method,this instanceof e.ChartEngine){if(!this[a])return;for(r=0;r<this[a].length;r++)if(this[a][r]==t.func){this[a].splice(r,1);return}}else{if(!e.ChartEngine.prototype[a])return;for(r="0"<<0;r<e.ChartEngine.prototype[a].length;r++)if(e.ChartEngine.prototype[a][r]==t.func){e.ChartEngine.prototype[a].splice(r,1);return}}},e.ChartEngine.prototype.remove=function(t){var a=J;a.h8g();var r,i,n,s;if(this instanceof e.ChartEngine){a.s1t(22),delete this[a.g5k("append",t)],r=1232636318,i=1822182050,n=2;for(var h=1;a.D1T(h.toString(),h.toString().length,82875)!==r;h++)a.s3C(92),~this[a.g5k(t,"")],n+=2;a.u6e(n.toString(),n.toString().length,46845)!==i&&(a.s3C(30),-this[a.g5k("",t)]),a.s1t(22),delete this[a.s8L("prepend",t)]}else s="app",s+="e",s+="n",s+="d",a.s1t(22),delete e.ChartEngine.prototype[a.g5k(s,t)],a.s1t(22),delete e.ChartEngine.prototype[a.g5k("prepend",t)]}};ms=W=>{var e=J,t,a;t=W.CIQ,a=W.timezoneJS,t.ChartEngine.prototype.convertToDataZone=function(r){var i,n,s,h;(r||r===0)&&this.dataZone&&(i=t.convertTimeZone(r,null,this.dataZone),r=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())),n=1406500273,s=685544243,e.s3C(11),h=e.s8L("2",0);for(var o=1;e.D1T(o.toString(),o.toString().length,33752)!==n;o++)return r;return e.D1T(h.toString(),h.toString().length,34257)!==s,r},t.ChartEngine.prototype.debug=function(){},t.ChartEngine.prototype.fps=function(r,i){var n,s,h;r=r||5,n=new Date().getTime(),s=0,h=this,e.s1t(55),o(),e.h8g();function o(){var l,u;e.s1t(22);var c=e.g5k(77,923);if(l=(new Date().getTime()-n)/c,l>r){e.s3C(30),u=e.g5k(s,l),e.s1t(22),i&&i(u);return}h.draw(),s++,t.ChartEngine.useAnimation?requestAnimationFrame(o):setTimeout(o,0)}},t.ChartEngine.htmlControls={mSticky:'<div class="stx_sticky"> <span class="mStickyInterior"></span></div>',iconsTemplate:'<div class="stx-panel-control"><div class="stx-panel-title"></div><div class="stx-panel-legend"></div></div>'},t.ChartEngine.prototype.setChartType=function(r){var i,n;if(i=this.layout,n=this.chart,i.aggregationType!="ohlc"&&(i.aggregationType="ohlc",n.canvas&&this.createDataSet()),i.chartType=r,this.setMainSeriesRenderer(),this.mainSeriesRenderer.isAggregation&&this.setAggregationType)return this.setAggregationType(r);n.defaultChartStyleConfig={type:r},this.displayInitialized&&this.draw(),this.changeOccurred("layout")},t.ChartEngine.prototype.setChartScale=function(r){var i;i="lin",i+="e",i+="ar",r||(r=i),this.layout.chartScale=r,this.chart.canvas&&this.draw(),this.changeOccurred("layout")},t.ChartEngine.prototype.checkLogScale=function(){var r,i;if(!this.runPrepend("checkLogScale",arguments))return this.layout.chartScale!=="log"?!1:(r=!1,this.chart.yAxis.lowValue<=0&&(i="li",i+="near",this.setChartScale(i),this.dispatch("notification","logdeactivated"),r=!0),this.runAppend("checkLogScale",arguments),r)},t.ChartEngine.prototype.setAdjusted=function(r){var i;i="lay",e.h8g(),i+="ou",i+="t",this.layout.adj=r,this.chart.canvas&&(this.createDataSet(),this.draw()),this.changeOccurred(i)},t.ChartEngine.prototype.padOutPrice=function(r,i){var n,s,h,o,l;if(n="num",n+="b",n+="e",n+="r",r!==("0"|0)&&(!r||typeof r!=n))return"";if(!i&&i!==0&&(i=r),e.s1t(22),s=e.s8L("",i),h=0,s.indexOf(".")>-1){e.s3C(9);var u=e.g5k(1055,12,7);e.s3C(9);var c=e.g5k(1079,9,5404);e.s1t(139);var p=e.s8L(10,0,7,0,17);e.s3C(55),e.g5k(1454,11,1443),e.s1t(75);var y=e.s8L(11,0,9,13,3);h=s.substring(s.indexOf(19.74>u?c:"108.91"*p!=634.76?".":414.01)).length-y}return i>=1e3?h=Math.max(h,0):i<2?h=Math.max(h,4):h=Math.max(h,2),o=this.internationalizer,e.p4Q(),o?(l=o.priceFormatters.length,h>=l&&(e.s3C(11),h=e.s8L(l,1)),r=o.priceFormatters[h].format(r)):r=r.toFixed(h),r},t.ChartEngine.prototype.formatPrice=function(r,i){var n,s,h,o;return n="un",n+="d",n+="efin",n+="ed",r!==0&&(!r||typeof r==n)?"":(i||(i=this.currentPanel),i||(i=this.chart.panel),!i||(s=i.decimalPlaces,!s&&s!==0&&(s=i.chart.decimalPlaces),!s&&s!==0)?r.toString():(h=this.internationalizer,h?(o=h.priceFormatters.length,s>=o&&(e.s3C(140),s=e.g5k(o,"1",32)),r=h.priceFormatters[s].format(r)):r=r.toFixed(s),r))},t.ChartEngine.prototype.determineMinMax=function(r,i,n,s,h,o,l,u,c){var p,y,d,g,b,f,m,C,S,w,k;e.s1t(119);var D=e.s8L(20,7,1,16,1919);p=Number.MAX_VALUE*D,y=Number.MAX_VALUE,d=!1,g=r.length,c||(c=[]),b=[],h&&(g=h);for(var v=0;v<=g+1;v++)if(i.length&&(v==g?f=this.getPreviousBar(this.chart,i[0],0):v==g+1?f=this.getNextBar(this.chart,i[0],g-1):f=r[v]),!!f){if(!s){if(f.transform)d=!0,f=f.transform;else if(d)continue}e.s1t(19),m=e.s8L("0",32);for(var x=0;x<i.length;x++)if(C=t.existsInObjectChain(f,i[x]),!!C){S=C.obj[C.member],typeof S=="number"&&(S=[S]);for(var A=0;A<S.length;A++)w=S[A],o&&w instanceof Array&&(w=w[0]),(w||w===0)&&(n===!0||n instanceof Array&&n.indexOf(i[x])>-1?(m+=w,m>p&&(p=m),m<y&&(y=m)):(w>p&&(p=w),w<y&&(y=w),b.push({value:w,quote:f})))}(n===!0||n instanceof Array&&n.indexOf(i[x])>-1)&&b.push({value:m,quote:f})}return k=[y,p],c.forEach(function(T){k=T(b,l,u)||k}),k[1]==Number.MAX_VALUE*-1&&(k[1]=0),k[0]==Number.MAX_VALUE&&(k[0]=0),k},t.ChartEngine.prototype.initializeDisplay=function(r){var i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k;if(i="Hi",i+="g",i+="h",n="Op",n+="en",this.runPrepend("initializeDisplay",arguments))return;s=[],h=[],e.p4Q(),o=!1,l=this,u=["Close",n,i,"Low"];function D(P,E){var O,I,B,N,R,q,Y,z,V,K;if(O=!1,e.h8g(),I=l.layout&&l.layout.studies&&l.layout.studies[P.name],I&&(!E||E.name==I.panel)){for(var Q in I.outputMap)s.push(Q),I.study&&(I.study.renderer?s=s.concat(t.createObjectChainNames(Q,u)):I.study.seriesFN||(s=s.concat(t.createObjectChainNames(Q,c))));for(var j=0;j<=2;j++)s.push(I.name+"_hist"+(j||""));O=!0}if(E){P.studies=[],P.renderers=[],O&&P.studies.push(P.name);for(var Z in A)if(B=A[Z],N=B.params,R=N.panel,(N.yAxis||!l.panels[R]||l.panels[R].yAxis)==P&&R==E.name){q=B.highLowBars?u:c,o=B.bounded;for(var ee=0;ee<B.seriesParams.length;ee++)Y=B.seriesParams[ee],!Y.hidden&&(z=void 0,Y.subField?z=t.createObjectChainNames(Y.symbol,[Y.subField]).concat(Y.symbol):Y.symbol?z=t.createObjectChainNames(Y.symbol,q).concat(Y.symbol):Y.field?z=Y.field:P==r.panel.yAxis&&(z=q),z&&(s=s.concat(z)),B.useSum&&(h=h.concat(z)));P.renderers.push(Z)}for(var $ in l.overlays)V=l.overlays[$],V.panel==E.name&&V.name!=P.name&&(K=V.getYAxis(l),K==P&&(P.studies.push(V.name),r.includeOverlaysInMinMax&&D({name:V.name})))}}c=[r.defaultPlotField||"Close"];var{mainSeriesRenderer:v}=this,{dataSegment:x,seriesRenderers:A}=r;if(y=null,d=Math.floor((r.width-this.micropixels)/this.layout.candleWidth),r.scroll>r.maxTicks&&r.maxTicks>d+1){e.s3C(22);var T=e.s8L(0,1);y=x.length-T}g=[];for(var _ in this.panels){b=this.panels[_],g=b.yaxisLHS.concat(b.yaxisRHS);for(var L=0;L<g.length;L++){if(f=g[L],s=[],h=[],m=r.transformFunc&&f==r.panel.yAxis,D(f,b),!this.currentlyImporting&&!f.renderers.length&&!f.studies.length){this.deleteYAxisIfUnused(b,f);continue}v&&v.determineMax?p=v.determineMax(x,s,h,!m,y,o,b,f):p=this.determineMinMax(x,s,h,!m,y,o,b,f),this.baselineHelper&&(p=this.setBaselineMinMax(p,f)),f.lowValue=p[0],f.highValue=p[1],f==r.panel.yAxis&&(r.lowValue=f.lowValue,r.highValue=f.highValue)}}if(C=r.state.aggregation,C&&C.box){r.lowValue-=C.box/("2">>0),e.s3C(8);var M=e.s8L(1,3,5);r.highValue+=C.box/M}S=429514337,w=618258853,k=2;for(var F=1;e.D1T(F.toString(),F.toString().length,46088)!==S;F++)this.runAppend("",arguments),k+=2;e.u6e(k.toString(),k.toString().length,75498)!==w&&this.runAppend("initializeDisplay",arguments)},t.ChartEngine.prototype.setMarket=function(r,i){if(t.Market){i||(i=this.chart),i.market=new t.Market(r);for(var n in this.layout.marketSessions)i.market.disableSession(n,this.layout.marketSessions[n])}},t.ChartEngine.prototype.setMarketFactory=function(r){e.h8g(),this.marketFactory=r},e.h8g(),t.ChartEngine.prototype.setResizeTimer=function(r){var i;e.p4Q(),i=()=>{var{canvas:n,container:s}=this.chart;e.h8g(),!(!n||t.isAndroid)&&(n.height!==Math.floor(this.devicePixelRatio*s.clientHeight)||n.width!==Math.floor(this.devicePixelRatio*s.clientWidth))&&this.resizeChart()},this.resizeHandle=t.resizeObserver(this.chart.container,i,this.resizeHandle,r)},t.ChartEngine.prototype.getRenderedItems=function(){var r,i,n,s,h,o,l,u,c;if(e.p4Q(),r="H",r+="i",r+="g",r+="h",i=this.chart,n=this.currentPanel,!!n){s=["Open",r,"Low","Close"],h=["Close"],o=[];for(var p in this.overlays)this.overlays[p].panel===n.name&&(o=o.concat(Object.keys(this.overlays[p].outputMap)));for(var y in i.seriesRenderers)if(l=i.seriesRenderers[y],l.params.panel==n.name)for(var d in l.seriesParams)u=l.seriesParams[d],c=l.highLowBars?s:h,u.subField?o=o.concat(t.createObjectChainNames(u.symbol,[u.subField])).concat(u.symbol):u.symbol?o=o.concat(t.createObjectChainNames(u.symbol,c)).concat(u.symbol):u.field?o.push(u.field):n==i.panel&&(o=o.concat(c));return o}},t.ChartEngine.prototype.setTransform=function(r,i,n){r.transformFunc=i,e.h8g(),r.untransformFunc=n},t.ChartEngine.prototype.unsetTransform=function(r){delete r.transformFunc,e.p4Q(),delete r.untransformFunc;for(var i=0;r.dataSet&&i<r.dataSet.length;i++)r.dataSet[i].transform=null},t.ChartEngine.prototype.isEquationChart=function(r){return e.p4Q(),r&&r[0]=="="?!this.allowEquations||!t.fetchEquationChart?(console.warn("Error, equation chart option requires equationsAdvanced.js"),!1):!0:!1},t.ChartEngine.prototype.correctIfOffEdge=function(r){var i,n,s,h,o,l,u,c,p,y,d;if(i="correctIf",e.h8g(),i+="OffE",i+="dge",!this.runPrepend(i,arguments)){for(var g in this.charts){if(n=this.charts[g],s=n.dataSet,h=n.maxTicks,o=this.layout,l=this.minimumLeftBars,u=Math.min(l,h),n.allowScrollPast){if(e.s1t(11),c=e.s8L(h,u),u>s.length&&(c=h-s.length),n.scroll-c>=s.length){e.s1t(22);var b=e.g5k(0,1);n.scroll=s.length+c-b,this.micropixels=0}n.scroll<=u&&(n.scroll=u,this.micropixels=0)}else n.scroll<u&&(n.scroll=u),n.scroll>s.length&&(n.scroll=s.length);if(n.allowScrollFuture===!1){p=this.getLabelOffsetInPixels(n,o.chartType)+o.candleWidth*n.whiteSpaceFutureTicks,e.s1t(141);var f=e.s8L(16,113,12,10,7);y=h-Math.round(p/o.candleWidth)-f,d=this.micropixels<0?n.scroll-1:n.scroll,d<y&&(n.scroll=y,this.micropixels=0)}}this.runAppend("correctIfOffEdge",arguments)}},t.ChartEngine.prototype.getStartDateOffset=function(){e.p4Q();for(var r=0;r<this.chart.dataSegment.length;r++)if(this.chart.dataSegment[r])return r;return 0},t.ChartEngine.prototype.setStartDate=function(r){for(var i,n=0;n<this.chart.dataSet.length;n++)if(i=this.chart.dataSet[n],i.DT.getTime()==r.getTime()){this.chart.scroll=this.chart.dataSet.length-n,this.draw();return}},t.ChartEngine.prototype.clearPixelCache=function(){var r;e.h8g();for(var i in this.panels)r=this.panels[i],r.cacheHigh=null,r.cacheLow=null,r.cacheLeft=1e6,r.cacheRight=-1;this.chart.pixelCacheExpired=!0},t.ChartEngine.prototype.adjustBackingStore=function(r,i){var n,s,h,o,l;if(this.devicePixelRatio=window.devicePixelRatio||1,this.devicePixelRatio<1&&(this.devicePixelRatio=1),n=i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1,s=this.devicePixelRatio/n,e.h8g(),!this.useBackingStore){this.devicePixelRatio=this.adjustedDisplayPixelRatio=1,r.style.width=r.style.height="";return}(!t.isAndroid||t.is_chrome||t.isFF)&&(h="p",h+="x",o=r.width,l=r.height,e.s3C(46),r.width=e.s8L(o,s),e.s1t(46),r.height=e.s8L(l,s),e.s3C(22),r.style.width=e.s8L(o,h),e.s3C(22),r.style.height=e.s8L(l,"px"),i.scale(s,s),this.adjustedDisplayPixelRatio=s,this.backing={ratio:s,width:r.width,height:r.height,styleWidth:o,styleHeight:l})},t.ChartEngine.prototype.reconstituteBackingStore=function(){var r,i;!this.useBackingStore||!this.backing||(r=[this.chart.canvas],this.useBackgroundCanvas&&r.push(this.chart.backgroundCanvas),i=this.backing,r.forEach(function(n){n.width!=i.width&&(n.width=i.width,n.height=i.height,n.context.scale(i.ratio,i.ratio))}),e.p4Q(),this.adjustedDisplayPixelRatio=i.ratio,this.draw())},t.ChartEngine.prototype.disableBackingStore=function(){var r,i;!this.useBackingStore||!this.backing||(r=[this.chart.canvas],this.useBackgroundCanvas&&r.push(this.chart.backgroundCanvas),i=this.backing,r.forEach(function(n){n.width!=i.styleWidth&&(n.width=i.styleWidth,n.height=i.styleHeight,e.s1t(46),n.context.scale(e.s8L("1",1),1))}),this.adjustedDisplayPixelRatio=1,this.draw())},t.ChartEngine.prototype.getBackgroundCanvas=function(r){return r||(r=this.chart),this.useBackgroundCanvas?r.backgroundCanvas:r.canvas},t.ChartEngine.prototype.resizeCanvas=function(){var r,i,n,s,h,o,l,u,c,p,y;r="undefi",r+="n",r+="ed",i="h",i+="t",i+="ml",n=this.chart.canvas,s=this.chart.context,n&&s&&(this.floatCanvas.height=this.chart.tempCanvas.height=this.chart.backgroundCanvas.height=n.height=this.chart.container.clientHeight,this.floatCanvas.width=this.chart.tempCanvas.width=this.chart.backgroundCanvas.width=n.width=this.chart.container.clientWidth,this.adjustBackingStore(n,s),this.adjustBackingStore(this.chart.tempCanvas,this.chart.tempCanvas.context),this.adjustBackingStore(this.floatCanvas,this.floatCanvas.context),this.adjustBackingStore(this.chart.backgroundCanvas,this.chart.backgroundCanvas.context)),h=this.container.getBoundingClientRect(),this.top=h.top,this.left=h.left,this.canvasWidth=this.chart.canvasWidth=this.chart.container.clientWidth,this.right=this.left+this.canvasWidth,this.height=this.chart.container.clientHeight,this.width=this.right-this.left,e.h8g(),this.width===0&&!this.container.dimensionlessCanvas&&this.container.closest(i)&&!this.container.closest("cq-context-wrapper")&&console.log("warning: zero width chart. Check CSS for chart container."),this.bottom=this.top+this.height,this.calculateYAxisPositions(),this.chart.canvasRight=this.right,this.chart.canvasHeight=this.height,o=this.layout.candleWidth,typeof o==r&&(o=8);for(var d in this.charts){l=this.charts[d],this.setCandleWidth(o,l),l.scroll<l.width/o&&(l.scroll=Math.floor(l.width/o),u=Math.round(this.preferences.whitespace/this.layout.candleWidth),l.scroll-=u),c=10;try{y="1",y+="0:",y+="00",e.s1t(3);var g=e.s8L(12,0,10);p=s.measureText(y).width*g}catch{p=100}for(;c>1&&!(this.chart.width/p>c);)c/=1.5;l.xAxis.autoComputedTickSizePixels=Math.round(this.chart.width/c),l.xAxis.autoComputedTickSizePixels<1&&(l.xAxis.autoComputedTickSizePixels=1)}},t.ChartEngine.prototype.setCandleWidth=function(r,i){i||(i=this.chart),r=this.constrainCandleWidth(r),this.layout.candleWidth=r,e.h8g(),e.s1t(61);var n=e.s8L(13,7,5,0);i.maxTicks=Math.round(i.width/r)+n},t.ChartEngine.prototype.constrainCandleWidth=function(r){var i,n,s;return i=this.minimumCandleWidth,n=this.maximumCandleWidth,s=this.animations.zoom,e.p4Q(),i&&r<i&&(r=i,s&&s.running&&s.stop()),n&&r>n&&(r=n,s&&s.running&&s.stop()),r},t.ChartEngine.prototype.resizeChart=function(r){e.h8g();var i;this.runPrepend("resizeChart",arguments)||(r!==!1&&(r=!0),r&&this.preAdjustScroll(),i=this.chart.canvasHeight,this.resizeCanvas(),r&&this.postAdjustScroll(),this.displayInitialized?(this.adjustPanelPositions(),this.draw()):this.chart.canvasHeight!==0&&i===0&&(this.adjustPanelPositions(),this.draw()),this.doDisplayCrosshairs(),this.updateChartAccessories(),this.runAppend("resizeChart",arguments))},t.ChartEngine.prototype.clear=function(){var r;this.displayInitialized=!1;for(var i in this.layout.studies)r=this.layout.studies[i],t.getFn("Studies.removeStudy")(this,r);e.p4Q(),this.controls.chartControls&&(this.controls.chartControls.style.display="none"),this.chart.panel.title.innerHTML="",this.chart.panel.title.appendChild(document.createTextNode(this.chart.panel.display))},t.ChartEngine.prototype.fillScreen=function(){var r,i,n,s,h;if(r=this.chart,i=this.layout.candleWidth,n=r.width-this.preferences.whitespace,s=r.dataSet.length,s*i>=n){this.draw();return}(!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars)&&s--,e.s1t(30),h=e.s8L(n,s),this.setCandleWidth(h,r),this.home({maintainWhitespace:!0})},t.ChartEngine.prototype.setMaxTicks=function(r,i){var n,s,h;i||(i={}),r=Math.round(r),r<2&&(r=2),n=i.padding?i.padding:0,s=this.chart,h=(s.width-n)/(r-("1"<<0))||8,this.setCandleWidth(h,s),(i.padding||i.padding===0)&&(s.scroll=r)},t.ChartEngine.prototype.initializeChart=function(r){var i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T;if(i="in",i+="itiali",i+="zeChart",this.runPrepend("initializeChart",arguments))return;n=this.chart,n.symbolObject.symbol||(n.symbolObject.symbol=n.symbol),this.locale&&this.setLocale(this.locale),!this.displayZone&&t.ChartEngine.defaultDisplayTimeZone&&this.setTimeZone(null,t.ChartEngine.defaultDisplayTimeZone),this.resetDynamicYAxis({noRecalculate:!0}),this.calculateYAxisPositions(),this.micropixels=0,r?n.container=r:r=n.container,r.stx=this,r.CIQRegistered||(r.CIQRegistered=!0,t.ChartEngine.registeredContainers.push(r),t.ChartEngine.attachGlobalEventHandlers());function _(E,O){var I;E.context=E.getContext("2d"),E.context.lineWidth=1,I=E.style,I.position="absolute",I.left="0px",O&&(I.display="none")}this.registerHTMLElements&&this.registerHTMLElements(),s=n.canvas,h=n.backgroundCanvas,o=n.tempCanvas,l=this.floatCanvas,u=n.canvasShim,this.setCandleWidth(this.layout.candleWidth),n.backgroundCanvas||(c="canv",c+="as",p="ca",p+="n",p+="va",p+="s",y="d",y+="i",y+="v",d="ca",d+="n",d+="va",d+="s",h=n.backgroundCanvas=document.createElement(d),r.appendChild(h),_(h),u=n.canvasShim=document.createElement(y),u.className="stx-canvas-shim",r.appendChild(u),s=n.canvas=document.createElement(p),r.appendChild(s),_(s),n.context=s.context,o=n.tempCanvas=document.createElement(c),r.appendChild(o),_(o,!0),l=this.floatCanvas=document.createElement("canvas"),r.appendChild(l),_(l,!0)),this.resizeCanvas(),t.isAndroid&&(g=function(E){E.preventDefault&&E.preventDefault()},o.addEventListener("touchstart",g,{passive:!1}),l.addEventListener("touchstart",g,{passive:!1})),b=this.panels,n.panel.display=n.symbol,n.symbolDisplay&&(n.panel.display=n.symbolDisplay),this.adjustPanelPositions(),n.panel=b[n.name];for(var L in b){f=b[L].yaxisLHS.concat(b[L].yaxisRHS);for(var M=0;M<f.length;M++)f[M].height=b[L].yAxis.height,this.calculateYAxisMargins(f[M])}this.initialWhitespace=this.preferences.whitespace,n.dataSet&&n.dataSet.length>0&&(n.scroll=Math.floor(n.width/this.layout.candleWidth),m=Math.round(this.preferences.whitespace/this.layout.candleWidth),n.scroll-=m),t.touchDevice&&(C=r.querySelector(".overlayEdit"),S=r.querySelector(".overlayText"),w=r.querySelector(".overlayTrashCan"),k=r.querySelector(".vectorTrashCan"),D=function(E,O,I,B){return e.p4Q(),function(N){E.deleteHighlighted(O,I,B)}},S&&t.safeClickTouch(S,D(this,!0,!1,!0)),C?(t.safeClickTouch(C,D(this,!0,!0,!1)),w&&t.safeClickTouch(w,D(this,!1))):w&&t.safeClickTouch(w,D(this,!0)),k&&t.safeClickTouch(k,D(this,!0))),this.manageTouchAndMouse&&this.registerTouchAndMouseEvents(),this.handleMouseOut&&(r.onmouseout=function(E){return e.h8g(),function(O){e.h8g(),E.handleMouseOut(O)}}(this),t.smartHover(r.ownerDocument)),e.h8g(),this.abortDrawings&&this.abortDrawings(),this.undoStamps=[];for(var F in b)v=b[F],v.markerHolder&&(r.removeChild(v.markerHolder),v.markerHolder=null);for(var P in this.plugins)x=this.plugins[P],x.display&&x.initializeChart&&x.initializeChart(this);this.resizeListenerInitialized||(A=this,this.resizeListenerInitialized=!0,T=function(){return function(E){e.p4Q(),A.resizeChart()}},this.addDomEventListener(r.ownerDocument.defaultView,"resize",T(),!0)),n.baseline.userLevel&&(n.baseline.userLevel=null),this.setResizeTimer(),this.runAppend(i,arguments)},t.ChartEngine.prototype.destroy=function(){var r,i,n,s;this.setResizeTimer(0),e.p4Q(),this.detachQuoteFeed&&this.detachQuoteFeed(),this.styles={};for(var h=0;h<this.eventListeners.length;h++)r="fun",r+="c",r+="ti",r+="on",i=this.eventListeners[h],i.element.removeEventListener(i.event,i[r],i.options);this.touchAndMouseEventsRegistered=!1,this.eventListeners=[],this.streamParameters.timeout&&clearTimeout(this.streamParameters.timeout),n=t.ChartEngine.registeredContainers,s=n.indexOf(this.chart.container),s>-1&&(e.s3C(11),n.splice(s,e.g5k("1",0))),this.destroyed=!0,this.slider&&this.slider.slider.destroy(),this.marketDepth&&this.marketDepth.marketDepth.destroy()},t.ChartEngine.registerGlobalEvent("unload",function(){var r;r=t.ChartEngine.registeredContainers.slice(0),r.forEach(i=>{if(e.p4Q(),i.ownerDocument===this.document)try{i.stx.destroy(),i.stx=null}catch{}}),t.ChartEngine.globalEventHandlers.forEach(i=>{var n;if(n=i.applied.indexOf(this.document),n>-1)try{i.applied.splice(n)}catch{}}),this.document.body.innerHTML=""},!1,!0),t.ChartEngine.prototype.preAdjustScroll=function(r){r||(r=this.chart),this.previousAdjust={chart:r,scroll:r.scroll,maxTicks:r.maxTicks}},t.ChartEngine.prototype.postAdjustScroll=function(){e.p4Q();var r;this.previousAdjust&&(r=this.previousAdjust.chart,r.scroll=this.previousAdjust.scroll+(r.maxTicks-this.previousAdjust.maxTicks),this.displayInitialized&&this.draw())},t.ChartEngine.prototype.translateIf=function(r){return this.translationCallback?this.translationCallback(r,this.preferences.language):r},t.ChartEngine.prototype.doCleanupDates=function(r,i){var n,s,h,o,l,u;if(e.p4Q(),!(!r||!r.length))for(var c=0;c<r.length;c++)n=r[c],s=n.DT,!(!s&&!n.Date)&&(n.DT&&Object.prototype.toString.call(s)=="[object String]"&&s.length<=10?(s=new Date(s),s.setMinutes(s.getMinutes()+s.getTimezoneOffset())):(h="[objec",h+="t Date]",o=!0,n.DT||(s=t.strToDateTime(n.Date),n.Date.length<=10&&(o=!1)),Object.prototype.toString.call(s)!=h&&(s=new Date(s)),a.Date&&this.dataZone&&o&&(l=new a.Date(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),this.dataZone),u=s.getSeconds()*1e3+s.getMilliseconds(),s=new Date(l.getTime()+u)),t.ChartEngine.isDailyInterval(i)&&(e.s3C(56),s.setHours(e.s8L(64,"0"),0,0,0))),n.DT||(n.Date=t.yyyymmddhhmmssmmm(s)),n.DT=s)},t.ChartEngine.prototype.doCleanupGaps=function(r,i,n){var s,h,o,l,u,c,p,y,d,g,b,f,m,C;function S(v,x){var A,T,_,L,M;for(e.h8g(),A=n.field,T=A?p[A]:p,T===void 0&&(T={}),_=l?null:T[b],L=l?null:T.Adj_Close;+v<+x;)M={DT:v},A||(c.push(M),t.extend(M,{Open:_,High:_,Low:_,Close:_,Volume:0,Adj_Close:L})),v=g.next()}if(s="g",s+="a",s+="p",!r||!r.length||(h=this.layout.interval,n=n||{},i||(i=this.chart),!t.Market||!i.market)||(n.noCleanupDates||this.doCleanupDates(r,h),o=n.cleanupGaps,o===!1))return r;(!o||o===!0)&&(o=this.cleanupGaps||o),e.s3C(103),l=e.g5k(s,o);function w(v,x){var A,T,_;if(A=n.field,e.h8g(),A){typeof v[A]<"u"&&typeof x[A]>"u"&&(x[A]=l?null:v[A]);return}l||(T=v[b],_=x[b],typeof T<"u"&&typeof _>"u"&&t.ensureDefaults(x,{Close:T,Open:T,High:T,Low:T,Volume:0,Adj_Close:v.Adj_Close}))}if(!o||h=="tick")return r;if(h=="month"||h=="week"){if(this.dontRoll)return r;h="day"}u=function(v){var x;return v.DT?(x="[obj",x+="ect Date]",Object.prototype.toString.call(v.DT)!=x?new Date(v.DT):new Date(+v.DT)):(e.p4Q(),t.strToDateTime(v.Date))},c=[],p=r[0],c.push(p),y={begin:u(p),interval:h,periodicity:1,timeUnit:this.layout.timeUnit},d=new t.Market(i.market.market_def),g=d.newIterator(y),this.extendedHours&&this.extendedHours.filter&&g.market.enableAllAvailableSessions(),b=i.defaultPlotField;for(var k="0"|0;k<r.length&&r[k][b]===void 0;k++)if(r[k].Value!==void 0){b="Value";break}for(var D=1;D<r.length;D++){for(m=r[D],f=g.next(),C=u(m),f<C&&(S(f,C),f=g.market._convertFromMarketTZ(g.begin,g.outZone));C<f;){if(++D==r.length)return c;w(p,m),c.push(m),p=m,m=r[D],C=u(m)}f<C?(D--,f=g.previous()):(w(p,m),c.push(m),p=m)}return c},t.ChartEngine.prototype.getCreatingLibrary=function(){return W}};ys=W=>{var e=J,t;t=W.CIQ,t.ChartEngine.Panel=function(a,r){r?this.yAxis=r:this.yAxis=new t.ChartEngine.YAxis,this.name=a,this.state={},e.h8g()},t.extend(t.ChartEngine.Panel.prototype,{name:null,display:null,chart:null,yAxis:null,shareChartXAxis:null,top:null,bottom:null,height:null,percent:null,displayEdgeIfPadded:!0,noDrag:!1,exportable:!0},!0),t.ChartEngine.prototype.whichPanel=function(a){e.p4Q();var r;for(var i in this.panels)if(r=this.panels[i],!r.hidden&&a>=r.top&&a<r.bottom)return r;return null},t.ChartEngine.prototype.panelExists=function(a){var r;for(var i in this.panels)if(r=this.panels[i],r.name==a)return!0;return!1},t.ChartEngine.prototype.storePanels=function(){var a,r;this.layout||(this.layout={}),a=this.layout,e.h8g(),a.panels={};for(var i in this.panels)r=this.panels[i],a.panels[r.name]={percent:r.percent,display:r.display,yAxis:r.yAxis}},t.ChartEngine.prototype.savePanels=function(a){e.h8g(),this.storePanels(),a!==!1&&this.changeOccurred("layout")},t.ChartEngine.prototype.privateDeletePanel=function(a){e.p4Q();var r,i;for(var n in this.layout.studies)r=this.layout.studies[n],r.panel==a.name&&this.cleanupRemovedStudy(r);delete this.panels[a.name];for(var s in this.overlays)this.overlays[s].panel==a.name&&(this.layout.studies&&this.cleanupRemovedStudy(this.layout.studies[s]),delete this.overlays[s]);for(var h in this.chart.series)this.chart.series[h].parameters.panel==a.name&&this.removeSeries(this.chart.series[h],this.chart);if(a.holder&&(this.chart.container.removeChild(a.holder),this.getMarkerArray)){i=this.getMarkerArray("panelName",a.name);for(var o=0;o<i.length;o++)this.removeFromHolder(i[o])}a.handle&&a.handle.remove(),this.currentPanel=null},t.ChartEngine.prototype.plotsInPanel=function(a){e.h8g();var r,i,n,s;r=[],i=a,typeof a=="object"&&(i=a.name);for(var h in this.layout.studies)n=this.layout.studies[h],i===n.panel&&r.push(n);for(var o in this.chart.seriesRenderers)s=this.chart.seriesRenderers[o],i===s.params.panel&&r.push(s);return r},e.h8g(),t.ChartEngine.prototype.checkForEmptyPanel=function(a,r,i){var n,s,h;if(n="o",n+="b",n+="ject",!a||(s=a,typeof a==n&&(s=a.name),s===this.chart.name))return!1;i?i instanceof Array||(i=[i]):i=[],h=this.plotsInPanel(a);for(var o=0;o<h.length;o++)if(i.indexOf(h[o])==-1)return!1;return r||this.panelClose(this.panels[s]),!0},t.ChartEngine.prototype.panelClose=function(a){var r,i,n;if(r="pane",r+="lClo",r+="s",r+="e",i="pan",i+="elCl",i+="ose",e.h8g(),!!a&&!this.runPrepend(i,arguments)){if(this.cancelTouchSingleClick=!0,t.ChartEngine.drawingLine=!1,a.soloing&&this.panelSolo(a),this.charts[a.name]){for(var s in this.panels)n=this.panels[s],n.chart.name==a.name&&this.privateDeletePanel(n);delete this.charts[a.name]}else this.privateDeletePanel(a);this.currentlyImporting||(this.showCrosshairs(),this.resetDynamicYAxis({noRecalculate:!0}),this.calculateYAxisPositions(),this.draw(),this.savePanels()),this.userPointerDown=this.grabbingScreen=!1,this.openDialog&&(this.openDialog=""),this.runAppend(r,arguments)}},t.ChartEngine.prototype.deleteAllPanels=function(){var a;for(var r in this.panels)a=this.panels[r],this.privateDeletePanel(a);e.h8g(),this.layout.panels={},this.panels={}},t.ChartEngine.prototype.panelUp=function(a){var r,i,n,s;this.cancelTouchSingleClick=!0,t.ChartEngine.drawingLine=!1,this.showCrosshairs(),r={},i=0;for(n in this.panels){if(n==a.name)break;i++}if(e.h8g(),!!i){s=0;for(n in this.panels)s==i-1&&(r[a.name]=a),n!=a.name&&(r[n]=this.panels[n],s++);this.panels=r,this.adjustPanelPositions(),this.draw(),this.savePanels()}},t.ChartEngine.prototype.panelDown=function(a){var r,i,n,s,h;this.cancelTouchSingleClick=!0,t.ChartEngine.drawingLine=!1,this.showCrosshairs(),r={},i=0;for(n in this.panels){if(n==a.name)break;i++}s=0;for(n in this.panels)s++;if(i!=s-1){h=0;for(n in this.panels){if(n==a.name){h++;continue}r[n]=this.panels[n],h==i+1&&(r[a.name]=a),h++}this.panels=r,this.adjustPanelPositions(),this.draw(),e.h8g(),this.savePanels()}},t.ChartEngine.prototype.panelSolo=function(a){e.p4Q();var r,i,n;if(this.cancelTouchSingleClick=!0,t.ChartEngine.drawingLine=!1,this.showCrosshairs(),r=!0,a.soloing){if(r=!1,a.soloing=!1,a.solo.classList.remove("stx_solo_lit"),a.percent=a.oldPercent,a.name!="chart")if(this.soloPanelToFullScreen){if(a.percent==1)for(i in this.panels)n=this.panels[i],n!=a&&(a.percent-=n.percent)}else this.chart.panel.percent=this.chart.panel.oldPercent;this.soloPanelToFullScreen&&(this.xAxisAsFooter=this.chart.panel.oldXAxisAsFooter)}else a.soloing=!0,a.solo.classList.add("stx_solo_lit"),a.oldPercent=a.percent,this.chart.panel.oldXAxisAsFooter=this.xAxisAsFooter,a.name!="chart"&&(this.soloPanelToFullScreen?this.xAxisAsFooter=!0:(this.chart.panel.oldPercent=this.chart.panel.percent,a.percent=("1"|0)-this.chart.panel.percent));for(i in this.panels)a!==this.panels[i]&&(i==="chart"&&!this.soloPanelToFullScreen||(this.panels[i].hidden=r));this.resetDynamicYAxis({noRecalculate:!0}),this.calculateYAxisPositions(),this.draw(),this.savePanels()},t.ChartEngine.prototype.calculatePanelPercent=function(a){var r;r=a.bottom-a.top,a.percent=r/this.chart.canvasHeight},t.ChartEngine.prototype.resizePanels=function(){var a,r,i,n,s,h;if(t.ChartEngine.resizingPanel){s=t.ChartEngine.crosshairY>this.resolveY(t.ChartEngine.resizingPanel.top);for(var o in this.panels){if(this.panels[o]==t.ChartEngine.resizingPanel)break;this.panels[o].hidden||(a=this.panels[o])}if(h=this.backOutY(t.ChartEngine.crosshairY),s)for(i=t.ChartEngine.resizingPanel.yaxisLHS.concat(t.ChartEngine.resizingPanel.yaxisRHS),n=0;n<i.length;n++)r=i[n].initialMarginTop+i[n].initialMarginBottom+10,h>i[n].bottom-r&&(h=i[n].bottom-r);else for(i=a.yaxisLHS.concat(a.yaxisRHS),n="0"<<0;n<i.length;n++){e.s3C(0);var l=e.s8L(1,11);r=i[n].initialMarginTop+i[n].initialMarginBottom+l,h<i[n].top+r&&(h=i[n].top+r)}t.ChartEngine.crosshairY=this.resolveY(h),a.bottom=h,t.ChartEngine.resizingPanel.top=h,this.calculatePanelPercent(a),this.calculatePanelPercent(t.ChartEngine.resizingPanel),this.adjustPanelPositions(),this.draw(),this.savePanels()}},t.ChartEngine.prototype.isPanelAboveChart=function(a){var r;for(var i in this.panels){if(r="ch",r+="a",r+="r",r+="t",i==r)return!1;if(i==a.name)return!0}return!1},t.ChartEngine.prototype.adjustPanelPositions=function(){var a,r,i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,{chart:D,panels:v}=this;if(D.tempCanvas&&t.clearCanvas(D.tempCanvas,this),!this.runPrepend("adjustPanelPositions",arguments)){a=0,r=D.canvasHeight,i=!1,n=0,s=0,h=!1;for(o in v)l=v[o],(isNaN(l.percent)||l.percent<=0)&&(l.percent=.05),!l.hidden&&(n+=l.percent,s++,l.soloing&&(h=!0));for(o in v){if(u=0,l=v[o],l.hidden){l.markerHolder&&(l.markerHolder.style.display="none");continue}if(this.manageTouchAndMouse&&(l.up&&(i?(c="st",c+="x-s",c+="ho",c+="w",this.displayIconsUpDown&&l.up.classList.add(c)):(i=!0,l.up.classList.remove("stx-show"))),l.solo&&(h?(p="stx-sho",p+="w",l.soloing&&this.displayIconsSolo?l.solo.classList.add(p):l.solo.classList.remove("stx-show")):s==1||s=="2">>0&&!this.soloPanelToFullScreen?l.solo.classList.remove("stx-show"):(y="stx-sho",y+="w",this.displayIconsSolo&&l.solo.classList.add(y))),l.down&&(s==1?l.down.classList.remove("stx-show"):this.displayIconsUpDown&&l.down.classList.add("stx-show")),l.edit&&(d="stx-sho",d+="w",l.editFunction?l.edit.classList.add("stx-show"):l.edit.classList.remove(d)),l.close&&(g="stx-s",g+="h",g+="ow",this.displayIconsClose?l.close.classList.add(g):l.close.classList.remove("stx-show"))),l.percent=l.percent/n,l.top=a,l.bottom=l.top+r*l.percent,l.height=l.bottom-l.top,l.chart.name==l.name&&(l.chart.top=l.top,l.chart.bottom=l.bottom,l.chart.height=l.height),a=l.bottom,l.yaxisLHS){b=l.yaxisLHS.concat(l.yaxisRHS);for(var x=0;x<b.length;x++)f=b[x],f.zoom&&f.height>0&&(u=f.zoom/f.height),this.adjustYAxisHeightOffset(l,f),f.height=f.bottom-f.top,u&&(f.scroll*=u*f.height/f.zoom,f.zoom=u*f.height,f.zoom>f.height&&(f.zoom=0,f.scroll=0)),!f.high&&f.high!==0&&(f.high=100,f.low=0,f.shadow=100),f.multiplier=f.height/f.shadow,f.position==="none"&&this.calculateYAxisMargins(f)}l.holder&&(m="0",m+="p",m+="x",l.holder.style.right="0px",l.holder.style.top=l.top+"px",l.holder.style.left=m,l.holder.style.height=l.height+"px",l.subholder.style.left=l.left+"px",l.subholder.style.width=l.width+"px",l.subholder.style.top="0px",l.yAxis.height>=0&&(l.subholder.style.height=l.yAxis.height+"px"))}if(o&&v[o].down&&v[o].down.classList.remove("stx-show"),this.manageTouchAndMouse&&s==2&&!h&&D.panel.solo&&D.panel.solo.classList.add("stx-show"),D.panel){if(h&&this.soloPanelToFullScreen){e.s3C(142);var A=e.g5k(6,16,7,79);C=D.canvasHeight-l.yAxis.bottom+("12">>A)}else{e.s3C(22);var T=e.s8L(1,11);C=D.canvasHeight-D.panel.yAxis.bottom+T}S=this.controls;var{chartControls:_,home:L,notificationTray:M}=S;w=this.width-D.panel.right,_&&(e.s3C(22),_.style.bottom=e.g5k(C,"px")),L&&(k="p",k+="x",e.s1t(22),L.style.bottom=e.g5k(C,k),e.s1t(22),L.style.marginRight=e.g5k(w,"px")),M&&(e.s1t(22),M.style.bottom=e.s8L(C,"px"),e.s1t(22),M.style.marginRight=e.g5k(w,"px"))}this.clearPixelCache(),this.drawingObjects.length&&this.adjustDrawings(),this.runAppend("adjustPanelPositions",arguments)}},t.ChartEngine.prototype.createPanel=function(a,r,i,n,s,h){var o,l,u,c,p,y,d,g,b,f;if(o="ch",o+="ar",o+="t",l="crea",l+="tePanel",!this.runPrepend(l,arguments)){n||(n=o),u=this.chart.canvasHeight,i||(e.s3C(46),i=e.s8L(u,.2)),i>u&&(e.s1t(46),i=e.g5k(u,.5)),e.s1t(30),c=e.g5k(i,u),e.s1t(11),p=e.g5k(1,c),y=-282408911,e.s1t(20),d=-e.s8L("696686415",0),e.s3C(91),g=e.s8L(0,"2");for(var m=1;e.D1T(m.toString(),m.toString().length,43106)!==y;m++)b=!0,g+=2;e.D1T(g.toString(),g.toString().length,98983)!==d&&(b=!1),e.p4Q();for(var C in this.panels)f=this.panels[C],f.percent*=p,f.soloing&&(b=!0);return this.stackPanel(a,r,c,n,s),this.panels[r].hidden=b,this.panels[r].exportable=!h,this.calculateYAxisMargins(this.panels[r].yAxis),this.adjustPanelPositions(),this.savePanels(!1),this.runAppend("createPanel",arguments),this.panels[r]}},t.ChartEngine.prototype.modifyPanel=function(a,r){var i,n,s,h,o,l,u,c;i=a.name;var{studies:p}=this.layout,{series:y}=this.chart,{name:d,display:g,yAxis:b}=r||{};d||(d=t.uniqueID()),g||(g=d),b||(b=a.yAxis,b.name=d),e.p4Q(),n={};for(var f in this.panels)f===a.name?(s=this.panels[f],s.name=d,s.display=g,s.yAxis=b,a=n[d]=s,this.moveMarkers&&i!==d&&this.moveMarkers(i,d)):n[f]=this.panels[f];this.panels=n,h=!1;for(var m in p)o=p[m],o.panel===i&&(o.panel=d,o.parameters&&o.parameters.panelName&&(h=!0,o.parameters.panelName=d));for(var C in y)y[C].parameters.panel===i&&(h=!0,l={panel:d},y[C].parameters.yAxis&&y[C].parameters.yAxis.name===i&&(l.yAxis=b),this.modifySeries(C,l,!0));h&&this.changeOccurred("layout"),u=!1;for(var S=0;S<this.drawingObjects.length;S++)c=this.drawingObjects[S],i===c.panelName&&(c.panelName=d,u=!0);u&&this.changeOccurred("vector"),this.calculateYAxisPositions()},t.ChartEngine.prototype.setPanelHeight=function(a,r){var i,n,s,h;if(r){Object.values(this.panels).slice(-1)[0]===a&&(r+=this.xaxisHeight);var{canvasHeight:o}=this.chart,{percent:l}=a;e.s3C(30),i=e.s8L(r,o),e.s3C(32),n=e.g5k("1",1,l),e.h8g(),e.s3C(11),s=e.g5k(1,i),e.s1t(30),h=e.g5k(n,s),Object.values(this.panels).forEach(u=>{u.percent/=h}),a.percent=i,this.adjustPanelPositions(),this.savePanels()}},t.ChartEngine.prototype.electNewPanelOwner=function(a,r){var i,n,s,h,o,l,u,c;if(e.p4Q(),typeof a=="string"&&(a=this.panels[a]),n=a.yAxis,a&&a!=this.chart.panel){if(s=a.yAxis,h=s.studies[0],(!h||h==n.name)&&(h=s.renderers[0]),(!h||h==n.name)&&(h=s.studies[1]),h||(h=s.renderers[1]),r)s=a.yAxis=r,i=r.name;else if(h)s=this.addYAxis(a,new t.ChartEngine.YAxis({name:h,position:s.position})),s.renderers=a.yAxis.renderers,s.studies=a.yAxis.studies,i=h;else if(a.yaxisLHS){o=a.yaxisRHS.concat(a.yaxisLHS).filter(y),l=o[0];for(var p=0;p<o.length;p++)if(!o[p].position){l=o[p];break}l&&(s=a.yAxis=l,i=l.studies[0]||l.renderers[0])}i?(h=i,n.name!=a.name&&(h=a.name),c=this.layout.studies,c&&c[i]&&(u=c[i].inputs.display),this.modifyPanel(a,{name:h,display:u||i,yAxis:s}),this.deleteYAxisIfUnused(a,n),this.panels[h].yAxis.lockScale||this.calculateYAxisMargins(this.panels[h].yAxis)):this.checkForEmptyPanel(a)}function y(d){return d.name!=n.name}return i},t.ChartEngine.prototype.configurePanelControls=function(a){var r,i,n,s,h,o,l,u;r=".stx-",r+="i",r+="co",r+="-edit",i="iconsTe",i+="m",i+="plate",n="s",n+="t",n+="x-sho",n+="w",s=a.icons,s&&(h=a.name==a.chart.name,s.classList.add(n),s.classList.remove(i),a.title=s.querySelector(".stx-panel-title"),a.up=s.querySelector(".stx-ico-up"),a.up&&(a.up=a.up.parentNode),a.solo=s.querySelector(".stx-ico-focus"),a.solo&&(a.solo=a.solo.parentNode),a.down=s.querySelector(".stx-ico-down"),a.down&&(a.down=a.down.parentNode),a.edit=s.querySelector(r),a.edit&&(a.edit=a.edit.parentNode),a.close=s.querySelector(".stx-ico-close"),a.close&&(a.close=a.close.parentNode),e.p4Q(),a.title&&(a.title.innerHTML="",a.display&&a.title.appendChild(document.createTextNode(a.display)),h&&(a.title.classList.add("chart-title"),s.classList.add("stx-chart-panel"))),(!t.touchDevice||t.isSurface)&&this.makeModal(s),a.handle&&((!t.touchDevice||t.isSurface)&&(a.handle.onmouseover=function(c){return function(){e.h8g(),c.hideCrosshairs()}}(this)),(!t.touchDevice||t.isSurface)&&(a.handle.onmouseout=function(c){return function(){e.p4Q(),c.showCrosshairs()}}(this)),o=function(c,p){return e.p4Q(),function(y){t.ChartEngine.resizingPanel||c.openDialog!==""||c.grabHandle(p)}},t.isSurface?a.handle.onpointerdown=o(this,a):a.handle.onmousedown=o(this,a),t.touchDevice&&a.handle.addEventListener("touchstart",o(this,a),{passive:!1})),a.up&&t.safeClickTouch(a.up,function(c,p){return e.h8g(),function(){c.panelUp(p)}}(this,a)),a.down&&t.safeClickTouch(a.down,function(c,p){return function(){c.panelDown(p)}}(this,a)),a.solo&&t.safeClickTouch(a.solo,function(c,p){return e.p4Q(),function(){e.p4Q(),c.panelSolo(p)}}(this,a)),a.close&&(l="ch",l+="art",a.name==l?(u="n",u+="o",u+="ne",a.close.style.display=u):t.safeClickTouch(a.close,function(c,p){return function(){c.panelClose(p)}}(this,a))))},t.ChartEngine.prototype.stackPanel=function(a,r,i,n,s){var h,o,l,u;this.runPrepend("stackPanel",arguments)||(n||(n="chart"),h=this.charts[n],e.s3C(103),o=e.s8L(n,r),e.h8g(),o&&(a=h.symbol,h.symbolDisplay&&(a=h.symbolDisplay),s||(s=h.yAxis)),l=this.panels[r]=new t.ChartEngine.Panel(r,s),!o&&h.yAxis&&l.yAxis.position==h.yAxis.position&&(l.yAxis.width=h.yAxis.width),o&&!h.panel&&(h.panel=l),l.percent=i,l.chart=h,l.display=a,l.holder=t.newChild(this.container,"div","stx-holder"),l.subholder=t.newChild(l.holder,"div","stx-subholder"),l.subholder.style.zIndex=1,l.holder.panel=l,u=o?"stx-panel-chart":"stx-panel-study",l.holder.classList.add(u),this.controls.handleTemplate&&this.manageTouchAndMouse&&(l.handle=this.controls.handleTemplate.cloneNode(!0),l.handle.classList.remove("handleTemplate"),this.container.appendChild(l.handle),l.handle.panel=l),this.controls.iconsTemplate&&(l.icons=this.controls.iconsTemplate.cloneNode(!0),l.subholder.appendChild(l.icons),this.configurePanelControls(l)),this.currentlyImporting||this.resizeCanvas(),this.runAppend("stackPanel",arguments))},t.ChartEngine.prototype.setPanelEdit=function(a,r){var i,n,s;a.editFunction=r,i=-1434993487,n=-1671604499,e.s1t(46),s=e.g5k("2",1),e.p4Q();for(var h=1;e.u6e(h.toString(),h.toString().length,17054)!==i;h++)a.edit&&t.safeClickTouch(a.edit,r),this.adjustPanelPositions(),s+=2;e.u6e(s.toString(),s.toString().length,76469)!==n&&(a.edit&&t.safeClickTouch(a.edit,r),this.adjustPanelPositions())},t.ChartEngine.prototype.drawPanels=function(){var a,r,i,n,s,h,o,l,u,c,p,y,d,g;if(a="draw",a+="Panels",!this.runPrepend("drawPanels",arguments)){r=!1;for(var b in this.panels){if(i=this.panels[b],i.state={},n=this.translateIf(i.display),i.title&&i.title.textContent!=n&&(i.title.innerHTML="",i.title.appendChild(document.createTextNode(n))),i.icons&&i.icons.classList.add("stx-show"),i.hidden){i.icons&&i.icons.classList.remove("stx-show"),i.handle&&(i.handle.style.display="none"),i.holder.style.display="none";continue}else s="c",s+="h",s+="ar",s+="t",i.name!=s&&(h="n",h+="on",h+="e",o="no",o+="ne",l="n",l+="on",l+="e",u=this.manageTouchAndMouse,i.up&&(i.up.style.display=this.displayIconsUpDown&&u?"":l),i.down&&(i.down.style.display=this.displayIconsUpDown&&u?"":o),i.solo&&(i.solo.style.display=this.displayIconsSolo&&u?"":h),i.close&&(i.close.style.display=this.displayIconsClose&&u?"":"none"),i.edit&&(i.edit.style.display=i.editFunction&&u?"":"none")),i.holder.style.display="block";if(i.displayEdgeIfPadded&&(c="s",c+="tx_grid_bor",c+="d",c+="er",p=Math.round(i.left)+.5,y=i.yAxis.top-.5,d=i.yAxis.bottom+.5,i.yaxisCalculatedPaddingLeft&&!i.yaxisTotalWidthLeft&&this.plotLine(p,p,y,d,this.canvasStyle(c),"segment",this.chart.context,!1,{lineWidth:1}),p=Math.round(i.right)+.5,i.yaxisCalculatedPaddingRight&&!i.yaxisTotalWidthRight&&this.plotLine(p,p,y,d,this.canvasStyle("stx_grid_border"),"segment",this.chart.context,!1,{lineWidth:1})),!r){i.handle&&(i.handle.style.display="none"),r=!0;continue}g=i.top,e.s1t(0);var f=e.g5k(17,18);if(g=Math.round(g)+"0.5"*f,this.plotLine(i.left-("0.5"-0),i.right+.5,g,g,this.canvasStyle("stx_panel_border"),"segment",this.chart.context,!1,{}),i.handle){this.displayPanelResize?i.handle.style.display="":i.handle.style.display="none",e.s1t(94);var m=e.g5k(3,20,15);i.handle.style.top=g-i.handle.offsetHeight/m+"px"}}this.runAppend(a,arguments)}}};vs=W=>{var e=J,t;t=W.CIQ,e.h8g(),t.ChartEngine.isDailyInterval=function(a){var r;return r="d",r+="ay",a==r||a=="week"||a=="month"},t.ChartEngine.prototype.setPeriodicity=function(a,r){var i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D;if(i="la",i+="yout",n="setP",n+="eriodi",n+="city",this.runPrepend(n,arguments))return;if(typeof arguments[0]!="object"){a={period:arguments[0],interval:arguments[1],timeUnit:arguments["2"<<0]},e.s3C(8);var v=e.s8L(8,16,3);r=arguments[arguments.length-v],arguments.length===3&&(a.timeUnit=void 0)}var{period:x,interval:A,timeUnit:T}=a;typeof r!="function"&&(r=null),{period:x,interval:A,timeUnit:T}=t.cleanPeriodicity(x,A,T);var{layout:_}=this;if(_.setSpan={},_.range={},e.p4Q(),this.chart.inflectionPoint=null,s=!1,this.chart.symbol){h=435043896,o=-548625884,l=2;for(var L=1;e.u6e(L.toString(),L.toString().length,83713)!==h;L++)s=this.needDifferentData({period:x,interval:A,timeUnit:T}),l+=2;e.D1T(l.toString(),l.toString().length,42635)!==o&&(s=this.needDifferentData({period:x,interval:A,timeUnit:T}))}var{candleWidth:M,periodicity:F,interval:P,timeUnit:E}=_;if(u={prvPeriodicity:F,prvInterval:P,prvTimeUnit:E},_.periodicity=x,_.interval=A,_.timeUnit=T,c=this,p={stx:c,differentData:s,prevPeriodicity:u},s){if(this.changeOccurred("layout"),this.clearCurrentMarketData(),this.quoteDriver)for(var O in this.charts)y=this.charts[O],y.symbol&&(this.displayInitialized?this.quoteDriver.newChart({symbol:y.symbol,symbolObject:y.symbolObject,chart:y},V):this.loadChart(y.symbol,{chart:y},V));else this.dataCallback&&(this.dataCallback(),V());this.home();return}for(var I in this.charts){d=this.charts[I];var{dataSegment:B,dataSet:N,maxTicks:R,scroll:q}=d;if(g=B?B.length:"0"*1,b=N?N.length:0,f=void 0,m=Math.round(d.maxTicks/2),this.setCandleWidth(M,d),C=!0,S=!1,q<=R?C=!1:B&&!B[m]&&(C=!1,e.s1t(11),S=e.g5k(q,b)),C&&g>0&&(R<(Math.round(this.chart.width/M-.499)-("1"-0))/2&&(e.s1t(11),m=e.g5k(g,1)),m>=g?(f=B[g-1].DT,e.s1t(11),m=e.g5k(g,1)):f=B[m].DT),this.createDataSet(),C){if(g>0){for(var Y=b-("1"^0);Y>=0;Y--)if(w=N[Y].DT,w.getTime()<f.getTime()){e.s1t(10),d.scroll=e.g5k(1,b,m,Y);break}}}else S?d.scroll=N.length+S:(k=Math.round(this.preferences.whitespace/M),e.s3C(94),d.scroll=e.g5k(k,R,1))}if(this.displayInitialized&&this.draw(),this.changeOccurred(i),this.quoteDriver)for(var z in this.charts)D=this.charts[z],D.symbol&&(D.moreAvailable||!D.upToDate)&&this.quoteDriver.checkLoadMore(D);V(),this.runAppend("setPeriodicity",arguments);function V(){c.dispatch("periodicity",p),e.h8g(),r&&r(null)}},t.ChartEngine.prototype.needDifferentData=function(a){var r,i,n,s;return r=this.layout,i=t.ChartEngine.isDailyInterval(a.interval),n=t.ChartEngine.isDailyInterval(r.interval),s=!1,this.dontRoll||!n?r.interval!=a.interval&&(s=!0):i!=n&&(s=!0),!i&&!a.timeUnit&&(a.timeUnit="minute"),!n&&!r.timeUnit&&(r.timeUnit="minute"),a.timeUnit!=r.timeUnit&&(s=!0),(!this.masterData||!this.masterData.length)&&(s=!0),s},t.ChartEngine.prototype.getPeriodicity=function(){var a,r,i;return a=this.layout,r=a.interval,i=a.timeUnit,i||(i=r,r=1),{period:a.periodicity,interval:r,timeUnit:i}}};bs=W=>{var e=J,t;t=W.CIQ,t.ChartEngine.prototype.isHistoricalMode=function(){var a,r,i,n,s,h;return e.h8g(),a=new Date,r=!0,i=this.masterData,this.isHistoricalModeSet?(i.length&&(n=this.getFirstLastDataRecord(i,"DT",!0),s=this.standardMarketIterator(n.DT),r=(s?s.next():n.DT)<=a,r&&t.ChartEngine.isDailyInterval(s.interval)&&(h=this.chart.market.getOpen(),h&&a<h&&(a.setHours(0,0,0,0),+a==+s.begin&&(r=!1)))),r):!1},t.ChartEngine.prototype.isHome=function(){var a,r,i;a=this.chart,r=a.dataSet,i=a.animatingHorizontalScroll,e.s1t(9);var n=e.g5k(0,9,11);e.h8g(),e.s3C(13);var s=e.s8L(31,37,5,42);return this.pixelFromTick(r.length-(i?n:"1"<<s),a)<a.width+a.panel.left},t.ChartEngine.prototype.getPreviousBar=function(a,r,i){return e.h8g(),this.getNextBarInternal(a,r,i,-1)},t.ChartEngine.prototype.getNextBar=function(a,r,i){var n,s,h;n=643849604,s=1041201567,e.s3C(11),h=e.g5k("2",0);for(var o=1;e.D1T(o.toString(),o.toString().length,84999)!==n;o++)return this.getNextBarInternal(a,r,i,1);if(e.u6e(h.toString(),h.toString().length,51521)!==s)return this.getNextBarInternal(a,r,i,8)},e.h8g(),t.ChartEngine.prototype.getNextBarInternal=function(a,r,i,n){var s,h,o,l;if(s=a.dataSegment&&a.dataSegment[i],s){for(h=s.tick;h>0&&h<a.dataSet.length;)if(e.s3C(22),h=e.s8L(h,n),o=a.dataSet[h],o&&(l=t.existsInObjectChain(o,r),l&&l.obj[l.member]))return o}return e.p4Q(),null},t.ChartEngine.prototype.getFirstLastDataRecord=function(a,r,i){var n;if(a&&a.length)for(n=i?a.length-1:0;n>=0&&n<a.length;){if(a[n]&&typeof a[n][r]<"u")return a[n];i?n--:n++}return null},t.ChartEngine.prototype.leftTick=function(){return e.p4Q(),this.chart.dataSet.length-this.chart.scroll},t.ChartEngine.prototype.getNextInterval=function(a,r,i){var n;return r||(r=1),i!==!1&&(i=!0),n=this.standardMarketIterator(a,i?this.dataZone:this.displayZone),n?r<1?(e.s1t(21),n.previous(e.g5k(r,1))):n.next(r):a},t.ChartEngine.prototype.standardMarketIterator=function(a,r,i){var n,s;return n=i||this.chart,n.market?(s={begin:a,interval:this.layout.interval,periodicity:this.layout.interval=="tick"?this.chart.xAxis.futureTicksInterval:this.layout.periodicity,timeUnit:this.layout.timeUnit,outZone:r},e.h8g(),n.market.newIterator(s)):null}};Cs=W=>{var e,t;W.SplinePlotter||(W.SplinePlotter={}),e=W.CIQ,t=W.SplinePlotter,e.ChartEngine.prototype.draw=function(a){var r,i,n,s,h,o,l,u,c,p,y,d,g,b;if(r="d",r+="r",r+="a",r+="w",i="Stu",i+="dies",i+=".displayStudies",n="under",n+="lay",s="d",s+="r",s+="aw",this.debug(),!this.destroyed&&(h=this.chart,o=this.layout,!!h.canvas&&h.dataSet&&h.canvasHeight&&(this.offset=o.candleWidth*this.candleWidthPercent/("2"-0),e.clearCanvas(h.canvas,this),!!this.masterData&&!this.runPrepend(s,arguments)))){this.defaultColor||this.getDefaultColor(),this.vectorsShowing=!1,this.drawPanels(),this.yAxisLabels=[],this.correctIfOffEdge(),this.createDataSegment(),this.setBaselines(h),c=this.createXAxis(h),this.initializeDisplay(h),this.drawXAxis(h,c);try{this.renderYAxis(h)}catch(S){var f;if(f="reboot ",f+="draw",S&&S.message===f)return this.draw();throw S}this.currentHRParams=this.getCurrentHRParams(),this.drawCurrentPriceLine(),h.tmpWidth=Math.floor(o.candleWidth*this.candleWidthPercent),h.tmpWidth%2===0&&(h.tmpWidth+=1,h.tmpWidth>o.candleWidth&&(h.tmpWidth-=2)),h.tmpWidth<.5&&(h.tmpWidth=.5);for(l in this.plugins)u=this.plugins[l],u.display&&u.drawUnder&&u.drawUnder(this,h);h.legend&&(h.legend.colorMap=null),this.controls.baselineHandle&&(this.controls.baselineHandle.style.display="none"),this.rendererAction(h,n),e.getFn(i)(this,h,!0),this.displayChart(h),e.getFn("Studies.displayStudies")(this,h,!1),this.rendererAction(h,"overlay"),h.legend&&h.legend.colorMap&&h.legendRenderer&&h.legendRenderer(this,{chart:h,legendColorMap:h.legend.colorMap,coordinates:{x:h.legend.x,y:h.legend.y+h.panel.yAxis.top}});for(l in this.plugins)u=this.plugins[l],u.display&&u.drawOver&&u.drawOver(this,h);for(var m in this.panels)this.panels[m].hidden||this.plotYAxisText(this.panels[m]);for(var C=0;C<this.yAxisLabels.length;C++)p=this.yAxisLabels[C],!(p.src=="series"&&p.args[6]&&p.args[6].drawSeriesPriceLabels===!1)&&this.createYAxisLabel.apply(this,p.args);this.createCrosshairs&&this.createCrosshairs(),this.drawVectors&&this.drawVectors(),this.drawCurrentHR(),this.currentHRParams=null,this.displayInitialized=!0,y=this.controls,y&&(d="n",d+="o",d+="n",d+="e",g="b",g+="l",g+="o",g+="ck",b=this.manageTouchAndMouse&&(!this.mainSeriesRenderer||!this.mainSeriesRenderer.nonInteractive),y.home&&(y.home.style.display=b&&!this.isHome()?g:d),y.chartControls&&(y.chartControls.style.display=this.manageTouchAndMouse&&y.chartControls.style.visibility!=="hidden"?"block":"none",y.chartControls.style.display==="block"&&e.efficientDOMUpdate(y.chartControls.style,"left",h.left+h.width/2+"px"))),e.Marker&&this.positionMarkers(),this.quoteDriver&&this.animations.zoom.hasCompleted&&this.quoteDriver.checkLoadMore(h),this.runAppend(r,arguments),this.makeAsyncCallbacks()}},e.ChartEngine.prototype.setSeriesRenderer=function(a){var{baseline:r,name:i,panel:n,yAxis:s}=a.params;return this.chart.seriesRenderers[i]?this.chart.seriesRenderers[i]:(J.p4Q(),s&&(a.params.yAxis=this.addYAxis(this.panels[n],s),this.resizeChart()),a.stx=this,this.chart.seriesRenderers[i]=a,r&&this.registerBaselineToHelper(a),a)},e.ChartEngine.prototype.setMainSeriesRenderer=function(a){var r,i,n,s,h;r="s",r+="ta",r+="ndalone",r+="Bars",i="hig",i+="hLowBar",i+="s",J.p4Q();var{chartType:o,aggregationType:l}=this.layout,{chart:u}=this,{custom:c}=u;n=this.mainSeriesRenderer,s=this.displayInitialized,n&&(a&&this.setMasterData(),this.displayInitialized=!1,n.removeAllSeries(),this.removeSeriesRenderer(n),n=this.mainSeriesRenderer=null),c&&c.chartType&&(o=c.chartType),o!="none"&&(l&&l!="ohlc"&&(o=l),h=e.Renderer.produce(o,{panel:u.panel.name,name:"_main_series",highlightable:!1,useChartLegend:!0}),h&&(this.setSeriesRenderer(h).attachSeries(null,{display:u.symbol}),n=this.mainSeriesRenderer=h),this.displayInitialized=s,[i,r,"barsHaveWidth"].forEach((function(p){J.h8g(),u[p]=this.mainSeriesRenderer&&this.mainSeriesRenderer[p]}).bind(this)))},e.ChartEngine.prototype.removeSeriesRenderer=function(a){J.h8g();var r,i,n,s,{baseline:h,name:o}=a.params;if(r=this.controls[`${o} baseline-handle`],h){i=-699364039,n=1041131078,s=2;for(var l=1;J.D1T(l.toString(),l.toString().length,6345)!==i;l++)this.removeBaselineFromHelper(a),s+=2;J.u6e(s.toString(),s.toString().length,55670)!==n&&this.removeBaselineFromHelper(a),this.removeBaselineFromHelper(a),r&&(this.container.removeChild(r),delete this.controls[r])}delete this.chart.seriesRenderers[o]},e.ChartEngine.prototype.getSeriesRenderer=function(a){return J.h8g(),this.chart.seriesRenderers[a]},e.ChartEngine.prototype.getRendererFromSeries=function(a){var r;J.p4Q(),r=this.chart.seriesRenderers;for(var i in r)for(var n in r[i].seriesParams)if(r[i].seriesParams[n].id==a)return r[i];return null},e.ChartEngine.prototype.startClip=function(a,r){var i,n,s,h,o;a||(a=this.chart.panel.name),i=this.panels[a],n=i.yAxis,s=this.chart,J.h8g(),s.context.save(),s.context.beginPath(),h=i.left,o=i.width,r?(h=0,o=this.width):i.yaxisLHS&&i.yaxisLHS.length&&(h++,o--),s.context.rect(h,n.top,o,n.height),s.context.clip()},e.ChartEngine.prototype.endClip=function(){J.h8g(),this.chart.context.restore()},e.ChartEngine.prototype.setLineStyle=function(a,r){var i,n;i={},a&&typeof a=="object"?i=a:i.color=a,!i.color&&!i.pattern&&!i.width&&!i.baseColor&&(i=null),r||(r=this.chart),n=1,i&&i.width&&(n=i.width),i&&i.pattern&&(i.pattern=e.borderPatternToArray(n,i.pattern)),r.lineStyle=i},e.ChartEngine.prototype.setGapLines=function(a,r){var i,n;if(i="b",i+="ool",i+="ea",i+="n",r||(r=this.chart),n={},a&&typeof a=="object")n=a;else{if(typeof a===i)return r.gaplines=a;n.color=a}!n.color&&!n.pattern&&!n.fillMountain&&(n=null),n&&n.pattern&&(n.pattern=e.borderPatternToArray(n.width,n.pattern)),n&&n.width<=0&&(n.width=null),r.gaplines=n},e.ChartEngine.prototype.getGapColorFunction=function(a,r,i,n,s){return J.h8g(),typeof i!="object"&&(i={color:i}),function(h,o,l){var u,c;return u=s?s(h,o,l):i,u.color&&(u=u.color),c=o[a],!c&&c!==0&&(c=o[r]),!l&&(c||c===0)?{color:u,pattern:i.pattern,width:i.width}:n?(typeof n!="object"&&(typeof n=="string"?n={color:n}:n={}),{color:n.color||u,pattern:n.pattern||i.pattern,width:n.width||i.width}):null}},e.ChartEngine.prototype.drawLineChart=function(a,r,i,n){var s,h,o,l,u,c,p,y,d,g,b,f;return s=this.chart,h=s.context,o=s.lineStyle||{},l=this.canvasStyle(r),n||(n={}),this.startClip(a.name),u=n.width||o.width||l.width,u&&parseInt(u,10)<=25?(J.s3C(46),h.lineWidth=Math.max(J.g5k("1",1),e.stripPX(u))):h.lineWidth=1,n.pattern=n.pattern||o.pattern||l.borderTopStyle,n.pattern=e.borderPatternToArray(h.lineWidth,n.pattern),this.canvasColor(r),c=n.color||o.color,c&&(p="a",p+="u",p+="t",p+="o",c==p&&(c=this.defaultColor),n.opacity&&n.opacity!==1&&(c=e.hexToRgba(e.colorToHex(c),parseFloat(n.opacity))),h.strokeStyle=c),n.skipProjections=!0,y=n.field||s.defaultPlotField,d=n.subField||s.defaultPlotField||"Close",g=n.gapDisplayStyle,!g&&g!==!1&&(g=n.gaps),!g&&g!==!1&&(g=s.gaplines),g||(g="transparent"),n.gapDisplayStyle=g,b=this.getGapColorFunction(y,d,{color:h.strokeStyle,pattern:n.pattern,width:h.lineWidth},g,i),a.chart.tension&&(n.tension=a.chart.tension),f=this.plotDataSegmentAsLine(y,a,n,b),f.colors.length||f.colors.push(h.strokeStyle),h.lineWidth=1,this.endClip(),n.returnObject?f:f.colors},e.ChartEngine.prototype.drawChannelChart=function(a,r,i){var n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S;for(n="fi",n+="e",n+="ld",s="s",s+="ubField",h="L",h+="o",h+="w",o="su",o+="bF",o+="ield",l="f",l+="ie",l+="ld",u="sub",u+="Fie",u+="ld",c=Object.assign({},i),c.color=i.color,p=this.drawLineChart(a,c.style,r,c),y=c.border_color_up||this.getCanvasColor("stx_channel_up"),d=c.border_color_down||this.getCanvasColor("stx_channel_down"),c[i.field?u:l]=c.field_high||"High",c.color=y,g=this.drawLineChart(a,c.style,r,c),c[i.field?o:"field"]=c.field_low||h,c.color=d,b=this.drawLineChart(a,c.style,r,c),c[i.field?s:n]=i.subField||this.chart.defaultPlotField||"Close",m=[],C=[],f=0;f<g.points.length;f+=2)m.push([g.points[f],g.points[f+1]]);for(f=0;f<b.points.length;f+=2)C.push([b.points[f],b.points[f+1]]);J.s1t(6);var w=J.g5k(1,12,13,1);for(J.h8g(),S=this.chart.context.lineWidth/w,f=p.points.length-2;f>=0;f-=2)m.push([p.points[f],p.points[f+1]-S]),C.push([p.points[f],p.points[f+1]+S]);return this.startClip(a.name),c.color=y,e.fillArea(this,m,c),c.color=d,e.fillArea(this,C,c),this.endClip(),p.colors=p.colors.concat(g.colors).concat(b.colors),i.returnObject?p:p.colors},e.ChartEngine.prototype.connectTheDots=function(a,r,i,n,s,h){var o=J,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F;if(h||(h={}),h.pattern!="none"&&(s===!0&&(s=this.chart.panel),(n===null||typeof n>"u")&&(n=this.chart.context),!(a.length<4))){if(l=0,u=this.chart.canvasHeight,c=0,p=this.chart.width,s&&(u=s.yAxis.bottom,l=s.yAxis.top),n.lineWidth=1.1,typeof r=="object")n.strokeStyle=r.color,r.opacity?n.globalAlpha=r.opacity:n.globalAlpha=1,n.lineWidth=e.stripPX(r.width);else if(!r||r=="auto"||e.isTransparent(r))n.strokeStyle=this.defaultColor;else{y=-1663265625,d=-1557626603,o.s1t(11),g=o.g5k("2",0);for(var P=1;o.u6e(P.toString(),P.toString().length,39209)!==y;P++)n.strokeStyle=r,g+=2;o.u6e(g.toString(),g.toString().length,3127)!==d&&(n.strokeStyle=r)}h.opacity&&(n.globalAlpha=h.opacity),o.p4Q(),h.lineWidth&&(n.lineWidth=h.lineWidth),b=e.borderPatternToArray(n.lineWidth,h.pattern),n.beginPath();for(var E=0;E<a.length-("2"-0);E+=2){if(f=a[E],o.s3C(143),m=a[o.s8L(E,"1")],o.s1t(22),C=a[o.g5k(E,2)],o.s3C(22),S=a[o.s8L(E,3)],isNaN(f)||isNaN(C)||isNaN(m)||isNaN(S))return;w=0,o.s1t(20),k=o.g5k("1.0",0),o.s3C(11),D=o.g5k(C,f),o.s1t(11),v=o.g5k(S,m);for(var O=0;O<4;O++){if(O===0&&(x=-D,o.s1t(11),A=-o.g5k(c,f)),O==1&&(x=D,o.s1t(11),A=o.s8L(p,f)),O==2&&(x=-v,o.s3C(11),A=-o.s8L(l,m)),O=="3"<<32&&(x=v,o.s1t(11),A=o.g5k(u,m)),o.s1t(30),T=o.s8L(A,x),(S||S===0)&&x===0&&A<0)return!1;if(x<0){if(T>k)return!1;T>w&&(w=T)}else if(x>0){if(T<w)return!1;T<k&&(k=T)}}o.s3C(23),_=o.g5k(w,f,D),o.s3C(23),L=o.g5k(w,m,v),o.s3C(23),M=o.g5k(k,f,D),o.s1t(23),F=o.s8L(k,m,v);try{n.setLineDash(b&&b.length?b:[]),n.moveTo(_,L),n.lineTo(M,F)}catch{}}n.stroke(),n.closePath(),n.globalAlpha=1,n.lineWidth=1}},e.ChartEngine.prototype.plotSpline=function(a,r,i,n,s,h,o){var l,u,c;l="un",J.h8g(),l+="define",l+="d",o||(o={}),o.pattern!="none"&&(h===!0&&(h=this.chart.panel),(s===null||typeof s==l)&&(s=this.chart.context),s.save(),s.lineWidth=1.1,typeof i=="object"?(s.strokeStyle=i.color,i.opacity?s.globalAlpha=i.opacity:s.globalAlpha=1,s.lineWidth=e.stripPX(i.width)):(u="aut",u+="o",!i||i==u||e.isTransparent(i)?s.strokeStyle=this.defaultColor:s.strokeStyle=i),o.opacity&&(s.globalAlpha=o.opacity),o.lineWidth&&(s.lineWidth=o.lineWidth),c=e.borderPatternToArray(s.lineWidth,o.pattern),o.pattern&&s.setLineDash&&(s.setLineDash(c),s.lineDashOffset=0),s.beginPath(),t.plotSpline(a,r,s),s.stroke(),s.closePath(),s.restore())},e.ChartEngine.prototype.rawWatermark=function(a,r,i,n){this.canvasFont("stx_watermark",a),a.fillStyle=this.defaultColor,a.globalAlpha=.5,this.chart.context.textBaseline="alphabetic",a.fillText(n,r,i),a.globalAlpha=1},e.ChartEngine.prototype.watermark=function(a,r){var i,n,s,h,o,l,u;if(i="alpha",i+="be",i+="t",i+="ic",n="stx",n+="_wa",n+="ter",n+="mark",s="m",s+="id",s+="d",s+="le",r&&typeof r!="object"&&(r={h:arguments[1],v:arguments[2],text:arguments["3">>32]}),r={h:r.h||"left",v:r.v||"bottom",text:r.text||"",hOffset:r.hOffset===0?0:r.hOffset||"10">>0,vOffset:r.vOffset===0?"0"-0:r.vOffset||20,context:r.context||this.chart.context},h=r.context,!!h&&(o=this.panels[a],!(!o||o.hidden))){if(l=o.yAxis.bottom-r.vOffset,r.v=="top"?l=o.top+r.vOffset:r.v==s&&(l=(o.top+o.yAxis.bottom)/2),h.save(),this.canvasFont("stx_watermark",h),this.canvasColor(n,h),h.textBaseline=i,u=o.left+r.hOffset,r.h=="right")u=o.right-r.hOffset;else if(r.h=="center"){J.s3C(10);var c=J.g5k(17,16,21,18);u=(o.right+o.left-h.measureText(r.text).width)/c}h.globalAlpha=.5,this.highlightedDraggable&&(h.globalAlpha*=.3),h.fillText(r.text,u,l),h.restore()}},e.ChartEngine.prototype.displayErrorAsWatermark=function(a,r){var i=J;i.h8g();var n,s,h,o,l,u,c,p,y,d,g,b;n="st",n+="x_watermark",r&&(a||(a="chart"),s=this.panels[a],!(!s||s.hidden)&&(h=s.state,h||(s.state=h={}),o=h.studyErrors,o||(h.studyErrors=o=new Set),!o.has(r)&&(l=h.watermarkOffset||10,u=10,c=this.getCanvasFontSize(n),this.chart&&this.chart.chartControls&&(p=s.yAxis.bottom,y=this.chart.chartControls,i.s1t(11),d=i.s8L(p,l),i.s1t(11),g=i.s8L(d,c),(d>y.offsetTop&&d<y.offsetTop+y.offsetHeight||g>y.offsetTop&&g<y.offsetTop+y.offsetHeight)&&(l=p-y.offsetTop+u)),o.add(r),b={h:"center",v:"bottom",text:r,vOffset:l},i.s3C(22),l+=i.s8L(c,u),h.watermarkOffset=l,this.watermark(a,b))))},e.ChartEngine.prototype.displayChart=function(a){this.runPrepend("displayChart",arguments)||(this.rendererAction(a,"main"),this.runAppend("displayChart",arguments))}};xs=W=>{var e=J,t,a,r,i;t=663357009,a=-1049766229,e.s1t(91),r=e.g5k(0,"2");for(var n=1;e.u6e(n.toString(),n.toString().length,47875)!==t;n++)i=W.CIQ,r+=2;e.D1T(r.toString(),r.toString().length,49708)!==a&&(i=W.CIQ),i=W.CIQ,i.ChartEngine.prototype.cloneStyle=function(s){var h,o,l,u,c,p,y,d;h={},o=!1;for(var g in s)if(l=s[g],g=="backgroundAttachment"&&(o=!0),o)l&&l.constructor==String&&isNaN(g)&&(h[g]=l);else if(isNaN(g))d=g.replace(i.camelCaseRegExp,f),h[d]=l;else if(u=s.getPropertyValue(l),u){for(l=l.split("-"),c=0,p=l.length,y=l[0];++c<p;){e.s1t(144);var b=e.s8L(9,2,14,11,9);y+=l[c].charAt(0).toUpperCase()+l[c].slice(b)}h[y]=u}function f(m){return m[1].toUpperCase()}return h},i.ChartEngine.prototype.canvasStyle=function(s){var h,o,l;return h=this.styles[s],e.h8g(),h||(o=document.createElement("div"),o.className=s,this.container.appendChild(o),l=getComputedStyle(o),h=this.styles[s]=this.cloneStyle(l),this.container.removeChild(o),l||(this.styles[s]=null)),h},i.ChartEngine.prototype.colorOrStyle=function(s){return s.indexOf("#")!=-1||s.indexOf("(")!=-1||s=="transparent"?s:this.canvasStyle(s)},i.ChartEngine.prototype.clearStyles=function(){this.styles={},this.defaultColor=""},i.ChartEngine.prototype.setStyle=function(s,h,o){this.styles[s]||this.canvasStyle(s),e.p4Q(),this.styles[s]||(this.styles[s]={}),this.styles[s][i.makeCamelCase(h)]=o},i.ChartEngine.prototype.canvasFont=function(s,h){var o,l;if(h||(h=this.chart.context),o=this.canvasStyle(s),!!o){e.s3C(55),e.g5k(2142,6,2),e.s3C(145);var u=e.s8L(11,22649,156816,5);e.s1t(146),e.s8L(17,11726,8580,10),e.s3C(9),e.s8L(1860,19,34),e.s1t(147);var c=e.g5k(8920,11,10,14);e.s1t(3);var p=e.s8L(5,13920,10445);e.s1t(1),e.g5k(11488490,11,130650,8),e.s1t(22);var y=e.g5k(640,7043);l=o.fontStyle+" "+o.fontWeight+(u==9140?c!=p?!0:y:" ")+o.fontSize+" "+o.fontFamily,l.indexOf("undefined")==-1?h.font=l:(this.styles[s]=null,e.s1t(22),console.log(e.s8L("bad css style for class ",s)))}},i.ChartEngine.prototype.canvasColor=function(s,h){var o,l,u,c;o="undefine",o+="d",h||(h=this.chart.context),l=this.canvasStyle(s),l&&(u=l.color,u||(u=this.defaultColor),h.globalAlpha=1,h.fillStyle=u,h.strokeStyle=u,c=l.opacity,e.p4Q(),typeof c!=o&&(h.globalAlpha=c))},i.ChartEngine.prototype.getCanvasFontSize=function(s){var h,o,l;return h="1",h+="2",o=this.canvasStyle(s),l=o.fontSize,l||(l=h),parseInt(i.stripPX(l),"10">>32)},i.ChartEngine.prototype.getCanvasColor=function(s){var h;return h=this.canvasStyle(s),h.color},i.ChartEngine.prototype.getDefaultColor=function(){var s,h,o,l,u,c,p,y,d,g;for(this.defaultColor="#000000",s=null,h=this.chart.container;!s||i.isTransparent(s);){if(o=getComputedStyle(h),!o)return;if(s=o.backgroundColor,i.isTransparent(s)&&(s="transparent"),h=h.parentNode,!h||!h.tagName)break}if(s){l=1276042911,u=-1446928188,c=2;for(var b=1;e.D1T(b.toString(),b.toString().length,"23385">>32)!==l;b++)s!="#FFFFFF"&&(s="#FFFFFF"),this.containerColor=s,c+=2;e.D1T(c.toString(),c.toString().length,"98622"-0)!==u&&(s=="transparent"&&(s="#FFFFFF"),this.containerColor=s),i.isTransparent(s)?this.defaultColor="#000000":(p="#",p+="FFFFFF",y=i.hsv(s),d=y[2],d>.65?this.defaultColor="#000000":this.defaultColor=p)}else g="#FFF",g+="F",g+="F",g+="F",this.containerColor=g}};Ss=W=>{var e;e=W.CIQ,e.ChartEngine.XAxis=function(t){J.h8g();for(var a in t)this[a]=t[a]},e.ChartEngine.XAxis.setPropertiesForInterval={year:(t,a,r,i)=>{t.level=Number(t.raw)%5==="0"<<0?0:"1"-0},month:(t,a,r,i)=>{var n,s,h,o;if(n=Number(t.raw),s=a.DT,h=s.getFullYear(),n===0?t.level=h%5===0?0:1:t.level=n%("3"-0)===0?2:3,t.text=e.monthAsDisplay(n,!1,i),t.grid==="boundary"){o=" ",o+="'",t.boundaryOnlyText=n?t.text:h.toString(),J.s1t(148);var l=J.s8L(44,5,5,17,3);t.text+=o+h.toString().substring("2"<<l),n||(t.alwaysAsBoundary=!0)}},week:null,day:(t,a,r,i)=>{var n=J,s,h,o,l,u,c,p,y,d;s=368261308,h=-595615281,o=2;for(var g="1"^0;n.u6e(g.toString(),g.toString().length,49392)!==s;g++)l=a.DT,u=l.getDay(),c=l.getDate(),p=l.getMonth(),y=l.getFullYear(),o+=2;if(n.u6e(o.toString(),o.toString().length,83297)!==h&&(l=a.DT,u=l.getDay(),c=l.getDate(),p=l.getMonth(),y=l.getFullYear()),t.grid==="boundary"){if(r&&r.isFirstMarketDayOfMonth(l)){d=e.monthAsDisplay(p,!1,i),n.s3C(149),t.text=n.s8L(" '",y,100,d),t.boundaryOnlyText=p?d:y.toString(),t.alwaysAsBoundary=!0,t.level=p?p%3===0?1:2:0;return}i.internationalizer?t.text=i.internationalizer.monthDay.format(l):(n.s3C(150),t.text=n.g5k("1",c,p,"/"))}r&&r.isFirstMarketDayOfWeek(l)||!r&&u===0?(n.s3C(20),t.level=n.g5k("4",0)):u>0?t.level=6:t.level=7},minute:(t,a,r,i)=>{var n=J,s,h,o;s=a.DT,h=Number(t.raw)+(t.marketOpenOffset||0),o=[720,360,120,60,30,15,5],t.level=o.length;for(var l=0;l<o.length;l++)if(h%o[l]===0){t.level=l;break}if(n.h8g(),t.text=e.timeAsDisplay(a.DT,i,e.MINUTE),t.grid==="boundary"&&h===0)if(t.alwaysAsBoundary=!0,i.internationalizer)t.text=i.internationalizer.monthDay.format(s);else{n.s3C(151);var u=n.g5k(32,18,3,2,17);n.s1t(152),n.g5k(58616,2,2,117230,6170),n.s1t(37);var c=n.g5k(6,7,8100,48577);n.s1t(10);var p=n.g5k(2,7053,1,2);t.text=s.getMonth()+u+(c>p?"/":"Q")+s.getDate()}},second:(t,a,r,i)=>{var n=J,s,h,o,l,u,c,p,y;s=[30,15,5],h=-1336953062,n.p4Q(),o=1284569384,l=2;for(var d=1;n.u6e(d.toString(),d.toString().length,63716)!==h;d++)t.level=s.length,l+=2;n.u6e(l.toString(),l.toString().length,"49935"^0)!==o&&(t.level=s.length),t.level=s.length;for(var g=0;g<s.length;g++)if(Number(t.raw)%s[g]===0){t.level=g;break}n.s3C(153),n.g5k(5715,18,13,9,326),n.s3C(154);var b=n.s8L(118950,11,210155,6,10);n.s3C(22);var f=n.s8L(443,4877);if(t.text=t.raw+(b==f?"S":"s"),t.grid==="boundary"&&t.raw==0){u=62448104,c=693925035,p=2;for(var m="1">>0;n.D1T(m.toString(),m.toString().length,10694)!==u;m++)y=a.DT,t.alwaysAsBoundary=!1,p+=2;if(n.D1T(p.toString(),p.toString().length,39480)!==c&&(y=a.DT,t.alwaysAsBoundary=!0),y=a.DT,t.alwaysAsBoundary=!0,y.getHours())t.text=e.timeAsDisplay(y,i,e.MINUTE);else if(i.internationalizer)t.text=i.internationalizer.monthDay.format(y);else{n.s3C(155);var C=n.g5k(10,11,14,15399,10);n.s1t(39);var S=n.s8L(7950,20,472,118);n.s1t(156);var w=n.g5k(1508,2,7,40,11);n.s1t(16),n.s8L(9,12351,15,1544),n.s1t(3),n.s8L(11,6508,20),n.s3C(155);var k=n.s8L(18,12,1233,3989990,15);t.text=y.getMonth()+C+(S!="2366"<<w?"/":k)+y.getDate()}}},millisecond:(t,a,r,i)=>{var n;n=[250,50,10],t.level=n.length;for(var s=0;s<n.length;s++)if(Number(t.raw)%n[s]===0){t.level=s;break}t.text=t.raw+"ms"},tick:(t,a,r,i)=>{J.p4Q(),t.text=e.timeAsDisplay(a.DT,i,e.MILLISECOND)}},e.ChartEngine.XAxis.lineBaseLevel=500,e.extend(e.ChartEngine.XAxis.prototype,{formatter:null,adjustTimeZone:!0,displayBorder:!0,displayGridLines:!0,fitLeftToRight:null,fitTight:null,maxLevelToDisplay:0,noDraw:null,minimumLabelWidth:"50"-0,futureTicks:!0,futureTicksInterval:1},!0),e.ChartEngine.XAxisLabel=function(t){typeof t=="number"?(this.hz=t,this.grid=arguments[1],this.text=arguments[2]):Object.assign(this,t),!this.level&&this.level!==0&&(this.level=this.grid==="boundary"?0:e.ChartEngine.XAxis.lineBaseLevel),typeof this.text>"u"&&(this.text=this.raw),this.text=this.text.toString()},e.ChartEngine.prototype.createXAxis=function(t){var a,r,i;return a="cre",a+="a",a+="teXAxis",t.dataSegment.length<=0||t.xAxis.noDraw?null:(r=[t],i=this.runPrepend("createXAxis",r),J.h8g(),i||(this.mainSeriesRenderer&&this.mainSeriesRenderer.createXAxis?i=this.mainSeriesRenderer.createXAxis(t):this.createTickXAxisWithDates&&t.xAxis.fitLeftToRight?i=this.createTickXAxisWithDates(t):i=this.createSpacedDateXAxis(t),this.headsUpHR(),this.runAppend(a,r),i))},e.ChartEngine.prototype.createXAxisLabel=function(t){var a=J,r,i,n,s,h,o,l,u,c,p,y,d,g,b,f,m;arguments[0]instanceof e.ChartEngine.Panel&&(t={panel:arguments[0],txt:arguments[1],x:arguments[2],backgroundColor:arguments[3],color:arguments[4],pointed:arguments[5],padding:arguments[6]}),r=t.panel,i=t.txt,n=t.x,s=t.backgroundColor,h=t.color,o=t.pointed,l=t.padding===0?0:t.padding||2,u=this.chart.context,c="stx-float-date",a.s3C(135);var C=a.g5k(17,13,470,19);p=this.getCanvasFontSize(c)+l*C,this.canvasFont(c,u);try{a.s3C(154);var S=a.g5k(24,16,29,24,15);y=u.measureText(i).width+l*S}catch{y=0}if(d=r.top+r.height-p-l,!(n+y/2<r.left||n-y/2>r.right)){if(!o){if(n+y/2>r.right){a.s1t(133);var w=a.s8L(4,9,5,3);n=r.right-y/w}if(n-y/2<r.left){a.s1t(22);var k=a.g5k(0,2);n=r.left+y/k}}u.fillStyle=s,e.roundRect({ctx:u,x:n-y/2,top:d,width:y,height:p,radius:3,fill:!0}),g=r.bottom-r.yAxis.bottom-p,u.beginPath(),o?(a.s3C(11),u.moveTo(a.g5k(n,g),d),a.s3C(94),u.lineTo(n,a.g5k(g,d,1)),a.s1t(22),u.lineTo(a.s8L(n,g),d),u.closePath(),u.fill()):(u.moveTo(n,d),a.s3C(11),u.lineTo(n,a.s8L(d,g)),u.strokeStyle=s,u.stroke()),u.textBaseline="top",u.fillStyle=h||e.chooseForegroundColor(s),u.fillStyle==s&&(s.toUpperCase()=="#FFFFFF"?u.fillStyle="#000000":u.fillStyle="#FFFFFF"),b=1990380058,f=732916691,m=2;for(var D=1;a.u6e(D.toString(),D.toString().length,82827)!==b;D++)a.s1t(157),u.fillText(i,a.s8L(y,2,l,n,1),a.s8L(l,2,d,a.s1t(158))),m+=2;a.u6e(m.toString(),m.toString().length,83921)!==f&&(a.s3C(159),u.fillText(i,a.s8L(2,l,y,n,0),a.s8L(d,l,3,a.s3C(160))))}}};ks=W=>{var e=J,t;t=W.CIQ,t.createLabel=function(a){var r,i,n;a.ctx.textBaseline="middle",a.ctx.fillStyle=a.color?a.color:t.chooseForegroundColor(a.backgroundColor),a.ctx.fillStyle===a.backgroundColor&&(r="#",r+="FFF",r+="F",r+="FF",i="#0",i+="0",i+="000",i+="0",n="#F",n+="FFFF",n+="F",a.backgroundColor.toUpperCase()==n?a.ctx.fillStyle=i:a.ctx.fillStyle=r),a.ctx.fillText(a.txt,a.x+a.margin.left,a.y+a.margin.top),a.ctx.textAlign="left"},t.roundRectArrow=function(a){var r;r="a",r+="r",r+="ro",r+="w",t.roundRect(a,r)},t.semiRoundRect=function(a){t.roundRect(a,"flush")},t.rect=function(a){a.radius=0,e.h8g(),t.roundRect(a)},t.noop=function(a){a.color=a.backgroundColor,e.p4Q(),t.createLabel(a)},t.tickedRect=function(a){var r;t.rect(a),e.s1t(27);var i=e.s8L(98,3,10,30);r=Math.round(a.top+a.height/i)+.5,a.ctx.beginPath(),a.ctx.moveTo(a.x-2,r),a.ctx.lineTo(a.x,r),a.ctx.stroke(),a.ctx.closePath()},t.roundRect=function(a,r){var i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S;i="undef",i+="ined",arguments.length===9&&(a={ctx:arguments[0],x:arguments["1"^0],top:arguments[2],width:arguments[3],height:arguments["4"|4],radius:arguments[5],fill:arguments[6],stroke:arguments[7],edge:arguments[8]}),n=a.stroke,s=a.x,h=a.top,o=a.width,l=a.height,u=a.radius,c=a.fill,p=a.ctx,typeof n==i&&(n=!0),typeof u>"u"&&(u=5,o<0&&(u=-5)),y=o<0?u*-1:u,u&&!r&&(e.s3C(11),s=e.s8L(s,1)),e.s1t(22),d=e.s8L(s,u),e.s1t(22),g=e.s8L(s,o),e.s3C(22),b=e.s8L(h,y),e.s1t(22),f=e.g5k(h,l),e.s3C(11),m=e.s8L(g,u),e.s3C(11),C=e.g5k(f,y),p.beginPath(),p.moveTo(d,h),p.lineTo(m,h),p.quadraticCurveTo(g,h,g,b),p.lineTo(g,C),p.quadraticCurveTo(g,f,m,f),e.p4Q(),p.lineTo(d,f),r=="flush"?(p.lineTo(s,f),p.lineTo(s,h)):r=="arrow"?(e.s3C(11),p.quadraticCurveTo(s,f,e.s8L(s,u),C),S=o<0?1:-1,e.s1t(161),p.lineTo(e.g5k(S,2,s,l),e.g5k(2,h,l,e.s3C(136))),e.s3C(11),p.lineTo(e.g5k(s,u),b),p.quadraticCurveTo(s,h,d,h)):(p.quadraticCurveTo(s,f,s,C),p.lineTo(s,b),p.quadraticCurveTo(s,h,d,h)),p.closePath(),a.backgroundColor&&(p.fillStyle=a.backgroundColor),n&&p.stroke(),c&&p.fill(),a.txt&&t.createLabel(a)},t.ChartEngine.YAxis=function(a){e.h8g();for(var r in a)this[r]=a[r];this.name||(this.name=t.uniqueID()),this.position=="none"&&(this.width=0)},t.extend(t.ChartEngine.YAxis.prototype,{name:null,high:null,low:null,shadow:null,logHigh:null,logLow:null,logShadow:null,allowSharing:!0,multiplier:null,bottom:null,top:null,height:null,left:null,renderers:[],studies:[],lowValue:null,highValue:null,semiLog:null,priceTick:null,printDecimalPlaces:null,yAxisPlotter:null,highlight:null},!0),e.s3C(11),t.ChartEngine.YAxis.defaultShadowBreaks=[[1e3,e.s8L("2",0)],[5,4],[.001,8]],t.ChartEngine.YAxis.smallChartShadowBreaks=[[10,2],[1,4]],t.ChartEngine.YAxis.prototype.maxDecimalPlaces=null,t.ChartEngine.YAxis.prototype.max=null,t.ChartEngine.YAxis.prototype.min=null,t.ChartEngine.YAxis.prototype.decimalPlaces=null,t.ChartEngine.YAxis.prototype.idealTickSizePixels=null,t.ChartEngine.YAxis.prototype.minimumPriceTick=null,t.ChartEngine.YAxis.prototype.fractional=null,t.ChartEngine.YAxis.prototype.displayBorder=!0,t.ChartEngine.YAxis.prototype.displayGridLines=!0,e.p4Q(),t.ChartEngine.YAxis.prototype.noDraw=null,t.ChartEngine.YAxis.prototype.drawCurrentPriceLabel=!0,t.ChartEngine.YAxis.prototype.drawSeriesPriceLabels=!0,t.ChartEngine.YAxis.prototype.drawPriceLabels=!0,t.ChartEngine.YAxis.prototype.goldenRatioYAxis=!0,t.ChartEngine.YAxis.prototype.yaxisLabelStyle=null,t.ChartEngine.YAxis.prototype.justifyRight=null,t.ChartEngine.YAxis.prototype.flipped=!1,t.ChartEngine.YAxis.prototype.textBackground=!1,t.ChartEngine.YAxis.prototype.priceFormatter=null,t.ChartEngine.YAxis.prototype.bottomOffset=0,t.ChartEngine.YAxis.prototype.topOffset=0,e.s1t(19),t.ChartEngine.YAxis.prototype.initialMarginTop=e.g5k("10",64),t.ChartEngine.YAxis.prototype.initialMarginBottom=10,t.ChartEngine.YAxis.prototype.zoom=0,t.ChartEngine.YAxis.prototype.scroll=0,t.ChartEngine.YAxis.prototype.heightFactor=1,Object.defineProperty(t.ChartEngine.YAxis.prototype,"width",{configurable:!0,enumerable:!0,get:function(){return this.position==="none"?0:this._dynamicWidth||this._width},set:function(a){this._width=a,this._dynamicWidth<a&&(this._dynamicWidth=NaN)}}),t.ChartEngine.YAxis.prototype.width=60,t.ChartEngine.YAxis.prototype.smallScreenWidth=50,t.ChartEngine.YAxis.prototype.textStyle=null,t.ChartEngine.YAxis.prototype.position=null,t.ChartEngine.YAxis.prototype.pretty=!0,t.ChartEngine.YAxis.prototype.increments=[1,2.5,5],t.ChartEngine.YAxis.prototype.prettySemiLog=!0,t.ChartEngine.YAxis.prototype.shadowBreaks=t.ChartEngine.YAxis.defaultShadowBreaks,t.ChartEngine.YAxis.prototype.getYAxis=function(a){return this},t.ChartEngine.YAxis.prototype.isShared=function(a,r){var i,n;if(i=this.studies.length,n=this.renderers.length,i>1||n&&i)return!0;if(e.p4Q(),!n)return!1;if(n>1&&r)return!0;for(var s=n-1;s>=0;s--)a.chart.seriesRenderers[this.renderers[s]].params.dependentOf&&n--;return e.s3C(162),e.s8L(n,1)},t.ChartEngine.YAxis.prototype.setBackground=function(a,r){var i;r||(r={}),e.h8g(),r.color||(r.color="auto"),i=[[this.left,this.top],[this.left,this.bottom],[this.left+this.width,this.bottom],[this.left+this.width,this.top]],t.fillArea(a,i,{color:r.color,opacity:r.opacity})},t.ChartEngine.YAxis.prototype.setBreakpointWidth=function(a){var r,i,n,s;if(a){var{width:h,smallScreenWidth:o}=t.ChartEngine.YAxis.prototype;r=-1078953337,i=504793506,n=2;for(var l=1;e.u6e(l.toString(),l.toString().length,26803)!==r;l++)e.s3C(89),s=e.s8L("break-sm",a),n+=2;e.D1T(n.toString(),n.toString().length,"54801"*1)!==i&&(e.s1t(90),s=e.g5k("",a)),this.width=s?o:h}},t.ChartEngine.prototype.getLabelOffsetInPixels=function(a,r){var i,n,s,h,o,l,u;if(e.h8g(),i="ro",i+="undRec",i+="tArr",i+="ow",n=!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars,this.yaxisLabelStyle==i&&!(n&&this.extendLastTick&&a.yaxisPaddingRight!==0)){e.s3C(20),s=-e.s8L("323149774",0),h=1512012643,o=2;for(var c=1;e.D1T(c.toString(),c.toString().length,36094)!==s;c++)l=9,u=this.getCanvasFontSize("")*(l-6),o+=2;e.D1T(o.toString(),o.toString().length,31795)!==h&&(l=1,u=this.getCanvasFontSize("")-l/("7"^0)),l=3,e.s3C(11);var p=e.g5k(6,4);return u=this.getCanvasFontSize("stx_yaxis")+l*p,e.s1t(46),e.g5k(u,.66)}return 0},t.ChartEngine.prototype.flipChart=function(a){this.layout.flipped!=a&&(e.h8g(),this.layout.flipped=a,this.chart.yAxis.flipped=a,this.changeOccurred("layout"),this.draw())},t.ChartEngine.prototype.calculateYAxisMargins=function(a){var r,i;if(r=this.chart,i=r.panel.yaxisLHS.concat(r.panel.yaxisRHS).includes(a)?r.yaxisMarginMultiplier:1,a.heightFactor){e.s1t(10);var n=e.s8L(3,0,13,9);a.zoom=a.height*(n-a.heightFactor)}a.zoom+=(a.initialMarginTop+a.initialMarginBottom)*i,a.scroll=(a.initialMarginTop-a.initialMarginBottom)*i/2,e.h8g(),a.zoom>a.height&&(a.zoom=0,a.scroll=0)},t.ChartEngine.prototype.resetDynamicYAxis=function(a){var r,i,n,s;if(r="r",r+="esetDynami",r+="cYAxis",!this.runPrepend("resetDynamicYAxis",arguments)){i=!1;for(var h in this.panels)if(n=this.panels[h],!(a&&a.chartName&&n.chart.name!==a.chartName)&&!(!n.yaxisLHS||!n.yaxisRHS)){s=n.yaxisLHS.concat(n.yaxisRHS);for(var o=0;o<s.length;o++)s[o]._dynamicWidth&&(s[o]._dynamicWidth=NaN,i=!0)}e.p4Q(),i&&(!a||!a.noRecalculate)&&this.calculateYAxisPositions(),this.runAppend(r,arguments)}},t.ChartEngine.prototype.notifyBreakpoint=function(a){var r,i,n,s,h;if(r="br",r+="eak-",r+="l",r+="g",this.chart.breakpoint!==a&&[r,"break-md","break-sm"].includes(a)){var{chart:o}=this,{dynamicYAxis:l}=o;i=t.ThemeHelper&&new t.ThemeHelper({stx:this}),this.clearStyles(),i&&i.update(this),o.breakpoint=a;for(var u in this.panels){n=this.panels[u],s=n.yaxisRHS.concat(n.yaxisLHS);for(var c=0;c<s.length;c++)h=s[c],h.setBreakpointWidth(a)}l&&this.resetDynamicYAxis({chartName:o.name})}},t.ChartEngine.prototype.adjustYAxisHeightOffset=function(a,r){var i,n,s,h,o,l,u;if(i=r.topOffset,n=r.bottomOffset,i+n>a.height&&(r.bottomOffset=0,r.topOffset=0),!this.xaxisHeight&&this.xaxisHeight!==0){s="st",s+="x_x",s+="axi",s+="s",e.s3C(0);var c=e.g5k(10,14);this.xaxisHeight=this.getCanvasFontSize(s)+c,h=-917975879,o=-83838768,l=2;for(var p=1;e.u6e(p.toString(),p.toString().length,14232)!==h;p++)this.chart.xAxis.displayBorder&&this.axisBorders&&(e.s3C(20),this.xaxisHeight%=e.s8L("4",0)),l+=2;e.D1T(l.toString(),l.toString().length,72352)!==o&&(this.chart.xAxis.displayBorder||this.axisBorders)&&(this.xaxisHeight+=3)}u=this.xAxisAsFooter&&a.bottom>this.chart.canvasHeight-this.xaxisHeight||!this.xAxisAsFooter&&a==this.chart.panel,u&&(n+=this.xaxisHeight),r.top=a.top+i,r.bottom=a.bottom-n},t.ChartEngine.prototype.plotYAxisGrid=function(a){var r,i;this.runPrepend("plotYAxisGrid",arguments)||(e.p4Q(),r=this.getBackgroundCanvas().context,i=a.yAxis,i.yAxisPlotter&&i.yAxisPlotter.draw(r,"grid"),this.runAppend("plotYAxisGrid",arguments))},t.ChartEngine.prototype.plotYAxisText=function(a){var r,i,n,s,h;if(r="s",r+="tx_yaxis",this.runPrepend("plotYAxisText",arguments))return;for(i=this.getBackgroundCanvas().context,this.canvasFont("stx_yaxis",i),this.canvasColor(r,i),i.textBaseline="middle",n=a.yaxisLHS,s=0;s<n.length;s++)h="righ",h+="t",i.textAlign=h,o(n[s]);for(n=a.yaxisRHS,s=0;s<n.length;s++)i.textAlign="left",o(n[s]);i.textAlign="left",i.textBaseline="alphabetic";function o(l){e.p4Q(),l.yAxisPlotter&&(l.noDraw||!l.width||(l.justifyRight?i.textAlign="right":l.justifyRight===!1&&(i.textAlign="left"),l.yAxisPlotter.draw(i,"text")))}e.p4Q(),this.runAppend("plotYAxisText",arguments)},t.ChartEngine.prototype.decimalPlacesFromPriceTick=function(a,r){return r&&(a/=r),a<1e-4?(e.s3C(11),e.s8L("8",0)):a<.01?4:a<.1?2:a<1?1:0},t.ChartEngine.prototype.formatYAxisPrice=function(a,r,i,n,s){e.p4Q();var h,o,l,u,c;return a===null||typeof a>"u"||isNaN(a)?"":(r||(r=this.chart.panel),h=n||r.yAxis,o=i,!o&&o!==0&&(o=h.printDecimalPlaces),!o&&o!==0&&(o=this.decimalPlacesFromPriceTick(h.priceTick,h.idealTickSizePixels)),l=h==r.chart.yAxis?2e4:1e3,h.priceTick>=l?(a=a.toFixed(o),t.condenseInt(a)):(u=this.internationalizer,u&&s!==!1?(c=u.priceFormatters.length,o>=c&&(e.s3C(163),o=e.s8L(c,"1")),a=u.priceFormatters[o].format(a)):a=a.toFixed(o),a))},t.ChartEngine.prototype.calculateYAxisRange=function(a,r,i,n){var s,h,o,l,u,c,p,y,d,g;if(s="p",s+="a",s+="n",s+="df",i==Number.MAX_VALUE&&(i=0,n=0),h=a.height,o=null,l=null,this.adjustYAxisHeightOffset(a,r),r.height=r.bottom-r.top,u=Math.round(Math.abs(h/5)),r.zoom>=0&&h-Math.abs(r.scroll)<u){e.s1t(11);var b=e.s8L(0,1);e.s3C(3);var f=e.s8L(14,14,27);r.scroll=(h-u)*(r.scroll<0?b:f)}c=a.chart.name===a.name&&a.yAxis.name===r.name,p=i>0&&(this.layout.semiLog||this.layout.chartScale=="log")&&!a.chart.isComparison&&this.layout.aggregationType!=s,(i||i===0)&&(n-i===("0"|0)?(y=Math.pow(10,-(i.toString()+".").split(".")[1].length),y==1&&(e.s3C(56),y=e.g5k(0,"100")),e.s3C(22),o=e.g5k(i,y),e.s3C(11),l=e.s8L(i,y)):c&&p&&(n||n===0)?(d=Math.log(i)/Math.LN10,g=Math.log(n)/Math.LN10,o=Math.pow(10,g),l=Math.pow(10,d)):(o=n,l=i),r.high=o,r.low=l),(r.max||r.max===0)&&(r.high=r.max),(r.min||r.min===0)&&(r.low=r.min),r.shadow=r.high-r.low,c&&(r.semiLog!=p&&(this.clearPixelCache(),r.semiLog=p),r.flipped=this.layout.flipped)},t.ChartEngine.prototype.renderYAxis=function(a){var r,i,n,s,h,o,l,u,c,p,y;if(r="rende",r+="rYA",r+="xi",r+="s",i="yAxi",i+="s",n="reboot dr",n+="a",n+="w",!this.runPrepend("renderYAxis",arguments)){if(this.checkLogScale())throw new Error(n);this.rendererAction(a,i);var{context:d}=this.getBackgroundCanvas(a);for(var g in this.panels)if(s=this.panels[g],s.chart==a){for(h=s.yaxisRHS.concat(s.yaxisLHS),o=0;o<h.length;o++)l=h[o],this.calculateYAxisRange(s,l,l.lowValue,l.highValue),u=t.getFn("Studies.getYAxisParameters",{})(this,l),u.yAxis=l,this.createYAxis(s,u),this.drawYAxis(s,u),t.getFn("Studies.doPostDrawYAxis")(this,l);for(o=0;o<h.length;o++)l=h[o],l.dropzone&&(c="stx-subh",c+="older dropzone left",p=this.canvasStyle(c),p&&(d.save(),d.strokeStyle=p.borderLeftColor,d.lineWidth=parseFloat(p.borderLeftWidth),d.beginPath(),l.dropzone=="all"?d.strokeRect(l.left,l.top,l.width,l.height):(y=l.left+(l.dropzone=="left"?"0"|0:l.width),d.moveTo(y,l.top),d.lineTo(y,l.top+l.height),d.stroke()),d.restore()));this.displayDragOK&&this.displayDragOK(!0)}e.h8g(),this.runAppend(r,arguments)}},t.ChartEngine.prototype.updateFloatHRLabel=function(a){var r,i,n,s,h,o,l,u,c,p,y,d;if(r="non",r+="e",!!this.floatCanvas&&(i=a.yaxisLHS.concat(a.yaxisRHS),n=this.crossYActualPos?this.crossYActualPos:this.cy,this.floatCanvas.isDirty&&t.clearCanvas(this.floatCanvas,this),!(this.controls.crossX&&this.controls.crossX.style.display==r))){this.controls.crossY&&(s="p",s+="x",h="round",h+="Rec",h+="tArrow",o=a.left,l=a.width,u=7,this.yaxisLabelStyle==h&&(l-=u,o>0&&(o+=u),a.yaxisLHS.length&&a.yaxisRHS.length&&(l-=u)),e.s1t(22),this.controls.crossY.style.left=e.g5k(o,"px"),e.s3C(22),this.controls.crossY.style.width=e.s8L(l,s));for(var g=0;g<i.length;g++)c=i[g],p=this.transformedPriceFromPixel(n,a,c),!isNaN(p)&&((c.min||c.min===0)&&p<c.min||(c.max||c.max===0)&&p>c.max||(y=null,c!==a.chart.yAxis&&(y=c.decimalPlaces),c.priceFormatter?(!y&&y!==0&&(y=this.decimalPlacesFromPriceTick(c.priceTick,c.idealTickSizePixels)),p=c.priceFormatter(this,a,p,y)):p=this.formatYAxisPrice(p,a,y,c),d=this.canvasStyle("stx-float-price"),this.createYAxisLabel(a,p,n,d.backgroundColor,d.color,this.floatCanvas.context,c),this.floatCanvas.isDirty=!0))}},t.ChartEngine.prototype.whichYAxis=function(a,r,i){var n,s,h,o;if(e.p4Q(),n="u",n+="ndef",n+="i",n+="ned",typeof r>"u"&&(r=this.cx),typeof i===n&&(i=this.cy),s=this.whichPanel(i),a&&a==s){h=a.yaxisLHS.concat(a.yaxisRHS);for(var l=0;l<h.length;l++)if(o=h[l],o.left<=r&&o.left+o.width>=r)return o}return null},t.ChartEngine.prototype.yaxisMatches=function(a,r){return!a||!a.getYAxis||!r||!(r instanceof t.ChartEngine.YAxis)?!1:a.getYAxis(this).name==r.name},t.ChartEngine.prototype.createYAxisLabel=function(a,r,i,n,s,h,o){var l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T;if(l="s",l+="tx_yaxis",u="stx_ya",u+="xis",c=o||a.yAxis,e.p4Q(),!(c.drawPriceLabels===!1||c.noDraw||!c.width)){p=h||this.chart.context,y=3,e.s3C(0);var _=e.g5k(2,4);d=this.getCanvasFontSize(u)+y*_,this.canvasFont(l,p),g=c.displayBorder===null?a.yAxis.displayBorder:c.displayBorder,this.axisBorders===!1&&(g=!1),this.axisBorders===!0&&(g=!0),b=g?3:0,f=3;try{e.s3C(16);var L=e.s8L(17,526,16,32);m=p.measureText(r).width+b+y*L}catch{m=c.width}if(w=c.position===null?a.chart.yAxis.position:c.position,w==="left")if(S=c.left+c.width,c.width<0&&(S-=c.width+m),f=-3,c.justifyRight===!1){k="l",k+="e",k+="f",k+="t",p.textAlign=k,e.s3C(146);var M=e.s8L(16,53,13,4);m=c.width*M,C=S-c.width+y}else p.textAlign="right",e.s1t(21),m=e.g5k(m,1),e.s3C(94),C=e.s8L(y,S,b);else{S=c.left,D=-819576022,v=-1900651154,e.s1t(11),x=e.g5k("2",0);for(var F=1;e.u6e(F.toString(),F.toString().length,"31102"^0)!==D;F++)c.width<0&&(S+=c.width-m),x+=2;e.u6e(x.toString(),x.toString().length,5691)!==v&&c.width<=2&&(S/=c.width%m),c.justifyRight?(p.textAlign="right",m=c.width,C=c.left+m-y):(p.textAlign="left",e.s3C(55),C=e.s8L(S,y,b))}if(i+d/2>c.bottom){e.s3C(17);var P=e.g5k(0,18,2,10);i=c.bottom-d/P}if(i-d/2<c.top){e.s1t(94);var E=e.g5k(12,20,6);i=c.top+d/E}typeof t[this.yaxisLabelStyle]>"u"&&(this.yaxisLabelStyle="roundRectArrow"),A=this.yaxisLabelStyle,c.yaxisLabelStyle&&(A=c.yaxisLabelStyle),T={ctx:p,x:S,y:i,top:i-d/("2"<<32),width:m,height:d,radius:f,backgroundColor:n,fill:!0,stroke:!1,margin:{left:C-S,top:1},txt:r,color:s},t[A](T)}},t.ChartEngine.prototype.getCurrentHRParams=function(){var a,r,i,n,s,h,o,l,u,c,p,y,d,g,b,f,m;if(i=this.mainSeriesRenderer||{},!i.noCurrentHR){var{highLowBars:C}=i;n={},e.p4Q();for(var S in this.charts)if(s="d",s+="ataSegme",s+="n",s+="t",h=this.charts[S],o=h.panel,l=o.yAxis,!o.hidden&&!(l.drawCurrentPriceLabel===!1||l.noDraw)&&i.params){var{whichSet:w}=l;if(w||(w="dataSet"),!(this.isHistoricalModeSet&&w!=="dataSegment")){if(u=h[w].length,c=this.layout.candleWidth,w==s)for(;u>(h.width-this.micropixels+c/2+1)/c;)u--;if(u&&h[w][u-1]){p=h.defaultPlotField,(!p||C)&&(p="Close"),y=void 0,d=void 0;do if(y=h[w][--u][p],d=y,u===0)break;while(d==null);w=="dataSet"&&h.currentQuote?d=h.currentQuote[p]:h[w].length>="2">>32&&(e.s3C(11),g=h[w][e.g5k(u,1)],g&&(y=g[p])),d<y?(a=this.canvasStyle("stx_current_hr_down").backgroundColor,r=this.canvasStyle("stx_current_hr_down").color):(a=this.canvasStyle("stx_current_hr_up").backgroundColor,r=this.canvasStyle("stx_current_hr_up").color),h.transformFunc&&(d=h.transformFunc(this,h,d)),b=void 0,f=Math.max(o.yAxis.printDecimalPlaces,o.chart.decimalPlaces),(l.maxDecimalPlaces||l.maxDecimalPlaces===0)&&(f=Math.min(f,l.maxDecimalPlaces)),l.priceFormatter?b=l.priceFormatter(this,o,d,f):b=this.formatYAxisPrice(d,o,f),m=this.pixelFromTransformedValue(d,o),m=Math.floor(m)+.5,n[S]={panel:o,txt:b,y:m,backgroundColor:a,color:r}}}}return n}},t.ChartEngine.prototype.drawCurrentHR=function(){if(!this.runPrepend("drawCurrentHR",arguments)){var{currentHRParams:a}=this;if(a)for(var r in a){var{panel:i,txt:n,y:s,backgroundColor:h,color:o}=a[r];this.createYAxisLabel(i,n,s,h,o)}this.runAppend("drawCurrentHR",arguments)}},t.ChartEngine.prototype.drawCurrentPriceLine=function(){var a;if(a="drawC",a+="urre",a+="ntPr",a+="iceLine",!!(this.preferences.currentPriceLine===!0&&this.isHome())&&!this.runPrepend("drawCurrentPriceLine",arguments)){var{currentHRParams:r}=this;if(r)for(var i in r){var{panel:n,y:s,backgroundColor:h}=r[i];this.plotLine(n.left,n.right,s,s,h,"line",n.chart.context,n,{pattern:"dashed",lineWidth:1,opacity:.8})}this.runAppend(a,arguments)}},t.ChartEngine.prototype.getYAxisByName=function(a,r){var i,n;if(i="str",i+="ing",typeof a==i&&(a=this.panels[a]),!(!a||!r)){if(r===a.yAxis.name)return a.yAxis;for(n=0;a.yaxisLHS&&n<a.yaxisLHS.length;n++)if(a.yaxisLHS[n].name===r)return a.yaxisLHS[n];for(e.p4Q(),n=0;a.yaxisRHS&&n<a.yaxisRHS.length;n++)if(a.yaxisRHS[n].name===r)return a.yaxisRHS[n]}},t.ChartEngine.prototype.getYAxisByField=function(a,r){var i,n,s,h,o,l,u;if(e.p4Q(),r){for(i in this.layout.studies)if(n=this.layout.studies[i],n.panel==a.name&&n.outputMap&&n.outputMap.hasOwnProperty(r))return n.getYAxis(this);for(i in this.chart.seriesRenderers){h=this.chart.seriesRenderers[i];for(var c=0;c<h.seriesParams.length;c++)if(o="-",o+="->",h.params.panel==a.name){if(l=h.seriesParams[c],u=l.field,!u&&!h.highLowBars&&(u=this.defaultPlotField||"Close"),l.symbol&&l.subField&&(u+=o+l.subField),r==u)return h.params.yAxis||a.yAxis;l.field&&l.field==r.split("-->")[0]&&(s=h.params.yAxis||a.yAxis)}}if(s)return s}},t.ChartEngine.prototype.deleteYAxisIfUnused=function(a,r){var i,n,s;if(typeof a=="string"&&(a=this.panels[a]),!r||!a)return;for(var h=0;h<r.renderers.length;h++)if(i=this.chart.seriesRenderers[r.renderers[h]],i&&i.params.panel==a.name)return;if(r.name===a.yAxis.name&&a.yaxisRHS.length+a.yaxisLHS.length===1)return;for(n="0"-0;a.yaxisRHS&&n<a.yaxisRHS.length;n++)a.yaxisRHS[n]===r?a.yaxisRHS[n]=null:s||(s=a.yaxisRHS[n]);for(n=0;a.yaxisLHS&&n<a.yaxisLHS.length;n++)a.yaxisLHS[n]===r?a.yaxisLHS[n]=null:s||(s=a.yaxisLHS[n]);a.yaxisRHS=a.yaxisRHS.filter(o),a.yaxisLHS=a.yaxisLHS.filter(o);function o(l){return e.p4Q(),e.s3C(90),e.g5k(null,l)}s&&r.name===a.yAxis.name&&(a.yAxis=s),this.calculateYAxisPositions()},t.ChartEngine.prototype.addYAxis=function(a,r){var i,n,s,h,o;if(i="ri",i+="g",e.h8g(),i+="h",i+="t",typeof a=="string"&&(a=this.panels[a]),!(!r||!a)){for(a.yaxisLHS||(n="ri",n+="ght",a.yaxisLHS=[],a.yaxisRHS=[],a.yAxis.position=="left"||a.yAxis.position!=n&&a.chart.panel.yAxis.position=="left"?a.yaxisLHS.push(a.yAxis):a.yaxisRHS.push(a.yAxis)),h=[],o=a.yaxisLHS,s=o.length-1;s>=0;s--)if(o[s].name===r.name){if(r.position!="right")return o[s];h=o.splice(s,1)}for(o=a.yaxisRHS,s=o.length-1;s>=0;s--)if(o[s].name===r.name){if(r.position!="left")return o[s];h=o.splice(s,1)}return r.position==="left"||r.position!=i&&a.chart.panel.yAxis.position=="left"?a.yaxisLHS.unshift(r):a.yaxisRHS.push(r),r.setBreakpointWidth(this.chart.breakpoint),r.height=a.yAxis.height,r.idealTickSizePixels=null,h[0]==a.yAxis&&(a.yAxis=r),r.lockScale||this.calculateYAxisMargins(r),"scroll"in r||(r.scroll=0),r}},t.ChartEngine.prototype.calculateYAxisPositions=function(){var a,r,i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C;a=[];for(var S in this.charts)this.charts[S].hidden||this.charts[S].panel.hidden||a.push(S);for(var w in this.panels)r=this.panels[w],!(r.name===r.chart.name||r.hidden)&&a.push(w);for(i=0,e.s1t(91),n=e.s8L(0,"0"),h=0;h<a.length;h++)if(o=this.panels[a[h]],!!o){for(o.yaxisLHS||(o.yaxisLHS=[],o.yaxisRHS=[]),u=o.yaxisLHS,c=o.yaxisRHS,p=o.yAxis.position,(!p||p=="none")&&(p=o.chart.yAxis.position||"right"),!u.length&&!c.length&&(p=="left"?u.push(o.yAxis):c.push(o.yAxis)),y=[],d=[],s=u.length-1;s>=0;s--)(u[s].position=="right"||u[s].position!="left"&&p=="right")&&(y=y.concat(u.splice(s,1)));for(s=c.length-1;s>=0;s--)g="r",g+="ig",g+="h",g+="t",(c[s].position=="left"||c[s].position!=g&&p=="left")&&(d=d.concat(c.splice(s,1)));for(o.yaxisLHS=d.concat(u),o.yaxisRHS=c.concat(y),!o.yAxis.width&&o.yAxis.width!==0&&(o.yAxis.width=this.yaxisWidth),o.yaxisTotalWidthRight=0,o.yaxisTotalWidthLeft=0,b=o.yaxisLHS.concat(o.yaxisRHS),s=0;s<b.length;s++)l=b[s],!(l.noDraw||!l.width)&&(l.position=="left"||p=="left"&&!l.position?o.yaxisTotalWidthLeft+=l.width:o.yaxisTotalWidthRight+=l.width);o.yaxisTotalWidthLeft>i&&(i=o.yaxisTotalWidthLeft),o.yaxisTotalWidthRight>n&&(n=o.yaxisTotalWidthRight)}for(e.p4Q(),h=0;h<a.length;h++)if(o=this.panels[a[h]],!!o){for(f=o.name===o.chart.name,m=i,s=o.yaxisLHS.length-1;s>=0;s--)l=o.yaxisLHS[s],!l.noDraw&&(m-=l.width,l.left=m);for(m=this.width-n,s=0;s<o.yaxisRHS.length;s++)l=o.yaxisRHS[s],!l.noDraw&&(l.left=m,m+=l.width);typeof this.yaxisLeft<"u"&&(o.chart.yaxisPaddingRight=this.yaxisLeft),o.yaxisCalculatedPaddingRight=n,(o.chart.yaxisPaddingRight||o.chart.yaxisPaddingRight===0)&&(o.yaxisCalculatedPaddingRight=o.chart.yaxisPaddingRight),o.yaxisCalculatedPaddingLeft=i,(o.chart.yaxisPaddingLeft||o.chart.yaxisPaddingLeft===0)&&(o.yaxisCalculatedPaddingLeft=o.chart.yaxisPaddingLeft),f||o.chart.panel.hidden?(o.left=o.yaxisCalculatedPaddingLeft,o.right=this.width-o.yaxisCalculatedPaddingRight):(o.left=o.chart.panel.left,o.right=o.chart.panel.right),o.width=o.right-o.left,o.handle&&(C="p",C+="x",o.handle.style.left=o.left+C,o.handle.style.width=o.width+"px"),(f||o.chart.panel.hidden)&&(o.chart.panel.left=o.chart.left=o.left,o.chart.panel.right=o.chart.right=o.right,o.chart.panel.width=o.chart.width=Math.max(o.right-o.left,0))}this.setMaxTicks(this.chart.maxTicks),this.adjustPanelPositions()},t.ChartEngine.prototype.getYAxisCurrentPosition=function(a,r){var i,n;if(!a.width)return"none";i=r.yaxisLHS;for(var s=0;s<i.length;s++)if(n="le",n+="ft",i[s].name==a.name)return n;return e.p4Q(),"right"},t.ChartEngine.prototype.setYAxisPosition=function(a,r){a.position=r,a.setBreakpointWidth(this.chart.breakpoint),this.calculateYAxisPositions(),this.draw()},t.ChartEngine.prototype.electNewYAxisOwner=function(a){var r,i;r=a.studies[0],(!r||r==a.name)&&(e.s1t(20),r=a.renderers[e.g5k("0",0)]),(!r||r==a.name)&&(r=a.studies[1]),r||(r=a.renderers[1]);for(var n=0;n<a.studies.length;n++)i=this.layout.studies[a.studies[n]],i.parameters&&i.parameters.yaxisDisplayValue==a.name&&(i.parameters.yaxisDisplayValue=r);return r}};As=W=>{var e=J;e.D56=function(a){if(e&&a)return e.w7W(a)},e.m7w=function(a){if(e.p4Q(),e)return e.A0h(a)};var t;t=W.CIQ,t.valid=0,t.ChartEngine.prototype.consolidatedQuote=function(a,r){var i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D;if(i="conso",i+="lidatedQu",i+="ote",n="tic",n+="k",this.runPrepend("consolidatedQuote",arguments))return a;if(!a||!a.length)return[];if(s=this.layout,h=this.chart,o=this,!h.market)return console.log("Cannot consolidate: no market iterator available.  Please make sure market module is enabled."),a;l=s.periodicity,u=s.interval,c=s.timeUnit;function v(x,A,T){var _,L,M,F,P;A||(A={DT:T,Date:t.yyyymmddhhmmssmmm(T),consolidatedTicks:"0"*1}),A.displayDate||o.setDisplayDate(A),_=1,s.adj&&x.Adj_Close&&(_=x.Adj_Close/x.Close),e.p4Q(),L=x.High||x.Close,(L||L===("0"^0))&&L*_>(A.High||-Number.MAX_VALUE)&&(e.s1t(46),A.High=e.s8L(L,_)),M=x.Low||x.Close,(M||M===0)&&M*_<(A.Low||Number.MAX_VALUE)&&(e.s1t(46),A.Low=e.s8L(M,_)),F=x.Open||x.Close,(F||F===0)&&!A.Open&&A.Open!==0&&(e.s3C(46),A.Open=e.s8L(F,_)),x.Volume!==void 0&&(A.Volume=(A.Volume||0)+x.Volume),x.Close!==void 0&&x.Close!==null&&(A.Close=x.Close*_),x.Adj_Close!==void 0&&x.Adj_Close!==null&&(A.Adj_Close=x.Adj_Close),A.ratio=_;for(var E in x)P="Bi",P+="d",P+="L2",x[E]&&x[E].Close!==void 0?A[E]=v(x[E],A[E],T):E in A?["Bid",P,"Ask","AskL2"].indexOf(E)>-1&&(A[E]=x[E]):A[E]=x[E];return A.consolidatedTicks++,A}for(r||(r={}),r.periodicity&&r.interval&&(l=r.periodicity,u=r.interval,c=r.timeUnit),p=1,y=t.ChartEngine.isDailyInterval(u),!y&&h.useInflectionPointForIntraday&&(p=l),d=h.inflectionPoint,(!d||d<a[0].DT)&&(d=new Date(+a["0"^0].DT),!y&&!h.market.market_def&&d.setHours(0,-d.getTimezoneOffset(),0,0)),g=[],b={begin:d,interval:u,multiple:l/p,timeUnit:c},u==n&&(d.setHours(0,0,0,0),b={begin:d,interval:"day",multiple:1}),f=h.market.newIterator(t.clone(b));f.previous(p)>a[0].DT;);for(m=f.previous(p),C=f.next(p),S=0,w=0;S<a.length;){if(k=a[S],k.DT<m){console.log("Warning: out-of-order quote in dataSet, disregarding: "+k.DT),S++;continue}else if(k.DT>=C){if(m=C,C=f.next(p),!g[w])continue}else if(u=="tick"&&k.consolidatedTicks>0){g[w]=k,S++;continue}else if(!g[w]||u!="tick"||g[w].consolidatedTicks<l){D=v(k,g[w],u=="tick"?k.DT:m),D&&(g[w]=D),S++;continue}w++}return this.runAppend(i,arguments),g},t[e.m7w("feb1")?"ChartEngine":""][e.w9k("1fc7")?"prototype":""][e.D56("e7d3")?"createDataSet":""]=function(a,r,i){e.R$3=function(pe){if(e.h8g(),e&&pe)return e.A0h(pe)},e.I0R=function(pe){if(e&&pe)return e.A0h(pe)},e.L5R=function(pe){if(e.h8g(),e)return e.w7W(pe)},e.A8H=function(pe){if(e)return e.w7W(pe)},e.P7I=function(pe){if(e.h8g(),e&&pe)return e.A0h(pe)},e.V9_=function(pe){if(e.p4Q(),e&&pe)return e.A0h(pe)},e.h8g(),e.d5P=function(pe){if(e.p4Q(),e&&pe)return e.w7W(pe)},e.h19=function(pe){if(e.h8g(),e)return e.w7W(pe)},e.G1j=function(pe){if(e.h8g(),e&&pe)return e.w7W(pe)},-(e.G1j("64c2")?865004493:938782832),e.h19("3d2e"),-(e.d5P("cbdb")?1912957647:8412905533),-(e.V9_("6663")?55477428:26048885);{e.f2X=function(pe){if(e.p4Q(),e)return e.w7W(pe)},e.L8_=function(pe){if(e.h8g(),e&&pe)return e.w7W(pe)};var n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q,j,Z,ee,$,ie,te,re,H,U,G,ae,ne,oe,le;if(n="w",n+="e",n+="e",n+="k",s=e.L8_("28a4")?"":"createD",s+="at",s+=e.f2X("e9b9")?"aSet":"",i||(i={}),h=this.chart,o=[a,h,Object.assign({},i)],this.runPrepend(s,o))return;if(u=[],c=[],p=i.appending,h.dataSet||(h.dataSet=[]),y=h.dataSet.length,p&&(u=h.dataSet),h.currentQuote=null,h.dataSet=[],p||(h.tickCache={}),d=h.masterData,d||(d=this.masterData),!d||!d.length){g="crea",g+="teDataS",g+="et",this.runAppend(g,o);return}if(u.length){for(b=u.pop();b.futureTick&&u.length;)b=u.pop(),y--;for(f=i.appendToDate;u.length&&!(b.DT<f);)b=u.pop();for((!f||f>b.DT)&&(f=b.DT);u.length&&!(u[u.length-1].DT<f);)u.pop();e.s3C(165);var he=e.s8L(11,428,18,15,6);for(m=d.length-he;m>=0&&d[m].DT>=f;)m--;e.s3C(22),l=d.slice(e.s8L(m,1))}else l=[].concat(d);if(this.transformDataSetPre&&this.transformDataSetPre(this,l),!this.chart.hideDrawings){for(S="pro",S+="jectio",S+="n",C=0;C<this.drawingObjects.length;C++)w="project",w+="i",w+="on",this.drawingObjects[C].name==w&&t.getFn("Drawing.printProjection")(this,this.drawingObjects[C],l);this.activeDrawing&&this.activeDrawing.name==S&&(k="Drawing.printProje",k+="ction",t.getFn(k)(this,this.activeDrawing,l))}for(C=0,D=-Number.MAX_VALUE,v=Number.MAX_VALUE,A=0,T=a||this.dontRoll,_=this.layout,L=t.ChartEngine.isDailyInterval(_.interval);P="m",P+="ont",P+="h",!(A>=l.length);){if(!(this.dontRoll&&(_.interval=="week"||_.interval==P))&&this.extendedHours&&this.extendedHours.filter&&h.market.market_def&&(E=l[A],L?F=!h.market.isMarketDate(E.DT):(!M||M<=E.DT)&&(O="ge",O+="tNextO",O+="pen",I=h.market.getSession(E.DT),F=I!==""&&(!_.marketSessions||!_.marketSessions[I]),M=h.market[F?O:"getNextClose"](E.DT)),F)){A++;continue}x={};for(var ue in l[A])x[ue]=l[A][ue];l[A]=x,x.ratio=1,_.adj&&x.Adj_Close&&(x.ratio=x.Adj_Close/x.Close),x.ratio!=("1"|0)&&(x.Open&&(x.Open=Number((x.Open*x.ratio).toFixed(8))),x.Close&&(x.Close=Number((x.Close*x.ratio).toFixed(8))),x.High&&(x.High=Number((x.High*x.ratio).toFixed(8))),x.Low&&(x.Low=Number((x.Low*x.ratio).toFixed(8)))),c[C++]=l[A++]}if(_.periodicity>1||!T&&(_.interval==n||_.interval=="month")){B=-966743588,e.s1t(56),N=-e.g5k(64,"5140507"),R=2;for(var ce=1;e.D1T(ce.toString(),ce.toString().length,275)!==B;ce++)c=this.consolidatedQuote(c),R+=2;e.D1T(R.toString(),R.toString().length,84561)!==N&&(c=this.consolidatedQuote(c)),c=this.consolidatedQuote(c)}for(q={},C=0;C<c.length;C++){x=c[C],C>0?(x.iqPrevClose=c[C-1].Close,!x.iqPrevClose&&x.iqPrevClose!==0&&(x.iqPrevClose=c[C-"1"*1].iqPrevClose)):u.length?(x.iqPrevClose=u[u.length-1].Close,!x.iqPrevClose&&x.iqPrevClose!==0&&(x.iqPrevClose=u[u.length-1].iqPrevClose)):x.iqPrevClose=x.Close,"High"in x&&x.High>D&&(D=x.High),"Low"in x&&x.Low<v&&(v=x.Low);for(var de in h.series)if(Y=h.series[de].parameters.symbol,z=x[Y],z&&typeof z=="object"){if(C>0)z.iqPrevClose=q[de];else if(u.length){for(var Ce=u.length-1;Ce>=0;Ce--)if(V=u[Ce][Y],V&&(V.Close||V.Close===0)){z.iqPrevClose=V.Close;break}}else z.iqPrevClose=z.Close;(z.Close||z.Close===0)&&(q[de]=z.Close),z.ratio=1,_.adj&&z.Adj_Close&&(z.ratio=z.Adj_Close/z.Close),z.ratio!=1&&(z.Open&&(z.Open=Number((z.Open*z.ratio).toFixed(8))),z.Close&&(z.Close=Number((z.Close*z.ratio).toFixed(8))),z.High&&(z.High=Number((z.High*z.ratio).toFixed(8))),z.Low&&(z.Low=Number((z.Low*z.ratio).toFixed(8))))}}if(K=this.preferences.whitespace/this.layout.candleWidth,Q=h.scroll>=h.maxTicks,Q&&(h.spanLock=!1),h.defaultChartStyleConfig={type:_.chartType},j=_.aggregationType,j&&j!="ohlc"&&(t.ChartEngine.calculateAggregation?(h.defaultChartStyleConfig.type=j,(!p||!h.state.aggregation)&&(h.state.aggregation={}),c=t.ChartEngine.calculateAggregation(this,j,c,u)):console.log("Aggregation code is not loaded/enabled!")),h.spanLock=h.scroll>0&&h.scroll<h.maxTicks-K,Z=Q||h.lockScroll||h.spanLock||this.isHistoricalModeSet,ee=c.length-(y-u.length),p||(ee=0),ee&&(h.spanLock&&ee+h.scroll>=h.maxTicks-K?h.spanLock=!1:(Z||ee<0)&&(h.scroll+=ee,this.grabStartScrollX+=ee,this.swipe&&(this.swipe.scroll+=ee))),this.transformDataSetPost&&this.transformDataSetPost(this,c,v,D),$=this.maxDataSetSize,$&&u.length+c.length>$&&(c.length<$?u=u.slice(c.length-$):u=[],c=c.slice(-$)),h.scrubbed||(h.scrubbed=[]),u.length)for(ie=u[u.length-1].DT;h.scrubbed.length&&h.scrubbed[h.scrubbed.length-1].DT>ie;)h.scrubbed.pop();else h.scrubbed=[];for(h.state.studies||(h.state.studies={}),h.state.studies.startFrom=h.scrubbed.length,te=[],C=0;C<c.length;C++)re=c[C],(re.Close||re.Close===0||re.DT>Date.now())&&te.push(re);h.scrubbed=h.scrubbed.concat(te),(!p||!h.state.calculations)&&(h.state.calculations={}),this.calculateATR(h,20,te),this.calculateMedianPrice(h,te),this.calculateTypicalPrice(h,te),this.calculateWeightedClose(h,te),this.calculateOHLC4(h,te);for(H in this.plugins)U=this.plugins[H],U.createDataSet&&U.createDataSet(this,h,c,u.length);for(h.dataSet=u.concat(c),h.pixelCacheExpired=!0,H=u.length;H<h.dataSet.length;H++)h.dataSet[H].tick=H;for(h.whiteSpaceFutureTicks=0,G=this.layout.studies,ae=h.scrubbed.length,G&&Object.keys(G).length&&(ne=h.state.studies.sorted||t.Studies.sortForProcessing(this),oe=this,h.state.studies.sorted=ne,ne.forEach(function(pe){pe.startFrom=h.state.studies.startFrom,pe.error=null,pe.study&&pe.study.calculateFN&&pe.study.calculateFN(oe,pe),pe.flagSignals&&pe.flagSignals()})),H=ae;H<h.scrubbed.length;H++)le=h.scrubbed[H],le.tick=h.dataSet.length,h.dataSet.push(le);this.drawingObjects.length&&this.adjustDrawings(),this.establishMarkerTicks&&this.establishMarkerTicks(),this.runAppend("createDataSet",o)}}};ws=W=>{var e=J,t,a;W.SplinePlotter||(W.SplinePlotter={}),t=W.CIQ,e.h8g(),a=W.SplinePlotter,t.ChartEngine.prototype.drawBarTypeChartInner=function(r){var i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q,j,Z,ee,$,ie,te,re,H,U,G,ae,ne,oe,le;i="h",i+="lc",n=r.type,s=r.panel,h=r.field,o=r.fillColor,l=r.borderColor,u=r.condition,c=r.style,p=r.yAxis,e.s3C(103),y=e.s8L("histogram",n),d=y||n=="candle",e.s1t(103),g=e.g5k("shadow",n),e.s1t(103),b=e.g5k(i,n),f=n=="bar"||b,m=s.chart,C=m.dataSegment,S=this.chart.context,w=new Array(C.length),k=this.layout,D=l&&!t.isTransparent(l),v=0,D&&!r.highlight&&(v=.5),x=S.globalAlpha,!r.highlight&&this.highlightedDraggable&&(S.globalAlpha*=.3),S.beginPath(),p||(p=s.yAxis),A=p.top,T=p.bottom,_=k.candleWidth,e.s1t(9);var he=e.s8L(15,15,1);L=s.left-"0.5"*he*_+this.micropixels-1,e.s1t(69);var ue=e.g5k(38,2,18,4,0);M=m.tmpWidth/ue,e.s3C(166);var ce=e.g5k(6,16,2,10,1);F=S.lineWidth/ce,d&&(t.isTransparent(o)&&(o=this.containerColor),S.fillStyle=o),g&&(e.s3C(20),S.lineWidth=e.s8L("1",0)),f&&(P=this.canvasStyle(c),P.width&&parseInt(P.width,10)<=25?S.lineWidth=Math.max(1,t.stripPX(P.width)):S.lineWidth=1),E=m.state.chartType.pass;for(var de=0;de<=C.length;de++)if(O="Clo",O+="s",O+="e",I=M,e.s1t(30),L+=e.g5k(_,2),_=k.candleWidth,e.s1t(30),L+=e.s8L(_,2),B=C[de],!!B&&!B.projection){if(B.candleWidth){e.s3C(167);var Ce=e.g5k(13,896,17,15,787);L+=(B.candleWidth-_)/("2"<<Ce),_=B.candleWidth,(r.volume||_<m.tmpWidth)&&(e.s3C(30),I=e.g5k(_,2))}m.transformFunc&&p==m.panel.yAxis&&B.transform&&(B=B.transform),B&&h&&h!=O&&(B=B[h]),!(!B&&B!==0)&&(N=B.Close,R=B.Open===void 0?N:B.Open,y&&m.defaultPlotField&&(N=B[m.defaultPlotField]),!(!N&&N!==0)&&(d&&!y&&(R==N||R===null)||u&&(q=t.ChartEngine,u&q.CLOSEDOWN?E.even|=N==B.iqPrevClose:u&q.CANDLEDOWN&&(e.s3C(103),E.even|=e.s8L(R,N)),u&q.CANDLEUP&&R>=N||u&q.CANDLEDOWN&&R<=N||u&q.CANDLEEVEN&&R!=N||u&q.CLOSEUP&&N<=B.iqPrevClose||u&q.CLOSEDOWN&&N>=B.iqPrevClose||u&q.CLOSEEVEN&&N!=B.iqPrevClose)||(Y=R,z=N,(g||f)&&(Y=B.High===void 0?Math.max(N,R):B.High,z=B.Low===void 0?Math.min(N,R):B.Low),V=p.semiLog?p.height*(1-(Math.log(Math.max(Y,0))/Math.LN10-p.logLow)/p.logShadow):(p.high-Y)*p.multiplier,K=p.semiLog?p.height*(1-(Math.log(Math.max(z,0))/Math.LN10-p.logLow)/p.logShadow):(p.high-z)*p.multiplier,p.flipped?(e.s1t(11),V=e.s8L(T,V),e.s3C(11),K=e.g5k(T,K)):(V+=A,K+=A),!(d&&!y&&Math.abs(V-K)<"1"*1)&&(Z=y?p.flipped?p.top:K:Math.min(V,K),ee=y?p.flipped?V:p.bottom:Math.max(V,K),ee-Z<1&&(ee=Z),Z=Math.floor(Z),ee=Math.floor(ee),e.s1t(11),$=e.g5k(ee,Z),ie=K,(f||g)&&(Q=p.semiLog?p.height*(1-(Math.log(Math.max(R,0))/Math.LN10-p.logLow)/p.logShadow):(p.high-R)*p.multiplier,j=p.semiLog?p.height*(1-(Math.log(Math.max(N,0))/Math.LN10-p.logLow)/p.logShadow):(p.high-N)*p.multiplier,p.flipped?(e.s1t(11),Q=e.s8L(T,Q),e.s3C(11),j=e.s8L(T,j)):(Q+=A,j+=A),Math.abs(Q-j)<1&&(Q=j),ie=j),w[de]=ie,Z<A&&(e.s3C(94),$-=e.g5k(Z,A,1),e.s3C(11),Z=e.g5k(A,1)),Z+$>T&&(e.s3C(168),$=e.g5k(Z,"1",T,0)),e.s3C(22),ee=e.g5k(Z,$),!(Z>=T)&&(ee<=A||(te=Math.floor(L)+(!r.highlight&&.5),e.s3C(11),re=Math.floor(e.s8L(te,I)),e.s1t(22),H=Math.round(e.g5k(te,I)),U=re==H?I:0,G=Z===ee||g&&Q===j,d?(y||!G)&&(re+=v,H-=v,Z+=v,S.rect(re,Z,Math.max(0,H-re),$)):g?(G&&j<=T&&j>=A&&(ae=Math.floor(j)+(!r.highlight&&.5),e.s1t(11),S.moveTo(e.g5k(re,U),ae),e.s3C(22),S.lineTo(e.s8L(H,U),ae)),ee>Z&&(S.moveTo(te,Z),S.lineTo(te,ee))):f&&(Z<T&&ee>A&&B.High!=B.Low&&(e.s1t(11),S.moveTo(te,e.s8L(Z,F)),e.s3C(22),S.lineTo(te,e.s8L(ee,F))),Q>A&&Q<T&&!b&&(ne=Math.floor(Q)+(!r.highlight&&.5),S.moveTo(te,ne),e.s1t(94),S.lineTo(e.s8L(I,te,U),ne)),j>A&&j<T&&(oe=Math.floor(j)+(!r.highlight&&.5),S.moveTo(te,oe),e.s1t(55),S.lineTo(e.s8L(te,I,U),oe)))))))))}return le=S.globalAlpha,d?(le<1&&(S.save(),S.globalAlpha=1,S.fillStyle=this.containerColor,S.fill(),S.restore()),S.fill(),D&&(S.lineWidth=r.highlight?2:"1"<<0,S.strokeStyle=l,S.stroke())):(g||f)&&(this.canvasColor(c),S.globalAlpha=le,l&&(S.strokeStyle=l),r.highlight&&(S.lineWidth*=2),S.stroke(),S.closePath(),S.lineWidth=1),S.globalAlpha=x,{cache:w}},t.ChartEngine.prototype.plotDataSegmentAsLine=function(r,i,n,s){var h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q,j,Z,ee,$,ie,te,re,H,U,G,ae,ne,oe,le,he,ue,ce,de,Ce,pe,xe,Te,be,_e,Be,Pe,Ie,Le,Fe,Ue,at,He,Me,ge,Se,De,Re,Qe,Lt,Mt,xt,st,ut,it,Ft,pt,$e,St,gt,ht,Je,et,mt,ct,lt,rt,ot,Oe,We;h=!1,o=!1,l=!1,u=!0,c=null,p=null,y=null,d=0,g=!1,b=!1,f=!1,m=!1,C=null,S=null,w=null,k=null,D={},v=[],e.h8g(),x=[],A=[],T=[];function Et(qt){var ni,Vt,ft,jt,ti,si,$t,ei,Zt;ni=P.getLineDash(),Vt=f?2:"1"*1,ft=qt,typeof ft=="object"&&(Vt*=ft.width,p=t.borderPatternToArray(Vt,ft.pattern),ft=ft.color),e.p4Q(),e.s1t(11),D[ft]=e.g5k("1",0),!g&&(jt=v.slice(-2),ti=p instanceof Array&&p.join(),si=ni instanceof Array&&ni.join(),e.s1t(169),$t=e.g5k(si,ti),ei=!t.colorsEqual(O,ft),Zt=P.lineWidth!=Vt,(ei||$t||Zt)&&(d?x.push({coord:jt,color:ft,pattern:p||[],width:Vt}):(P.stroke(),P.lineWidth=Vt,$t&&P.setLineDash(ti?p:[]),P.beginPath(),P.moveTo(jt[0],jt[1]))),O=ft,d||(!ft||ft=="auto"?P.strokeStyle=_.defaultColor:P.strokeStyle=ft))}function Bt(qt,ni,Vt){var ft,jt,ti,si;ft="Co",ft+="llat",ft+="edHi",ft+="gh",P.setLineDash([]),jt=$t("CollatedOpen"),ti=$t(ft),si=$t("CollatedLow");function $t(ei){e.h8g();var Zt;return Zt=y.semiLog?y.height*(1-(Math.log(Math.max(Vt[ei],"0"*1))/Math.LN10-y.logLow)/y.logShadow):(y.high-Vt[ei])*y.multiplier,y.flipped?Zt=y.bottom-Zt:Zt+=y.top,Zt}P.lineTo(qt,jt),P.moveTo(qt,ti),P.lineTo(qt,si),P.moveTo(qt,ni),v.push(qt,jt)}if(_=this,L=this.layout,M=i.chart,F=M.dataSegment,P=M.context,E=new Array(F.length),O=P.strokeStyle,I=P.globalAlpha,M.dataSet.length){this.startClip(i.name),n&&(h=n.skipProjections,n.skipTransform,o=n.noSlopes,d=n.tension,l=n.step,p=n.pattern,u=n.extendOffChart,y=n.yAxis,c=n.gapDisplayStyle,g=n.noDraw,b=n.reverse,f=n.highlight,n.width&&(P.lineWidth=n.width),m=n.shiftRight,C=n.subField,S=n.threshold,w=n.lineTravelSpacing,k=n.extendToEndOfDataSet),!c&&c!==!1&&n&&(c=n.gaps),c||(c={color:"transparent",fillMountain:!0}),p instanceof Array&&P.setLineDash(p),f&&(P.lineWidth*=2),!f&&this.highlightedDraggable&&(P.globalAlpha*=.3),u!==!1&&(u=!0),B=C||M.defaultPlotField||"Close",y||(y=i.yAxis),N=M.transformFunc&&y==M.panel.yAxis,e.s1t(17);var yt=e.g5k(30,412,16,9);R=P.lineWidth*yt,q=b?M.top-R:M.bottom+R,(S||S===0)&&(q=this.pixelFromPrice(S,i,y)),Y=!d&&g&&c&&c.fillMountain,z=r,V=r;for(var Nt="0"*1;Nt<F.length;Nt++)if(K=F[Nt],K&&typeof K=="object"&&(Q=K[r],Q||Q===0)){j="objec",j+="t",typeof Q==j&&(V=t.createObjectChainNames(r,[B])[0]);break}if(Z={left:null,right:null},ee=M.dataSet.length-M.scroll-1,u){Z.left=this.getPreviousBar(M,V,0),$=1617579502,ie=-363143721,te=2;for(var It="1"^0;e.D1T(It.toString(),It.toString().length,82394)!==$;It++)Z.right=this.getNextBar(M,V,F.length-1),te+=2;e.u6e(te.toString(),te.toString().length,75582)!==ie&&(Z.right=this.getNextBar(M,V,F.length/3))}re=!0,H=!1,P.beginPath(),ae=Z.left,ne=null,ae&&(ne=ae.transform),ae&&(G=N?ne?ne[r]:null:ae[r],(G||G===0)&&((G[B]||G[B]===0)&&(G=G[B]),oe=this.pixelFromTick(ae.tick,M),le=this.pixelFromTransformedValue(G,i,y),P.moveTo(oe,le),v.push(oe,le),F[0].tick-ae.tick>1&&(A.push({start:v.slice(-2),threshold:q,tick:ae}),H=!0),re=!1)),e.s1t(8);var Kt=e.s8L(1,4,5);he=i.left+this.micropixels-Kt,m&&(he+=m),l&&n&&n.alignStepToSide&&(he-=this.layout.candleWidth/2),de=null,Ce=0,pe=0,xe=!1,Te={reset:!0};for(var zt=0;zt<F.length;zt++){if(U=L.candleWidth,be=F[zt],_e=F[zt],be||(be={}),(!be.cache||M.pixelCacheExpired)&&(be.cache={}),Be=be.lineTravel,h&&be.projection){Z.right=null;break}if(be.candleWidth&&(U=be.candleWidth),w&&(U=0),N&&be.transform&&(be=be.transform),Pe=be[r],Pe&&typeof Pe=="object"&&(Pe=Pe[B],e.s1t(55),z=e.s8L(r,".",B)),M.lineApproximation&&L.candleWidth<1&&!w)if(Te.reset&&(Te={CollatedHigh:-Number.MAX_VALUE,CollatedLow:Number.MAX_VALUE,CollatedOpen:null,CollatedClose:null},xe=!1),Ie=Pe,(Ie||Ie===0)&&(Te.CollatedHigh=Math.max(Te.CollatedHigh,Ie),Te.CollatedLow=Math.min(Te.CollatedLow,Ie),Te.CollatedClose=Ie,Te.CollatedOpen===null?Te.CollatedOpen=Ie:xe=!0),Ce+=U,Ce-pe>=1||zt==F.length-1)pe=Math.floor(Ce),Te.reset=!0,Te[r]=Te.CollatedClose,be=Te,be.cache={};else{he+=U;continue}if(o||(e.s3C(170),he+=e.g5k(U,0,"2")),!Pe&&Pe!==0){Le=v.slice(-2),Y&&!H&&v.length&&v.push(Le[0],q),H||A.push({start:Le,threshold:q,tick:ce}),H=!0,he+=o?U:U/2,(l||o)&&v.length&&(E[zt]=v.slice(-1)[0]),Be&&(he+=Be);continue}if(ue=be,Fe=be.cache,e.s3C(22),Ue=e.g5k(ee,zt),(Ue<i.cacheLeft||Ue>i.cacheRight||!Fe[r])&&(at=y.semiLog?y.height*(1-(Math.log(Math.max(Pe,0))/Math.LN10-y.logLow)/y.logShadow):(y.high-Pe)*y.multiplier,y.flipped?Fe[z]=y.bottom-at:Fe[z]=y.top+at),He=E[zt]=Fe[z],M.lastTickOffset&&(de===null&&(de=this.currentQuote(r)||{}),_e.tick==de.tick&&(he+=M.lastTickOffset)),!re&&s){if(_e[r]&&_e[r][B]&&(_e=_e[r]),Me=s(this,_e,H),!Me){he+=o?U:U/2;continue}Et(Me)}re?(P.moveTo(he,He),d&&x.push({coord:[he,He],color:P.strokeStyle,pattern:p||[],width:P.lineWidth})):((l||o)&&(ge=v.slice(-e.s8L(1,"1",e.s3C(91)))[0],xe?Bt(he,ge,be):P.lineTo(he,ge),v.push(he,ge)),xe&&!o?Bt(he,He,be):P[o?"moveTo":"lineTo"](he,He)),H&&(A.push({end:[he,He],threshold:q}),ce=_e,Y&&!l&&!o&&v.push(he,q)),v.push(he,He),re=!1,H=!1,he+=o?U:U/2,Be&&(he+=Be)}if(M.pixelCacheExpired=!1,Se=Z.right,De=null,Se&&(De=Se.transform),!re&&Se){if(G=N?De?De[r]:null:Se[r],G&&(G[B]||G[B]===0)&&(G=G[B]),Re=this.pixelFromTick(Se.tick,M),Qe=this.pixelFromTransformedValue(G,i,y),Se.tick-F[F.length-1].tick>1&&(H||(Lt=v.slice(-2),Y&&v.length&&v.push(Lt[0],q),A.push({start:Lt,threshold:q,tick:F[F.length-1]})),H=!0),!re&&s&&(Mt=s(this,Se,H),Mt&&Et(Mt)),xt=v.slice(-2),!p||!p.length){(l||o)&&(P.lineTo(Re,xt[1]),v.push(Re,xt[1])),st=86210458,ut=502835492,it=2;for(var Wt=1;e.u6e(Wt.toString(),Wt.toString().length,69441)!==st;Wt++)P[o?"moveTo":"lineTo"](Re,Qe),e.s3C(46),it+=e.s8L("2",1);e.u6e(it.toString(),it.toString().length,6984)!==ut&&P.lineTo(Re,Qe)}H&&(A.push({end:[Re,Qe],threshold:q}),Y&&!l&&!o&&v.push(Re,q)),v.push(Re,Qe)}for(var fi in D)T.push(fi);if(n&&n.extendToEndOfLastBar?(Ft=v.slice(-2),P.lineTo(Ft[0]+U,Ft[1])):(l||o||this.extendLastTick||k)&&(pt=v.slice(-2),v.length&&($e=pt[0],St=pt[1],k||l&&k!==!1?($e=this.pixelFromTick(M.dataSet.length-1,M),(o||this.extendLastTick)&&(e.s3C(43),$e+=e.s8L(U,"2"))):o?$e+=U:this.extendLastTick&&(e.s1t(43),$e+=e.s8L(U,"2")),$e>pt[0]&&(gt=null,s&&(gt=s(this,{},!0)),gt&&Et(gt),P.lineTo($e,St),(!H||!Y)&&v.push($e,St)))),g||(d&&v.length&&(P.beginPath(),n&&n.pattern&&P.setLineDash(n.pattern),a.plotSpline(v,d,P,x)),P.stroke()),!g&&n&&n.label&&ue&&(Je=ue[r],Je&&typeof Je=="object"&&(Je=Je[B]),y.priceFormatter?ht=y.priceFormatter(this,i,Je,n.labelDecimalPlaces):ht=this.formatYAxisPrice(Je,i,n.labelDecimalPlaces),et=this.yaxisLabelStyle,y.yaxisLabelStyle&&(et=y.yaxisLabelStyle),mt=et=="noop"?P.strokeStyle:null,ct=et=="noop"?"#FFFFFF":P.strokeStyle,this.yAxisLabels.push({src:"plot",args:[i,ht,ue.cache[z],ct,mt,P,y]})),lt=typeof c=="object"?c.color:c,t.isTransparent(lt)){for(var Ht=0;Ht<A.length;Ht+="2"-0)if(rt=A[Ht].start,Ht&&(ot=A[Ht-1].end),ot&&rt[0]==ot[0]&&rt[1]==ot[1]){if(P.beginPath(),Oe=P.lineWidth,s){if(We=s(this,A[Ht].tick||{},!1),typeof We=="object"){e.s3C(171);var Gt=e.s8L(5,20,1,22,5);e.s3C(13);var bt=e.g5k(2,1,16,15);Oe=We.width*(f?Gt:bt),We=We.color}P.strokeStyle=P.fillStyle=We}P.lineWidth=Oe,P.arc(rt[0],rt[1],"1"^0,0,2*Math.PI),P.stroke(),P.fill()}}this.endClip()}return P.globalAlpha=I,{colors:T,points:v,cache:E,gapAreas:A}},t.ChartEngine.prototype.drawMountainChart=function(r,i,n){var s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y;return s="C",s+="l",s+="os",s+="e",h=this.chart.context,o=i,l=!1,u=!1,c=null,p=null,y=null,d=null,g=0,b=null,f=!1,m=null,C=null,S=!1,w=null,k=null,D=1,v=!1,x=!1,A=!1,T=r.chart,T.dataSegment,_=T.lineStyle||{},(!i||typeof i!="object")&&(i={style:i}),o=i.style||"stx_mountain_chart",c=i.field||T.defaultPlotField||"Close",p=i.subField||T.defaultPlotField||s,b=i.gapDisplayStyle,!b&&b!==!1&&(b=i.gaps),!b&&b!==!1&&(b=T.gaplines),b||(b="transparent"),y=i.yAxis||r.yAxis,l=i.reverse||!1,d=i.tension,m=i.fillStyle,g=i.width||_.width,f=i.step,C=i.pattern||_.pattern,S=i.highlight,k=i.color||_.color,w=i.baseColor||_.baseColor,u=i.colored,D=i.opacity,v=i.extendToEndOfDataSet,x=i.isComparison,A=i.returnObject,L=this.canvasStyle(o),M=y.top,(isNaN(M)||isNaN(M/M))&&(M=0),F=k||(o&&L.backgroundColor?L.backgroundColor:this.defaultColor),P=w||(o&&L.color?L.color:this.containerColor),m?h.fillStyle=m:w||L.color?(E=h.createLinearGradient(0,M,0,y.bottom),E.addColorStop(y.flipped?1:0,F),E.addColorStop(y.flipped?0:1,P),h.fillStyle=E):h.fillStyle=F,this.startClip(r.name),O=h.lineWidth,i.symbol||(p=null),i={skipProjections:!0,reverse:l,yAxis:y,gapDisplayStyle:b,step:f,highlight:S,extendToEndOfDataSet:v,isComparison:x},T.tension&&(i.tension=T.tension),(d||d===0)&&(i.tension=d),I=parseInt(L.paddingTop,10),B=k||L.borderTopColor,N=null,(u||B&&!t.isTransparent(B))&&I&&(R=this.scratchContext,R||(q=h.canvas.cloneNode(!0),R=this.scratchContext=q.getContext("2d")),R.canvas.height=h.canvas.height,R.canvas.width=h.canvas.width,R.drawImage(h.canvas,0,0),t.clearCanvas(h.canvas,this)),t.extend(i,{panelName:r.name,direction:i.reverse?-1:1,band:c,subField:p,opacity:D}),!i.highlight&&this.highlightedDraggable&&(e.s1t(46),i.opacity*=e.s8L("0.3",1)),t.preparePeakValleyFill(this,i),(u||B&&!t.isTransparent(B))&&I&&(h.save(),e.s3C(172),h.lineWidth+=e.g5k("2",I),h.globalCompositeOperation="destination-out",h.globalAlpha=1,this.plotDataSegmentAsLine(c,r,i),h.globalCompositeOperation="destination-over",h.scale(1/this.adjustedDisplayPixelRatio,1/this.adjustedDisplayPixelRatio),h.drawImage(this.scratchContext.canvas,0,0),h.restore()),h.strokeStyle=B,g?h.lineWidth=g:L.width&&parseInt(L.width,10)<=25?h.lineWidth=Math.max(1,t.stripPX(L.width)):h.lineWidth=1,C||(C=L.borderTopStyle),i.pattern=t.borderPatternToArray(h.lineWidth,C),Y=n,b&&(Y=this.getGapColorFunction(c,p,{color:B,pattern:i.pattern,width:h.lineWidth},b,n)),N=this.plotDataSegmentAsLine(c,r,i,Y),h.lineWidth=O,this.endClip(),N.colors.length||N.colors.push(B),A?N:N.colors},t.ChartEngine.prototype.drawBaselineChart=function(r,i){var n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,{chart:I}=r,{field:B,id:N,yAxis:R}=i,{gaplines:q,defaultPlotField:Y,lineStyle:z}=I,{display:V}=this.baselineHelper.get(this.getRendererFromSeries(N));if(n=this.getYAxisBaseline(R).actualLevel,s=[],B||(B=Y),z||(z={}),h=i.gapDisplayStyle,!h&&h!==!1&&(h=i.gaps),n!==null&&!isNaN(n)){if(o="stx_baseli",o+="ne_up",l="mo",l+="unt",l+="ain",u=i.type==l,u&&(s=this.drawMountainChart(r,{style:i.style,field:i.field,yAxis:R,gapDisplayStyle:h,colored:!0,tension:"0"<<64})),c=this.pixelFromPrice(n,r,R),isNaN(c))return;this.startClip(r.name),p=i.pattern||z.pattern,y=i.fill_color_up||this.getCanvasColor(o),d=i.fill_color_down||this.getCanvasColor("stx_baseline_down"),g=i.border_color_up||this.getCanvasColor("stx_baseline_up"),b=i.border_color_down||this.getCanvasColor("stx_baseline_down"),f=i.width||z.width||this.canvasStyle("stx_baseline_up").width,m=i.width||z.width||this.canvasStyle("stx_baseline_down").width,C=i.widthBaseline||z.width||t.stripPX(this.canvasStyle("stx_baseline").width),S=i.baselineOpacity||this.canvasStyle("stx_baseline").opacity,w={fill:y,edge:g,width:f},k={fill:d,edge:b,width:m},D=i.yAxis.flipped,v={over:D?k:w,under:D?w:k},x=!1,!h&&h!==!1&&(h=q),A=1,!i.highlight&&this.highlightedDraggable&&(A*=.3);for(var K in v)T=parseInt(Math.max(1,t.stripPX(v[K].width)),10),i.highlight&&(T*=2),p=t.borderPatternToArray(T,p),_={panelName:r.name,band:B,threshold:n,color:u?"transparent":v[K].fill,direction:K=="over"?1:-1,edgeHighlight:v[K].edge,edgeParameters:{pattern:p,lineWidth:T+.1,opacity:A},gapDisplayStyle:h,yAxis:i.yAxis},R&&(_.threshold=this.priceFromPixel(this.pixelFromPrice(_.threshold,r,R),r,R)),s.push(v[K].edge),L=_.color,!u&&L&&L!="transparent"&&(M=r.top,F=r.bottom,P=I.context.createLinearGradient(0,K=="over"?M:F,0,c),P.addColorStop(0,t.hexToRgba(t.colorToHex(L),60)),P.addColorStop(1,t.hexToRgba(t.colorToHex(L),10)),_.color=P,_.opacity=A),t.preparePeakValleyFill(this,I.dataSegment,_),q&&(q.fillMountain||this.drawLineChart(r,null,null,{color:"transparent",gapDisplayStyle:{color:this.containerColor,pattern:"solid",width:_.edgeParameters.lineWidth}}),q.color||(x=!0,q.color=this.defaultColor)),this.drawLineChart(r,null,null,{color:"transparent",width:_.edgeParameters.lineWidth}),x&&(q.color=null);V&&(E="do",E+="tt",E+="e",E+="d",O="li",O+="ne",this.plotLine(0,1,c,c,this.containerColor,O,I.context,r,{lineWidth:"1.1"}),e.s1t(19),this.plotLine(0,e.g5k("1",32),c,c,this.getCanvasColor("stx_baseline"),"line",I.context,r,{pattern:E,lineWidth:C||"2.1",opacity:S||.5*A})),this.endClip()}return{colors:s}},t.ChartEngine.prototype.plotLine=function(r){var i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z;if(i="obje",i+="ct",n="nu",n+="mb",n+="er",typeof arguments[0]==n){r={x0:arguments[0],x1:arguments[1],y0:arguments[2],y1:arguments["3"^0],color:arguments[4],type:arguments[5],context:arguments[6],confineToPanel:arguments[7]};for(var V in arguments[8])r[V]=arguments[8][V]}if(r||(r={}),r.pattern!="none"&&(s=r.x0,h=r.x1,o=r.y0,l=r.y1,u=r.color,c=r.type,p=r.context,y=r.confineToPanel,d=r.deferStroke,y===!0&&(y=this.chart.panel),(p===null||typeof p>"u")&&(p=this.chart.context),!(isNaN(s)||isNaN(h)||isNaN(o)||isNaN(l)))){if(e.s1t(56),g=e.g5k(32,"0"),b=this.chart.canvasHeight,f=0,m=this.right,y&&(b=y.yAxis.bottom,g=y.yAxis.top,f=y.left,m=y.right),c=="ray"){e.s1t(19),C=e.g5k("10000000",0),h<s&&(C=-1e7),w={x0:s,x1:h,y0:o,y1:l},k=725842630,D=-1698645864,v=2;for(var K=1;e.u6e(K.toString(),K.toString().length,86027)!==k;K++)S=t.yIntersection(w,C),v+=2;e.D1T(v.toString(),v.toString().length,71107)!==D&&(S=t.yIntersection(w,C)),h=C,l=S}(c=="line"||c=="horizontal"||c=="vertical")&&(C=1e7,x=-1e7,w={x0:s,x1:h,y0:o,y1:l},S=t.yIntersection(w,C),A=t.yIntersection(w,x),s=x,h=C,o=A,l=S),T=0,_=1,e.s3C(11),L=e.s8L(h,s),e.s1t(11),M=e.g5k(l,o);for(var Q=0;Q<("4"|0);Q++){if(Q===0&&(F=-L,e.s1t(11),P=-e.g5k(f,s)),Q==1&&(F=L,e.s3C(11),P=e.s8L(m,s)),Q==2&&(F=-M,e.s1t(11),P=-e.g5k(g,o)),Q==3&&(F=M,e.s3C(11),P=e.s8L(b,o)),e.s3C(30),E=e.g5k(P,F),(l||l===0)&&F===0&&P<("0"|0))return!1;if(F<0){if(E>_)return!1;E>T&&(T=E)}else if(F>0){if(E<T)return!1;E<_&&(_=E)}}if(e.s1t(23),O=e.g5k(T,s,L),e.s3C(23),I=e.g5k(T,o,M),e.s1t(23),B=e.g5k(_,s,L),e.s3C(23),N=e.s8L(_,o,M),!l&&l!==0&&!o&&o!==0){if(I=g,N=b,O=w.x0,B=w.x0,w.x0>m||w.x0<f)return!1}else if(!l&&l!==0&&(w.y0<w.y1?N=b:N=g,O=w.x0,B=w.x0,w.x0>m||w.x0<f))return!1;if(d||(p.save(),p.beginPath()),e.s3C(11),p.lineWidth=e.s8L("1.1",0),u&&typeof u==i){p.strokeStyle=u.color,R=-611609008,q=657151610,Y=2;for(var j="1">>32;e.u6e(j.toString(),j.toString().length,85825)!==R;j++)u.opacity?p.globalAlpha=u.opacity:p.globalAlpha=1,Y+=2;e.u6e(Y.toString(),Y.toString().length,21823)!==q&&(u.opacity?p.globalAlpha=u.opacity:p.globalAlpha=5),p.lineWidth=t.stripPX(u.width)}else!u||u=="auto"||t.isTransparent(u)?p.strokeStyle=this.defaultColor:p.strokeStyle=u;r.opacity&&(p.globalAlpha=r.opacity),r.lineWidth&&(p.lineWidth=r.lineWidth),r.globalCompositeOperation&&(p.globalCompositeOperation=r.globalCompositeOperation),z=t.borderPatternToArray(p.lineWidth,r.pattern),p.setLineDash(r.pattern?z:[]),p.moveTo(O,I),p.lineTo(B,N),d||(p.stroke(),p.restore())}},t.ChartEngine.prototype.rendererAction=function(r,i){var n,s,h,o,l,u,c,p;n=!1;function y(){var g,b,f;e.p4Q(),g=this,!n&&i==="underlay"&&(b="CIQ.w",b+="atermark",f=Symbol.for(b),g[f]&&(g[f].draw(r),n=!0))}if(!this.runPrepend("rendererAction",arguments)){s="rendererA",s+="ction";for(var d in r.seriesRenderers)h="o",h+="ve",h+="rla",h+="y",o="und",o+="erlay",l=r.seriesRenderers[d],u=l.params,c=u.panel,p=this.panels[c],!(u.overChart&&i==o)&&(u.name=="_main_series"&&i=="underlay"||u.name!="_main_series"&&i=="main"||!u.overChart&&i==h||p&&p.chart===r&&(p.hidden||(i=="yAxis"?l.adjustYAxis():(y.apply(this),l.draw(),l.cb&&l.cb(l.colors)))));this.runAppend(s,arguments)}e.h8g(),y.apply(this)},t.ChartEngine.prototype.drawSeries=function(r,i,n,s){var h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k;if(h="drawS",e.p4Q(),h+="eri",h+="es",!this.runPrepend(h,arguments)){r.dataSegment,o=null,i||(i=r.series);for(var D in i)if(l="a",l+="u",l+="t",l+="o",o=i[D],u=o.parameters,c=u.panel?this.panels[u.panel]:r.panel,p=u.color,u.width,y=u.field,!!c){if(d=u.yAxis=n||c.yAxis,p||(p=d.textStyle||this.defaultColor),p==l&&(p=this.defaultColor),y||(y=r.defaultPlotField),g=u.subField||r.defaultPlotField||"Close",!u._rawExtendToEndOfDataSet&&u._rawExtendToEndOfDataSet!==!1&&(u._rawExtendToEndOfDataSet=u.extendToEndOfDataSet),r.animatingHorizontalScroll?u.extendToEndOfDataSet=!1:u.extendToEndOfDataSet=u._rawExtendToEndOfDataSet,b=u.colorFunction,(o.highlight||o.parameters.highlight)&&(u.highlight=!0),f={colors:[]},s){if(s.params.highlight&&(u.highlight=!0),u.hidden)continue;f=s.drawIndividualSeries(r,u)||f}else u.type=="mountain"?f=this.drawMountainChart(c,t.extend({returnObject:!0},u),b):f=this.drawLineChart(c,u.style,b,t.extend({returnObject:!0},u));o.yValueCache=f.cache,e.s1t(173);var v=e.s8L(8,28,19,1);m=r.dataSegment[r.dataSegment.length-v],m&&(C=!u.skipTransform&&r.transformFunc&&d==r.panel.yAxis,!m[y]&&m[y]!==0&&(m=this.getPreviousBar(r,y,r.dataSegment.length-1)),C&&m&&m.transform&&(m=m.transform)),u.displayFloatingLabel!==!1&&this.mainSeriesRenderer!=s&&m&&!d.noDraw&&(S=m[y],S&&(S[g]||S[g]===0?S=S[g]:S=S.iqPrevClose),d.priceFormatter?w=d.priceFormatter(this,c,S):w=this.formatYAxisPrice(S,c,null,d),this.yAxisLabels.push({src:"series",args:[c,w,this.pixelFromTransformedValue(S,c,d),t.hexToRgba(t.colorToHex(p),parseFloat(u.opacity)),null,null,d]})),r.legend&&u.useChartLegend&&(r.legend.colorMap||(r.legend.colorMap={}),k=u.display,k||(k=u.symbol),r.legend.colorMap[D]={color:f.colors,display:k,isBase:s==this.mainSeriesRenderer})}this.runAppend("drawSeries",arguments)}}};Ts=W=>{var e;e=W.CIQ,e.ChartEngine.prototype.scrollTo=function(t,a,r){var i,n;i=this.swipe,i.end=!0,i.amplitude=i.target=(a-t.scroll)*this.layout.candleWidth,i.timeConstant=100,J.h8g(),i.timestamp=Date.now(),i.scroll=t.scroll,i.chart=t,i.cb=r,n=this,requestAnimationFrame(function(){J.p4Q(),n.autoscroll()})},e.ChartEngine.prototype.autoscroll=function(){var t,a,r,i;t=this,a=this.swipe,a.amplitude&&(a.elapsed=Date.now()-a.timestamp,r=-a.amplitude*Math.exp(-a.elapsed/a.timeConstant),i=(a.target+r)/this.layout.candleWidth,a.chart.scroll=a.scroll+Math.round(i),this.draw(),this.updateChartAccessories(),r>.5||r<-.5?requestAnimationFrame(function(){t.autoscroll()}):(this.disableBackingStoreDuringTouch&&this.reconstituteBackingStore(),a.cb&&a.cb()))}};_s=W=>{var e,t,a,r;e=W.CIQ,t="boundary",a="line",r="border",e.ChartEngine.prototype.drawXAxis=function(i,n){var s=J,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R;if(h="t",h+="ick",o=[i,n],this.runPrepend("drawXAxis",o)||!n)return;var{lineBaseLevel:q}=e.ChartEngine.XAxis,{interval:Y,timeUnit:z}=this.layout,{xAxis:V}=i,{displayGridLines:K,displayBorder:Q,fitLeftToRight:j,minimumLabelWidth:Z,noDraw:ee,fitTight:$}=V;if(l=j||Y===h||z==="tick",ee)return;u=this.getBackgroundCanvas().context,this.canvasFont("stx_xaxis",u),c=this.getCanvasFontSize("stx_xaxis"),u.textAlign="center",u.textBaseline="middle",p=!l&&this.xaxisHeight>3*c,y=!1,d=new Map,b=u.measureText("   ").width;for(var ie=0;ie<n.length;ie++){g=n[ie],f=d.get(g.text),f===void 0&&(f=u.measureText(g.text).width,d.set(g.text,f)),s.s3C(22),m=Math.max(s.g5k(f,b),Z),g.hz=Math.floor(g.hz+this.micropixels)-.5,s.s1t(29);var te=s.g5k(11,3,6,17,10);g.left=g.hz-m/te,s.s3C(17);var re=s.g5k(38,1058,15,20);g.right=g.hz+m/re,s.s1t(11);var H=s.s8L(30,28);g.unpaddedRight=g.hz+f/H}C=this.xAxisAsFooter===!0?this.chart.canvasHeight:i.panel.bottom,s.s3C(11),S=this.whichPanel(s.g5k(C,1));function U(ne){var oe,le,he,ue,ce,de,Ce,pe,xe,Te,be,_e,Be,Pe;for(ne.sort((Fe,Ue)=>Fe.level<Ue.level?-1:(s.h8g(),Fe.level>Ue.level?1:Fe.hz<Ue.hz?-1:Fe.hz>Ue.hz?1:0)),le=Number.MAX_SAFE_INTEGER,he={},s.h8g(),ue={},oe="0"|0;oe<ne.length&&(ce="r",ce+="i",ce+="g",ce+="ht",de=ne[oe],!(de.level>le));oe++){this.container.ownerDocument.body.classList.contains("sharing")&&(de.left<=S.left||de.unpaddedRight>=S.right)&&(de.suppress=!0),Ce=Math.floor(de.left),pe=Math.ceil(de[$?"unpaddedRight":ce]);for(var Ie=Ce;Ie<=pe;Ie++){if(xe=he[Ie]||{},xe.level<=de.level){if(Te=xe.alwaysAsBoundary&&xe.level<le,Te&&!de.alwaysAsBoundary||xe.grid===t&&de.grid===a||l){if(be="h",be+="z",_e="rig",_e+="ht",Be="h",Be+="z",xe.left<Ce&&xe[p?Be:_e]>=Ce||xe.left>Ce&&xe[p?be:"left"]<=pe){de.suppress=!0;break}}else if(de.level){s.s3C(174);var Le=s.s8L(1,1,14,7);le=de.level-Le,delete ue[de.level];break}}he[Ie]=de,Ie===pe&&(ue[de.level]||(ue[de.level]=0),ue[de.level]++)}}return Pe=Object.entries(ue).reverse(),Pe.length>1&&!l&&Pe[0][0]>=q&&Pe["1"*1]["0"^0]<q&&Pe[0][1]===1&&(Pe[1][1]>1||Pe.length>("2"|2))&&Pe.shift(),Pe.length&&(le=Number(Pe[0][0])),le}if(S){this.adjustYAxisHeightOffset(S,S.yAxis),w=Q||Q===null,this.axisBorders===!0&&(w=!0),this.axisBorders===!1&&(w=!1),k=C-this.xaxisHeight+c,w&&(k+=3),D=!0,v=U.call(this,n),i.xAxis.maxLevelToDisplay=v,s.s3C(175),x=s.s8L(q,v);for(var G in this.panels)if(A="s",A+="tr",A+="ok",A+="e",T="stx_g",T+="rid_dark",_="stro",_+="ke",L="stx_g",L+="r",L+="id",M="str",M+="oke",F=this.panels[G],!(F.hidden||F.shareChartXAxis===!1)&&(s.s1t(103),P=s.s8L(S,F),E=F.yAxis,!!E)){u.save(),u.beginPath(),u.rect(F.left,F.top+(D?0:1),F.width,F.height-1),u.clip(),D=!1,O=new e.Plotter,O.newSeries(a,M,this.canvasStyle(L)),O.newSeries(t,_,this.canvasStyle(T)),O.newSeries(r,A,this.canvasStyle("stx_grid_border"));for(var ae=0;ae<n.length&&(g=n[ae],!(g.level>v));ae++)g.suppress||Math.floor(g.left)<=F.right&&(I=p&&g.grid===t&&(g.alwaysAsBoundary&&g.level<v||x),Math.floor(g.hz)>F.left&&(K&&(O.moveTo(g.grid,g.hz,E.top),O.lineTo(g.grid,g.hz,E.bottom)),P&&w&&(O.moveTo(r,g.hz,E.bottom+.5),O.lineTo(r,g.hz,E.bottom+6),I&&O.dashedLineTo(r,g.hz,E.bottom+6+c+3,[1,"3"-0]))),P&&g.right>F.left&&(B="stx_xa",B+="xis",this.canvasColor(g.grid==t&&x||g.alwaysAsBoundary&&g.level<v?"stx_xaxis_dark":B,u),!x&&g.boundaryOnlyText&&(g.text=g.boundaryOnlyText),u.fillText(g.text,g.hz,k+(I?c+3:0)),y&&(u.strokeStyle="red",u.strokeRect(g.left,k-c,g.unpaddedRight-g.left,c*("2"|2)),u.strokeStyle="green",u.strokeRect(g.unpaddedRight,k-c,g.right-g.unpaddedRight,c*("2"*1)))));w&&(N=Math.round(E.bottom)+.5,R=Math.round(F.right)+.5,O.moveTo(r,F.left,N),O.lineTo(r,R,N)),O.draw(u),u.restore()}u.textAlign="left",this.runAppend("drawXAxis",o)}},e.ChartEngine.prototype.createSpacedDateXAxis=function(i){var n=J,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v;s="milli",s+="second",h="sec",h+="ond",o="d",o+="a",o+="y",l="y",l+="e",l+="ar",i||(i=this.chart);var{lineBaseLevel:x}=e.ChartEngine.XAxis,{dataSegment:A,lineApproximation:T,market:_,maxTicks:L,xaxis:M,xAxis:F}=i,{candleWidth:P,interval:E,timeUnit:O}=this.layout;n.s1t(19),n.h8g(),M.length=n.g5k("0",32);for(var I=0;I<L;I++){if(c=A[I],c&&I&&!M.length){_&&(u=this.standardMarketIterator(c.DT,F.adjustTimeZone?this.displayZone:null));for(var B=I;B>0;B--)p={},u&&!(T&&P<1)&&(p.DT=u.previous()),M.unshift(p);u=null}if(c||I&&M.length){if(y=c&&c.DT,c&&c.displayDate&&F.adjustTimeZone&&(y=c.displayDate),!y)if(_){if(d="t",d+="i",d+="c",d+="k",E==d&&!F.futureTicksInterval||T&&P<1||!F.futureTicks)break;u||(u=this.standardMarketIterator(A[I-1].DT,F.adjustTimeZone?this.displayZone:null)),y=u.next()}else continue;g={DT:y,data:null},I<A.length&&(g.data=c),M.push(g)}}b=[],i.tzOffsetCache||(i.tzOffsetCache=new Map),i.tzOffsetCache.size>"20000"*1&&i.tzOffsetCache.clear(),f=i.tzOffsetCache,m=_&&_.market_def||{},C=(m.normal_daily_open||"00:00").split(":"),n.s3C(22);var N=n.s8L(10,50);return S=Number(C[0])*N,m.hour_aligned||(S+=Number(C[1])),w=R=>{var q,Y,z,V,K,Q,j;q="y",q+="e",q+="a",q+="r",Y=R===q||E!==R&&O!==R?t:a,z=e.ChartEngine.XAxis.setPropertiesForInterval[R],V=i.left,M.forEach((Z,ee)=>{var $,ie,te,re,H,U,G,ae;if($="undefin",$+="ed",ie=Z.data&&Z.data.candleWidth||P,te=Z.DT,te)switch(H="minu",H+="t",H+="e",R){case"year":re=te.getFullYear();break;case"month":re=te.getMonth();break;case"week":case"day":re=te.getDate();break;case H:n.s1t(10);var ne=n.g5k(7,51,19,3);re=te.getHours()*ne+te.getMinutes();break;case"second":re=te.getSeconds();break;case"millisecond":case"tick":re=te.getMilliseconds();break}if(Y===a&&(n.s1t(30),V+=n.s8L(ie,2)),typeof re!==$&&(Y===a||K!==re)){if(U=new e.ChartEngine.XAxisLabel({hz:V,grid:Y,raw:re}),R==="minute"){if((!Q||Q.getDate()!==te.getDate())&&(Q=te,G=_&&_.market_tz,ae=`${+te}|${G}|${this.displayZone}`,j=f.get(ae),j===void 0)){n.s3C(11);var oe=n.g5k(60019,19);j=(e.convertTimeZone(te,this.displayZone,G).getTime()-te)/oe,f.set(ae,j)}n.s1t(11),U.marketOpenOffset=n.g5k(j,S)}z&&z(U,Z,_,this),U.grid==a&&U.level<x&&(U.level+=x),(ee||Y===a)&&b.push(U),K=re}Y===a?(n.s3C(30),V+=n.g5k(ie,2)):V+=ie})},k=O||E,D=[l,"month","week","month",o,"minute",h,s,"tick"],v=D.indexOf(k),v>0&&(k!=="tick"&&w(D[v-1]),w(D[v])),b}};Ds=W=>{var e;e=W.CIQ,e.ChartEngine.prototype.createYAxis=function(t,a){var r=J,i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_;if(!this.runPrepend("createYAxis",arguments)){if(i=t.chart,n=t.name==i.name,a||(a={}),a.noChange=!1,s=a.yAxis?a.yAxis:t.yAxis,e.ChartEngine.enableCaching&&s.high==t.cacheHigh&&s.low==t.cacheLow){r.s1t(14);var L=r.s8L(11,11,0);h=i.dataSet.length-i.scroll-L,o=h+i.maxTicks+1,t.cacheLeft=h,t.cacheRight=o,a.noChange=!0}else t.cacheLeft=1e6,t.cacheRight=-1,t.cacheHigh=s.high,t.cacheLow=s.low;if(l=i.xAxis.idealTickSizePixels||i.xAxis.autoComputedTickSizePixels,s.goldenRatioYAxis){r.s3C(20),u=r.s8L("1376426062",0),c=-189824626,p=2;for(var M=1;r.D1T(M.toString(),M.toString().length,99742)!==u;M++)s.idealTickSizePixels==l%20507&&(a.noChange=!0),p+=2;r.D1T(p.toString(),p.toString().length,65440)!==c&&s.idealTickSizePixels==l%20507&&(a.noChange=!0),s.idealTickSizePixels!=l/1.618&&(a.noChange=!1)}if(!a.noChange){if(this.adjustYAxisHeightOffset(t,s),d=s.height=s.bottom-s.top,g=(s.high-s.low)/(d-s.zoom),!s.semiLog)if(a.ground)s.high=s.high+s.zoom*g;else{r.s3C(176);var F=r.s8L(6,0,10,7,12);s.high=s.high+(s.zoom/F+s.scroll)*g,r.s3C(96);var P=r.s8L(20,1,9,13,0);s.low=s.low-(s.zoom/P-s.scroll)*g}(s.min||s.min===0)&&(s.low=s.min),(s.max||s.max===0)&&(s.high=s.max),s.shadow=s.high-s.low,s.semiLog&&(!this.activeDrawing||this.activeDrawing.name!="projection")&&(b=function(){var N;s.logHigh=Math.log(s.high)/Math.LN10,N=Math.max(s.low,1e-9),s.logLow=Math.log(N)/Math.LN10,s.low<=("0"|0)&&(s.logLow=0),s.logShadow=s.logHigh-s.logLow},s.semiLog&&b(),f=s.height/(s.height-s.zoom),s.flipped?(s.high=this.transformedPriceFromPixel(s.bottom+f*(s.zoom/2+s.scroll),t,s),s.low=this.transformedPriceFromPixel(s.top-f*(s.zoom/("2"^0)-s.scroll),t,s)):(s.high=this.transformedPriceFromPixel(s.top-f*(s.zoom/2+s.scroll),t,s),s.low=this.transformedPriceFromPixel(s.bottom+f*(s.zoom/("2">>64)-s.scroll),t,s)),s.shadow=s.high-s.low,s.semiLog&&b()),s.goldenRatioYAxis&&n&&s==t.yAxis?(r.s3C(30),s.idealTickSizePixels=r.g5k(l,1.618),s.idealTickSizePixels===0&&(m=this.getCanvasFontSize("stx_yaxis"),r.s1t(46),s.idealTickSizePixels=r.g5k(m,5))):s.idealTickSizePixels||(m=this.getCanvasFontSize("stx_yaxis"),n?(r.s3C(46),s.idealTickSizePixels=r.s8L(m,5)):(r.s3C(46),s.idealTickSizePixels=r.g5k(m,2))),C=Math.round(d/s.idealTickSizePixels),y=a.range?a.range[1]-a.range[0]:s.shadow,r.s3C(30),s.priceTick=Math.floor(r.s8L(y,C)),r.s3C(11),S=r.g5k("1",0);for(var E=0;E<10&&!(s.priceTick>0);E++)S*=10,s.priceTick=Math.floor(y/C*S)/S;if(E==("10"^0)&&(s.priceTick=1e-8),s.priceTick=Math.round(y/C*S)/S,w=Math.round(y/s.priceTick),a.range&&w<y&&!s.noEvenDivisorTicks){for(;w>=1&&y%w!==0;)w--;r.s1t(30),s.priceTick=r.g5k(y,w)}if(s.minimumPriceTick){k=s.minimumPriceTick,m=this.getCanvasFontSize("stx_yaxis");for(var O=0;O<100&&(r.s1t(30),D=r.s8L(y,k),d/D<m*2);O++)k+=s.minimumPriceTick;O<100&&(s.priceTick=k)}}if(r.h8g(),(s.priceTick<=0||s.priceTick===1/0)&&(s.priceTick=1),s.multiplier=s.height/s.shadow,s.multiplier==1/0&&(s.multiplier=0),!s.decimalPlaces&&s.decimalPlaces!==0)if(n){v=0;for(var I=0;I<t.yAxis.shadowBreaks.length;I++)x=t.yAxis.shadowBreaks[I],t.yAxis.shadow<x[0]&&(v=x[1]);s.printDecimalPlaces=v}else s.printDecimalPlaces=null;else{A=1511629495,T=1786572710,_=2;for(var B=1;r.D1T(B.toString(),B.toString().length,35615)!==A;B++)s.printDecimalPlaces=s.decimalPlaces,_+=2;r.D1T(_.toString(),_.toString().length,31780)!==T&&(s.printDecimalPlaces=s.decimalPlaces)}this.runAppend("createYAxis",arguments)}},e.ChartEngine.prototype.drawYAxis=function(t,a){var r=J,i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V;if(a||(a={}),i=a.yAxis?a.yAxis:t.yAxis,!(t.hidden||i.noDraw||!i.width)){if((!e.Comparison||i.priceFormatter!=e.Comparison.priceFormat)&&(n=i.fractional,n?(i.originalPriceFormatter||(i.originalPriceFormatter={func:i.priceFormatter}),n.resolution||(n.resolution=i.minimumPrice),n.formatter||(n.formatter="'"),i.priceFormatter||(i.priceFormatter=function(ee,$,ie){var te,re,H,U;if(n){te="",ie<0&&(te="-",ie=Math.abs(ie)),re=Math.floor(Math.round(ie/n.resolution)*n.resolution),H=Math.round((ie-re)/n.resolution),U=Math.floor(H),r.p4Q(),r.s1t(32),r.s8L(68992,8,543312),r.s3C(117),r.g5k(17792,4437,7,71168),r.s3C(4),r.s8L(28,19,3,1696),r.s1t(66);var G=r.g5k(10,13,15,9);return te+re+n.formatter+(U<10?"0":"")+U+(H-U>="0.5"*G?"+":"")}})):i.originalPriceFormatter&&(i.priceFormatter=i.originalPriceFormatter.func,i.originalPriceFormatter=null)),s=this.colorOrStyle(i.textStyle||"stx_yaxis"),h=this.highlightedDraggable,o=0,h&&this.yaxisMatches(h,i)?o=.15:i.highlight&&(o=.1),o&&(l=s.constructor==String?s:s.color,i.setBackground(this,{color:l,opacity:o})),i.pretty)return this.drawYAxisPretty(t,a);if(!this.runPrepend("drawYAxis",arguments)){if(!a.noDraw&&!i.noDraw){if(u=i.yAxisPlotter,!u||!a.noChange){if(c="stx_g",c+="rid",u=i.yAxisPlotter=new e.Plotter,p=t.chart,y=t.name==p.name&&i.name===t.yAxis.name,!i.priceTick)return;if(d=i.shadow,g=a.range,g){r.s3C(61);var K=r.s8L(16,10,18,13);d=g[K]-g[0]}if(b=d/i.priceTick,b=Math.round(b),i.semiLog&&(f=Math.log(this.valueFromPixel(i.flipped?i.top:i.bottom,t))/Math.LN10,m=(i.logHigh-i.logLow)/b),u.newSeries("grid","stroke",this.canvasStyle(c)),u.newSeries("text","fill",s),u.newSeries("border","stroke",this.canvasStyle("stx_grid_border")),C=0,S=g?g[1]:i.high,w=g?g[0]:i.low,k=i.displayBorder===null?p.panel.yAxis.displayBorder:i.displayBorder,this.axisBorders===!1&&(k=!1),this.axisBorders===!0&&(k=!0),v=p.dynamicYAxis,x=v?i.width:NaN,A=this.getYAxisCurrentPosition(i,t),A=="left"?D=i.left+i.width:D=i.left,T=Math.round(D)+("0.5"-0),_=k?3:0,A=="left"&&(_=k?-3:0),y)if(i.shadow<1){r.s3C(0);var Q=r.s8L(5,15);r.s1t(32);var j=r.g5k(9,15,134);C=(parseInt(w/i.priceTick,Q)+j)*i.priceTick-w}else C=i.priceTick-Math.round(w%i.priceTick*t.chart.roundit)/t.chart.roundit;else C=S%i.priceTick;L=this.getCanvasFontSize("stx_yaxis");for(var Z=0;Z<b;Z++)i.semiLog?(r.s3C(23),F=r.g5k(Z,f,m),M=Math.pow(10,F)):y?M=w+Z*i.priceTick+C:M=S-Z*i.priceTick-C,P=this.pixelFromTransformedValue(M,t,i),E=Math.floor(P)+.5,!(E+L/2>t.bottom)&&(E-L/2<t.top||Math.abs(E-i.bottom)<1||(i.flipped&&(E=i.top+i.bottom-E),i.displayGridLines&&(O="gri",O+="d",I="g",I+="rid",u.moveTo(I,t.left+1,E),u.lineTo(O,t.right-1,E)),k&&(B="borde",B+="r",r.s1t(11),u.moveTo("border",r.s8L(T,.5),E),r.s1t(22),u.lineTo(B,r.s8L(T,_),E)),i.priceFormatter?M=i.priceFormatter(this,t,M):M=this.formatYAxisPrice(M,t,null,i),N=i.textBackground?this.containerColor:null,R=3,r.s1t(55),q=r.g5k(D,_,R),A=="left"?(q=i.left+R,i.justifyRight!==!1&&(q=i.left+i.width+_-R)):i.justifyRight&&(q=D+i.width),u.addText("text",M,q,E,N,null,L),v&&(x=Math.max(x,p.context.measureText(M).width+Math.abs(_)+R))));if(k&&(Y="b",Y+="order",z=Math.round(i.bottom)+.5,u.moveTo("border",T,i.top),u.lineTo("border",T,z),u.draw(this.getBackgroundCanvas(p).context,Y)),v&&x>i.width)throw i._dynamicWidth=x,this.calculateYAxisPositions(),new Error("reboot draw");if(!v&&i._dynamicWidth)throw V="reboo",V+="t draw",this.resetDynamicYAxis({chartName:p.name}),new Error(V)}i==t.yAxis&&this.plotYAxisGrid(t)}this.runAppend("drawYAxis",arguments)}}},e.ChartEngine.prototype.drawYAxisPretty=function(t,a){var r=J,i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q,j,Z,ee,$,ie,te,re,H,U,G,ae;if(!this.runPrepend("drawYAxis",arguments)&&(a||(a={}),i=a.yAxis||t.yAxis,!(t.hidden||i.noDraw||!i.width))){if(r.p4Q(),!a.noDraw){if(n=i.yAxisPlotter,!n||!a.noChange){if(s="s",s+="tx",s+="_yaxi",s+="s",h="st",h+="r",h+="oke",n=i.yAxisPlotter=new e.Plotter,o=t.chart,!i.priceTick||isNaN(i.high)||isNaN(i.low))return;if(l=i.shadow,a.range){r.s3C(177);var ne=r.g5k(20,6,14,3,10);l=a.range[ne]-a.range[0]}u=(i.height-(a.range?i.zoom:0))/i.idealTickSizePixels,u=Math.round(u),c=i.textStyle||"stx_yaxis",n.newSeries("grid",h,this.canvasStyle("stx_grid")),n.newSeries("text","fill",this.colorOrStyle(c)),n.newSeries("border","stroke",this.canvasStyle("stx_grid_border")),p=a.range,y=p?p[1]:i.high,d=p?p[0]:i.low,g=i.displayBorder===null?o.panel.yAxis.displayBorder:i.displayBorder,this.axisBorders===!1&&(g=!1),this.axisBorders===!0&&(g=!0),f=o.dynamicYAxis,m=f?i.width:NaN,C=this.getYAxisCurrentPosition(i,t),C=="left"?b=i.left+i.width:b=i.left,S=Math.round(b)+.5,w=g?3:"0"|0,C=="left"&&(w=g?-3:0),k=this.getCanvasFontSize(s),D=i.increments,v=D.length,x=0,A=1,T=0,_=0,L=0,M=Number.MAX_VALUE;for(var oe=0;oe<100;oe++){r.s1t(178);var le=r.g5k(17,9,10844,50,18);if(T=D[x]*Math.pow(le,L),r.s3C(30),A=Math.floor(r.s8L(l,T)),r.s3C(11),F=Math.abs(r.g5k(u,A)),F>M)break;if(M=F,A==u){_=T;break}else A>u?(x++,x>=v&&(x=0,L++)):(x--,x<0&&(r.s3C(163),x=r.s8L(v,"1"),L--));_=T}if(P=Math.ceil(d/_)*_,E=i.bottom-this.pixelFromTransformedValue(P,t,i),r.s1t(20),O=r.s8L("0",0),E>i.idealTickSizePixels&&i.semiLog&&i.prettySemiLog&&y-d>10){for(I=Math.ceil(d),B=0;P-I>=("10000"|0)&&B<=15;)P/=10,I/=10,B++;for(P=Math.ceil(P),I=Math.ceil(I),I;I<P&&P%I!==0;++I);r.s1t(20),P*=Math.pow(r.s8L("10",0),B),I*=Math.pow(10,B),I<P&&(P===_&&(_=I,O=I),P=I)}if(i.height>i.zoom){N="stx_y",N+="axis",R=459266207,q=-8607487,Y=2;for(var he=1;r.D1T(he.toString(),he.toString().length,15715)!==R;he++)r.s1t(11),z=r.g5k("0",0),V=Number.MAX_VALUE,o.context.save(),Y+=2;r.u6e(Y.toString(),Y.toString().length,"76875">>32)!==q&&(r.s3C(20),z=r.g5k("7",0),V=Number.MAX_VALUE,o.context.save()),this.canvasFont(N,o.context),r.s1t(147);var ue=r.g5k(13,12,7,56);K=i.shadow/_+("2"<<ue);for(var ce=0;ce<K&&(r.s1t(23),Q=r.s8L(z,P,_),!(Q>y));ce++){if(_+=O,z++,j=this.pixelFromTransformedValue(Q,t,i),V-j<k+1&&O>0){V=Number.MAX_VALUE,_=O,r.s3C(20),O*=r.s8L("2",0),ce=z=0,r.s1t(82);var de=r.s8L(5,1,0,4);K=i.shadow/_+de,n.reset();continue}if(V=j,Z=Math.floor(j)+.5,!(Z+k/2>i.bottom)&&!(Z-k/2<i.top)&&!(Math.abs(Z-i.bottom)<1)){if(i.displayGridLines&&(ee="g",ee+="rid",n.moveTo(ee,t.left+1,Z),n.lineTo("grid",t.right-1,Z)),g&&($="b",$+="or",$+="de",$+="r",r.s1t(11),n.moveTo($,r.s8L(S,.5),Z),r.s1t(22),n.lineTo("border",r.s8L(S,w),Z)),i.priceFormatter?Q=i.priceFormatter(this,t,Q):Q=this.formatYAxisPrice(Q,t,null,i),ie=i.textBackground?this.containerColor:null,te=re=3,r.s1t(55),H=r.g5k(b,w,te),C=="left"){r.s1t(22);var Ce=r.g5k(0,3);H=i.left+Ce,i.justifyRight!==!1&&(H=i.left+i.width+w-te)}else i.justifyRight&&(H=b+i.width-re);n.addText("text",Q,H,Z,ie,null,k),f&&(r.s1t(22),U=r.s8L(Q,""),m=Math.max(m,o.context.measureText(U).width+Math.abs(w)+te))}}o.context.restore(),ce>=K&&(r.s3C(22),console.log(r.s8L("drawYAxisPretty: assertion error. zz reached ",K)))}if(g&&(G="bo",G+="rde",G+="r",ae=Math.round(i.bottom)+.5,n.moveTo("border",S,i.top),n.lineTo("border",S,ae),n.draw(this.getBackgroundCanvas(o).context,G)),f&&m>i.width)throw i._dynamicWidth=m,this.calculateYAxisPositions(),new Error("reboot draw");if(!f&&i._dynamicWidth)throw this.resetDynamicYAxis({chartName:o.name}),new Error("reboot draw")}i==t.yAxis&&this.plotYAxisGrid(t)}this.runAppend("drawYAxis",arguments)}}};Ze={};jn(Ze);Un(Ze);Zn(Ze);Xn(Ze);Jn(Ze);Kn(Ze);Gn(Ze);$n(Ze);es(Ze);ts(Ze);is(Ze);rs(Ze);as(Ze);ns(Ze);ss(Ze);os(Ze);ls(Ze);hs(Ze);us(Ze);cs(Ze);fs(Ze);ds(Ze);ps(Ze);gs(Ze);ms(Ze);ys(Ze);vs(Ze);bs(Ze);Cs(Ze);xs(Ze);Ss(Ze);ks(Ze);As(Ze);ws(Ze);Ts(Ze);_s(Ze);Ds(Ze);var{CIQ:fr,SplinePlotter:Ls,timezoneJS:Ms,$$:Ps,$$$:Fs}=Ze;X[198498]=function(){for(var W=2;W!==9;)switch(W){case 1:return globalThis;case 5:var e;try{for(var t=2;t!==6;)switch(t){case 4:t=typeof dDF47>"u"?3:9;break;case 9:delete e.dDF47;var a=Object.prototype;delete a.MhERs,t=6;break;case 2:Object.defineProperty(Object.prototype,"MhERs",{get:function(){for(var r=2;r!==1;)switch(r){case 2:return this}},configurable:!0}),e=MhERs,e.dDF47=e,t=4;break;case 3:throw""}}catch{e=window}return e;case 2:W=typeof globalThis=="object"?1:5;break}}();Nh(X[198498]);X.k2L=function(){return typeof X[633704].F3I3$Fk=="function"?X[633704].F3I3$Fk.apply(X[633704],arguments):X[633704].F3I3$Fk};X[481611]=X[131553];X[595602]="goE";X.f9T=function(){return typeof X[131553].K9GamRN=="function"?X[131553].K9GamRN.apply(X[131553],arguments):X[131553].K9GamRN};X.L1v=function(){return typeof X[50435].l2ga0dB=="function"?X[50435].l2ga0dB.apply(X[50435],arguments):X[50435].l2ga0dB};X.Y5b=function(){return typeof X[185837].N$mYWS6=="function"?X[185837].N$mYWS6.apply(X[185837],arguments):X[185837].N$mYWS6};X.o_T=function(){return typeof X[227856].E3BrgIJ=="function"?X[227856].E3BrgIJ.apply(X[227856],arguments):X[227856].E3BrgIJ};X.q08=function(){return typeof X[227856].P1IEEU7=="function"?X[227856].P1IEEU7.apply(X[227856],arguments):X[227856].P1IEEU7};X[185837]=function(){var W=function(t,a){var r=a&65535,i=a-r;return(i*t|0)+(r*t|0)|0},e=function(t,a,r){for(var i=3432918353,n=461845907,s=r,h=a&-4,o=0;o<h;o+=4){var l=t.j4Qtj(o)&255|(t.j4Qtj(o+1)&255)<<8|(t.j4Qtj(o+2)&255)<<16|(t.j4Qtj(o+3)&255)<<24;l=W(l,i),l=(l&131071)<<15|l>>>17,l=W(l,n),s^=l,s=(s&524287)<<13|s>>>19,s=s*5+3864292196|0}switch(l=0,a%4){case 3:l=(t.j4Qtj(h+2)&255)<<16;case 2:l|=(t.j4Qtj(h+1)&255)<<8;case 1:l|=t.j4Qtj(h)&255,l=W(l,i),l=(l&131071)<<15|l>>>17,l=W(l,n),s^=l}return s^=a,s^=s>>>16,s=W(s,2246822507),s^=s>>>13,s=W(s,3266489909),s^=s>>>16,s};return{N$mYWS6:e}}();X[198498].L3EE=X;X[227856]=function(W){return{E3BrgIJ:function(){var e,t=arguments;switch(W){case 57:e=(-t[1]+t[3])/t[2]*t[0]-t[4];break;case 74:e=t[3]*(t[5]*t[2]*t[6]+(t[1]>>t[4]))+t[0];break;case 122:e=(t[4]+t[0])/t[2]*t[1]-t[3];break;case 79:e=+t[0]<<t[1];break;case 139:e=(t[1]+t[4])/t[0]-t[3]-t[2];break;case 95:e=(t[2]+t[1]-t[0])/t[3]+t[4];break;case 44:e=t[1]|t[0];break;case 104:e=t[1]/t[2]-t[3]+t[0];break;case 30:e=t[1]>>t[0];break;case 135:e=t[1]-t[0]*t[2];break;case 111:e=t[3]-(t[2]-t[1])-t[0];break;case 80:e=t[1]%t[0];break;case 27:e=t[4]-t[3]+t[1]-t[2]+t[0];break;case 102:e=t[0]+t[2]-t[4]-t[1]+t[3];break;case 4:e=t[0]-t[2]/t[3]+t[1];break;case 145:e=(t[2]+t[0]/t[3])*t[1];break;case 114:e=t[3]*(t[2]-t[1])/(t[0]|t[4]);break;case 35:e=(t[1]-t[0])*t[4]/t[2]-t[3];break;case 109:e=t[0]*(t[1]/t[2]);break;case 124:e=t[3]*t[1]-t[2]+t[0]-t[4];break;case 55:e=t[1]/t[2]+t[0];break;case 33:e=t[0]<<t[1];break;case 120:e=t[0]*t[4]*t[1]+t[3]-t[2];break;case 68:e=t[0]==t[1];break;case 132:e=(t[4]+t[2]-t[3])*t[1]+t[0];break;case 82:e=t[0]*t[1];break;case 75:e=t[1]>=t[0];break;case 3:e=t[3]/t[2]*t[1]-t[0];break;case 5:e=t[1]+t[3]/t[0]-t[2];break;case 85:e=t[1]<t[0];break;case 43:e=t[0]*t[3]+t[2]*t[1];break;case 121:e=t[0]*t[4]*t[1]+(+t[6]-t[3]*t[2])*t[5];break;case 17:e=t[1]/t[0]-t[2];break;case 56:e=-t[1]+t[4]+t[2]-t[0]-t[3];break;case 70:e=-t[5]/(t[1]-t[2])*(t[3]*(t[6]-t[0])-+t[4])+t[7];break;case 125:e=t[2]+(t[0]^t[1]);break;case 98:e=-t[0]/t[4]/t[1]-t[2]+t[3];break;case 128:e=(t[2]/t[0]-t[1])/t[4]+t[3];break;case 143:e=t[0]*t[1]*t[2];break;case 24:e=t[2]+t[3]+t[1]-t[0];break;case 21:e=t[1]*t[0]*t[2]-t[3];break;case 34:e=t[0]^t[1];break;case 49:e=t[1]-t[2]/+t[0];break;case 138:e=t[1]+t[3]-t[4]-t[0]-t[2];break;case 106:e=(-t[4]+t[2])/t[3]/t[0]-t[1];break;case 126:e=t[2]*t[0]*t[1]*t[3];break;case 142:e=+t[4]*(t[3]/t[2]-t[1])+t[0];break;case 89:e=-t[4]/t[2]-t[0]+t[3]-t[1];break;case 65:e=(t[1]-t[4]+t[0])*t[3]+t[2];break;case 84:e=(t[2]|t[1])<<+t[0];break;case 92:e=t[0]-(t[2]-t[1]);break;case 91:e=(-t[2]-t[1]+t[4])*t[0]+t[3];break;case 137:e=(t[6]-t[4])*(t[3]-t[0])+(t[5]-t[7])*(t[1]-t[2]);break;case 133:e=(t[0]*t[4]-t[3])/t[2]-t[1];break;case 83:e=t[0]!=t[1];break;case 130:e=t[0]+t[1]-t[2]+t[3]-t[4];break;case 51:e=t[0]+ +t[2]*t[1];break;case 62:e=t[4]/t[2]/t[3]*t[1]-t[0];break;case 108:e=t[2]*t[0]/t[1];break;case 112:e=t[1]/(t[2]*t[0]);break;case 16:e=(-t[3]+t[2])*t[1]*t[0]+t[4];break;case 88:e=t[0]|t[1]|t[2]|t[4]|t[3];break;case 72:e=t[2]/t[4]*t[5]*t[0]*t[1]+t[3];break;case 90:e=t[1]===t[0];break;case 10:e=(t[2]+t[1])/t[0];break;case 8:e=t[0]-t[1];break;case 7:e=(t[0]-t[2])/t[3]+t[1];break;case 131:e=t[3]*t[4]*t[0]-t[2]-t[1];break;case 141:e=-t[1]+t[0]+t[2];break;case 13:e=t[1]-t[2]+t[0];break;case 100:e=t[0]*t[2]+t[1];break;case 2:e=t[1]*t[0];break;case 45:e=t[2]+t[0]/t[1];break;case 69:e=t[0]/t[3]*t[4]*t[1]+t[2];break;case 117:e=t[0]*t[4]*t[2]/t[1]-t[3];break;case 46:e=t[2]-t[3]/t[1]-t[0];break;case 15:e=t[2]-t[0]-t[1];break;case 129:e=t[3]*t[2]+t[4]-t[0]-t[1];break;case 71:e=t[0]/(t[1]^t[2]);break;case 119:e=(t[0]+t[2])/t[3]+t[1]-t[4];break;case 97:e=(t[2]+t[3])/t[1]+t[0];break;case 76:e=t[3]+t[0]+t[2]+t[4]+t[1];break;case 14:e=t[0]+t[2]+t[1];break;case 58:e=t[0]*t[1]+t[2]-t[3];break;case 73:e=t[3]/t[0]*(t[2]*t[6]*t[1]+t[4])+t[5];break;case 87:e=t[2]|t[0]|t[1];break;case 12:e=-t[2]-t[1]+t[0];break;case 67:e=(t[1]-t[2]-t[0])*t[4]-t[3];break;case 36:e=t[2]*t[0]-t[1];break;case 22:e=(t[3]-t[4])/t[0]/t[1]+t[2];break;case 60:e=(t[2]-t[0])/(t[1]-t[3]);break;case 105:e=t[3]*t[2]/(t[1]+t[0]);break;case 134:e=(t[0]+t[4])/t[1]*t[2]+t[3];break;case 118:e=t[1]/(t[2]+t[0]);break;case 26:e=(t[2]+t[1]-t[3])*t[4]-t[0];break;case 53:e=-t[1]/t[0]*t[2]/t[3]+t[4];break;case 39:e=t[2]+(t[0]<<t[1]);break;case 50:e=t[2]-t[0]/t[1];break;case 38:e=t[3]/t[1]-t[2]-t[4]+t[0];break;case 86:e=t[1]|t[0]|t[2]|t[3];break;case 113:e=t[4]/t[0]-t[3]+t[2]+t[1];break;case 116:e=-t[2]-t[4]-t[0]+t[1]+t[3];break;case 6:e=(t[0]+t[3])/t[2]-t[1];break;case 37:e=-t[0]*t[2]+t[1];break;case 42:e=t[1]+t[0]-(t[3]^t[2]);break;case 144:e=(t[2]-t[3]/t[1])*t[0];break;case 1:e=t[2]+t[0]+t[3]+t[1];break;case 136:e=t[0]/+t[2]/t[1];break;case 110:e=t[0]+t[3]+t[2]+t[4]-t[1];break;case 77:e=t[1]>t[0];break;case 29:e=t[0]+(t[3]+t[1]*t[4])*t[2];break;case 47:e=t[0]+(t[1]<<t[3])*t[2];break;case 93:e=(t[3]/t[0]-t[4])/t[2]-t[1];break;case 11:e=(t[1]-t[3])*t[0]+t[2];break;case 78:e=t[0]<=t[1];break;case 140:e=t[1]*t[4]/t[3]/t[2]+t[0];break;case 96:e=(t[4]+t[0])/t[1]-t[3]+t[2];break;case 54:e=t[0]/t[3]/t[1]+t[2];break;case 40:e=t[1]-+t[0];break;case 23:e=t[1]/+t[0];break;case 31:e=-t[1]/t[4]*t[3]*t[0]+t[2];break;case 25:e=(-t[4]+t[3]-t[0])/t[2]+t[1];break;case 101:e=t[2]-t[3]-t[0]+t[1];break;case 63:e=-t[1]+t[0]-t[2];break;case 32:e=t[2]/(t[1]|t[0]);break;case 107:e=t[2]*(+t[4]+t[1]/(t[0]<<t[3]));break;case 146:e=t[1]+t[2]-t[0]+t[3];break;case 64:e=-t[2]/t[0]+t[1];break;case 123:e=t[0]/t[2]*t[3]-t[4]+t[1];break;case 20:e=t[2]+t[1]-t[0];break;case 28:e=(t[0]-t[1])*t[2];break;case 99:e=t[2]*t[0]/t[3]+t[1];break;case 41:e=t[3]-t[2]+t[0]-t[1];break;case 9:e=t[1]/t[0];break;case 18:e=t[1]-t[2]+ +t[0];break;case 59:e=(t[2]+t[0])*t[3]-t[1];break;case 103:e=(t[0]+t[3]+t[4])*t[1]-t[2];break;case 61:e=(t[0]-t[2])/t[4]+t[1]-t[3];break;case 52:e=-t[2]+t[3]-t[0]+t[1];break;case 115:e=-t[4]/t[3]+t[0]-t[2]+t[1];break;case 81:e=t[0]<<t[1]-t[2];break;case 48:e=t[0]+t[2]*t[1];break;case 66:e=t[1]-t[2]-t[3]-t[0];break;case 19:e=t[0]-t[1]-t[2]+t[4]+t[3];break;case 127:e=t[5]*((t[4]-t[0])/t[3]+t[1]*t[2]);break;case 0:e=t[1]+t[0];break;case 94:e=-t[1]+t[0];break}return e},P1IEEU7:function(e){W=e}}}();X.L0B=function(){return typeof X[50435].r2f4Pjv=="function"?X[50435].r2f4Pjv.apply(X[50435],arguments):X[50435].r2f4Pjv};X[633704]=function(W){for(var e=2;e!==10;)switch(e){case 7:r=a.R7dC7$(new t[s]("^['-|]"),"S"),e=6;break;case 2:var t,a,r,i;e=1;break;case 1:e=i--?4:5;break;case 11:return{F3I3$Fk:function(u){for(var c=2;c!==6;)switch(c){case 2:var p=new t[W[0]]()[W[1]](),p=1669864376e3;c=1;break;case 4:h=l(p),c=3;break;case 3:c=i--?8:9;break;case 1:c=p>o?5:8;break;case 8:var y=function(d,g){for(var b=2;b!==10;)switch(b){case 8:var f=t[g[4]](d[g[2]](S),16)[g[3]](2),m=f[g[2]](f[g[5]]-1);b=6;break;case 2:b=typeof d>"u"&&typeof u<"u"?1:5;break;case 4:g=W,b=3;break;case 11:return C;case 3:var C,S=0;b=9;break;case 1:d=u,b=5;break;case 13:S++,b=9;break;case 5:b=typeof g>"u"&&typeof W<"u"?4:3;break;case 14:C=m,b=13;break;case 9:b=S<d[g[5]]?8:11;break;case 12:C=C^m,b=13;break;case 6:b=S===0?14:12;break}}(void 0,void 0);return y?h:!h;case 9:o=p+6e4,c=8;break;case 5:c=i--?3:4;break}}};case 5:t=X[198498],e=4;break;case 6:e=i--?13:14;break;case 9:a=typeof n,e=8;break;case 4:var n="fromCharCode",s="RegExp";e=3;break;case 8:e=i--?6:7;break;case 14:W=W.y$KzlU(function(u){for(var c=2;c!==13;)switch(c){case 5:y="",c=4;break;case 9:y+=t[r][n](u[p]+91),c=8;break;case 4:var p=0;c=3;break;case 2:var y;c=1;break;case 8:p++,c=3;break;case 7:c=y?14:6;break;case 6:return;case 1:c=i--?4:5;break;case 3:c=p<u.length?9:7;break;case 14:return y}}),e=13;break;case 12:var h,o=0;e=11;break;case 3:e=i--?8:9;break;case 13:e=i--?11:12;break}function l(u){for(var c=2;c!==15;)switch(c){case 2:var p,y,d,g,b,f,m;c=1;break;case 7:c=i--?14:6;break;case 19:return p;case 16:p=g-u>y,c=19;break;case 20:p=u-f>y&&g-u>y,c=19;break;case 10:c=f>=0&&g>=0?20:18;break;case 12:c=i--?10:11;break;case 1:c=i--?4:5;break;case 3:y=27,c=9;break;case 18:c=f>=0?17:16;break;case 5:m=t[W[4]],c=4;break;case 6:g=d&&m(d,y),c=14;break;case 8:d=W[6],c=7;break;case 4:c=i--?9:3;break;case 17:p=u-f>y,c=19;break;case 9:c=i--?7:8;break;case 13:b=W[7],c=12;break;case 14:c=i--?12:13;break;case 11:f=(b||b===0)&&m(b,y),c=10;break}}}([[-23,6,25,10],[12,10,25,-7,14,18,10],[8,13,6,23,-26,25],[25,20,-8,25,23,14,19,12],[21,6,23,24,10,-18,19,25],[17,10,19,12,25,13],[-38,21,-40,11,-38,-37,19,10,-43],[]]);function X(){}X.L8n=function(){return typeof X[50435].l2ga0dB=="function"?X[50435].l2ga0dB.apply(X[50435],arguments):X[50435].l2ga0dB};X[50435]=function(){function W(n){for(var s=2;s!==7;)switch(s){case 2:var h=7,o="";s=5;break;case 5:var l=0;s=4;break;case 4:s=l<n.length?3:8;break;case 3:o+=w$vLW.w5ffX(n[l]-h+105),s=9;break;case 9:l++,s=4;break;case 8:return o}}for(var e=2;e!==4;)switch(e){case 2:var t=X[198498],a,r;return{l2ga0dB:function(n,s,h,o){for(var l=2;l!==1;)switch(l){case 2:return i(n,s,h,o)}},r2f4Pjv:function(n,s,h,o){for(var l=2;l!==1;)switch(l){case 2:return i(n,s,h,o,!0)}}}}function i(n,s,h,o,l){for(var u=2;u!==15;)switch(u){case 18:c=y.D2sgM(0,y.length),p=c.length,u=16;break;case 16:return X.X30(c,p,h);case 12:return!1;case 4:!r&&(r=typeof d<"u"?d[W([6,16,3,4])]:""),y=l?r:a,u=9;break;case 2:var c,p,y,d;d=t[W([10,13,1,-1,18,7,13,12])],!a&&(a=typeof d<"u"?d[W([6,13,17,18,12,-1,11,3])]||" ":""),u=4;break;case 6:return X.X30(c,p,h);case 11:return c=y.D2sgM(g,y.length),p=c.length,X.X30(c,p,h);case 9:u=o>0?8:19;break;case 8:c=y.D2sgM(n,o),p=c.length,u=6;break;case 14:var g=y.length-n;u=13;break;case 19:u=n===null||n<=0?18:14;break;case 13:u=s&&g>0&&y.j4Qtj(g-1)!==46?12:11;break}}}();X.d1t=function(){return typeof X[50435].r2f4Pjv=="function"?X[50435].r2f4Pjv.apply(X[50435],arguments):X[50435].r2f4Pjv};X[245730]=X[185837];X.Q1Y=function(){return typeof X[131553].K9GamRN=="function"?X[131553].K9GamRN.apply(X[131553],arguments):X[131553].K9GamRN};X.B42=function(){return typeof X[227856].P1IEEU7=="function"?X[227856].P1IEEU7.apply(X[227856],arguments):X[227856].P1IEEU7};X.X30=function(){return typeof X[185837].N$mYWS6=="function"?X[185837].N$mYWS6.apply(X[185837],arguments):X[185837].N$mYWS6};X.j79=function(){return typeof X[633704].F3I3$Fk=="function"?X[633704].F3I3$Fk.apply(X[633704],arguments):X[633704].F3I3$Fk};function Nh(W){function e(l){for(var u=2;u!==5;)switch(u){case 2:var c=[arguments];return c[0][0].Array}}function t(l){for(var u=2;u!==5;)switch(u){case 2:var c=[arguments];return c[0][0].RegExp}}for(var a=2;a!==123;)switch(a){case 25:r[26]="",r[45]="D",r[85]="sgM",r[26]="7$",r[56]="",r[56]="y$Kz",r[15]="",a=33;break;case 114:r[59]=r[9],r[59]+=r[89],r[59]+=r[5],r[79]=r[6],r[79]+=r[8],r[79]+=r[2],r[51]=r[3],a=107;break;case 125:i(n,r[98],r[16],r[48]),a=124;break;case 54:r[54]="",r[54]="$f8_",r[78]="O_",r[90]="",r[80]="ua",r[90]="ZGu",r[87]="",a=47;break;case 16:r[9]="w5",r[4]="",r[4]="2",r[89]="f",a=25;break;case 95:r[73]+=r[28],r[92]=r[56],r[92]+=r[11],r[92]+=r[13],a=91;break;case 103:r[41]=r[78],r[41]+=r[95],r[41]+=r[15],r[67]=r[21],a=99;break;case 126:i(e,"push",r[83],r[39]),a=125;break;case 135:i(h,"charCodeAt",r[83],r[51]),a=134;break;case 33:r[15]="$",r[28]="3u",r[95]="",r[13]="U",a=29;break;case 107:r[51]+=r[7],r[51]+=r[1],a=105;break;case 99:r[67]+=r[21],r[67]+=r[84],r[73]=r[94],r[73]+=r[33],a=95;break;case 42:r[11]="l",r[31]="",r[94]="w",r[77]="R7d",r[31]="__resid",r[33]="6Sk",r[74]="M",a=54;break;case 29:r[84]="abstract",r[95]="g0m",r[11]="",r[32]="C",a=42;break;case 73:r[16]=0,r[50]="Q",r[23]="r",r[83]=1,a=69;break;case 134:i(n,"String",r[16],r[79]),a=133;break;case 2:var r=[arguments];r[1]="",r[1]="Qtj",r[7]="",a=3;break;case 60:r[21]="",r[21]="_",r[34]="",r[34]="n",r[17]="",r[17]="",a=77;break;case 77:r[17]="T",r[72]="",r[72]="C5H8",r[55]="C4OQ",a=73;break;case 133:i(h,"fromCharCode",r[16],r[59]),a=132;break;case 105:var i=function(l,u,c,p){for(var y=2;y!==5;)switch(y){case 2:var d=[arguments];s(r[0][0],d[0][0],d[0][1],d[0][2],d[0][3]),y=5;break}};a=135;break;case 88:r[98]=r[21],r[98]+=r[40],r[98]+=r[75],r[39]=r[96],a=84;break;case 124:i(o,"apply",r[83],r[71]),a=123;break;case 3:r[7]="4",r[3]="",r[3]="",r[3]="j",r[2]="",r[2]="W",r[8]="",a=12;break;case 69:r[71]=r[55],r[71]+=r[50],r[71]+=r[23],r[48]=r[72],r[48]+=r[17],r[48]+=r[34],a=88;break;case 131:i(h,"replace",r[83],r[66]),a=130;break;case 80:r[57]+=r[74],r[30]=r[31],r[30]+=r[80],r[30]+=r[11],a=103;break;case 127:i(n,r[30],r[16],r[57]),a=126;break;case 47:r[87]="",r[87]="0e",r[96]="",r[96]="N",a=64;break;case 64:r[75]="",r[75]="ptimize",r[40]="",r[40]="_o",a=60;break;case 129:i(t,"test",r[83],r[73]),a=128;break;case 12:r[8]="L",r[6]="",r[6]="w$v",r[5]="",r[5]="fX",r[9]="",r[9]="",a=16;break;case 91:r[66]=r[77],r[66]+=r[32],r[66]+=r[26],r[18]=r[45],r[18]+=r[4],r[18]+=r[85],a=114;break;case 130:i(e,"map",r[83],r[92]),a=129;break;case 128:i(n,r[67],r[16],r[41]),a=127;break;case 84:r[39]+=r[87],r[39]+=r[90],r[57]=r[96],r[57]+=r[54],a=80;break;case 132:i(h,"substring",r[83],r[18]),a=131;break}function n(l){for(var u=2;u!==5;)switch(u){case 2:var c=[arguments];return c[0][0]}}function s(l,u,c,p,y){for(var d=2;d!==13;)switch(d){case 2:var g=[arguments];g[2]="",g[2]="y",g[3]="",g[3]="ert",d=9;break;case 14:try{for(var b=2;b!==13;)switch(b){case 2:g[8]={},g[9]=(0,g[0][1])(g[0][0]),g[4]=[g[9],g[9].prototype][g[0][3]],b=4;break;case 4:b=g[4].hasOwnProperty(g[0][4])&&g[4][g[0][4]]===g[4][g[0][2]]?3:9;break;case 9:g[4][g[0][4]]=g[4][g[0][2]],g[8].set=function(m){for(var C=2;C!==5;)switch(C){case 2:var S=[arguments];g[4][g[0][2]]=S[0][0],C=5;break}},g[8].get=function(){for(var m=2;m!==13;)switch(m){case 6:return C[9]+=C[1],typeof g[4][g[0][2]]==C[9]?void 0:g[4][g[0][2]];break;case 3:C[7]="ndef",C[8]="u",C[9]=C[8],C[9]+=C[7],m=6;break;case 2:var C=[arguments];C[1]="",C[1]="ined",C[7]="",m=3;break}},g[8].enumerable=g[1];try{for(var f=2;f!==3;)switch(f){case 2:g[7]=g[6],g[7]+=g[3],g[7]+=g[2],g[0][0].Object[g[7]](g[4],g[0][4],g[8]),f=3;break}}catch{}b=13;break;case 3:return}}catch{}d=13;break;case 9:g[6]="",g[6]="defineProp",g[1]=!0,g[1]=!1,d=14;break}}function h(l){for(var u=2;u!==5;)switch(u){case 2:var c=[arguments];return c[0][0].String}}function o(l){for(var u=2;u!==5;)switch(u){case 2:var c=[arguments];return c[0][0].Function}}}X.C2Z=function(){return typeof X[227856].E3BrgIJ=="function"?X[227856].E3BrgIJ.apply(X[227856],arguments):X[227856].E3BrgIJ};X[131553]=function(){for(var W=2;W!==9;)switch(W){case 2:var e=[arguments];e[4]=void 0,e[5]={},e[5].K9GamRN=function(){for(var t=2;t!==90;)switch(t){case 43:a[95]={},a[95].g$N=["p4T"],a[95].R9h=function(){var r=typeof C5H8Tn=="function";return r},a[13]=a[95],t=39;break;case 71:a[48]++,t=76;break;case 29:a[82].g$N=["d_W"],a[82].R9h=function(){var r=function(){},i=/\u0031\u0039\u0032/.w6Sk3u(r+[]);return i},a[16]=a[82],t=43;break;case 72:a[40].N0eZGu(a[52]),t=71;break;case 75:a[52]={},a[52][a[71]]=a[98][a[85]][a[48]],a[52][a[96]]=a[22],t=72;break;case 39:a[76]={},a[76].g$N=["d_W"],a[76].R9h=function(){var r=function(){return"x".repeat(2)},i=/\u0078\u0078/.w6Sk3u(r+[]);return i},a[44]=a[76],t=54;break;case 25:a[73].R9h=function(){var r=function(){return unescape("%3D")},i=/\x3d/.w6Sk3u(r+[]);return i},a[41]=a[73],a[23]={},a[23].g$N=["d_W"],a[23].R9h=function(){var r=function(){return"A".normalize("NFC")==="".normalize("NFC")},i=/\x74\x72\u0075\u0065/.w6Sk3u(r+[]);return i},a[78]=a[23],a[86]={},t=33;break;case 8:a[9].R9h=function(){var r=function(){return escape("=")},i=/\u0033\u0044/.w6Sk3u(r+[]);return i},a[7]=a[9],a[1]={},a[1].g$N=["d_W"],a[1].R9h=function(){var r=function(){return atob("PQ==")},i=!/\u0061\x74\u006f\u0062/.w6Sk3u(r+[]);return i},a[5]=a[1],t=11;break;case 2:var a=[arguments];t=1;break;case 15:a[3]=a[8],a[73]={},a[73].g$N=["d_W"],t=25;break;case 11:a[4]={},a[4].g$N=["p4T"],a[4].R9h=function(){var r=typeof O_g0m$=="function";return r},t=19;break;case 1:t=e[4]?5:4;break;case 77:a[48]=0,t=76;break;case 70:a[43]++,t=57;break;case 33:a[86].g$N=["p4T"],a[86].R9h=function(){var r=!1,i=[];try{for(var n in console)i.N0eZGu(n);r=i.length===0}catch{}var s=r;return s},a[80]=a[86],a[82]={},t=29;break;case 58:a[43]=0,t=57;break;case 67:return e[4]=81,48;case 47:a[2].N0eZGu(a[41]),a[2].N0eZGu(a[44]),a[2].N0eZGu(a[16]),a[40]=[],a[42]="J1A",a[88]="K0p",a[85]="g$N",t=61;break;case 57:t=a[43]<a[2].length?56:69;break;case 54:a[2].N0eZGu(a[3]),a[2].N0eZGu(a[6]),a[2].N0eZGu(a[13]),a[2].N0eZGu(a[80]),a[2].N0eZGu(a[7]),a[2].N0eZGu(a[78]),a[2].N0eZGu(a[5]),t=47;break;case 61:a[96]="l$o",a[26]="R9h",a[71]="K1U",t=58;break;case 5:return 70;case 76:t=a[48]<a[98][a[85]].length?75:70;break;case 69:t=function(r){for(var i=2;i!==22;)switch(i){case 19:n[4]++,i=7;break;case 23:return n[3];case 14:i=typeof n[5][n[6][a[71]]]>"u"?13:11;break;case 5:return;case 8:n[4]=0,i=7;break;case 18:n[3]=!1,i=17;break;case 11:n[5][n[6][a[71]]].t+=!0,i=10;break;case 6:n[6]=n[0][0][n[4]],i=14;break;case 4:n[5]={},n[2]=[],n[4]=0,i=8;break;case 17:n[4]=0,i=16;break;case 13:n[5][n[6][a[71]]]=(function(){for(var s=2;s!==9;)switch(s){case 1:return h[1]={},h[1].h=0,h[1].t=0,h[1];case 2:var h=[arguments];s=1;break}}).C4OQQr(this,arguments),i=12;break;case 1:i=n[0][0].length===0?5:4;break;case 12:n[2].N0eZGu(n[6][a[71]]),i=11;break;case 15:n[7]=n[2][n[4]],n[9]=n[5][n[7]].h/n[5][n[7]].t,i=26;break;case 20:n[5][n[6][a[71]]].h+=!0,i=19;break;case 25:n[3]=!0,i=24;break;case 26:i=n[9]>=.5?25:24;break;case 2:var n=[arguments];i=1;break;case 16:i=n[4]<n[2].length?15:23;break;case 10:i=n[6][a[96]]===a[42]?20:19;break;case 7:i=n[4]<n[0][0].length?6:18;break;case 24:n[4]++,i=16;break}}(a[40])?68:67;break;case 4:a[2]=[],a[9]={},a[9].g$N=["d_W"],t=8;break;case 56:a[98]=a[2][a[43]];try{a[22]=a[98][a[26]]()?a[42]:a[88]}catch{a[22]=a[88]}t=77;break;case 68:t=68;break;case 19:a[6]=a[4],a[8]={},a[8].g$N=["p4T"],a[8].R9h=function(){var r=typeof N$f8_M=="function";return r},t=15;break}},W=3;break;case 3:return e[5]}}();X.p5T=function(W){if(X.Q1Y(),X&&W)return X.j79(W)};X.c23=function(W){if(X.Q1Y(),X&&W)return X.k2L(W)};X.S$k=function(W){if(X.f9T(),X)return X.k2L(W)};X.g3g=function(W){if(X.f9T(),X&&W)return X.k2L(W)};X.T09=function(W){if(X.Q1Y(),X)return X.j79(W)};var Es,Is,Os,Ns,Bs,Ws,Rs,qs,Ys,zs,Hs,Vs,Qs,js,Us,Zs,Xs,Js,Ks,Gs,$s,eo,to,io,ro,ao,no,so;Es=W=>{var e=X,t,a,r,i;t="unde",t+="fi",t+="ne",t+="d",a=typeof _CIQ!==t?_CIQ:W.CIQ,r=class{get(s,h){e.Q1Y(),h("no storage defined")}set(s,h){}remove(s){}},a.ChartEngine.create=function({container:n,config:s,deferLoad:h}={}){var o,l,u;n||(n=document.querySelector(".chartContainer")||document.body),s||(s={}),o=Object.assign({container:n},s.chartEngineParams),l=new this(o);var{quoteFeeds:c,marketFactory:p,addOns:y,chartId:d,multiChartId:g,onEngineReady:b,onChartReady:f}=s;c&&l.attachQuoteFeed&&c.forEach(({quoteFeed:w,behavior:k,filter:D})=>{e.Q1Y(),l.attachQuoteFeed(w,k,D)});function m(){f&&setTimeout(()=>(e.Q1Y(),f(l)))}p&&l.setMarketFactory(p),y&&Object.entries(y).filter(([,w])=>(e.Q1Y(),!!w)).forEach(([w,k])=>{var D;if(s.enabledAddOns[w])if(D=k.moduleName||a.capitalize(w),e.Q1Y(),a[D]){var{cssRequired:v}=new a[D](Object.assign({stx:l},k,{config:s}));v&&a.UI&&a.UI.activatePluginUI(l,D)}else a.debug&&(e.q08(0),console.log(`${D}${e.o_T("e for addons with params:"," not availabl")}`,k))}),u=a.ensureDefaults(s.callbacks||{},{layout:this.getSaveLayout(s),symbolChange:this.getSaveLayout(s),drawing:this.getSaveDrawings(s),preferences:this.getSavePreferences(s),newChart:this.getRetoggleEvents(s)});for(var C in u)u[C]&&l.addEventListener(C,u[C]);i=s.nameValueStore||a.NameValueStore||r,i=new i,h||(b&&b(l),s.restore?(this.restorePreferences(l,d,g),this.restoreLayout(l,w=>{!l.chart.symbol&&s.initialSymbol?S():m()},d)):S());function S(){e.f9T(),l.loadChart(s.initialSymbol,{masterData:s.initialData},m),l.draw()}return l},a.ChartEngine.getSaveLayout=function(n){return e.f9T(),function({stx:h}){e.f9T();var o;n.restore&&h.exportLayout&&(o=JSON.stringify(h.exportLayout(!0)),i.set("myChartLayout"+(n.chartId||""),o))}},a.ChartEngine.restoreLayout=function(n,s,h){var o;function l(){u(n,n.chart.symbol,h),s&&s()}o="myChart",o+="Layout";var{restoreDrawings:u}=this;h||(h=""),e.B42(0),e.Q1Y(),i.get(e.C2Z(h,o),function(c,p){if(!c){try{p=JSON.parse(p)}catch{}n.importLayout&&n.importLayout(p,{managePeriodicity:!0,cb:l}),n.crossSection&&n.setCandleWidth(1)}})},a.ChartEngine.getSaveDrawings=function(n){return e.Q1Y(),function({stx:h,symbol:o}){var l,u,c;e.Q1Y(),n.restore&&h.exportDrawings&&(l=h.exportDrawings(),u=n.chartId?n.chartId+"~"+o:o,e.q08(1),c=`${n.chartId||""}${e.o_T("ra","gs","_d","win")}`,i.get(c,(p,y)=>{var d;d=y||{},l.length===0?(i.remove(u),delete d[u]):(i.set(u,JSON.stringify(l)),d[u]=l.length),e.f9T(),i.set(c,d)}))}},a.ChartEngine.restoreDrawings=function(n,s,h){var o;a.Drawing&&(o=h?h+"~"+s:s,i.get(o,function(l,u){if(!l){try{u=JSON.parse(u)}catch{}u&&(n.importDrawings(u),n.draw())}}))},a.ChartEngine.getSavePreferences=function(n){return function({stx:h}){e.Q1Y();var o;n.restore&&h.exportPreferences&&(o=JSON.stringify(h.exportPreferences()),i.set("myChartPreferences"+(n.multiChartId||n.chartId||""),o))}},e.Q1Y(),a.ChartEngine.restorePreferences=function(n,s,h){var o;o=h||s||"",e.Q1Y(),e.q08(0),i.get(e.o_T(o,"myChartPreferences"),function(l,u){if(!l){try{u=JSON.parse(u)}catch{}e.f9T(),u&&n.importPreferences&&n.importPreferences(u)}})},a.ChartEngine.getRetoggleEvents=function(n){return function({stx:h}){var o,l,u;o="UI.",e.Q1Y(),o+="ge",o+="tMyContext",l=n.chartId&&document.getElementById(n.chartId),l||(l=(a.getFn(o)(h.container)||{}).topNode),l||(l=document),u=l.querySelectorAll(`${n.selector.markersMenuItem}.ciq-active:not(.span-event)`),u.forEach(function(c){e.f9T(),c.querySelector(".ciq-switch, .ciq-checkbox, .ciq-radio").dispatchEvent(new Event("stxtap"))})}}};Is=W=>{var e=X,t;t=typeof _CIQ<"u"?_CIQ:W.CIQ,t.ChartEngine.prototype.drawHeatmap=function(a,r){var i,n,s,h,o,l,u,c,p,y,d,g,b,f,m;if(i="c",i+="ha",i+="rt",!r||!r.length)return;n=a.panel,e.Q1Y();function C(w,k,D,v,x,A,T,_){var L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q;L="o",L+="bje",L+="ct",M="cen",M+="t",M+="e",M+="r",u.beginPath(),u.fillStyle=k,u.strokeStyle=k,u.textAlign=M,F=b.layout.candleWidth*x,P=Math.floor(b.pixelFromBar(0,s.chart)-b.layout.candleWidth),typeof D=="number"&&(e.B42(2),u.globalAlpha=e.o_T(p,D)),typeof D==L&&(I={minOpacity:D.min||0,maxOpacity:D.max||1});for(var j=0;j<o.length;j++){if(B=o[j],B&&B.candleWidth){if(j===0)P+=b.layout.candleWidth;else{e.q08(3);var Z=e.o_T(78,16,1,5);P+=(B.candleWidth+F/x)/Z}F=B.candleWidth*x}else P+=b.layout.candleWidth;if(e.B42(4),E=e.o_T(P,T,F,2),e.B42(5),O=e.o_T(2,P,T,F),O-E<2&&(e.B42(0),O=e.o_T(1,E)),!!B&&(N=B[w],!!N)){N[_]&&(N=N[_]),typeof N=="number"&&(N=[N]);for(var ee=0;ee<N.length;ee++){if(R=N[ee],q=0,R instanceof Array){if(I){e.B42(6);var $=e.o_T(0,4,1,6);e.q08(7);var ie=e.C2Z(0,6,5,1);u.globalAlpha=p*(R[$]*I.maxOpacity+(("1"|0)-R["2"*ie])*I.minOpacity)}q=R[1],R=R[0]}Y=b.pixelFromPrice(R,s,h),f||(A||(A=a.height),z=b.pixelFromPrice(R+A*(h.flipped?1:-1),s,h),u.lineWidth=1,e.B42(8),d=e.o_T(z,Y),e.q08(9),g=e.o_T(2,d),f=u.lineWidth),v?(e.q08(8),V=e.C2Z(Y,g),e.q08(0),K=e.o_T(g,Y),e.B42(8),u.rect(E,V,e.o_T(O,E),e.C2Z(K,V))):(e.q08(8),u.fillRect(E,e.C2Z(Y,g),e.o_T(O,E),d),a.showSize&&q&&c<=d-2&&(Q=u.globalAlpha,u.fillStyle=b.defaultColor,e.B42(2),u.globalAlpha=e.C2Z(p,.5),e.q08(10),u.fillText(q,e.C2Z(2,E,O),Y),u.fillStyle=k,e.q08(2),u.globalAlpha=e.C2Z(p,Q))),I&&R instanceof Array&&(e.B42(8),u.globalAlpha=e.o_T("0",0))}}}e.f9T(),v&&u.stroke(),u.globalAlpha=p,u.closePath()}if(n||(n=i),s=this.panels[n],!!s){h=a.yAxis?a.yAxis:s.yAxis,o=this.chart.dataSegment,a.name||(a.name="Data"),a.widthFactor||(a.widthFactor=1),a.height||(a.height=Math.pow(10,1-(s.decimalPlaces||s.chart.decimalPlaces))),l="stx",l+="-floa",l+="t-date",u=this.chart.context,this.canvasFont(l,u),c=this.getCanvasFontSize(l),p=1,!a.highlight&&this.highlightedDraggable&&(p=.3),y=.5,s.chart.tmpWidth<=1&&(y=0),d=null,g=null,b=this,f=null,this.startClip(n),u.globalAlpha=p;for(var S=0;S<r.length;S++)m=r[S],C(m.field,m.color,m.opacity,null,a.widthFactor,m.height,m.border_color?y:-y/4,m.subField),m.border_color&&this.layout.candleWidth>=2&&C(m.field,m.border_color,m.opacity,!0,a.widthFactor,m.height,y,m.subField);u.lineWidth=1,u.globalAlpha=1,this.endClip()}},t.ChartEngine.prototype.drawCandles=function(a,r,i){var n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V;n=a.chart,n||(n=a,a=a.chart),s=!1,h=!1,o=null,l=a.yAxis,i&&typeof i=="object"?(s=i.isOutline,h=i.isHistogram,o=i.field,l=i.yAxis):(s=i,h=arguments[3]),u=n.dataSegment,c=n.context,p=l.top,y=l.bottom,f=new Array(u.length),m="transparent",C="trans",C+="par",C+="ent",S=0,e.q08(11);var K=e.o_T(12,0,61,5);w=n.dataSet.length-n.scroll-K,k={},e.B42(12);var Q=e.C2Z(22,13,7);D=n.tmpWidth/Q,v=this.layout.candleWidth,e.q08(13);var j=e.C2Z(9,2,10);x=a.left-.5*v+this.micropixels-j;for(var Z=0;Z<=u.length;Z++)if(A="out",A+="lin",A+="e",T=D,e.B42(9),x+=e.C2Z(2,v),v=this.layout.candleWidth,e.B42(9),x+=e.o_T(2,v),_=u[Z],!!_&&((!_.cache||n.pixelCacheExpired)&&(_.cache={}),!_.projection)){if(_.candleWidth){e.B42(8);var ee=e.o_T(22,20);x+=(_.candleWidth-v)/ee,v=_.candleWidth,(i.isVolume||v<n.tmpWidth)&&(e.B42(9),T=e.C2Z(2,v))}if(n.transformFunc&&l==n.panel.yAxis&&_.transform&&(_=_.transform),L=_.cache,_&&o&&(_=_[o]),!(!_&&_!==0)&&(M="open",F="close",o&&(e.q08(14),M=e.o_T(o,M,"."),e.q08(14),F=e.o_T(o,F,".")),P=_.Close,E=_.Open===void 0?P:_.Open,h&&n.defaultPlotField&&(P=_[n.defaultPlotField]),!(!P&&P!==0)&&!(!h&&(E==P||E===null))&&(O=r(this,_,s?A:"solid"),!!O))){if(s?m=O:C=O,k[C]=1,I=m&&!t.isTransparent(m),I&&!i.highlight&&(S=.5),c.beginPath(),c.fillStyle=C,e.q08(0),B=e.C2Z(Z,w),B<a.cacheLeft||B>a.cacheRight||!L[M]){if(N=l.semiLog?l.height*(1-(Math.log(Math.max(E,0))/Math.LN10-l.logLow)/l.logShadow):(l.high-E)*l.multiplier,R=l.semiLog?l.height*(1-(Math.log(Math.max(P,0))/Math.LN10-l.logLow)/l.logShadow):(l.high-P)*l.multiplier,Math.abs(N-R)<1&&(N=R),l.flipped?(e.q08(8),N=e.C2Z(y,N),e.B42(8),R=e.o_T(y,R)):(N+=p,R+=p),f[Z]=R,d=h?R:Math.min(N,R),g=h?l.bottom:Math.max(N,R),d=Math.floor(d),g=Math.floor(g),e.B42(8),b=e.C2Z(g,d),d<p){if(d+b<p){L[M]=d,L[F]=d;continue}e.q08(15),b-=e.o_T(d,1,p),e.B42(8),d=e.C2Z(p,1)}d+b>y&&(e.B42(13),b=e.C2Z(1,y,d)),L[M]=d,e.B42(0),L[F]=e.C2Z(b,d)}L[M]>=y||L[F]<=p||(q=Math.floor(x)+(!i.highlight&&.5),Y=Math.floor(q-T)+S,z=Math.round(q+T)-S,c.rect(Y,L[M]+S,Math.max(0,z-Y),Math.max(0,L[F]-L[M])),!i.highlight&&this.highlightedDraggable&&(c.globalAlpha*=.3),C!="transparent"&&c.fill(),I&&(c.lineWidth=1,i.highlight&&(c.lineWidth*=2),c.strokeStyle=m,c.stroke()))}}n.pixelCacheExpired=!1,V={colors:[],cache:f};for(var $ in k)(!i.hollow||!t.equals($,this.containerColor))&&V.colors.push($);return V},t.ChartEngine.prototype.drawShadows=function(a,r,i){var n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O;n=a.chart,n||(n=a,a=a.chart),s=n.dataSegment,h=this.chart.context,h.lineWidth=1,i.highlight&&(h.lineWidth*=2),!i.highlight&&this.highlightedDraggable&&(h.globalAlpha*=.3),e.f9T(),o=i.isHistogram,l=i.field,u=i.yAxis||a.yAxis,c=u.top,p=u.bottom,e.q08(16);var I=e.o_T(14,4,2,9,393);y=n.dataSet.length-n.scroll-I,d=this.layout.candleWidth,e.q08(0);var B=e.o_T(1,0);g=a.left-.5*d+this.micropixels-B;for(var N=0;N<=s.length;N++)if(b="b",b+="o",b+="t",b+="tom",e.q08(9),g+=e.C2Z(2,d),d=this.layout.candleWidth,e.q08(9),g+=e.o_T(2,d),f=s[N],!!f&&((!f.cache||n.pixelCacheExpired)&&(f.cache={}),!f.projection)){if(f.candleWidth){e.q08(17);var R=e.o_T(17,34,0);g+=(f.candleWidth-d)/R,d=f.candleWidth}if(m=r(this,f,"shadow"),!!m&&(n.transformFunc&&u==n.panel.yAxis&&f.transform&&(f=f.transform),C=f.cache,f&&l&&(f=f[l]),!(!f&&f!==0)&&(S="top",w=b,l&&(e.B42(14),S=e.C2Z(l,S,"."),e.q08(14),w=e.o_T(l,w,".")),k=f.Close,D=f.Open===void 0?k:f.Open,v=f.High===void 0?Math.max(k,D):f.High,x=f.Low===void 0?Math.min(k,D):f.Low,!(!k&&k!==0)))){if(e.B42(0),A=e.C2Z(N,y),A<a.cacheLeft||A>a.cacheRight||!C[S]){if(T=u.semiLog?u.height*(1-(Math.log(Math.max(v,0))/Math.LN10-u.logLow)/u.logShadow):(u.high-v)*u.multiplier,_=u.semiLog?u.height*(1-(Math.log(Math.max(x,0))/Math.LN10-u.logLow)/u.logShadow):(u.high-x)*u.multiplier,Math.abs(_-T)<1&&(_=T),T=Math.floor(T),_=Math.floor(_),e.q08(8),L=e.C2Z(_,T),u.flipped?(e.B42(8),T=e.C2Z(p,T),e.q08(8),_=e.o_T(p,_)):(T+=c,_+=c),T<c){if(T+L<c){C[S]=T,C[w]=T;continue}e.q08(15),L-=e.o_T(T,1,c),e.q08(8),T=e.C2Z(c,1)}T+L>p&&(e.q08(18),L=e.C2Z("1",p,T)),C[S]=T,C[w]=C[S]+L}if(!(C[S]>=p)&&!(C[w]<=c)){e.q08(7);var q=e.C2Z(12,2,14,2);M=Math.floor(g)+(!i.highlight&&"0.5"*q),h.beginPath(),!o&&k==D&&(F=this.offset,i.isVolume&&(e.B42(9),F=e.C2Z(2,d)),e.q08(8),P=e.C2Z(M,F),e.q08(0),E=e.o_T(F,M),O=u.semiLog?u.height*(1-(Math.log(Math.max(k,0))/Math.LN10-u.logLow)/u.logShadow):(u.high-k)*u.multiplier,O=Math.floor(O)+(!i.highlight&&.5),u.flipped?(e.q08(8),O=e.o_T(p,O)):O+=c,O<=p&&O>=c&&(h.moveTo(P,O),h.lineTo(E,O))),v!=x&&(h.moveTo(M,C[S]),h.lineTo(M,C[w])),h.strokeStyle=m,h.stroke()}}}n.pixelCacheExpired=!1},t.ChartEngine.prototype.drawBarChart=function(a,r,i,n){var s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V;s=a.chart,s||(s=a,a=a.chart),h=s.dataSegment,o=new Array(h.length),l=s.context,u=this.canvasStyle(r),u.width&&parseInt(u.width,10)<=25?l.lineWidth=Math.max(1,t.stripPX(u.width)):l.lineWidth=1,n.highlight&&(l.lineWidth*=2),!n.highlight&&this.highlightedDraggable&&(l.globalAlpha*=.3),c=n.field,p=n.yAxis||a.yAxis,y=p.top,d=p.bottom,e.q08(19);var K=e.o_T(0,13,6,14,6);b=s.dataSet.length-s.scroll-K,f={},e.B42(0);var Q=e.o_T(2,0);m=s.tmpWidth/Q,e.B42(20);var j=e.C2Z(29,12,19);C=l.lineWidth/j,S=this.layout.candleWidth,e.B42(21);var Z=e.C2Z(7,7,10,489);e.B42(22);var ee=e.o_T(5,3,2,0,15);w=a.left-"0.5"*Z*S+this.micropixels-ee;for(var $=0;$<=h.length;$++)if(e.q08(23),w+=e.C2Z("2",S),S=this.layout.candleWidth,e.q08(9),w+=e.o_T(2,S),k=h[$],!!k&&((!k.cache||s.pixelCacheExpired)&&(k.cache={}),!k.projection)){if(k.candleWidth){e.B42(24);var ie=e.o_T(30,20,0,12);w+=(k.candleWidth-S)/ie,S=k.candleWidth}if(D=i(this,k),!!D&&(f[D]=1,l.strokeStyle=D,l.beginPath(),s.transformFunc&&p==s.panel.yAxis&&k.transform&&(k=k.transform),v=k.cache,k&&c&&(k=k[c]),!(!k&&k!==0)&&(x="top",A="bottom",T="open",_="close",c&&(e.B42(14),x=e.o_T(c,x,"."),e.q08(14),A=e.C2Z(c,A,"."),e.q08(14),T=e.C2Z(c,T,"."),e.B42(14),_=e.o_T(c,_,".")),L=k.Close,M=k.Open===void 0?L:k.Open,F=k.High===void 0?Math.max(L,M):k.High,P=k.Low===void 0?Math.min(L,M):k.Low,!(!L&&L!=="0"*1)))){if(e.q08(0),E=e.C2Z($,b),E<a.cacheLeft||E>a.cacheRight||!v[x]){if(O=this.pixelFromTransformedValue(F,a,p),I=this.pixelFromTransformedValue(P,a,p),O=Math.floor(O),I=Math.floor(I),e.B42(8),g=e.C2Z(I,O),v[T]=p.semiLog?p.height*(1-(Math.log(Math.max(M,"0">>0))/Math.LN10-p.logLow)/p.logShadow):(p.high-M)*p.multiplier,v[_]=p.semiLog?p.height*(1-(Math.log(Math.max(L,0))/Math.LN10-p.logLow)/p.logShadow):(p.high-L)*p.multiplier,Math.abs(v[_]-v[T])<1&&(v[_]=v[T]),v[T]=Math.floor(v[T]),v[_]=Math.floor(v[_]),p.flipped?(v[T]=p.bottom-v[T],v[_]=p.bottom-v[_]):(v[T]+=p.top,v[_]+=p.top),o[$]=v[_],O<y){if(O+g<y){v[x]=O,v[A]=O;continue}e.B42(15),g-=e.o_T(O,1,y),e.q08(8),O=e.C2Z(y,1)}O+g>d&&(e.q08(13),g=e.C2Z(1,d,O)),v[x]=O,e.B42(0),v[A]=e.o_T(g,O)}B=!n.highlight&&"0.5"*1,N=Math.floor(w)+B,R=v[T]+B,q=v[_]+B,Y=v[x]+B,z=v[A]+B,Y<d&&z>y&&k.High!=k.Low&&(e.q08(8),l.moveTo(N,e.C2Z(Y,C)),e.q08(0),l.lineTo(N,e.C2Z(C,z))),n.type!="hlc"&&R>y&&R<d&&(l.moveTo(N,R),e.B42(8),l.lineTo(e.C2Z(N,m),R)),q>y&&q<d&&(l.moveTo(N,q),e.B42(0),l.lineTo(e.o_T(m,N),q)),l.stroke()}}l.lineWidth=1,s.pixelCacheExpired=!1,V={colors:[],cache:o};for(var te in f)t.equals(te,this.containerColor)||V.colors.push(te);return V},t.ChartEngine.prototype.drawWaveChart=function(a,r){var i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_;i="stx_",i+="line_",i+="chart",n="stx_line_",n+="ch",n+="art",s=a.chart,h=s.dataSegment,o=new Array(h.length),l=s.context,r||(r={}),u=r.yAxis||a.yAxis,this.startClip(a.name),l.beginPath(),c=!1,p=!1,y=a.yAxis.top,d=a.yAxis.bottom;function L(N){return b.pixelFromTransformedValue(N,a,u)}g=a.left+Math.floor(-.5*this.layout.candleWidth+this.micropixels),b=this;for(var M=0;M<=h.length;M++)if(g+=this.layout.candleWidth,f=h[M],!!f){if(f.projection)break;if(s.transformFunc&&u==s.panel.yAxis&&f.transform&&(f=f.transform),f&&r.field&&(f=f[r.field]),!(!f&&f!==0)&&(m=f.Close,C=f.Open===void 0?m:f.Open,S=f.High===void 0?Math.max(m,C):f.High,w=f.Low===void 0?Math.min(m,C):f.Low,!(!m&&m!==0))){e.q08(25);var F=e.o_T(14,5,2,20,10);e.q08(20);var P=e.C2Z(25,8,25);if(k=g-F*this.layout.candleWidth/P,D=L(C),D<y){if(D=y,p){l.moveTo(k,D);continue}p=!0}else if(D>d){if(D=d,p){l.moveTo(k,D);continue}p=!0}else p=!1;if(c)l.lineTo(k,D);else{c=!0,e.B42(26);var E=e.o_T(233,11,11,4,13);v=s.dataSet.length-s.scroll-E,v<0?l.moveTo(k,D):v>=0&&(x=s.dataSet[v],x.transform&&(x=x.transform),A=x.Close,A=L(A),A=Math.min(Math.max(A,y),d),l.moveTo(a.left+(M-1)*this.layout.candleWidth+this.micropixels,A),l.lineTo(k,D)),l.moveTo(k,D)}e.B42(21);var O=e.C2Z(8,24,2,380);if(k+=this.layout.candleWidth/O,C<m){D=L(w),D<y&&(D=y),D>d&&(D=d),l.lineTo(k,D),e.q08(27);var I=e.C2Z(24,7,17,11,1);k+=this.layout.candleWidth/I,D=L(S),D<y&&(D=y),D>d&&(D=d),l.lineTo(k,D)}else{D=L(S),D<y&&(D=y),D>d&&(D=d),l.lineTo(k,D),e.B42(0);var B=e.o_T(3,1);k+=this.layout.candleWidth/B,D=L(w),D<y&&(D=y),D>d&&(D=d),l.lineTo(k,D)}k+=this.layout.candleWidth/4,D=L(m),o[M]=D,D<y&&(D=y),D>d&&(D=d),l.lineTo(k,D)}}return T=this.canvasStyle(n),T.width&&parseInt(T.width,"10"^0)<=25?l.lineWidth=Math.max(1,t.stripPX(T.width)):l.lineWidth=1,r.highlight&&(l.lineWidth*=2),this.canvasColor(i),r.color&&(l.strokeStyle=r.color),!r.highlight&&this.highlightedDraggable&&(l.globalAlpha*=.3),l.stroke(),l.closePath(),_={colors:[l.strokeStyle],cache:o},this.endClip(),l.lineWidth=1,_},t.ChartEngine.prototype.drawHistogram=function(a,r){var i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V;if(i="cha",i+="r",i+="t",!r||!r.length||(n=a.panel,n||(n=i),s=this.panels[n],!s))return;for(h=a.yAxis?a.yAxis:s.yAxis,o=a.type,l=this.chart.dataSegment,u=!1,c=1,p=1,d="0">>0;d<r.length;d++)u|=r[d].border_color_up&&!t.isTransparent(r[d].border_color_up),u|=r[d].border_color_down&&!t.isTransparent(r[d].border_color_down),c=r[d].opacity_up,p=r[d].opacity_down,!a.highlight&&this.highlightedDraggable&&(c*=.3,p*=.3);a.borders===!1&&(u=!1),a.name||(a.name="Data"),g=h.multiplier,a.heightPercentage||(a.heightPercentage=.7),a.widthFactor||(a.widthFactor=.8);function K(ee,$,ie,te,re,H,U,G,ae){var ne,oe,le,he,ue,ce,de,Ce,pe,xe,Te,be,_e,Be,Pe,Ie,Le;te||(te=1),M.globalAlpha=te,M.beginPath(),e.B42(0),ne=e.o_T(.5,D),oe=Math.floor(O.pixelFromBar(0,s.chart)-O.layout.candleWidth/2),le=oe;for(var Fe="0"<<0;Fe<l.length;Fe++){if(he="clu",he+="s",he+="te",he+="red",ue=E[Fe]||D,Fe===0&&(ne=ue),!l[Fe]||!l[Fe][ee]){ne=ue,le+=O.layout.candleWidth;continue}if(ce=l[Fe],de=ce[ee],typeof de=="object"&&de[$]&&(de=de[$]),e.B42(28),Ce=e.C2Z(de,f,g),!isNaN(Ce)){if(pe=O.layout.candleWidth,ce.candleWidth&&(pe=ce.candleWidth,Fe===0&&(oe=le=Math.floor(O.pixelFromBar(0,s.chart)-ce.candleWidth/2))),xe=Math.floor(ue-Ce)+.5,xe>ue&&!v&&(xe=ue),ae&&ae.indexOf(Fe)==-1||!ae&&(H&&ce.Close<ce.iqPrevClose||!H&&ce.Close>=ce.iqPrevClose)){ne=xe,le+=pe;continue}Te=pe/O.layout.candleWidth,F?(e.q08(29),be=Math.round(e.C2Z(le,U,Te,F,G)),e.q08(0),_e=e.o_T(re?"0"-0:L,be),Be=be+Math.round(G*Te)-(re?0:L)):(e.q08(29),be=e.o_T(le,U,Te,F,G),_e=Math.round(be)+(re?0:L),Be=Math.round(be+G*Te)-(re?0:L)),Be-_e<2&&(e.B42(0),Be=e.o_T(1,_e)),Pe=re?0:.5,_e%1==Pe&&(_e+=.5),Be%("1"-0)==Pe&&(e.B42(8),Be+=e.o_T("0.5",0)),M.moveTo(Be,ue),D!=ue&&re&&!F&&E[Fe+1]&&M.moveTo(Be,Math.max(xe,Math.min(ue,E[Fe+"1"*1]))),M.lineTo(Be,xe),M.lineTo(_e,xe),re&&U?(P[Fe]>xe||Fe===0)&&M.lineTo(_e,Math.min(ue,P[Fe])):re&&!F&&o=="clustered"?Fe>0&&P[Fe-1]&&P[Fe-1]>xe&&M.lineTo(_e,Math.min(ue,P[Fe-1])):re&&!F?(ne>xe||Fe===0)&&M.lineTo(_e,Math.min(ue,ne)):M.lineTo(_e,ue),ne=xe,le+=pe,(o!=he||re)&&(P[Fe]=xe)}}re?(Ie="au",Ie+="t",Ie+="o",M.strokeStyle=!ie||ie==Ie?O.defaultColor:ie,M.stroke()):(Le="a",Le+="ut",Le+="o",M.fillStyle=!ie||ie==Le?O.defaultColor:ie,M.fill()),e.f9T(),M.closePath()}b=0,f=0;for(var Q=0;Q<this.chart.maxTicks;Q++)if(m=l[Q],!!m)for(C=0,d=0;d<r.length;d++)S=m[r[d].field],(S||S===0)&&(w="st",w+="acked",k="Clo",k+="se",y=r[d].subField||this.chart.defaultPlotField||k,typeof S=="object"&&S[y]&&(S=S[y]),o==w?C+=S:C=S,C>b&&(b=C),C<f&&(f=C));if(b===0&&f===0){this.displayErrorAsWatermark(n,this.translateIf(a.name+" Not Available"));return}if(v=!1,a.bindToYAxis)h.baseline&&(f=h.baseline.value,v=!0),D=Math.floor(this.pixelFromPrice(f,s,h))+(h.flipped?-.5:.5);else{h.flipped?(D=Math.floor(h.top)-.5,x=Math.floor(h.bottom)-.5):(D=Math.floor(h.bottom)+.5,x=Math.floor(h.top)+.5),e.q08(30),A=e.C2Z(0,"1473426493"),T=289094255,_=2;for(var j=1;e.X30(j.toString(),j.toString().length,38722)!==A;j++)g=Math.abs(D-x)*a.heightPercentage/(b-f),_+=2;e.X30(_.toString(),_.toString().length,89412)!==T&&(g=Math.abs(D*x)/a.heightPercentage*(b+f))}for(this.startClip(n),L=this.layout.candleWidth<=("1"^0)||!u?0:.5,M=this.chart.context,h.flipped&&(M.translate(0,2*h.top),M.scale(1,-1)),F=Math.max(0,(1-a.widthFactor)*this.layout.candleWidth/("2">>64)),P=new Array(l.length),E=[],O=this,I=1,d=0;d<r.length;d++){if(B="funct",B+="ion",N=r[d],I=this.layout.candleWidth*a.widthFactor,F&&this.layout.candleWidth-I<=2&&(u=!1),e.q08(30),R=e.o_T(64,"0"),o=="clustered"&&(R=d,I/=r.length),y=N.subField||this.chart.defaultPlotField||"Close",typeof N.color_function==B){Y={};for(var Z=0;Z<l.length;Z++)l[Z]&&(V="s",V+="t",V+="r",V+="ing",q=N.color_function(l[Z]),typeof q==V&&(q={fill_color:q,border_color:q}),q.hasOwnProperty("border_opacity")||(q.border_opacity=q.opacity),z=q.fill_color+","+q.border_color,z in Y?Y[z].positions.push(Z):(q.positions=[Z],Y[z]=q));for(z in Y)q=Y[z],K(N.field,y,q.fill_color,q.opacity,null,null,R,I,q.positions),K(N.field,y,q.border_color,q.border_opacity,!0,null,R,I,q.positions)}else K(N.field,y,N.fill_color_up,c,null,!0,R,I),K(N.field,y,N.fill_color_down,p,null,null,R,I),this.layout.candleWidth>=2&&u&&(K(N.field,y,N.border_color_up,c,!0,!0,R,I),K(N.field,y,N.border_color_down,p,!0,null,R,I));o=="stacked"&&(E=t.shallowClone(P))}M.globalAlpha=1,this.endClip()},e.f9T(),t.ChartEngine.prototype.scatter=function(a,r){var i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k;i="stx_scat",i+="t",i+="er_char",i+="t",n=a.chart,s=n.dataSegment,h=new Array(s.length),o=this.chart.context,this.canvasColor(i),r||(r={}),l=r.field||n.defaultPlotField,u=r.yAxis||a.yAxis,c=r.subField||n.defaultPlotField||"Close",this.startClip(a.name),o.beginPath(),o.lineWidth=r.lineWidth||4,r.highlight&&(o.lineWidth*=2),!r.highlight&&this.highlightedDraggable&&(o.globalAlpha*=.3),r.color&&(o.strokeStyle=r.color),p=u.top,y=u.bottom,d=this.layout.candleWidth,e.B42(31);var D=e.C2Z(13,3,131,10,3);g=a.left-.5*d+this.micropixels-D;for(var v=0;v<=s.length;v++)if(e.B42(23),g+=e.o_T("2",d),d=this.layout.candleWidth,e.B42(32),g+=e.C2Z(2,"2",d),b=s[v],!!b&&(b.candleWidth&&(g+=(b.candleWidth-d)/("2">>0),d=b.candleWidth),!b.projection)){n.transformFunc&&u==n.panel.yAxis&&b.transform&&(b=b.transform),f=b[l],f&&f[c]!==void 0&&(f=f[c]),f instanceof Array||(f=[f]),"Scatter"in b&&(f=b.Scatter);for(var x=0;x<f.length;x++)!f[x]&&f[x]!==0||(m=f[x],C=0,f[x]instanceof Array&&(m=f[x][0],C=f[x][2]),S=u.semiLog?u.height*(1-(Math.log(Math.max(m,0))/Math.LN10-u.logLow)/u.logShadow):(u.high-m)*u.multiplier,u.flipped?(e.B42(8),S=e.C2Z(y,S)):S+=p,!(S<p)&&(S>y||(w=2,C&&(e.B42(2),w=e.C2Z(C,d)),e.q08(8),o.moveTo(e.C2Z(g,w),S),e.q08(0),o.lineTo(e.C2Z(w,g),S),h[v]=S)))}return o.stroke(),o.closePath(),k={colors:[o.strokeStyle],cache:h},this.endClip(),o.lineWidth=1,k}};Os=W=>{var e,t,a,r,i,n,s,h,o,l,u,c,p,y,d,g;e="a",e+="xisLabe",e+="l",t="a",t+="ut",t+="o",a="a",a+="ut",a+="o",r="sol",r+="i",r+="d",i="s",i+="o",i+="lid",n="so",n+="lid",s="s",s+="o",s+="lid",h="a",h+="u",h+="to",o="a",o+="uto",l="s",l+="ol",l+="i",l+="d",u="a",u+="u",u+="to",c="#7D",c+="A6",c+="F5",p="un",p+="de",p+="fi",p+="ned",y="un",y+="def",y+="ine",y+="d",d=typeof _CIQ!==y?_CIQ:W.CIQ,g=typeof _timezoneJS!==p?_timezoneJS:W.timezoneJS,d.ChartEngine.drawingTools={},d.ChartEngine.currentVectorParameters={vectorType:null,pattern:"solid",lineWidth:1,fillColor:c,currentColor:u,axisLabel:!0,fibonacci:{trend:{color:"auto",parameters:{pattern:l,opacity:.25,lineWidth:1}},fibs:[{level:-.786,color:"auto",parameters:{pattern:"solid",opacity:"0.25"-0,lineWidth:1}},{level:-.618,color:o,parameters:{pattern:"solid",opacity:.25,lineWidth:"1"|1},display:!0},{level:-.5,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:-.382,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:-.236,color:h,parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:0,color:"auto",parameters:{pattern:s,lineWidth:1},display:!0},{level:.236,color:"auto",parameters:{pattern:n,opacity:.25,lineWidth:1}},{level:.382,color:"auto",parameters:{pattern:i,opacity:.25,lineWidth:1},display:!0},{level:.5,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:.786,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:"1">>0,color:"auto",parameters:{pattern:r,lineWidth:1},display:!0},{level:1.272,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:1.382,color:a,parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:1.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:2.618,color:t,parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:"4.236"*1,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}}],extendLeft:!1,printLevels:!0,printValues:!1,timezone:{color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}}},volumeProfile:{priceBuckets:30},annotation:{font:{style:null,size:null,weight:null,family:null}}},d.ChartEngine.registerDrawingTool=function(b,f){X.Q1Y(),d.ChartEngine.drawingTools[b]=f},d.ChartEngine.completeDrawing=function(b){var f;!b||!b.activeDrawing||(f=b.activeDrawing,b.keepDrawingToolSelected||(b.drawingContainer&&b.drawingContainer.tool?b.drawingContainer.tool({node:null},"notool"):b.changeVectorType("")),b.dispatch("drawingComplete",{stx:b,drawing:f}))},d.ChartEngine.prototype.keepDrawingToolSelected=!1,d.ChartEngine.prototype.setDrawingContainer=function(b){X.Q1Y(),this.drawingContainer=b},d.ChartEngine.prototype.exportDrawings=function(){var b;b=[];for(var f=0;f<this.drawingObjects.length;f++)b.push(this.drawingObjects[f].serialize());return b},d.ChartEngine.prototype.abortDrawings=function(b){var f;b!==!1&&(b=!0);for(var m=this.drawingObjects.length-1;m>=0;m--)f=this.drawingObjects[m],f.abort(!0),(b||!f.permanent)&&this.drawingObjects.splice(m,1)},d.ChartEngine.prototype.importDrawings=function(b){var f,m,C,S,w;if(d.Drawing)for(var k=0;k<b.length;k++)f="retra",f+="ce",f+="ment",m="fib",m+="o",m+="nacci",C=b[k],C.name==m&&(C.name=f),S=d.ChartEngine.drawingTools[C.name],S||d.Drawing[C.name]&&(S=d.Drawing[C.name],d.ChartEngine.registerDrawingTool(C.name,S)),S&&(w=new S,w.reconstruct(this,C),this.drawingObjects.push(w))},d.ChartEngine.prototype.clearDrawings=function(b,f){var m,C,S,w,k,D;if(f!==!1&&(f=!0),m=this.exportDrawings(),this.abortDrawings(f),b?this.undoStamps=[]:this.undoStamp(m,this.exportDrawings()),this.changeOccurred("vector"),this.cancelTouchSingleClick=!0,d.clearCanvas(this.chart.tempCanvas,this),this.draw(),X.Q1Y(),C=this.controls.mSticky,C){S="n",S+="one",C.style.display=S,w=-1207506050,k=-866737851,D=2;for(var v=1;X.X30(v.toString(),v.toString().length,99226)!==w;v++)C.children[0].innerHTML="",D+=2;X.X30(D.toString(),D.toString().length,85552)!==k&&(C.children[2].innerHTML="")}},d.ChartEngine.prototype.createDrawing=function(b,f){var m,C;if(d.Drawing){m=new d.Drawing[b],m.reconstruct(this,f),C=new d.Drawing[b],C.stx=this,X.Q1Y(),C.copyConfig();for(var S in C)m[S]=m[S]||C[S];return this.drawingObjects.push(m),this.draw(),m}},d.ChartEngine.prototype.removeDrawing=function(b){for(var f,m=0;m<this.drawingObjects.length;m++)if(this.drawingObjects[m]==b){f="vec",f+="tor",this.drawingObjects.splice(m,1),this.changeOccurred(f),this.draw();return}},d.ChartEngine.prototype.undo=function(){var b=X,f,m,C,S;if(!this.runPrepend("undo",arguments)){this.activeDrawing&&(f="stx_cro",f+="s",f+="shair",this.activeDrawing.abort(),this.activeDrawing.hidden=!1,this.drawingSnapshot=null,this.activateDrawing(null),d.clearCanvas(this.chart.tempCanvas,this),this.draw(),this.controls.crossX.classList.replace("stx_crosshair_drawing","stx_crosshair"),this.controls.crossY.classList.replace("stx_crosshair_drawing",f),d.ChartEngine.drawingLine=!1),m=1642744695,b.B42(33),C=-b.C2Z("1003914695",32),S=2;for(var w=1;b.X30(w.toString(),w.toString().length,"40627"^0)!==m;w++)this.runAppend("",arguments),b.B42(30),S+=b.C2Z(32,"2");b.X30(S.toString(),S.toString().length,20625)!==C&&this.runAppend("undo",arguments)}},d.ChartEngine.prototype.undoStamp=function(b,f){this.undoStamps.push(b),this.dispatch("undoStamp",{before:b,after:f,stx:this})},d.ChartEngine.prototype.undoLast=function(){this.activeDrawing?this.undo():this.undoStamps.length&&(this.drawingObjects=[],this.importDrawings(this.undoStamps.pop()),this.changeOccurred("vector"),this.draw())},d.ChartEngine.prototype.addDrawing=function(b){X.Q1Y();var f;f=this.exportDrawings(),this.drawingObjects.push(b),this.undoStamp(f,this.exportDrawings())},d.ChartEngine.prototype.repositionDrawing=function(b,f){var m,C,S;X.Q1Y(),this.currentPanel.name==b.panelName&&(m=this.panels[b.panelName],C=this.adjustIfNecessary(m,this.crosshairTick,b.valueFromPixel(this.backOutY(d.ChartEngine.crosshairY),m,this.getYAxisByField(m,b.field))),S=this.chart.tempCanvas,d.clearCanvas(S,this),f?(this.drawingSnapshot=this.exportDrawings(),b.render(S.context)):(b.reposition(S.context,b.repositioner,this.crosshairTick,C),this.drawingSnapshot&&this.undoStamp(d.shallowClone(this.drawingSnapshot),this.exportDrawings()),this.drawingSnapshot=null),b.measure&&b.measure())},d.ChartEngine.prototype.activateRepositioning=function(b){var f;f="blo",f+="c",f+="k",this.repositioningDrawing=b,b&&(this.draw(),this.repositionDrawing(b,!0)),this.chart.tempCanvas.style.display=b?f:"none"},d.ChartEngine.prototype.activateDrawing=function(b,f){var m;if(f||(f=this.currentPanel),this.drawingSnapshot=null,!b)return this.activeDrawing=null,this.chart.tempCanvas.style.display="none",C(this),!1;m=d.ChartEngine.drawingTools[b],m||d.Drawing[b]&&(m=d.Drawing[b],d.ChartEngine.registerDrawingTool(b,m));function C(S){var w;S.layout.studies&&(w=S.layout.studies[f.name],w&&!w.overlay&&delete S.overlays[w.name])}return m&&(this.activeDrawing=new m,this.activeDrawing.construct(this,f),!this.charts[f.name]&&this.activeDrawing.chartsOnly)?(this.activeDrawing=null,C(this),!1):(this.chart.tempCanvas.style.display="block",this.controls.drawOk&&(this.controls.drawOk.style.display="none"),C(this),!0)},d.ChartEngine.prototype.drawingClick=function(b,f,m){var C,S,w,k,D,v,x,A,T,_,L,M,F,P,E;if(d.Drawing&&b&&this.openDialog===""&&!(!this.activeDrawing&&!this.activateDrawing(this.currentVectorParameters.vectorType,b))){if(this.activeDrawing){if(this.userPointerDown&&!this.activeDrawing.dragToDraw){d.ChartEngine.drawingLine||this.activateDrawing(null),C=1062533067,S=-1788533267,w=2;for(var O=1;X.Y5b(O.toString(),O.toString().length,73638)!==C;O++)return;if(X.X30(w.toString(),w.toString().length,28501)!==S)return}else if(!this.activeDrawing.p0){if(k="L",k+="o",k+="w",D=this.highlightedDataSetField,this.magnetizedPrice!==null&&(b!==this.chart.panel||["Open","High",k,"Close"].indexOf(this.magneticHold)<0)&&(D=d.getObjectChainRoot(this.magneticHold)),!D&&b!=this.chart.panel){for(var I in this.chart.seriesRenderers)if(v=this.chart.seriesRenderers[I],v.params.panel==b.name){D=v.seriesParams[0].field;break}for(var B in this.layout.studies)if(x=this.layout.studies[B],x.panel==b.name){D=Object.keys(x.outputMap)[0];break}}this.activeDrawing.field=D}return A=this.tickFromPixel(f,b.chart),T=this.panels[this.activeDrawing.panelName],this.magnetizedPrice||this.magnetizedPrice===0?_=this.adjustIfNecessary(T,A,this.magnetizedPrice):_=this.adjustIfNecessary(T,A,this.activeDrawing.valueFromPixel(m,T,this.getYAxisByField(T,this.activeDrawing.field))),this.activeDrawing.click(this.chart.tempCanvas.context,A,_)?this.activeDrawing&&(L="s",L+="tx_cr",L+="os",L+="shair",M="stx_cr",M+="osshair",M+="_drawing",d.ChartEngine.drawingLine=!1,d.clearCanvas(this.chart.tempCanvas,this),this.addDrawing(this.activeDrawing),d.ChartEngine.completeDrawing(this),this.activateDrawing(null),this.adjustDrawings(),this.draw(),this.changeOccurred("vector"),this.controls.crossX.classList.replace(M,"stx_crosshair"),this.controls.crossY.classList.replace("stx_crosshair_drawing",L)):(F="stx_crosshair_",F+="drawing",P="stx_cro",P+="ssha",P+="ir",E="drawi",E+="n",E+="g",this.changeOccurred(E),d.ChartEngine.drawingLine=!0,this.controls.crossX.classList.replace(P,F),this.controls.crossY.classList.replace("stx_crosshair","stx_crosshair_drawing")),!0}return!1}},d.ChartEngine.prototype.rightClickDrawing=function(b,f,m){var C,S,w;C="rightClickD",C+="raw",C+="ing",!this.runPrepend("rightClickDrawing",arguments)&&(b.permanent||(this.callbackListeners.drawingEdit.length?this.dispatch("drawingEdit",{stx:this,drawing:b,forceEdit:f,forceText:m}):(S=b.abort(),S||(w=this.exportDrawings(),this.removeDrawing(b),this.undoStamp(w,this.exportDrawings())),this.changeOccurred("vector")),this.runAppend(C,arguments)))},d.ChartEngine.prototype.magnetize=function(){var b=X,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N;if(f="#398",f+="df",f+="f",m=this,this.magnetizedPrice=null,!!this.preferences.magnet&&!this.runPrepend("magnetize",arguments)&&!this.repositioningDrawing&&(C=this.currentVectorParameters.vectorType,!(!C||C=="projection"||C=="freeform")&&!((C=="annotation"||C=="callout")&&d.ChartEngine.drawingLine)&&(S=this.activeDrawing?this.panels[this.activeDrawing.panelName]:this.currentPanel,w=S.chart,k=this.crosshairTick,!(k>w.dataSet.length)&&(D=w.dataSet[k],!!D)))){if(x=this.getRenderedItems(),A=["Open","High","Low","Close"],this.activeDrawing&&this.activeDrawing.penDown)if(this.magneticHold)A.indexOf(this.magneticHold)!=-1&&x.indexOf("High")!=-1?x=A:x=[this.magneticHold];else return;else this.magneticHold=null;b.q08(34),T=b.C2Z("1000000000",0),_=parseFloat(this.preferences.magnet);for(var R=0;R<x.length;R++)if(L=this.getYAxisByField(S,x[R])||S.yAxis,M=w.transformFunc&&L===w.yAxis,M&&D.transform&&(D=D.transform),F=D[x[R]],P=d.existsInObjectChain(D,x[R]),P&&(F=P.obj[P.member]),(F||F===0)&&(E=this.pixelFromTransformedValue(F,S,L),Math.abs(this.cy-E)<T)){if(T=Math.abs(this.cy-E),_&&_<=T)continue;this.magnetizedPrice=F,M&&function(){var z,V;z=w.untransformFunc,V=d.getObjectChainRoot(x[R]),z&&w.series[V]&&(w.untransformFunc=(K,Q,j,Z)=>(b.Q1Y(),z(K,Q,j,Z,V))),m.magnetizedPrice=m.valueFromPixel(E,S),b.Q1Y(),w.untransformFunc=z}(),v=E,this.magneticHold=x[R]}O=this.pixelFromTick(k,w),I=v,d.clearCanvas(w.tempCanvas,this),B=w.tempCanvas.context,B.beginPath(),B.lineWidth=1,b.B42(0);var q=b.C2Z(3,9);b.q08(35);var Y=b.o_T(7,48,1,202,5);N=Math.max(this.layout.candleWidth,q)/Y,B.arc(O,I,Math.min(N,8),0,2*Math.PI,!1),B.fillStyle="#398dff",B.strokeStyle=f,B.fill(),B.stroke(),B.closePath(),w.tempCanvas.style.display="block",this.anyHighlighted&&this.container.classList.remove("stx-draggable"),this.activeDrawing&&this.activeDrawing.move(B,this.crosshairTick,this.activeDrawing.valueFromPixel(I,S,this.getYAxisByField(S,this.activeDrawing.field))),this.runAppend("magnetize",arguments)}},d.ChartEngine.prototype.changeVectorType=function(b){var f=X,m,C;if(f.Q1Y(),this.currentVectorParameters.vectorType=b,d.Drawing&&d.Drawing.initializeSettings(this,b),d.ChartEngine.drawingLine&&this.undo(),!this.container.classList.contains("stx-crosshair-on")&&b){var{chart:S,left:w,top:k}=this;f.B42(36);var D=f.o_T(5,28,6);m=S.width/D+w+S.left,f.B42(37);var v=f.C2Z(15,77,5);C=S.height/v+k+S.top,this.mousemoveinner(m,C)}this.doDisplayCrosshairs()},d.ChartEngine.prototype.changeVectorParameter=function(b,f){var m,C,S,w;if(m="un",m+="d",m+="ef",m+="ined",C="li",C+="ne",C+="Wi",C+="dth",S="axis",S+="La",S+="b",S+="el",b==S)f=f.toString()==="true"||Number(f);else if(b==C)f=Number(f);else if(b=="fontSize"){X.B42(38);var k=X.C2Z(28,19,2,19,17);f=parseInt(f,k)+"px"}return w=this.currentVectorParameters,typeof w[b]!==m||b.substr(0,4)=="font"&&(b=b.substr(4).toLowerCase(),b=="family"&&f.toLowerCase()=="default"&&(f=null),w=w.annotation.font,typeof w[b]<"u")?(w[b]=f,!0):!1},d.ChartEngine.prototype.drawVectors=function(){var b,f,m,C,S;if(!this.vectorsShowing&&!this.runPrepend("drawVectors",arguments)){if(this.vectorsShowing=!0,!this.chart.hideDrawings&&!this.highlightedDraggable){for(b={},m="0"|0;m<this.drawingObjects.length;m++)C=this.drawingObjects[m],!C.hidden&&this.repositioningDrawing!==C&&(f=C.panelName,!(!this.panels[C.panelName]||this.panels[C.panelName].hidden)&&(b[f]||(b[f]=[]),b[f].push(C)));for(f in b){for(this.startClip(f),S=b[f],m="0"*1;m<S.length;m++)S[m].render(this.chart.context);this.endClip()}}this.runAppend("drawVectors",arguments)}},d.ChartEngine.prototype.adjustDrawings=function(){X.Q1Y();for(var b,f="0"-0;f<this.drawingObjects.length;f++)b=this.drawingObjects[f],this.panels[b.panelName]&&b.adjust()},d.Drawing=d.Drawing||function(){var b,f,m;b=1604502446,f=-529023204,m=2;for(var C=1;X.X30(C.toString(),C.toString().length,15028)!==b;C++)this.chartsOnly=!0,this.penDown=!0,m+=2;X.Y5b(m.toString(),m.toString().length,66660)!==f&&(this.chartsOnly=!1,this.penDown=!1),this.chartsOnly=!1,this.penDown=!1},d.Drawing.getDrawingParameters=function(b,f){var m,C,S,w;try{m=new d.Drawing[f]}catch{}if(!m)return null;m.stx=b,m.copyConfig(!0),C={},S=m.configs;for(var k=0;k<S.length;k++)C[S[k]]=m[S[k]];return w=b.canvasStyle("stx_annotation"),w&&C.font&&(C.font.size=w.fontSize,C.font.family=w.fontFamily,C.font.style=w.fontStyle,C.font.weight=w.fontWeight),C},d.Drawing.saveConfig=function(b,f){var m,C;f&&(m=b.preferences,m.drawings||(m.drawings={}),m.drawings[f]={},C=new d.Drawing[f],C.stx=b,d.Drawing.copyConfig(C),C.configs.forEach(function(S){X.f9T(),m.drawings[f][S]=C[S]}),b.changeOccurred("preferences"))},d.Drawing.restoreDefaultConfig=function(b,f,m){var C;C="preferen",C+="ces",m?b.preferences.drawings=null:b.preferences.drawings[f]=null,b.changeOccurred(C),b.currentVectorParameters=d.clone(d.ChartEngine.currentVectorParameters),b.currentVectorParameters.vectorType=f},d.Drawing.initializeSettings=function(b,f){var m,C;m=d.Drawing[f],m&&(C=new m,C.initializeSettings&&C.initializeSettings(b))},d.Drawing.updateSource=function(b,f,m,C){var S,w,k,D;if(S="vect",S+="or",!!f){w=!1;for(var v in b.drawingObjects)k=b.drawingObjects[v],k.field&&(m?k.field==f?(k.field=m,w=!0):k.field.indexOf(f)>-1&&k.field.indexOf(f+"-")==-1&&(k.field=k.field.replace(f,m),w=!0):(D="--",D+=">",(k.field.split(D)[0]==f||k.panelName==f)&&(k.panelName=C,w=!0)));w&&b.changeOccurred(S)}},d.Drawing.prototype.copyConfig=function(b){X.f9T(),d.Drawing.copyConfig(this,b)},d.Drawing.copyConfig=function(b,f){var m,C,S,w,k;for(X.f9T(),m=b.stx.currentVectorParameters,C=b.configs,S=0;S<C.length;S++)w=C[S],w=="color"?b.color=m.currentColor:w=="parameters"?b.parameters=d.clone(m.fibonacci):w=="font"?b.font=d.clone(m.annotation.font):b[w]=m[w];if(f&&(k=b.stx.preferences,k&&k.drawings))for(d.extend(b,k.drawings[m.vectorType]),S=0;S<C.length;S++)w=C[S],w=="color"?m.currentColor=b.color:w=="parameters"?m.fibonacci=d.clone(b.parameters):w=="font"?m.annotation.font=d.clone(b.font):m[w]=b[w]},d.Drawing.prototype.dragToDraw=!1,d.Drawing.prototype.permanent=!1,d.Drawing.prototype.chartsOnly=!1,d.Drawing.prototype.abort=function(b){},d.Drawing.prototype.measure=function(){},d.Drawing.prototype.construct=function(b,f){this.stx=b,this.panelName=f.name},d.Drawing.prototype.isAllowed=function(b,f){return!0},d.Drawing.prototype.render=function(b){console.warn("must implement render function!")},d.Drawing.prototype.click=function(b,f,m){console.warn("must implement click function!")},d.Drawing.prototype.move=function(b,f,m){X.f9T(),console.warn("must implement move function!")},d.Drawing.prototype.reposition=function(b,f,m,C){},d.Drawing.prototype.intersected=function(b,f,m){var C;C="must imple",X.Q1Y(),C+="ment intersected fun",C+="ction!",console.warn(C)},d.Drawing.prototype.reconstruct=function(b,f){console.warn("must implement reconstruct function!")},d.Drawing.prototype.serialize=function(){console.warn("must implement serialize function!")},d.Drawing.prototype.adjust=function(){var b;b="must impleme",b+="nt adjust function!",console.warn(b)},d.Drawing.prototype.highlight=function(b){return X.Q1Y(),b&&!this.highlighted?this.highlighted=b:!b&&this.highlighted&&(this.highlighted=b),this.highlighted},d.Drawing.prototype.littleCircleRadius=function(){X.f9T();var b;return b=6,b},d.Drawing.prototype.littleCircle=function(b,f,m,C){var S,w;this.permanent||(S=this.stx.defaultColor,w=d.chooseForegroundColor(S),b.beginPath(),b.lineWidth=1,b.arc(f,m,this.littleCircleRadius(),0,2*Math.PI,!1),C?b.fillStyle=S:b.fillStyle=w,b.strokeStyle=S,b.setLineDash([]),b.fill(),b.stroke(),b.closePath())},d.Drawing.prototype.rotator=function(b,f,m,C){var S=X,w,k,D;this.permanent||(w=this.littleCircleRadius(),k=this.stx.defaultColor,b.beginPath(),b.lineWidth=2,C||(b.globalAlpha=.5),S.B42(0),D=S.o_T(w,4),b.arc(f,m,D,0,3*Math.PI/2,!1),S.q08(14),b.moveTo(S.C2Z(f,D,2),S.C2Z(2,m,S.q08(0))),S.q08(0),b.lineTo(S.o_T(D,f),m),S.B42(13),b.lineTo(S.o_T(D,f,2),S.C2Z("2",32,m,S.B42(39))),S.q08(8),b.moveTo(S.o_T(f,2),S.o_T(D,2,m,S.B42(20))),S.q08(8),b.lineTo(f,S.o_T(m,D)),S.B42(40),b.lineTo(S.C2Z("2",f),S.o_T(2,D,m,S.q08(15))),b.strokeStyle=k,b.stroke(),b.closePath(),b.globalAlpha=1)},d.Drawing.prototype.mover=function(b,f,m,C){var S=X,w,k,D,v;if(!this.permanent){w=this.littleCircleRadius(),k=this.stx.defaultColor,D=5,S.B42(0),v=S.C2Z(1,w),b.save(),b.lineWidth=2,b.strokeStyle=k,b.translate(f,m),C||(b.globalAlpha=.5);for(var x=0;x<("4"^0);x++)b.rotate(Math.PI/2),b.beginPath(),b.moveTo(0,v),S.q08(0),b.lineTo(0,S.o_T(D,v)),S.B42(20),b.moveTo(-2,S.o_T(2,D,v)),S.q08(0),b.lineTo(0,S.o_T(D,v)),S.q08(20),b.lineTo(2,S.o_T(2,D,v)),b.closePath(),b.stroke();b.globalAlpha=1,b.restore()}},d.Drawing.prototype.resizer=function(b,f,m,C){var S=X,w,k,D,v;if(!this.permanent){w=this.littleCircleRadius(),k=this.stx.defaultColor,S.q08(41);var x=S.o_T(16,15,19,23);D=x*Math.sqrt(2),S.B42(0),v=S.C2Z(1,w),b.save(),S.q08(33),b.lineWidth=S.C2Z("2",0),b.strokeStyle=k,b.translate(f,m),b.rotate(-(f*m)/Math.abs(f*m)*Math.PI/4),C||(b.globalAlpha=.5);for(var A=0;A<2;A++)b.rotate(Math.PI),b.beginPath(),b.moveTo(0,v),S.q08(0),b.lineTo(0,S.o_T(D,v)),S.B42(20),b.moveTo(-2,S.C2Z(2,D,v)),S.q08(0),b.lineTo(0,S.o_T(D,v)),S.B42(42),b.lineTo(2,S.o_T(D,v,0,"2")),b.closePath(),b.stroke();b.globalAlpha=1,b.restore()}},d.Drawing.prototype.pointIntersection=function(b,f,m,C){X.f9T();var S,w,k,D,v;if(S=this.stx,w=S.panels[this.panelName],!w)return!1;if(this.field&&!C&&(f=this.pixelFromValue(w,b,f,S.getYAxisByField(w,this.field)),b=S.pixelFromTick(b,w.chart),C=!0),C){if(b>=m.cx0&&b<=m.cx1&&f>=m.cy0&&f<=m.cy1)return!0}else{k=172114428,D=-2145623757,v=2;for(var x=1;X.Y5b(x.toString(),x.toString().length,50927)!==k;x++){if(b<m.x0||b>m.x1||f<=Math.min(m.y0,m.y1)||f<Math.max(m.y0,m.y1))return!1;v+=2}if(X.X30(v.toString(),v.toString().length,72924)!==D&&b>=m.x0&&b<=m.x1&&f>=Math.min(m.y0,m.y1)&&f<=Math.max(m.y0,m.y1))return!0}return!1},d.Drawing.prototype.setPoint=function(b,f,m,C){var S=X,w,k,D,v,x,A,T,_,L,{stx:M}=this,{maxTicks:F=100,dataSet:P=[]}=C||M.chart||{};w=-F,S.B42(8);var E=S.o_T(12,11);k=P.length-E+F,D=null,v=null,typeof f=="number"?D=f:f.length>=8?v=f:D=Number(f),(m||m===0)&&(S.q08(0),this[S.o_T(b,"v")]=m),D!==null?(D=Math.max(D,w),D=Math.min(D,k),x=M.dateFromTick(D,C,!0),S.q08(0),this[S.o_T(b,"tzo")]=x.getTimezoneOffset(),S.q08(0),this[S.o_T(b,"d")]=d.yyyymmddhhmmssmmm(x),S.q08(0),this[S.C2Z(b,"p")]=[D,m]):v!==null&&(A="t",A+="z",A+="o",T=d.strToDateTime(v),!this["tzo"+b]&&this[A+b]!==0&&(S.B42(0),this[S.C2Z(b,"tzo")]=T.getTimezoneOffset()),S.B42(0),this[S.o_T(b,"d")]=v,_=this["tzo"+b]-T.getTimezoneOffset(),T.setMinutes(T.getMinutes()+_),L=!1,this.name!="freeform"&&!d.ChartEngine.isDailyInterval(M.layout.interval)&&!T.getHours()&&!T.getMinutes()&&!T.getSeconds()&&!T.getMilliseconds()&&(L=!0),S.q08(0),this[S.C2Z(b,"p")]=[M.tickFromDate(d.yyyymmddhhmmssmmm(T),C,null,L),m])},d.Drawing.prototype.getLineColor=function(b,f){var m,C,S,w,k,D,v,x,A,T,_,L,M;if(b||(b=this.color),m=this.stx,C=b,!f&&this.highlighted)C=m.getCanvasColor("stx_highlight_vector");else if(d.isTransparent(C))C=m.defaultColor;else if(C=="auto"&&(C=m.defaultColor,this.field)){for(S in m.layout.studies)if(w=m.layout.studies[S],k=w.outputs[w.outputMap[this.field]],k){C=k.color||k;break}for(S in m.chart.seriesRenderers){v=m.chart.seriesRenderers[S];for(var F=0;F<v.seriesParams.length;F++){if(x="Cl",x+="ose",A=v.seriesParams[F],T=A.field,!T&&!v.highLowBars&&(T=this.defaultPlotField||x),A.symbol&&A.subField&&(T+="-->"+A.subField),this.field==T){C=A.color;break}A.field&&A.field==this.field.split("-->")[0]&&(D=A.color)}}D&&(C=D)}C=="auto"&&(C=m.defaultColor),_=-499362323,L=204531062,M=2;for(var P=1;X.X30(P.toString(),P.toString().length,44344)!==_;P++)return C;if(X.X30(M.toString(),M.toString().length,51608)!==L)return C},d.Drawing.prototype.valueFromPixel=function(b,f,m){var C,S,w;return C=f.chart.untransformFunc,S=this.field,C&&f.chart.series[S]&&(f.chart.untransformFunc=(k,D,v,x)=>(X.Q1Y(),C(k,D,v,x,S))),w=this.stx.valueFromPixel(b,f,m),X.Q1Y(),f.chart.untransformFunc=C,w},d.Drawing.prototype.pixelFromValue=function(b,f,m,C){var S,w,k;return S=b.chart.transformFunc,w=this.field,S&&b.chart.series[w]&&(b.chart.transformFunc=(D,v,x,A)=>S(D,v,x,A,w)),X.Q1Y(),k=this.stx.pixelFromValueAdjusted(b,f,m,C),b.chart.transformFunc=S,k},d.Drawing.prototype.boxToPixels=function(b,f,m,C){var S,w,k,D;return S=b.panels[f],w=S.chart.transformFunc,k=this.field,w&&S.chart.series[k]&&(S.chart.transformFunc=(v,x,A,T)=>(X.f9T(),w(v,x,A,T,k))),D=d.convertBoxToPixels(b,f,m,C),S.chart.transformFunc=w,X.f9T(),D},d.Drawing.BaseTwoPoint=function(){this.p0=null,this.p1=null,X.f9T(),this.color=""},d.inheritsFrom(d.Drawing.BaseTwoPoint,d.Drawing),d.Drawing.BaseTwoPoint.prototype.configs=[],d.Drawing.BaseTwoPoint.prototype.lineIntersection=function(b,f,m,C,S,w,k){var D,v;return S||(S=this.p0),w||(w=this.p1),D=this.stx,!(S&&w)||(X.Q1Y(),m.cx0===void 0)?!1:(v={x0:S[0],x1:w[0],y0:S[1],y1:w[1]},k||(v=this.boxToPixels(D,this.panelName,v,D.getYAxisByField(D.panels[this.panelName],this.field))),d.boxIntersects(m.cx0,m.cy0,m.cx1,m.cy1,v.x0,v.y0,v.x1,v.y1,C))},d.Drawing.BaseTwoPoint.prototype.boxIntersection=function(b,f,m){var C,S;if(!this.p0||!this.p1)return!1;var{x0:w,x1:k,y0:D,y1:v,cy0:x,cy1:A}=m;if(w>Math.max(this.p0[0],this.p1[0])||k<Math.min(this.p0[0],this.p1[0]))return!1;var{field:T,panelName:_,stx:L}=this;return T&&(C=L.panels[_],S=L.getYAxisByField(C,T),D=this.valueFromPixel(x,C,S),v=this.valueFromPixel(A,C,S)),!(v>Math.max(this.p0[1],this.p1[1])||D<Math.min(this.p0[1],this.p1[1]))},d.Drawing.BaseTwoPoint.prototype.accidentalClick=function(b,f){var m=X,C,S,w,k,D,v,x,A,T,_;if(C=this.stx,S=C.panels[this.panelName],w=C.pixelFromTick(this.p0[0],S.chart),k=C.pixelFromTick(b,S.chart),D=C.getYAxisByField(S,this.field),v=this.pixelFromValue(S,this.p0[0],this.p0[1],D),x=this.pixelFromValue(S,b,f,D),m.q08(8),A=Math.abs(m.C2Z(k,w)),m.B42(8),m.Q1Y(),T=Math.abs(m.o_T(x,v)),m.B42(43),_=Math.sqrt(m.C2Z(A,T,T,A)),_<10)return this.penDown=!1,C.undo(),!0},d.Drawing.BaseTwoPoint.prototype.click=function(b,f,m){var C,S;return this.copyConfig(),C=this.stx,S=C.panels[this.panelName],this.penDown?(this.accidentalClick(f,m)||(this.setPoint(1,f,m,S.chart),X.f9T(),this.penDown=!1),!0):(this.setPoint(0,f,m,S.chart),this.penDown=!0,!1)},d.Drawing.BaseTwoPoint.prototype.adjust=function(){var b;b=this.stx.panels[this.panelName],b&&(X.f9T(),this.setPoint(0,this.d0,this.v0,b.chart),this.setPoint(1,this.d1,this.v1,b.chart))},d.Drawing.BaseTwoPoint.prototype.move=function(b,f,m){this.penDown&&(X.Q1Y(),this.copyConfig(),this.p1=[f,m],this.render(b))},d.Drawing.BaseTwoPoint.prototype.measure=function(){var b,f,m,C,S;b=this.stx,X.f9T(),this.p0&&this.p1&&(b.setMeasure(this.p0[1],this.p1[1],this.p0[0],this.p1[0],!0,this.name),f=b.controls.mSticky,m=f&&f.querySelector(".mStickyInterior"),m&&(C="<",C+="br",C+=">",S=[],S.push(d.capitalize(this.name)),this.getYValue&&S.push(this.field||b.defaultPlotField||"Close"),S.push(m.innerHTML),m.innerHTML=S.join(C)))},d.Drawing.BaseTwoPoint.prototype.reposition=function(b,f,m,C){var S=X,w,k,D,v,x,A,T;if(w="d",w+="r",w+="a",w+="g",!!f){k=this.stx.panels[this.panelName],D=f.tick-m,v=-1952560522,S.B42(44),x=-S.o_T(0,"1518280742"),A=2;for(var _=1;S.X30(_.toString(),_.toString().length,"62216"|0)!==v;_++)T=f.value-C,A+=2;S.Y5b(A.toString(),A.toString().length,93804)!==x&&(T=f.value%C),f.action=="move"?(this.setPoint(0,f.p0[0]-D,f.p0[1]-T,k.chart),this.setPoint(1,f.p1[0]-D,f.p1["1"|0]-T,k.chart),this.render(b)):f.action==w&&(this[f.point]=[m,C],this.setPoint(0,this.p0["0"|0],this.p0[1],k.chart),this.setPoint(1,this.p1["0"-0],this.p1[1],k.chart),this.render(b))}},d.Drawing.BaseTwoPoint.prototype.drawDropZone=function(b,f,m,C,S){var w,k,D,v,x,A,T;w=this.stx.panels[this.panelName],w&&(k=this.stx,D=w.left,v=w.width,(C||C===0)&&(D=k.pixelFromTick(C,w.chart)),(S||S===0)&&(v=k.pixelFromTick(S,w.chart)),x=k.getYAxisByField(w,this.field),A=this.pixelFromValue(w,C,f,x),T=this.pixelFromValue(w,S,m,x),b.fillStyle="#008000",b.globalAlpha=.2,X.B42(8),b.fillRect(D,A,X.o_T(v,D),X.C2Z(T,A)),b.globalAlpha=1)},d.Drawing.BaseTwoPoint.prototype.valueOnDrawingAxis=function(b,f){var m;X.Q1Y();var{stx:C,panelName:S,field:w}=this;return m=C.panels[S],this.valueFromPixel(C.pixelFromValueAdjusted(m,b,f),m,C.getYAxisByField(m,w))},d.Drawing.annotation=function(){var b;b="a",b+="nno",b+="tati",b+="on",this.name=b,this.arr=[],X.Q1Y(),this.w=0,this.h=0,X.B42(8),this.padding=X.C2Z("5",0),this.text="",this.ta=null,this.border=!0,this.fontSize=0,this.font={},this.defaultWidth=25,this.whitespace=30,this.fontModifier=3},d.inheritsFrom(d.Drawing.annotation,d.Drawing.BaseTwoPoint),d.Drawing.annotation.prototype.getFontString=function(){var b,f,m;b="1",b+="2",b+="px",this.fontDef={style:null,weight:null,size:b,family:null},f=this.stx.canvasStyle("stx_annotation"),f&&(f.fontStyle&&(this.fontDef.style=f.fontStyle),f.fontWeight&&(this.fontDef.weight=f.fontWeight),f.fontSize&&(this.fontDef.size=f.fontSize),f.fontFamily&&(this.fontDef.family=f.fontFamily)),this.font.style&&(this.fontDef.style=this.font.style),this.font.weight&&(this.fontDef.weight=this.font.weight),this.font.size&&(this.fontDef.size=this.font.size),this.font.family&&(this.fontDef.family=this.font.family),this.fontString="",m=!0;for(var C in this.fontDef)this.fontDef[C]&&(m?m=!1:this.fontString+=" ",this.fontString+=this.fontDef[C])},d.Drawing.annotation.prototype.configs=["color","font"],d.Drawing.annotation.prototype.measure=function(){},d.Drawing.annotation.prototype.render=function(b){var f=X,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E;if(m="alph",m+="abeti",m+="c",!this.ta&&(C=this.stx,S=C.panels[this.panelName],f.f9T(),w=C.getYAxisByField(S,this.field),!(!S||this.field&&!w))){k=C.pixelFromTick(this.p0["0"^0],S.chart),D=this.pixelFromValue(S,this.p0[0],this.p0[1],w),b.font=this.fontString,b.textBaseline="middle",v=k,x=D,A=this.w,T=this.h,_=this.getLineColor(),this.stem&&(this.stem.d?(L=C.pixelFromTick(this.stem.t),F=this.pixelFromValue(S,this.stem.t,this.stem.v,w),f.B42(45),M=f.o_T(A,2,v),f.q08(45),P=f.C2Z(T,2,x)):this.stem.x&&(L=v,F=x,v+=this.stem.x,x+=this.stem.y,f.B42(45),M=f.C2Z(A,2,v),f.q08(45),P=f.C2Z(T,2,x)),b.beginPath(),this.borderColor?b.strokeStyle=this.borderColor:b.strokeStyle=_,b.moveTo(L,F),b.lineTo(M,P),b.stroke()),E=b.lineWidth,this.highlighted?(C.canvasColor("stx_annotation_highlight_bg",b),f.q08(8),b.fillRect(f.C2Z(v,E),f.C2Z(E,2,x,T,f.B42(46)),f.o_T(A,"2",E,32,f.B42(47)),f.C2Z(T,E,2,f.q08(48)))):this.fillColor?(b.fillStyle=this.fillColor,f.B42(49),b.fillRect(v,f.o_T("2",x,T),A,T)):this.stem&&(b.fillStyle=C.containerColor,f.q08(50),b.fillRect(v,f.o_T(T,2,x),A,T)),this.borderColor&&(b.beginPath(),b.strokeStyle=this.highlighted?C.getCanvasColor("stx_highlight_vector"):this.borderColor,f.q08(8),b.rect(f.C2Z(v,E),f.C2Z(E,2,x,T,f.q08(46)),f.o_T(A,E,2,f.q08(48)),f.o_T(T,E,"2",f.q08(51))),b.stroke()),this.highlighted?C.canvasColor("stx_annotation_highlight",b):b.fillStyle=_,f.q08(52);var O=f.o_T(13,17,13,11);if(x+=this.padding/O,!this.ta)for(var I=0;I<this.arr.length;I++){b.fillText(this.arr[I],v+this.padding,x-T/2+this.fontSize/2),f.q08(17);var B=f.C2Z(4,8,0);x+=this.fontSize+B}b.textBaseline=m}},d.Drawing.annotation.prototype.onChange=function(b){},d.Drawing.annotation.prototype.edit=function(b,f){var m=X,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q;function Y(j){return m.Q1Y(),function(Z){var ee;j.ta.value!==""&&(j.text=j.ta.value,ee=j.stx,ee.editingAnnotation=!1,j.adjust(),ee.drawingSnapshot?ee.undoStamp(d.shallowClone(ee.drawingSnapshot),ee.exportDrawings()):(d.ChartEngine.completeDrawing(ee),ee.addDrawing(j)),ee.undo(),m.Q1Y(),ee.cancelTouchSingleClick=!0,ee.changeOccurred("vector"))}}C="p",C+="x";function z(j){return function(Z){var ee,$,ie,te,re,H,U,G,ae,ne,oe,le,he;if(Z)switch(ee=Z.keyCode,ee){case 27:j.stx.undo();return}$=j.stx,ie=j.ta,te=ie.value.split(`
`),re=0,$.chart.context.font=j.fontString;for(var ue=0;ue<te.length;ue++)H=$.chart.context.measureText(te[ue]).width,H>re&&(re=H);m.q08(53);var ce=m.o_T(18,18,10,10,2);if(U=(te.length+ce)*(j.fontSize+j.fontModifier),re=Math.max(re,j.defaultWidth*2),ie.style.width=re+j.whitespace+"px",m.q08(0),ie.style.height=m.o_T("px",U),G=parseInt(d.stripPX(ie.style.top),10),ae=d.stripPX(ie.style.left),re=ie.clientWidth,U=ie.clientHeight,ie.focus(),j.border===!1&&(ie.style.border="none"),ae+re+100<j.stx.chart.canvasWidth)ne="i",ne+="nli",ne+="ne-blo",ne+="ck",oe="i",oe+="nline-block",m.B42(0),k.style.top=m.C2Z("px",G),m.B42(0),D.style.top=m.o_T("px",G),m.B42(1),k.style.left=m.C2Z(re,"px",ae,10),k.style.display=oe,D.style.left=ae+re+k.clientWidth+5+"px",D.style.display=ne;else if(G+U+30<j.stx.chart.canvasHeight){le="p",le+="x",m.B42(1),k.style.top=m.o_T(U,le,G,10),m.B42(1),D.style.top=m.o_T(U,"px",G,10),m.q08(0),k.style.left=m.C2Z("px",ae),k.style.display="inline-block",m.q08(54);var de=m.o_T(16,2,4,8);D.style.left=ae+k.clientWidth-de+"px",D.style.display="inline-block"}else he="p",he+="x",m.B42(13),k.style.top=m.o_T("px",G,35),m.B42(13),D.style.top=m.o_T("px",G,35),m.B42(0),k.style.left=m.o_T(he,ae),k.style.display="inline-block",D.style.left=ae+k.clientWidth-5+"px",D.style.display="inline-block"}}S="anno";function V(j){return m.Q1Y(),function(Z){var ee;ee=j.stx,ee.editingAnnotation=!1,ee.undo(),ee.cancelTouchSingleClick=!0}}if(S+="t",S+="ation",w=this.stx.panels[this.panelName],!w||(k=this.stx.controls.annotationSave,D=this.stx.controls.annotationCancel,!k||!D))return;v=this.stx,x=this.ta,v.editingAnnotation=!0,v.undisplayCrosshairs(),v.openDialog=S,x||(A="p",A+="x",T="Enter ",T+="Text",_="p",_+="l",_+="acehold",_+="er",x=this.ta=document.createElement("TEXTAREA"),x.className="stx_annotation",x.onkeyup=z(this),x.onmouseup=K(v),x.setAttribute("wrap","hard"),d.isIOS7or8&&x.setAttribute(_,T),v.chart.container.appendChild(x),x.style.position="absolute",x.style.paddingLeft=this.padding+A,x.value=this.text,d.touchDevice&&(x.ontouchstart=function(j){j.stopPropagation()})),L=this,x.oninput=function(j){var Z,ee,$,ie,te,re;Z=-1604463481,ee=-1480771299,$=2;for(var H=1;m.X30(H.toString(),H.toString().length,23879)!==Z;H++)ie="historyR",ie+="e",ie+="d",ie+="o",j.inputType!="historyUndo"&&j.inputType!=ie&&L.onChange(j),m.B42(8),$+=m.o_T("2",0);m.f9T(),m.Y5b($.toString(),$.toString().length,72504)!==ee&&(te="h",te+="i",te+="storyUndo",re="h",re+="istoryUndo",(j.inputType===re||j.inputType===te)&&L.onChange(j))},x.style.font=this.fontString,this.color&&(this.color=="transparent"||this.color=="auto"?(M=getComputedStyle(x),M&&d.isTransparent(M.backgroundColor)?x.style.color=this.getLineColor():(F="#0",F+="00",x.style.color=F)):x.style.color=this.color),P=v.pixelFromTick(this.p0[0],w.chart),E=this.pixelFromValue(w,this.p0[0],this.p0[1],v.getYAxisByField(w,this.field)),x.style.left=P+("140"|12)<v.chart.canvasRight?P+"px":v.chart.canvasRight-("200"<<64)+"px",x.style.top=E+60<v.chart.canvasHeight?E-(isNaN(this.h)?this.defaultHeight:this.h/2)+"px":E-60+C,m.f9T();function K(j){return function(Z){m.f9T(),j.manageTouchAndMouse&&d.ChartEngine.drawingLine&&j.mouseup(Z)}}if(this.repositionTextArea&&this.repositionTextArea(x),d.safeClickTouch(k,Y(this)),d.safeClickTouch(D,V(this)),z(this)(),f&&(v.drawingSnapshot=v.exportDrawings(),this.hidden=!0,v.draw(),v.activeDrawing=this,d.ChartEngine.drawingLine=!0,b=v.chart.tempCanvas.context,v.chart.tempCanvas.style.display="block",this.w=x.clientWidth,this.h=x.clientHeight,d.clearCanvas(b.canvas,v),this.render(b),this.highlighted=!1,this.edit(b)),d.isAndroid&&!d.is_chrome&&!d.isFF){this.priorBottom=v.container.style.bottom,O=400,m.B42(55);var Q=m.o_T(95,85,17);I=v.resolveY(E)+Q,B=v.container.ownerDocument.defaultView,I>d.pageHeight(B)-O&&(N="p",N+="x",R=d.pageHeight(B)-I,m.q08(8),q=m.C2Z(O,R),m.q08(0),v.chart.container.style.bottom=m.C2Z(N,q))}},d.Drawing.annotation.prototype.click=function(b,f,m){var C;if(!(this.stx.overXAxis||this.stx.overYAxis))return C=this.stx.panels[this.panelName],this.copyConfig(),this.setPoint(0,f,m,C.chart),this.adjust(),this.edit(b),!1},d.Drawing.annotation.prototype.reposition=function(b,f,m,C){var S,w,k;f&&(S=this.stx.panels[this.panelName],w=f.tick-m,k=f.value-C,this.setPoint(0,f.p0[0]-w,f.p0[1]-k,S.chart),this.render(b))},d.Drawing.annotation.prototype.intersected=function(b,f,m){var C=X,S,w,k,D,v,x,A,T,_;if(S=this.stx,w=S.panels[this.panelName],!this.p0)return null;k=S.pixelFromTick(this.p0[0],w.chart),D=S.getYAxisByField(w,this.field),C.q08(0);var L=C.o_T(1,0);C.q08(56);var M=C.o_T(7,1,15,15,10);return v=this.pixelFromValue(w,this.p0[0],this.p0[L],D)-this.h/M,x=k+this.w,A=v+this.h,this.stem&&this.stem.x&&(k+=this.stem.x,x+=this.stem.x,v+=this.stem.y,A+=this.stem.y),T=S.pixelFromTick(b,w.chart),_=S.pixelFromValueAdjusted(w,b,f),T+m.r>=k&&T-m.r<=x&&_+m.r>=v&&_-m.r<=A?(this.highlighted=!0,{p0:d.clone(this.p0),tick:b,value:this.valueOnDrawingAxis(b,f)}):!1},d.Drawing.annotation.prototype.abort=function(){var b,f,m,C,S;b="n",b+="o",b+="n",b+="e",f="no",f+="ne",m=this.stx,C=m.controls.annotationSave,S=m.controls.annotationCancel,C&&(C.style.display=f),S&&(S.style.display=b),this.ta&&m.chart.container.removeChild(this.ta),this.ta=null,m.openDialog="",m.showCrosshairs(),m.editingAnnotation=!1,d.clearCanvas(m.chart.tempCanvas,m),d.isAndroid&&!d.is_chrome&&!d.isFF&&(m.chart.container.style.bottom=this.priorBottom),d.fixScreen()},d.Drawing.annotation.prototype.reconstruct=function(b,f){var m,C;X.f9T(),m="w",m+="eight",C="s",C+="i",C+="z",C+="e",this.stx=b,this.color=f.col,this.panelName=f.pnl,this.d0=f.d0,this.tzo0=f.tzo0,this.v0=f.v0,this.field=f.fld,this.text=b.escapeOnSerialize?decodeURIComponent(f.text):f.text,this.stem=f.stem,this.borderColor=f.bc,this.fillColor=f.bg,this.lineWidth=f.lw,this.pattern=f.ptrn,this.font=d.replaceFields(f.fnt,{st:"style",sz:C,wt:m,fl:"family"}),this.font||(this.font={}),this.adjust()},d.Drawing.annotation.prototype.serialize=function(){var b,f,m;return b={name:this.name,pnl:this.panelName,col:this.color,d0:this.d0,tzo0:this.tzo0,v0:this.v0,fld:this.field,text:this.stx.escapeOnSerialize?encodeURIComponent(this.text):this.text},this.font&&(f="w",f+="t",m=d.removeNullValues(d.replaceFields(this.font,{style:"st",size:"sz",weight:f,family:"fl"})),d.isEmpty(m)||(b.fnt=m)),this.stem&&(b.stem={d:this.stem.d,v:this.stem.v,x:this.stem.x,y:this.stem.y}),this.borderColor&&(b.bc=this.borderColor),this.fillColor&&(b.bg=this.fillColor),this.lineWidth&&(b.lw=this.lineWidth),this.pattern&&(b.ptrn=this.pattern),b},d.Drawing.annotation.prototype.renderText=function(){var b=X,f,m,C,S,w,k,D,v;if(this.getFontString(),f=this.stx,m=f.panels[this.panelName],!!m){this.arr=this.text.split(`
`),b.B42(8),C=b.o_T("0",0),b.f9T(),f.chart.context.font=this.fontString;for(var x=0;x<this.arr.length;x++)S=f.chart.context.measureText(this.arr[x]).width,S>C&&(C=S);if(C===0){b.q08(12);var A=b.C2Z(27,10,15);C=A*this.defaultWidth}this.fontSize=d.stripPX(this.fontDef.size),b.q08(57);var T=b.C2Z(8,6,1,15,71);w=(this.arr.length+T)*(this.fontSize+this.fontModifier),d.touchDevice&&(w+=5),this.w=C+this.whitespace+this.padding,this.h=w,k=f.pixelFromTick(this.p0[0],m.chart)+C,D=f.getYAxisByField(m,this.field),b.B42(8);var _=b.C2Z(17,16);v=this.pixelFromValue(m,this.p0[0],this.p0[_],D)+w,this.p1=[f.tickFromPixel(k,m.chart),this.valueFromPixel(v,m,D)],this.stem&&this.stem.d&&(this.stem.t=f.tickFromDate(this.stem.d,m.chart))}},d.Drawing.annotation.prototype.adjust=function(){var b;b=this.stx.panels[this.panelName],b&&(this.setPoint(0,this.d0,this.v0,b.chart),this.renderText())},d.Drawing.segment=function(){this.name="segment"},d.inheritsFrom(d.Drawing.segment,d.Drawing.BaseTwoPoint),d.Drawing.segment.prototype.render=function(b){var f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B;if(f="ve",f+="rti",f+="ca",f+="l",m="h",m+="orizontal",C="so",X.Q1Y(),C+="l",C+="i",C+="d",S=this.stx,w=S.panels[this.panelName],k=S.getYAxisByField(w,this.field),!(!w||this.field&&!k)){if(k=k||w.yAxis,D=S.pixelFromTick(this.p0[0],w.chart),v=S.pixelFromTick(this.p1[0],w.chart),x=this.pixelFromValue(w,this.p0[0],this.p0[1],k),A=this.pixelFromValue(w,this.p1[0],this.p1[1],k),T=this.lineWidth,_=this.getLineColor(),L={pattern:this.pattern,lineWidth:T},L.pattern=="none"&&(L.pattern=C),S.plotLine(D,v,x,A,_,this.name,b,w,L),this.axisLabel&&!this.repositioner){if(this.name=="horizontal")S.endClip(),M=this.p0[1],w.chart.transformFunc&&(M=w.chart.transformFunc(S,w.chart,M)),k.priceFormatter?M=k.priceFormatter(S,w,M):M=S.formatYAxisPrice(M,w,null,k),S.createYAxisLabel(w,M,x,_,null,null,k),S.startClip(w.name);else if(this.name=="vertical"&&this.p0[0]>=0&&!S.chart.xAxis.noDraw){if(F=S.dateFromTick(this.p0[0],w.chart,!0),d.ChartEngine.isDailyInterval(S.layout.interval))F.setHours(0,0,0,0);else{X.B42(13);var N=X.C2Z(13,1007,20);E=F.getSeconds()*N+F.getMilliseconds(),g.Date&&S.displayZone&&(P=new g.Date(F.getTime(),S.displayZone),F=new Date(P.getFullYear(),P.getMonth(),P.getDate(),P.getHours(),P.getMinutes()),F=new Date(F.getTime()+E))}O=d.mmddhhmm(d.yyyymmddhhmm(F)),w.chart.xAxis.formatter?O=w.chart.xAxis.formatter(F,this.name,null,null,O):this.stx.internationalizer&&(O=d.displayableDate(S,S.chart,F)),S.endClip(),S.createXAxisLabel({panel:w,txt:O,x:D,backgroundColor:_,color:null,pointed:!0,padding:2}),S.startClip(w.name)}}this.highlighted&&this.name!=m&&this.name!=f&&(I=this.highlighted=="p0",B=this.highlighted=="p1",this.littleCircle(b,D,x,I),this.littleCircle(b,v,A,B))}},d.Drawing.segment.prototype.abort=function(){this.stx.setMeasure(null,null,null,null,!1)},d.Drawing.segment.prototype.intersected=function(b,f,m){var C=X,S,w,k,D,v,x,A,T;if(S="h",S+="or",S+="i",S+="zontal",w="gartle",w+="y",!this.p0||!this.p1)return null;if(k=this.name,k!="horizontal"&&k!="vertical"&&k!=w){D={0:this.p0,1:this.p1};for(var _ in D)if(this.pointIntersection(D[_][0],D[_][1],m))return C.q08(0),this.highlighted=C.C2Z(_,"p"),{action:"drag",point:"p"+_}}if((k==S||k=="vertical")&&(k="line"),v=this.lineIntersection(b,f,m,k),v){this.highlighted=!0,x=2046947482,A=-1256419259,T=2;for(var L=1;C.Y5b(L.toString(),L.toString().length,11654)!==x;L++)return{action:"",p0:d.clone(this.p0),p1:d.clone(this.p1),tick:b,value:this.valueOnDrawingAxis(b,f)};if(C.Y5b(T.toString(),T.toString().length,80796)!==A)return{action:"move",p0:d.clone(this.p0),p1:d.clone(this.p1),tick:b,value:this.valueOnDrawingAxis(b,f)}}return null},d.Drawing.segment.prototype.configs=["color","lineWidth","pattern"],d.Drawing.segment.prototype.copyConfig=function(b){X.f9T(),d.Drawing.copyConfig(this,b),this.pattern=="none"&&this.configs.indexOf("fillColor")==-1&&(this.pattern="solid")},d.Drawing.segment.prototype.reconstruct=function(b,f){this.stx=b,this.color=f.col,this.panelName=f.pnl,this.pattern=f.ptrn,this.lineWidth=f.lw,this.d0=f.d0,this.d1=f.d1,this.tzo0=f.tzo0,this.tzo1=f.tzo1,this.v0=f.v0,this.v1=f.v1,this.field=f.fld,this.adjust()},d.Drawing.segment.prototype.serialize=function(){return X.f9T(),{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field}},d.Drawing.line=function(){this.name="line"},d.inheritsFrom(d.Drawing.line,d.Drawing.segment),d.Drawing.line.prototype.dragToDraw=!1,d.Drawing.line.prototype.click=function(b,f,m){var C;if(C=this.stx.panels[this.panelName],!!C)return this.copyConfig(),this.penDown?(this.accidentalClick(f,m)||(X.q08(8),this.setPoint(X.o_T("1",0),f,m,C.chart),this.penDown=!1),!0):(this.setPoint(0,f,m,C.chart),this.penDown=!0,!1)},d.Drawing.line.prototype.reconstruct=function(b,f){this.stx=b,this.color=f.col,this.panelName=f.pnl,this.pattern=f.ptrn,this.lineWidth=f.lw,this.v0=f.v0,this.v1=f.v1,this.d0=f.d0,this.d1=f.d1,this.tzo0=f.tzo0,this.tzo1=f.tzo1,this.field=f.fld,this.adjust()},d.Drawing.line.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field}},d.Drawing.line.prototype.adjust=function(){var b;b=this.stx.panels[this.panelName],b&&(this.setPoint(0,this.d0,this.v0,b.chart),X.f9T(),this.setPoint(1,this.d1,this.v1,b.chart),d.ChartEngine.isDailyInterval(this.stx.layout.interval)&&this.d0B&&(this.setPoint(0,this.d0B,this.v0B,b.chart),X.B42(33),this.setPoint(X.C2Z("1",96),this.d1B,this.v1B,b.chart)))},d.Drawing.horizontal=function(){var b;b="ho",b+="rizont",b+="al",this.name=b},d.inheritsFrom(d.Drawing.horizontal,d.Drawing.segment),d.Drawing.horizontal.prototype.dragToDraw=!1,d.Drawing.horizontal.prototype.measure=function(){},d.Drawing.horizontal.prototype.click=function(b,f,m){var C;if(C=this.stx.panels[this.panelName],!!C)return this.copyConfig(),X.f9T(),this.setPoint(0,f,m,C.chart),!0},d.Drawing.horizontal.prototype.intersected=function(b,f,m){var C,S,w;return this.lineIntersection(b,f,m,"line")?(C=this.stx,S=C.chart.dataSet.length,w=this.p0[1],this.highlighted=!0,{action:"move",p0:[S-2,w],p1:[S-1,w],tick:b,value:this.valueOnDrawingAxis(b,f)}):null},d.Drawing.horizontal.prototype.reconstruct=function(b,f){X.Q1Y(),this.stx=b,this.color=f.col,this.panelName=f.pnl,this.pattern=f.ptrn,this.lineWidth=f.lw,this.v0=f.v0,this.d0=f.d0,this.tzo0=f.tzo0,this.axisLabel=f.al,this.field=f.fld,this.adjust()},d.Drawing.horizontal.prototype.serialize=function(){var b;return b={name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,v0:this.v0,d0:this.d0,tzo0:this.tzo0,al:this.axisLabel,fld:this.field},b},d.Drawing.horizontal.prototype.adjust=function(){var b;if(b=this.stx.panels[this.panelName],!!b){this.setPoint(0,this.d0,this.v0,b.chart),X.B42(58);var f=X.o_T(105,2,16,126);this.p1=[this.p0[0]+f,this.p0[1]]}},d.Drawing.horizontal.prototype.configs=["color","lineWidth","pattern",e],d.Drawing.vertical=function(){X.Q1Y(),this.name="vertical"},d.inheritsFrom(d.Drawing.vertical,d.Drawing.horizontal),d.Drawing.vertical.prototype.measure=function(){},d.Drawing.vertical.prototype.intersected=d.Drawing.segment.prototype.intersected,d.Drawing.vertical.prototype.adjust=function(){var b;if(b=this.stx.panels[this.panelName],!!b){this.setPoint(0,this.d0,this.v0,b.chart),X.B42(59),X.Q1Y();var f=X.C2Z(12,71,0,6);this.p1=[this.p0[0],this.p0[1]+f]}},d.Drawing.measure=function(){X.f9T(),this.name="measure"},d.inheritsFrom(d.Drawing.measure,d.Drawing.segment),d.Drawing.measure.prototype.click=function(b,f,m){return this.copyConfig(),this.penDown?(this.stx.undo(),this.penDown=!1,!0):(this.p0=[f,m],this.penDown=!0,!1)},d.Drawing.rectangle=function(){this.name="rectangle"},d.inheritsFrom(d.Drawing.rectangle,d.Drawing.BaseTwoPoint),d.Drawing.rectangle.prototype.render=function(b){var f=X,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I;if(m="se",m+="gment",C="n",C+="o",C+="n",C+="e",S=this.stx,w=S.panels[this.panelName],k=S.getYAxisByField(w,this.field),!(!w||this.field&&!k)){D=S.pixelFromTick(this.p0[0],w.chart),v=S.pixelFromTick(this.p1[0],w.chart),x=this.pixelFromValue(w,this.p0[0],this.p0[1],k),A=this.pixelFromValue(w,this.p1[0],this.p1["1"|1],k),f.B42(17);var B=f.o_T(2,4,1);T=Math.round(Math.min(D,v))+"0.5"*B,_=Math.min(x,A),L=Math.max(D,v)-T,M=Math.max(x,A)-_,F=this.getLineColor(),P=this.fillColor,P&&!d.isTransparent(P)&&P!="auto"&&(b.beginPath(),b.rect(T,_,L,M),b.fillStyle=P,b.globalAlpha=.2,b.fill(),b.closePath(),f.q08(34),b.globalAlpha=f.C2Z("1",0)),E={pattern:this.pattern,lineWidth:this.lineWidth},this.highlighted&&E.pattern==C&&(E.pattern="solid",E.lineWidth==.1&&(E.lineWidth=1)),S.plotLine(D,v,x,x,F,"segment",b,w,E),f.B42(8),S.plotLine(v,v,f.o_T(x,.5),f.o_T(.5,A,f.q08(0)),F,m,b,w,E),S.plotLine(v,D,A,A,F,"segment",b,w,E),f.q08(0),S.plotLine(D,D,f.o_T(.5,A),f.o_T(x,.5,f.B42(8)),F,"segment",b,w,E),this.highlighted&&(O=this.highlighted=="p0",I=this.highlighted=="p1",this.littleCircle(b,D,x,O),this.littleCircle(b,v,A,I))}},d.Drawing.rectangle.prototype.intersected=function(b,f,m){var C,S;if(!this.p0||!this.p1)return null;X.Q1Y(),C={0:this.p0,1:this.p1};for(var w in C)if(this.pointIntersection(C[w][0],C[w][1],m))return S="d",S+="r",S+="a",S+="g",X.q08(0),this.highlighted=X.C2Z(w,"p"),{action:S,point:"p"+w};return this.boxIntersection(b,f,m)?(this.highlighted=!0,{action:"move",p0:d.clone(this.p0),p1:d.clone(this.p1),tick:b,value:this.valueOnDrawingAxis(b,f)}):null},d.Drawing.rectangle.prototype.configs=["color","fillColor","lineWidth","pattern"],d.Drawing.rectangle.prototype.reconstruct=function(b,f){this.stx=b,this.color=f.col,this.fillColor=f.fc,this.panelName=f.pnl,this.pattern=f.ptrn,this.lineWidth=f.lw,this.d0=f.d0,this.d1=f.d1,this.tzo0=f.tzo0,this.tzo1=f.tzo1,X.f9T(),this.v0=f.v0,this.v1=f.v1,this.field=f.fld,this.adjust()},d.Drawing.rectangle.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field}},d.Drawing.shape=function(){this.name="shape",X.f9T(),this.radians=0,this.a=0,this.rotating=!1,this.textMeasure=!1,this.configurator="shape",this.dimension=[0,0],this.points=[]},d.inheritsFrom(d.Drawing.shape,d.Drawing.BaseTwoPoint),d.Drawing.shape.prototype.setRotationOnInitialDraw=!1,d.Drawing.shape.prototype.measure=function(){},d.Drawing.shape.prototype.render=function(b){var f=X,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q,j,Z;if(m="un",m+="d",m+="efine",m+="d",!!this.points.length&&(C=this.stx,S=C.panels[this.panelName],w=C.getYAxisByField(S,this.field),!(!S||this.field&&!w))){if(k=C.pixelFromTick(this.p0[0],S.chart),D=this.pixelFromValue(S,this.p0[0],this.p0[1],w),this.p1){if(v=C.pixelFromTick(this.p1[0],S.chart),x=this.pixelFromValue(S,this.p1[0],this.p1[1],w),b.globalAlpha=.5,b.fillStyle=this.getLineColor(),this.rotating){if(f.q08(60),this.radians=Math.atan(f.o_T(D,v,x,k)),v<k)this.radians+=Math.PI;else if(x<D){f.B42(20);var ee=f.C2Z(8,9,1);this.radians+=ee*Math.PI}f.B42(36);var $=f.C2Z(7,3104,448);f.q08(13);var ie=f.o_T(6,2,3);this.a=parseInt((this.radians*36/Math.PI).toFixed(0),"10">>$)*ie,this.a%=360,this.radians=this.a*Math.PI/180,this.textMeasure&&b.fillText(this.a+"",v+10,x+10)}else this.penDown&&(this.sx=Math.max(1,parseFloat(Math.abs(2*(v-k)/this.dimension[0]).toFixed(1))),v<k&&(f.B42(33),this.sx*=-f.o_T("1",32)),this.sy=Math.max(1,parseFloat(Math.abs(2*(x-D)/this.dimension[1]).toFixed(1))),x<D&&(this.sy*=-1),this.textMeasure&&b.fillText(this.sx+"x,"+this.sy+"x",v+this.sx+"5"*1,x+this.sy+5));f.B42(34),b.globalAlpha=f.o_T("1",0)}typeof this.sx===m&&(this.sx=this.sy=1),A=this.lineWidth,A||(A=1.1),T={pattern:this.pattern,lineWidth:A},this.highlighted&&T.pattern=="none"&&(T.pattern="solid",T.lineWidth==.1&&(T.lineWidth=1)),_=this.getLineColor(),this.highlighted&&A==.1&&(A=1.1),L=this.fillColor,f.B42(61);var te=f.C2Z(0,10,2,6,1);for(A/=Math.abs(this.sx*this.sy)*te/(Math.abs(this.sx)+Math.abs(this.sy)),b.save(),b.translate(k,D),b.rotate(this.radians),b.scale(this.sx,(w||S.yAxis).flipped?-this.sy:this.sy),P={x:(this.dimension[0]-("1"-0))/2,y:(this.dimension[1]-1)/("2">>0)},M="0"^0;M<this.points.length;M++){for(E="n",E+="on",E+="e",O="a",O+="u",O+="to",b.beginPath(),F=0;F<this.points[M].length;F++)z=this.points,z[M][F]=="M"?(I=z[M][++F]-P.x,B=z[M][++F]-P.y,b.moveTo(I,B)):z[M][F]=="L"?(I=z[M][++F]-P.x,B=z[M][++F]-P.y,b.lineTo(I,B)):z[M][F]=="Q"?(N=z[M][++F]-P.x,q=z[M][++F]-P.y,I=z[M][++F]-P.x,B=z[M][++F]-P.y,b.quadraticCurveTo(N,q,I,B)):z[M][F]=="B"&&(N=z[M][++F]-P.x,q=z[M][++F]-P.y,R=z[M][++F]-P.x,Y=z[M][++F]-P.y,I=z[M][++F]-P.x,B=z[M][++F]-P.y,b.bezierCurveTo(N,q,R,Y,I,B));b.closePath(),L&&!d.isTransparent(L)&&L!=O&&(b.fillStyle=L,b.fill()),_&&this.pattern!=E&&(b.strokeStyle=_,b.lineWidth=A,b.setLineDash&&(b.setLineDash(d.borderPatternToArray(A,this.pattern)),b.lineDashOffset=0),b.stroke())}b.restore(),b.save(),b.translate(k,D),b.rotate(this.radians),this.highlighted?(V="p",V+="2",K="p",K+="0",Q=this.highlighted==K,j=this.highlighted=="p1",Z=this.highlighted==V,this.littleCircle(b,0,0,Q),this.mover(b,0,0,Q),this.littleCircle(b,this.sx*this.dimension["0"^0]/("2"-0),this.sy*this.dimension[1]/2,j),this.resizer(b,this.sx*this.dimension[0]/2,this.sy*this.dimension[1]/2,j),this.littleCircle(b,this.sx*this.dimension[0]/2,0,Z),this.rotator(b,this.sx*this.dimension["0"-0]/("2"<<32),0,Z),b.globalAlpha=.5,b.fillStyle=this.getLineColor(null,!1),this.textMeasure&&(b.fillText(this.sx+"x,"+this.sy+"x",this.sx*this.dimension[0]/2+12,this.sy*this.dimension[1]/2+5),b.fillText(this.a+"",this.sx*this.dimension[0]/2+12,5)),b.globalAlpha=1):this.penDown&&(this.rotating?this.rotator(b,this.sx*this.dimension[0]/2,0,!0):this.resizer(b,this.sx*this.dimension["0"^0]/2,this.sy*this.dimension[1]/("2">>64),!0)),b.restore()}},d.Drawing.shape.prototype.reposition=function(b,f,m,C){var S=X,w,k,D,v,x,A,T,_,L;if(S.f9T(),!!f){if(w=this.stx,k=w.panels[this.panelName],f.action=="move")D=f.tick-m,v=f.value-C,this.setPoint(0,f.p0[0]-D,f.p0["1"*1]-v,k.chart),this.render(b);else if(x=w.getYAxisByField(k,this.field),A=w.pixelFromTick(this.p0[0],k.chart),T=this.pixelFromValue(k,this.p0[0],this.p0[1],x),_=w.pixelFromTick(m,k.chart),L=this.pixelFromValue(k,m,C,x),f.action=="scale")this[f.point]=[m,C],this.sx=parseFloat((((_-A)*Math.cos(this.radians)+(L-T)*Math.sin(this.radians))/(this.dimension["0"|0]/2)).toFixed("1"-0)),Math.abs(this.sx)<1&&(this.sx/=Math.abs(this.sy)),this.sy=parseFloat((((L-T)*Math.cos(this.radians)-(_-A)*Math.sin(this.radians))/(this.dimension[1]/2)).toFixed(1)),Math.abs(this.sy)<1&&(this.sy/=Math.abs(this.sy)),this.render(b);else if(f.action=="rotate"){this[f.point]=[m,C],S.B42(60),this.radians=Math.atan(S.o_T(T,_,L,A)),_<A?this.radians+=Math.PI:L<T&&(this.radians+=("2"^0)*Math.PI),S.B42(62);var M=S.C2Z(190,20,1,8,80);S.q08(8);var F=S.C2Z(100,95);this.a=parseInt((this.radians*36/Math.PI).toFixed(0),M)*F,this.sx<("0"|0)&&(this.a=this.a+180),this.a%=360,this.radians=this.a*Math.PI/180,this.render(b)}}},d.Drawing.shape.prototype.intersected=function(b,f,m){var C=X,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R;if(S=this.stx,!this.p0)return null;if(S.repositioningDrawing==this&&S.repositioningDrawing.repositioner)return S.repositioningDrawing.repositioner;w=S.panels[this.panelName],k=S.getYAxisByField(w,this.field),D=S.pixelFromTick(this.p0["0"-0],w.chart),v=this.pixelFromValue(w,this.p0[0],this.p0[1],k),x=S.pixelFromTick(b,w.chart),A=S.pixelFromValueAdjusted(w,b,f),x-=D,A-=v,T=A,_=x,x=Math.cos(this.radians)*_+Math.sin(this.radians)*T,A=Math.cos(this.radians)*T-Math.sin(this.radians)*_,x/=this.sx,A/=this.sy,this.padding=d.ensureDefaults(this.padding||{},{left:0,right:"0"^0,top:0,bottom:0}),L=this.padding.right+this.padding.left,M=this.padding.bottom+this.padding.top,F=Math.pow(d.touchDevice?25:5+this.littleCircleRadius(),2),P=Math.abs(F/(this.sx*this.sy)),E=3,C.q08(8);var q=C.C2Z(18,16);C.q08(8);var Y=C.o_T(11,9);C.q08(52);var z=C.C2Z(2,3,14,14);C.q08(20);var V=C.C2Z(18,6,14);C.q08(8);var K=C.C2Z(7,5);C.q08(57);var Q=C.C2Z(18,1,1,7,106);C.q08(13);var j=C.C2Z(11,11,20);C.q08(63);var Z=C.C2Z(20,6,12);O=Math.pow((this.dimension[0]-L+E)/q,Y)+Math.pow((this.dimension[z]-M+E)/V,K)>Math.pow(x-L/2,Q)+Math.pow(A-M/j,Z),I=(F-(Math.pow(x*this.sx,2)+Math.pow(A*this.sy,2)))/Math.abs(this.sx*this.sy),C.B42(20);var ee=C.o_T(16,17,0);C.B42(64);var $=C.o_T(8,4,16);C.B42(8);var ie=C.o_T(8,6);C.B42(8);var te=C.o_T(10,9);C.q08(13);var re=C.o_T(14,0,12);B=P-Math.pow(x-this.dimension["0"*ee]/$,ie)-Math.pow(A-this.dimension[te]/2,re),C.q08(0);var H=C.C2Z(2,0);C.q08(15);var U=C.o_T(4,16,22);C.q08(65);var G=C.C2Z(9,8,9,7,18);return N=P-Math.pow(x-this.dimension[0]/H,U)-Math.pow(A,G),O?B>=N&&B>=I&&B>-1?(R="p",R+="1",this.highlighted=R,{action:"scale"}):N>=B&&N>=I&&N>-1?(this.highlighted="p2",{action:"rotate"}):(this.highlighted=I>-1?"p0":!0,{action:"move",p0:d.clone(this.p0),tick:b,value:this.valueOnDrawingAxis(b,f)}):null},d.Drawing.shape.prototype.configs=["color","fillColor","lineWidth","pattern"],d.Drawing.shape.prototype.littleCircleRadius=function(){return X.B42(8),X.Q1Y(),X.o_T("3",0)},d.Drawing.shape.prototype.click=function(b,f,m){var C;return this.points.length?(this.copyConfig(),C=this.stx.panels[this.panelName],this.penDown?(X.q08(2),this.setPoint(X.C2Z(1,"1"),f,m,C.chart),this.rotating||!this.setRotationOnInitialDraw?(this.penDown=!1,this.rotating=!1,!0):(this.rotating=!0,!1)):(this.setPoint(0,f,m,C.chart),this.penDown=!0,!1)):!1},d.Drawing.shape.prototype.adjust=function(){var b=X,f,m,C;if(f=this.stx.panels[this.panelName],!!f){m=this.name+"_v"+(this.version||0),d.Drawing[m]&&(C=new d.Drawing[m],this.name=C.name,this.dimension=C.dimension,this.padding=C.padding,this.points=C.points,this.version=C.version),this.setPoint(0,this.d0,this.v0,f.chart),b.B42(66);var S=b.C2Z(24,60,14,17);b.B42(67);var w=b.C2Z(20,39,12,41,11);this.radians=Math.round(this.a/S)*Math.PI/w}},d.Drawing.shape.prototype.reconstruct=function(b,f){this.stx=b,this.color=f.col,this.fillColor=f.fc,this.panelName=f.pnl,this.pattern=f.ptrn,this.lineWidth=f.lw,this.d0=f.d0,this.v0=f.v0,this.tzo0=f.tzo0,this.a=f.a,this.sx=f.sx,this.sy=f.sy,this.field=f.fld,this.version=f.ver,this.adjust()},d.Drawing.shape.prototype.serialize=function(){return X.Q1Y(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,v0:this.v0,tzo0:this.tzo0,a:this.a,sx:this.sx,sy:this.sy,fld:this.field,ver:this.version}},d.Drawing.arrow=function(){this.name="arrow",X.B42(34),this.version=X.C2Z("1",0),this.dimension=[11,22],this.padding={left:0,right:0,top:11,bottom:0},this.points=[["M",3,21,"L",7,21,"L",7,16,"L",10,16,"L",5,11,"L",0,16,"L",3,16,"L",3,21]]},d.inheritsFrom(d.Drawing.arrow,d.Drawing.shape),d.Drawing.getDrawingToolList=function(b){var f,m;f={},m={arrow_v0:!0,BaseTwoPoint:!0,fibonacci:!0,shape:!0},X.Q1Y(),d.extend(m,b);for(var C in d.Drawing)!m[C]&&d.Drawing[C].prototype.render&&(f[new d.Drawing[C]().name]=C);return f}};Ns=W=>{var e;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.EaseMachine=function(t,a,r,i){typeof t=="string"?this.fc=e.EaseMachine[t]:this.fc=t,this.ms=a,(r||r===0)&&this.reset(r,i)},e.EaseMachine.prototype.reset=function(t,a){!t&&t!=="0"*1&&(t=this.currentValues),this.hasCompleted=!1,this.running=!1,this.okayToRun=!0,X.q08(68),this.useNameValuePairs=X.o_T(typeof a,"object"),this.startTime=Date.now(),X.Q1Y(),this.useNameValuePairs?(this.startValues=t,this.endValues=a):(this.startValues={default:t},this.endValues={default:a}),this.changeValues={},this.currentValues={};for(var r in this.startValues)this.changeValues[r]=this.endValues[r]-this.startValues[r]},e.EaseMachine.prototype.next=function(){var t;t=Date.now(),t>=this.startTime+this.ms&&(t=this.startTime+this.ms,this.hasCompleted=!0,this.running=!1),this.currentValues={},X.f9T();for(var a in this.changeValues)this.currentValues[a]=this.fc(t-this.startTime,this.startValues[a],this.changeValues[a],this.ms);return this.useNameValuePairs?this.currentValues:this.currentValues.default},e.EaseMachine.prototype.hasCompleted=!0,e.EaseMachine.prototype.run=function(t,a,r,i){var n;function s(){var h;n.afid=null,n.okayToRun&&(h=n.next(),t(h),!n.hasCompleted&&(n.afid=requestAnimationFrame(s)))}X.Q1Y(),this.afid&&cancelAnimationFrame(this.afid),a||a===0?this.reset(a,r):(r||r===0)&&this.reset(this.currentValues,r),n=this,this.running=!0,i?this.afid=requestAnimationFrame(s):s()},e.EaseMachine.prototype.stop=function(){X.f9T();var t;return t="unde",t+="fine",t+="d",this.afid&&cancelAnimationFrame(this.afid),this.afid=null,this.okayToRun=!1,this.hasCompleted=!0,this.running=!1,typeof this.useNameValuePairs==t?{}:this.useNameValuePairs?this.currentValues:this.currentValues.default},e.EaseMachine.easeInOutQuad=function(t,a,r,i){var n=X;return n.B42(9),t/=n.C2Z(2,i),t<1?(n.q08(69),n.C2Z(r,t,a,2,t)):(t--,n.B42(70),n.f9T(),n.o_T(2,"2",0,t,"1",r,t,a))},e.EaseMachine.easeInOutCubic=function(t,a,r,i){var n=X;return n.B42(71),t/=n.C2Z(i,"2",0),t<"1"*1?(n.q08(72),n.o_T(t,t,r,a,2,t)):(t-=2,n.q08(73),n.o_T(2,t,t,r,2,a,t))},e.EaseMachine.easeOutCubic=function(t,a,r,i){return t/=i,t--,X.B42(74),X.C2Z(a,"1",t,r,64,t,t)},e.ChartEngine.prototype.animations.zoom.isStub&&(e.ChartEngine.prototype.animations.zoom=new e.EaseMachine("easeOutCubic",400))};Bs=W=>{var e,t;e=typeof _CIQ<"u"?_CIQ:W.CIQ,t=function(){var a=X,r,i,n,s,h,o,l,u,c,p,y,d,g,b,f,m;function C(H,U,G,ae){this.type_=H,this.index_=U||0,a.f9T(),this.prio_=G||0,this.number_=ae??0,this.toString=function(){switch(this.type_){case r:return this.number_;case i:case n:case s:return this.index_;case h:return"CALL";default:return"Invalid Token"}}}function S(H){return Math.acosh?Math.acosh(H):Math.log(H+Math.sqrt(H*H-1))}function w(H,U){return a.q08(14),a.o_T("",U,H)}function k(H,U){return a.B42(8),a.o_T(H,U)}r=0;function D(H){return Math.cosh?Math.cosh(H):(Math.exp(H)+Math.exp(-H))/2}function v(H,U){return a.B42(75),a.o_T(U,H)}function x(H){return Math.trunc?Math.trunc(H):H<0?Math.ceil(H):Math.floor(H)}function A(H,U){return a.B42(9),a.C2Z(U,H)}i=1,n=2;function T(H,U){return a.q08(2),a.f9T(),a.C2Z(U,H)}s=3,h=4;function _(){this.success=!1,this.errormsg="",this.expression="",this.pos=0,this.tokennumber=0,this.tokenprio=0,this.tokenindex=0,this.tmpprio=0,this.ops1={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:M,cosh:D,tanh:te,asinh:B,acosh:S,atanh:$,sqrt:Math.sqrt,log:Math.log,lg:Y,log10:Y,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:x,"-":L,exp:Math.exp},a.Q1Y(),this.ops2={"+":E,"-":k,"*":T,"/":A,"%":q,"^":Math.pow,",":z,"||":w,"==":N,"!=":Z,">":O,"<":ee,">=":v,"<=":R,and:P,or:K},this.functions={random:F,fac:j,min:Math.min,max:Math.max,hypot:I,pyt:I,pow:Math.pow,atan2:Math.atan2,if:V},this.consts={E:Math.E,PI:Math.PI}}o=/[\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,l={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"};function L(H){return-H}function M(H){return a.f9T(),Math.sinh?Math.sinh(H):(Math.exp(H)-Math.exp(-H))/2}e.extend(ie.prototype,{simplify:function(H){var U,G,ae,ne,oe,le,he,ue,ce;for(H=H||{},U=[],G=[],le=this.tokens.length,a.Q1Y(),ue=0,ue=0;ue<le;ue++)if(he=this.tokens[ue],ce=he.type_,ce===r)U.push(he);else if(ce===s&&he.index_ in H)he=new C(r,0,0,H[he.index_]),U.push(he);else if(ce===n&&U.length>1)ne=U.pop(),ae=U.pop(),oe=this.ops2[he.index_],he=new C(r,0,0,oe(ae.number_,ne.number_)),U.push(he);else if(ce===i&&U.length>0)ae=U.pop(),oe=this.ops1[he.index_],he=new C(r,0,0,oe(ae.number_)),U.push(he);else{for(;U.length>0;)G.push(U.shift());G.push(he)}for(;U.length>0;)G.push(U.shift());return new ie(G,Q(this.ops1),Q(this.ops2),Q(this.functions))},substitute:function(H,U){var G,ae,ne,oe,le,he,ue,ce;for(U instanceof ie||(U=new _().parse(String(U))),G=[],ae=this.tokens.length,oe=0,oe="0"-0;oe<ae;oe++)if(ne=this.tokens[oe],le=ne.type_,le===s&&ne.index_===H)for(var de=0;de<U.tokens.length;de++)he=U.tokens[de],ue=new C(he.type_,he.index_,he.prio_,he.number_),G.push(ue);else G.push(ne);return ce=new ie(G,Q(this.ops1),Q(this.ops2),Q(this.functions)),ce},evaluate:function(H){var U,G,ae,ne,oe,le,he,ue,ce;for(H=H||{},a.f9T(),U=[],oe=this.tokens.length,he=0,he=0;he<oe;he++)if(le=this.tokens[he],ue=le.type_,ue===r)U.push(le.number_);else if(ue===n)ae=U.pop(),G=U.pop(),ne=this.ops2[le.index_],U.push(ne(G,ae));else if(ue===s)if(le.index_ in H)U.push(H[le.index_]);else if(le.index_ in this.functions)U.push(this.functions[le.index_]);else throw new Error("undefined variable: "+le.index_);else if(ue===i)G=U.pop(),ne=this.ops1[le.index_],U.push(ne(G));else if(ue===h)if(G=U.pop(),ne=U.pop(),ne.apply&&ne.call)Object.prototype.toString.call(G)=="[object Array]"?U.push(ne.apply(void 0,G)):U.push(ne.call(void 0,G));else throw a.q08(0),new Error(a.C2Z(" is not a function",ne));else throw ce="invalid ",ce+="Ex",ce+="pression",new Error(ce);if(U.length>1)throw new Error("invalid Expression (parity)");return U[0]},toString:function(H){var U,G,ae,ne,oe,le,he,ue,ce;for(U=[],oe=this.tokens.length,he=0,he=0;he<oe;he++)if(le=this.tokens[he],ue=le.type_,ue===r)U.push(re(le.number_));else if(ue===n)ae=U.pop(),G=U.pop(),ne=le.index_,H&&ne=="^"?(a.B42(76),U.push(a.o_T(G,")",",","Math.pow(",ae))):(a.B42(76),U.push(a.C2Z(G,")",ne,"(",ae)));else if(ue===s)U.push(le.index_);else if(ue===i)G=U.pop(),ne=le.index_,ne==="-"?(a.q08(1),U.push(a.C2Z(ne,")","(",G))):(a.q08(1),U.push(a.o_T("(",")",ne,G)));else if(ue===h)G=U.pop(),ne=U.pop(),a.q08(1),U.push(a.o_T("(",")",ne,G));else throw ce="invalid Expressi",ce+="on",new Error(ce);if(U.length>1)throw new Error("invalid Expression (parity)");return U[0]},variables:function(){var H,U,G;H=this.tokens.length,U=[];for(var ae=0;ae<H;ae++)G=this.tokens[ae],G.type_===s&&U.indexOf(G.index_)==-1&&U.push(G.index_);return U}},!0);function F(H){a.q08(41);var U=a.o_T(10,11,13,15);return Math.random()*(H||U)}function P(H,U){return!!(H&&U)}_.parse=function(H){return a.f9T(),new _().parse(H)};function E(H,U){return a.Q1Y(),Number(H)+Number(U)}function O(H,U){return a.B42(77),a.C2Z(U,H)}_.evaluate=function(H,U){return a.f9T(),_.parse(H).evaluate(U)},_.Expression=ie;function I(){var H,U;if(Math.hypot)return Math.hypot.apply(this,arguments);H=0,U=arguments.length;for(var G=0;G<U;G++){if(arguments[G]===1/0||arguments[G]===-1/0)return 1/0;H+=arguments[G]*arguments[G]}return Math.sqrt(H)}_.values={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:M,cosh:D,tanh:te,asinh:B,acosh:S,atanh:$,sqrt:Math.sqrt,log:Math.log,lg:Y,log10:Y,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:x,random:F,fac:j,exp:Math.exp,min:Math.min,max:Math.max,hypot:I,pyt:I,pow:Math.pow,atan2:Math.atan2,if:V,E:Math.E,PI:Math.PI},a.q08(33),u=a.o_T(1,0);function B(H){return Math.asinh?Math.asinh(H):H===-1/0?H:Math.log(H+Math.sqrt(H*H+1))}function N(H,U){return a.q08(68),a.o_T(H,U)}function R(H,U){return a.B42(78),a.o_T(H,U)}a.q08(79),c=a.C2Z("1",1),a.B42(33),p=a.C2Z(1,2);function q(H,U){return a.Q1Y(),a.q08(80),a.o_T(U,H)}function Y(H){return a.f9T(),Math.log(H)*Math.LOG10E}a.B42(81),y=a.C2Z(1,"3",0);function z(H,U){var G;return G="[obj",G+="e",G+="ct ",G+="Array]",Object.prototype.toString.call(H)!=G?[H,U]:(a.Q1Y(),H=H.slice(),H.push(U),H)}function V(H,U,G){return a.f9T(),H?U:G}a.B42(33),d=a.C2Z(1,4);function K(H,U){return!!(H||U)}function Q(H){U.prototype=H;function U(){}return new U}a.B42(79),g=a.o_T("1",5),a.q08(79),b=a.o_T("1",6);function j(H){a.Q1Y();var U;for(H=Math.floor(H),U=H;H>1;)a.B42(82),U=a.C2Z(U,--H);return U}function Z(H,U){return a.B42(83),a.C2Z(H,U)}a.q08(84),f=a.o_T("7",0,"1");function ee(H,U){return a.Q1Y(),a.q08(85),a.C2Z(U,H)}function $(H){return Math.atanh?Math.atanh(H):Math.log((1+H)/(1-H))/2}function ie(H,U,G,ae){this.tokens=H,a.f9T(),this.ops1=U,this.ops2=G,this.functions=ae}a.B42(33),m=a.C2Z(1,8);function te(H){return Math.tanh?Math.tanh(H):H===1/0?1:H===-1/0?-1:(Math.exp(H)-Math.exp(-H))/(Math.exp(H)+Math.exp(-H))}function re(H){return a.Q1Y(),typeof H=="string"?(o.lastIndex=0,o.test(H)?"'"+H.replace(o,function(U){a.Q1Y();var G;return G=l[U],typeof G=="string"?G:"\\u"+("0000"+U.charCodeAt(0).toString(16)).slice(-4)})+"'":"'"+H+"'"):H}return e.extend(_.prototype,{parse:function(H){var U,G,ae,ne,oe,le,he,ue,ce,de,Ce,pe,xe;for(this.errormsg="",this.success=!0,U=[],G=[],this.tmpprio=0,a.q08(86),ae=a.o_T(y,u,p,b),ne=0,this.expression=H,this.pos=0;this.pos<this.expression.length;)this.isOperator()?this.isSign()&&ae&b?(this.isNegativeSign()&&(this.tokenprio=2,this.tokenindex="-",ne++,this.addfunc(G,U,i)),a.q08(86),ae=a.C2Z(y,u,p,b)):this.isComment()||(ae&c||this.error_parsing(this.pos,"unexpected operator"),ne+=2,this.addfunc(G,U,n),a.B42(86),ae=a.C2Z(y,u,p,b)):this.isNumber()?((ae&u)==="0">>64&&(le="un",le+="expe",le+="cted n",le+="umber",this.error_parsing(this.pos,le)),oe=new C(r,0,0,this.tokennumber),G.push(oe),a.q08(87),ae=a.C2Z(d,g,c)):this.isString()?(ae&u||this.error_parsing(this.pos,"unexpected string"),oe=new C(r,0,0,this.tokennumber),G.push(oe),a.q08(87),ae=a.o_T(d,g,c)):this.isLeftParenth()?(ae&y||this.error_parsing(this.pos,'unexpected "("'),ae&f&&(ne+=2,a.B42(44),this.tokenprio=-a.o_T(0,"2"),this.tokenindex=-1,this.addfunc(G,U,h)),a.q08(88),ae=a.o_T(u,y,p,m,b)):this.isRightParenth()?(ae&m?(oe=new C(r,0,0,[]),G.push(oe)):ae&d||this.error_parsing(this.pos,'unexpected ")"'),a.q08(88),ae=a.o_T(c,d,g,f,y)):this.isComma()?(ae&g||this.error_parsing(this.pos,'unexpected ","'),this.addfunc(G,U,n),ne+=2,a.q08(86),ae=a.C2Z(y,u,p,b)):this.isConst()?(ae&u||(he="unexpected const",he+="ant",this.error_parsing(this.pos,he)),a.B42(44),ue=new C(r,0,a.o_T(0,"0"),this.tokennumber),G.push(ue),a.q08(87),ae=a.C2Z(d,g,c)):this.isOp2()?(ae&p||(ce="unexpected fu",ce+="ncti",ce+="on",this.error_parsing(this.pos,ce)),this.addfunc(G,U,n),ne+=2,ae=y):this.isOp1()?(ae&p||(de="unexpected functio",de+="n",this.error_parsing(this.pos,de)),this.addfunc(G,U,i),ne++,ae=y):this.isVar()?(ae&u||this.error_parsing(this.pos,"unexpected variable"),Ce=new C(s,this.tokenindex,0,0),G.push(Ce),a.q08(88),ae=a.o_T(c,d,g,f,y)):this.isWhite()||(this.errormsg===""?this.error_parsing(this.pos,"unknown character"):this.error_parsing(this.pos,this.errormsg));for((this.tmpprio<0||this.tmpprio>=10)&&(pe="unm",pe+="atche",pe+='d "()"',this.error_parsing(this.pos,pe));U.length>0;)xe=U.pop(),G.push(xe);return ne+1!==G.length&&this.error_parsing(this.pos,"parity"),new ie(G,Q(this.ops1),Q(this.ops2),Q(this.functions))},evaluate:function(H,U){return this.parse(H).evaluate(U)},error_parsing:function(H,U){var G;throw G="]",G+=": ",this.success=!1,a.B42(1),this.errormsg=a.o_T(H,U,"parse error [column ",G),this.column=H,new Error(this.errormsg)},addfunc:function(H,U,G){var ae;for(ae=new C(G,this.tokenindex,this.tokenprio+this.tmpprio,0);U.length>0&&ae.prio_<=U[U.length-1].prio_;)H.push(U.pop());U.push(ae)},isNumber:function(){var H,U,G;for(H=!1,U="";this.pos<this.expression.length&&(G=this.expression.charCodeAt(this.pos),G>=48&&G<=57||G===46);)U+=this.expression.charAt(this.pos),this.pos++,this.tokennumber=parseFloat(U),H=!0;return H},unescape:function(H,U){var G,ae,ne,oe,le;a.f9T(),G=[],ae=!1;for(var he=0;he<H.length;he++)if(ne=H.charAt(he),ae){switch(ne){case"'":G.push("'");break;case"\\":G.push("\\");break;case"/":G.push("/");break;case"b":G.push("\b");break;case"f":G.push("\f");break;case"n":G.push(`
`);break;case"r":G.push("\r");break;case"t":G.push("	");break;case"u":oe=parseInt(H.substring(he+1,he+5),16),G.push(String.fromCharCode(oe)),he+=4;break;default:throw le="Il",le+="legal escape sequence: '\\",a.q08(0),this.error_parsing(a.C2Z(he,U),a.C2Z(le,"'",ne,a.B42(14)))}ae=!1}else ne=="\\"?ae=!0:G.push(ne);return G.join("")},isString:function(){var H,U,G,ae;if(H=!1,U="",a.f9T(),G=this.pos,this.pos<this.expression.length&&this.expression.charAt(this.pos)=="'")for(this.pos++;this.pos<this.expression.length;)if(ae=this.expression.charAt(this.pos),ae!="'"||U.slice(-1)=="\\")U+=this.expression.charAt(this.pos),this.pos++;else{this.pos++,this.tokennumber=this.unescape(U,G),H=!0;break}return H},isConst:function(){var H,U;a.Q1Y();for(var G in this.consts)if(U=G.length,H=this.expression.substr(this.pos,U),G===H)return this.tokennumber=this.consts[G],this.pos+=U,!0;return!1},isOperator:function(){a.f9T();var H,U,G,ae,ne,oe,le,he;if(H=this.expression.charCodeAt(this.pos),H===43)this.tokenprio=2,this.tokenindex="+";else if(H===45)this.tokenprio=2,this.tokenindex="-";else if(H===62)this.expression.charCodeAt(this.pos+1)===61?(this.pos++,this.tokenprio=1,this.tokenindex=">="):(this.tokenprio=1,this.tokenindex=">");else if(H===60)this.expression.charCodeAt(this.pos+1)===61?(U="<",U+="=",this.pos++,this.tokenprio=1,this.tokenindex=U):(this.tokenprio=1,this.tokenindex="<");else if(H===124)if(this.expression.charCodeAt(this.pos+1)===124)G="|",G+="|",this.pos++,this.tokenprio=1,this.tokenindex=G;else return!1;else if(H===61)if(this.expression.charCodeAt(this.pos+1)===("61"^0))ae="=",ae+="=",this.pos++,this.tokenprio=1,this.tokenindex=ae;else return!1;else if(H===33)if(this.expression.charCodeAt(this.pos+1)===61)this.pos++,a.q08(2),this.tokenprio=a.C2Z(1,"1"),this.tokenindex="!=";else{ne=784145733,oe=1724620145,le=2;for(var ue=1;a.Y5b(ue.toString(),ue.toString().length,61696)!==ne;ue++)return!0;if(a.Y5b(le.toString(),le.toString().length,98227)!==oe)return!1}else if(H===97)if(this.expression.charCodeAt(this.pos+1)===110&&this.expression.charCodeAt(this.pos+2)===100)he="a",he+="n",he+="d",this.pos++,this.pos++,this.tokenprio=0,this.tokenindex=he;else return!1;else if(H===("111"|72))if(this.expression.charCodeAt(this.pos+1)===114)this.pos++,this.tokenprio=0,this.tokenindex="or";else return!1;else if(H===42||H===8729||H==="8226"*1)this.tokenprio=3,this.tokenindex="*";else if(H===47)this.tokenprio=4,this.tokenindex="/";else if(H===37)this.tokenprio=4,this.tokenindex="%";else if(H===94)this.tokenprio=5,this.tokenindex="^";else return!1;return this.pos++,!0},isSign:function(){a.Q1Y();var H;return H=this.expression.charCodeAt(this.pos-1),H===45||H===43},isPositiveSign:function(){a.f9T();var H;return H=this.expression.charCodeAt(this.pos-1),H===43},isNegativeSign:function(){var H;return H=this.expression.charCodeAt(this.pos-1),H===45},isLeftParenth:function(){var H;return H=this.expression.charCodeAt(this.pos),H===40?(this.pos++,this.tmpprio+=10,!0):!1},isRightParenth:function(){var H;return H=this.expression.charCodeAt(this.pos),H===41?(this.pos++,this.tmpprio-=10,!0):!1},isComma:function(){var H,U,G,ae;if(a.Q1Y(),H=this.expression.charCodeAt(this.pos),H===44){U=-339638854,G=-1742991980,ae=2;for(var ne=1;a.Y5b(ne.toString(),ne.toString().length,"59102"*1)!==U;ne++)return this.pos--,a.q08(8),this.tokenprio=!a.C2Z("8",0),this.tokenindex=8843,!1;if(a.X30(ae.toString(),ae.toString().length,25268)!==G)return this.pos++,this.tokenprio=-1,this.tokenindex=",",!0}return!1},isWhite:function(){var H;return H=this.expression.charCodeAt(this.pos),a.Q1Y(),H===32||H===9||H===10||H==="13"*1?(this.pos++,!0):!1},isOp1:function(){var H,U;H="";for(var G=this.pos;G<this.expression.length&&(U=this.expression.charAt(G),!(U.toUpperCase()===U.toLowerCase()&&(G===this.pos||U!="_"&&(U<"0"||U>"9"))));G++)H+=U;return H.length>0&&H in this.ops1?(this.tokenindex=H,this.tokenprio=5,this.pos+=H.length,!0):(a.Q1Y(),!1)},isOp2:function(){var H,U;H="";for(var G=this.pos;G<this.expression.length&&(U=this.expression.charAt(G),!(U.toUpperCase()===U.toLowerCase()&&(G===this.pos||U!="_"&&(U<"0"||U>"9"))));G++)H+=U;return H.length>("0"^0)&&H in this.ops2?(this.tokenindex=H,this.tokenprio=5,this.pos+=H.length,!0):!1},isVar:function(){a.f9T();var H,U,G,ae,ne;H="";for(var oe=this.pos;oe<this.expression.length&&(U=this.expression.charAt(oe),!(U.toUpperCase()===U.toLowerCase()&&(oe===this.pos||U!="_"&&(U<"0"||U>"9"))));oe++)H+=U;if(H.length>0){this.tokenindex=H,this.tokenprio=4,this.pos+=H.length,a.B42(34),G=-a.o_T("1199747035",0),ae=335188e3,ne=2;for(var le=1;a.Y5b(le.toString(),le.toString().length,69430)!==G;le++)return!0;if(a.Y5b(ne.toString(),ne.toString().length,332)!==ae)return!1}return!1},isComment:function(){var H,U;if(H=this.expression.charCodeAt(this.pos-1),H==="47">>32&&this.expression.charCodeAt(this.pos)===42){U="*",U+="/",a.q08(89);var G=a.C2Z(6,5,5,14,5);return this.pos=this.expression.indexOf(U,this.pos)+G,this.pos===1&&(this.pos=this.expression.length),!0}return a.f9T(),!1}},!0),_},e.computeEquationChart=function(a,r){var i=X,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_;function L(O){if(O.i++,r[O.s]){if(O.i>=r[O.s].length)return 0;y=r[O.s][O.i]}return y.DT||(y.DT=e.strToDateTime(y.Date)),O.d=y.DT,1}a=a.replace(/[:]/,"/"),n=0;function M(){var O,I;O=null,I=null;for(var B in c)I?c[B].d.getTime()<I.d.getTime()?O=I=c[B]:c[B].d.getTime()>I.d.getTime()&&(O=I):I=c[B];return O?L(O)?-1:0:1}for(var F in r)s="\\",s+="^",h="\\",h+="]",o=new RegExp("\\["+F.replace(/\[/g,"\\[").replace(/\]/g,h).replace(/\$/g,"\\$").replace(/\^/g,s).replace(/[+\-*/%()]/g,"\\$&")+"\\]","g"),i.B42(0),a=a.replace(o,i.o_T(n,"symbol")),n++;l=t().parse(a),u=[],c={},p=0,d=null,g=!1,b=[];for(F in r)f={sym:F,map:r[F]},r[F]?b.unshift(f):b.push(f);for(var P=0;P<b.length;P++)m=b[P],c[m.sym]={i:0,s:m.sym},m.map?(p++,y=m.map[0]):p==1&&(g=m.sym),y.DT||(y.DT=e.strToDateTime(y.Date)),c[m.sym].d=y.DT,d||(d=c[m.sym]);i.B42(90),C=i.C2Z(0,p),S=p==1&&a.indexOf("%")==-1;e:for(;w=M(),!!w;)if(w==1){if(g)D=r[d.s][d.i][g],D&&(D.Close||D.Close==="0">>64)&&(D=D.Close),v=l.evaluate({symbol0:r[d.s][d.i].Close,symbol1:D}),v=Number(v.toFixed(8)),k={DT:d.d,Close:v,Adj_Close:v},k[d.s]=r[d.s][d.i].Close,!isNaN(v)&&v!=1/0&&u.push(k);else{if(C)throw x="N",x+="o",x+="Exc",x+="eption",A=l.evaluate({}),i.q08(14),e.alert(i.C2Z(a,A,"=")),{name:x,message:""};n=0,T={Adj_Close:{},Close:{},Open:{},High:{},Low:{},Volume:{}};for(F in r){for(var E in T)_="s",_+="ym",_+="bol",i.q08(0),T[E][i.C2Z(n,_)]=r[F][c[F].i][E];n++}k={DT:d.d},k.Adj_Close=l.evaluate(T.Adj_Close),k.Close=l.evaluate(T.Close),k.Open=l.evaluate(T.Open),k.Volume=l.evaluate(T.Volume),isNaN(k.Volume)&&(i.q08(30),k.Volume=i.C2Z(0,"0")),S?(k.High=l.evaluate(T.High),k.Low=l.evaluate(T.Low)):(k.High=Math.max(k.Open,k.Close),k.Low=Math.min(k.Open,k.Close)),!isNaN(k.Close)&&k.Close!=1/0&&u.push(k),isNaN(k.High)||(k.High=Number(k.High.toFixed(8))),isNaN(k.Low)||(k.Low=Number(k.Low.toFixed(8))),isNaN(k.Open)||(k.Open=Number(k.Open.toFixed(8))),isNaN(k.Close)||(k.Close=Number(k.Close.toFixed(8))),isNaN(k.Adj_Close)?k.Adj_Close=k.Close:k.Adj_Close=Number(k.Adj_Close.toFixed(8))}for(F in r)if(!L(c[F]))break e}return u}};Ws=W=>{var e,t;e="e",e+="n",t=typeof _CIQ<"u"?_CIQ:W.CIQ,t.ChartEngine.prototype.setLocale=function(a,r){var i,n,s,h,o,l,u,c;if(i="2-",i+="dig",i+="i",i+="t",n="2-d",n+="i",n+="git",s="num",s+="er",s+="i",X.f9T(),s+="c",!(typeof Intl>"u")){if(this.locale!=a)this.locale=a;else return;for(o=this.internationalizer={},o.hourMinute=new Intl.DateTimeFormat(this.locale,{hour:"numeric",minute:"numeric",hourCycle:"h23"}),o.hourMinuteSecond=new Intl.DateTimeFormat(this.locale,{hour:s,minute:"numeric",second:"numeric",hourCycle:"h23"}),o.mdhm=new Intl.DateTimeFormat(this.locale,{year:"2-digit",month:"2-digit",day:n,hour:i,minute:"2-digit"}),o.monthDay=new Intl.DateTimeFormat(this.locale,{month:"numeric",day:"numeric"}),o.yearMonthDay=new Intl.DateTimeFormat(this.locale,{year:"numeric",month:"numeric",day:"numeric"}),o.yearMonth=new Intl.DateTimeFormat(this.locale,{year:"numeric",month:"numeric"}),o.month=new Intl.DateTimeFormat(this.locale,{month:"short"}),o.numbers=new Intl.NumberFormat(this.locale),o.priceFormatters=[],r||(r=8),h=0;h<r+1;h++)o.priceFormatters.push(new Intl.NumberFormat(this.locale,{maximumFractionDigits:h,minimumFractionDigits:h}));for(h=0;h<5;h++)l="pe",l+="rce",l+="n",l+="t",u=h,c=h,h||(u="",c=2),X.B42(0),o[X.C2Z(u,"percent")]=new Intl.NumberFormat(this.locale,{style:l,minimumFractionDigits:c,maximumFractionDigits:c});t.I18N.createMonthArrays&&t.I18N.createMonthArrays(this,o.month,this.locale)}},t.ChartEngine.prototype.translateUI=function(a){X.Q1Y(),t.I18N.localized&&t.I18N.translateUI(this.preferences.language,a)},t.I18N=function(){},t.I18N.hereDoc=function(a){return a.toString().replace(/^[^/]+\/\*!?/,"").replace(/\*\/[^/]+$/,"")},t.I18N.language=e,t.I18N.longMonths={zh:!0},t.I18N.reverseColorsByLocale={zh:!0,ja:!0},t.I18N.findAllTextNodes=function(a){var r,i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k;if(r="^",r+="\\",r+="s",r+="*$",a||(a=document.body),a==document.body&&!document.querySelector(".ciq_stashed_texts")){i=document.createElement("div"),i.className="ciq_stashed_texts",i.style.display="none",a.appendChild(i),n=document.querySelectorAll("input,textarea,.editable_content");for(var D="0"|0;D<n.length;D++)s="placehol",s+="der",h=n[D].getAttribute(s),h&&(o="origin",o+="al",l=i.appendChild(document.createElement("translate")),l.setAttribute(o,h),l.placeholderFor=n[D],l.appendChild(document.createTextNode(h)))}for(u=document.createTreeWalker(a,NodeFilter.SHOW_TEXT,null,!1),c=u.nextNode(),p=new RegExp(r),y=new RegExp(`
|	|\f`,"g"),d={},g={SCRIPT:!0,STYLE:!0,TEXTAREA:!0};c;)b=c.nodeValue,p.test(b)||(f=c.parentNode,m=c.nextSibling,C=f.tagName,g[C]||(C!="TRANSLATE"?(S=document.createElement("translate"),S.setAttribute("original",b),S.appendChild(c),f.insertBefore(S,m)):b=f.getAttribute("original"),y.test(b)&&(b=b.replace(y,"")),d[b]||(d[b]=[]),d[b].push(c))),c=u.nextNode();if(a==document.body&&(w=t.Studies?t.Studies.studyLibrary:null,w))for(var v in w){if(d[v]===null&&(d[v]=[]),k=w[v],k.inputs)for(var x in k.inputs)d[x]||(d[x]=[]);if(k.outputs)for(var A in k.outputs)d[A]||(d[A]=[])}return X.Q1Y(),d},t.I18N.missingWordList=function(a){var r,i,n,s,h,o,l,u,c;r="Y-",r+="A",r+="xis",a||(a=t.I18N.language),i=t.I18N.findAllTextNodes(),n={},s=t.I18N.wordLists[a],s||(s={}),h=function(f){X.f9T(),typeof s[f]>"u"&&(n[f]="")};for(var p in i)h(p);if(!(t.Studies&&t.Studies.studyLibrary))return n;for(var y in t.Studies.studyLibrary){o=t.Studies.studyLibrary[y],h(o.name);for(var d in o.inputs)switch(u="[object",u+=" Array]",c="[obj",c+="ect String]",h(d),l=o.inputs[d],Object.prototype.toString.call(l)){case c:h(l);break;case u:for(var g=0;g<l.length;++g)h(l[g]);break}for(var b in o.outputs)h(b)}return h("Show Zones"),h("OverBought"),h("OverSold"),h("Panel"),h("Show as Underlay"),X.f9T(),h(r),h("Invert Y-Axis"),n},t.I18N.printableMissingWordList=function(a){var r;return r=JSON.stringify(t.I18N.missingWordList(a)),r=r.replace(/","/g,`",
"`),r},t.I18N.translateUI=function(a,r){X.f9T();var i,n,s,h,o,l,u,c;if(a=="pu"&&(a="pt"),!!t.I18N.wordLists&&(a||(a=t.I18N.language),i=t.I18N.findAllTextNodes(r),n=t.I18N.wordLists[a],!!n))for(var p in i){s=t.I18N.translateSections(p,n),h=i[p];for(var y=0;y<h.length;y++)o=h[y],l=o.parentNode,u=l.getAttribute("original"),(s===","||!s)&&(s=u),c=l.placeholderFor,c?c.placeholder=s:o.data=s}},t.I18N.translate=function(a,r){var i=X,n,s,h,o,l;if(r||(r=t.I18N.language),!t.I18N.wordLists)return console.log("Must include translations.js in order to use CIQ.I18N.translate()"),a;n=t.I18N.wordLists[r],s=2125917350,i.B42(8),h=i.o_T("53303773",0),o=2;for(var u=1;i.Y5b(u.toString(),u.toString().length,"23882"<<64)!==s;u++)l=1,o+=2;return i.X30(o.toString(),o.toString().length,"7679"*1)!==h&&(l=null),n&&(l=t.I18N.translateSections(a,n)||a),l===","?a:l},t.I18N.translateSections=function(a,r){var i=X,n,s;return n="",typeof a=="string"&&a.indexOf(n)!=-1?(i.q08(14),a=a.replace(/([(),])/g,i.C2Z(n,n,"$1")),s=a.split(n),s.forEach(function(h,o,l){var u,c;if(u=h.match(/^(\s*).*\S(\s*)$/),c=r[h.trim()],c){if(u){i.q08(91);var p=i.C2Z(16,19,6,305,6);i.B42(11);var y=i.C2Z(3,0,56,18);c=u[p]+c+u[y]}l[o]=c}}),s.join("")):r[a]},t.I18N.convertCSV=function(a){var r,i,n,s,h,o,l,u,c,p;if(r=new RegExp("[]|[]","g"),i=new RegExp('^(")|(")$',"g"),n=t.I18N.wordLists,a||(a=t.I18N.csv),!!a){s=a.split(`
`),h=s[0],o=h.split(",");for(var y=0;y<o.length;y++)l=o[y],n[l]||(n[l]={});X.Q1Y();for(var d=1;d<s.length;d++){u=s[d].match(/(".*?"|[^",]+)(?=\s*,|\s*$)|(,(?=,))/g)||[],c=u[0],i.test(c)&&(c=c.replace(i,"")),r.test(c)&&(c=c.replace(r,'"'));for(var g=1;g<u.length;g++)p=u[g],i.test(p)&&(p=p.replace(i,"")),n[o[g]][c]=p}}},t.I18N.setLanguage=function(a,r,i,n,s){s||(s=(a.uiContext||{}).topNode||document.body),r=="pu"&&(r="pt"),t.I18N.convertCSV(n),t.I18N.language=r,t.I18N.translateUI(r,s),i||(i=t.I18N.translate),a.translationCallback=i},t.I18N.setLocale=function(a,r,i,n,s){X.f9T();var h,o,l;if(t.xor(this.reverseColorsByLocale[r],this.reverseColorsByLocale[a.locale])&&this.reverseCandles(a),typeof Intl>"u"||!Intl.__addLocaleData){a.setLocale(r,s),i&&i(null);return}n=typeof n>"u"?"locale-data/jsonp":n,X.q08(1),h=X.C2Z("/",".js",n,r),o=document.createElement("SCRIPT"),o.async=!0,o.src=h,l=document.getElementsByTagName("script")[0],l.parentNode.insertBefore(o,l.nextSibling),o.onload=function(){a.setLocale(r,s),i&&i(null)},o.onerror=function(){i&&i("cannot load script")}},t.I18N.createMonthArrays=function(a,r,i){var n,s,h,o,l,u;a.monthAbv=[],a.monthLetters=[],n=new Date,s=!0,t.I18N.longMonths&&t.I18N.longMonths[i]&&(s=!1);for(var c=0;c<12;c++)if(n.setDate(1),n.setMonth(c),h=r.format(n),s){o="";for(var p=0;p<h.length;p++)l=h.charAt(p),u=l.charCodeAt(0),!(u<65)&&(o+=l);a.monthAbv[c]=o,a.monthLetters[c]=o[0]}else a.monthAbv[c]=h,a.monthLetters[c]=h},t.I18N.localize=function(a,r){r=this.langConversionMap[r]||r,this.setLocale(a,r),this.setLanguage(a,r),t.I18N.localized=!0},t.I18N.reverseCandles=function(a){var r,i,n;X.Q1Y(),r=a.styles,i=a.cloneStyle(r.stx_candle_down),n=a.cloneStyle(r.stx_candle_up),r.stx_candle_up=i,r.stx_candle_down=n},t.I18N.wordLists={en:{}},t.I18N.languages={en:"English"},t.I18N.langConversionMap={},t.I18N.localized=!1};Rs=W=>{var e=X,t,a,r,i,n,s;t="<div c",t+='lass="stx_notification_tray"><template><div>',t+='<span class="icon"></span><span class=',t+='"message"></span></div></template></div>',a='<div class="stx-ico-handle" style="display: none;"',a+="><span></span></div> ",r='<div class="stx_jump_today" style="display',r+=':none"><span></sp',r+="an></div>",i='<span class="stx-btn stx_annota',i+='tion_save" style=',i+='"display: none;"></span>',e.Q1Y(),n=typeof _CIQ<"u"?_CIQ:W.CIQ,n.ChartEngine.prototype.pointerEvents={down:[],up:[]},n.ChartEngine.prototype.manageTouchAndMouse=!0,n.ChartEngine.prototype.registerTouchAndMouseEvents=function(){var h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D;this.touchAndMouseEventsRegistered||(this.touchAndMouseEventsRegistered=!0,h=this.controls.chartControls||document,o=h.querySelector(".stx-zoom-in"),l=h.querySelector(".stx-zoom-out"),u=this.chart.container,c=this,p=function(v,x,A){c.addDomEventListener(u,v,T,A);function T(_){c.mainSeriesRenderer&&c.mainSeriesRenderer.nonInteractive||x(_)}},n.touchDevice?n.isSurface?(d="poin",d+="term",d+="o",d+="ve",g="pointerdow",g+="n",b="m",b+="ou",b+="sedown",f="m",f+="ou",f+="seenter",p("mousemove",function(v){e.f9T(),c.msMouseMoveProxy(v)}),p(f,function(v){c.msMouseMoveProxy(v)}),p(b,function(v){c.msMouseDownProxy(v)}),p("mouseup",function(v){e.Q1Y(),c.msMouseUpProxy(v)}),p(g,function(v){return c.startProxy(v)}),p(d,function(v){e.Q1Y(),c.moveProxy(v)}),p("pointerenter",function(v){return e.Q1Y(),c.moveProxy(v)}),p("pointerup",function(v){return e.f9T(),c.endProxy(v)})):(m="touc",m+="h",m+="start",n.isMobile||(C="mouse",C+="en",C+="ter",p("mousemove",function(v){c.iosMouseMoveProxy(v)}),p(C,function(v){e.f9T(),c.iosMouseMoveProxy(v)}),p("mousedown",function(v){e.Q1Y(),c.iosMouseDownProxy(v)}),p("mouseup",function(v){c.iosMouseUpProxy(v)})),p(m,function(v){e.Q1Y(),c.touchstart(v)},{passive:!1}),p("touchmove",function(v){c.touchmove(v)},{passive:!1}),p("touchend",function(v){c.touchend(v)}),p("pointerdown",function(v){c.touchPointerType=v.pointerType}),o&&(S="o",S+="nMouseOu",S+="t",o.removeAttribute("onMouseOver"),o.removeAttribute(S)),l&&(w="onMous",w+="eO",w+="u",w+="t",k="onMou",k+="s",k+="eO",k+="ver",l.removeAttribute(k),l.removeAttribute(w))):(y="m",y+="ous",y+="eu",y+="p",p("mousemove",function(v){e.f9T(),c.mousemove(v)}),p("mouseenter",function(v){e.f9T(),c.mousemove(v)}),p("mousedown",function(v){c.mousedown(v)}),p(y,function(v){e.Q1Y(),c.mouseup(v)})),D=n.wheelEvent,this.captureMouseWheelEvents&&p(D,function(v){e.f9T(),c.mouseWheel(v)},{passive:!1}))},n.ChartEngine.prototype.mousedown=function(h){var o,l,u,c,p,y,d,g,b,f;if(!this.runPrepend("mousedown",arguments)&&(this.grabOverrideClick=!1,!!this.displayInitialized&&this.displayCrosshairs&&!this.repositioningDrawing&&!this.editingAnnotation&&!(h.button&&h.button>=2))){if(o=this.container.getBoundingClientRect(),this.top=o.top,this.left=o.left,this.right=this.left+this.width,this.bottom=this.top+this.height,h.clientX>=this.left&&h.clientX<=this.right&&h.clientY>=this.top&&h.clientY<=this.bottom)this.insideChart=!0;else{this.insideChart=!1;return}if(this.currentPanel){this.manageTouchAndMouse&&h&&h.preventDefault&&this.captureTouchEvents&&h.preventDefault(),this.mouseTimer=Date.now(),this.longHoldTookEffect=!1,this.hasDragged=!1,this.userPointerDown=!0,this.openDialog===""&&this.registerPointerEvent({x:h.clientX,y:h.clientY,time:this.mouseTimer},"down"),l=this.currentPanel.chart;for(var m=0;m<this.drawingObjects.length;m++)if(u=this.drawingObjects[m],u.highlighted&&!u.permanent){if(this.cloneDrawing){c=n.ChartEngine.drawingTools[u.name],p=new c,p.reconstruct(this,u.serialize()),this.drawingObjects.push(p),this.activateRepositioning(p),p.repositioner=u.repositioner;return}if(y=this.currentVectorParameters.vectorType,!n.Drawing||!y||!n.Drawing[y]||!new n.Drawing[y]().dragToDraw){this.activateRepositioning(u);return}}this.mainSeriesRenderer,d=-1173663424,g=192165461,b=2;for(var C=1;e.Y5b(C.toString(),C.toString().length,34258)!==d;C++){var{baselineHelper:S}=this;b+=2}if(e.X30(b.toString(),b.toString().length,34830)!==g)var{baselineHelper:S}=this;if(!(S.size&&this.findBaselineHandle(h,!0))){var{anchorHandles:w}=this.controls;if(w)for(var k in w){var{handle:D,sd:v,highlighted:x}=w[k];if(x){f="s",f+="tx-grab",this.repositioningAnchorSelector={sd:v},D.classList.add(f);return}}this.drawingClick&&(this.currentPanel.subholder===h.target&&this.drawingClick(this.currentPanel,this.cx,this.cy),this.activeDrawing&&this.activeDrawing.dragToDraw)||(this.grabbingScreen=!0,l.spanLock=!1,this.yToleranceBroken=!1,this.grabStartX=h.clientX,this.grabStartY=h.clientY,this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=l.scroll,e.Q1Y(),this.grabStartScrollY=this.currentPanel.yAxis.scroll,this.grabStartCandleWidth=this.layout.candleWidth,this.grabStartYAxis=this.whichYAxis(this.currentPanel),this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,this.grabStartPanel=this.currentPanel,setTimeout(function(A){return e.Q1Y(),function(){A.grabbingHand()}}(this),100),this.swipeStart&&this.swipeStart(l),(this.longHoldTime||this.longHoldTime===0)&&this.startLongHoldTimer(),this.runAppend("mousedown",arguments))}}}},n.ChartEngine.prototype.mousemove=function(h){var o,l;if(o="m",o+="ou",o+="semov",o+="e",l=h,n.ChartEngine.crosshairX=l.clientX,n.ChartEngine.crosshairY=l.clientY,l.type.toLowerCase().indexOf("enter")>-1){this.positionCrosshairsAtPointer();return}e.Q1Y(),!this.runPrepend(o,arguments)&&this.displayInitialized&&this.openDialog===""&&(this.baselineHelper.size&&this.findBaselineHandle(l),this.grabbingScreen&&l.buttons!==1&&(this.cancelLongHold=!0,this.displayDragOK(),this.grabbingScreen=!1,this.findHighlights(!1,!0)),this.mousemoveinner(l.clientX,l.clientY),this.runAppend("mousemove",arguments))},n.ChartEngine.prototype.mouseup=function(h){var o,l,u,c,p,y,d,g,b,f,m,C,S,w,k;if(!this.runPrepend("mouseup",arguments)){if(this.swipe.end=!0,this.cancelLongHold=!0,this.repositioningDrawing){if(!this.currentVectorParameters.vectorType||Date.now()-this.mouseTimer>250){o="ve",o+="ctor",this.changeOccurred(o),n.clearCanvas(this.chart.tempCanvas,this),this.activateRepositioning(null),this.adjustDrawings(),this.draw();return}this.activateRepositioning(null)}if(this.repositioningBaseline){l="moun",l+="ta",l+="in";var{handle:D}=this.repositioningBaseline,{mainSeriesRenderer:v={}}=this;this.repositioningBaseline=null,D.classList.remove("stx-grab"),v.params&&v.params.baseline&&v.params.type!=l,this.draw();return}if(this.repositioningAnchorSelector){var{sd:x}=this.repositioningAnchorSelector;n.Studies.repositionAnchor(this,x),this.repositioningAnchorSelector=null,this.controls.anchorHandles[x.uniqueId].highlighted=!1,n.Studies.displayAnchorHandleAndLine(this,x,this.chart.dataSegment),Object.values(this.controls.anchorHandles||{}).forEach(({handle:T})=>{e.f9T();var _;return _="stx-gr",_+="ab",T.classList.remove(_)}),this.findHighlights();return}if(u=this.userPointerDown,this.userPointerDown=!1,!!this.displayInitialized){if(c=this.backOutY(h.clientY),p=this.backOutX(h.clientX),y=h.which&&h.which>=2||h.button&&h.button>=2,d=this.openDialog!=="",!d&&!y&&this.registerPointerEvent({x:h.clientX,y:h.clientY,time:Date.now()},"up"),g=this.isDoubleClick(),this.grabbingScreen=!1,this.highlightedDraggable&&(this.dragPlotOrAxis&&this.dragPlotOrAxis(p,c),this.currentPanel=this.whichPanel(c)),b=this.currentPanel,this.grabStartYAxis=null,this.displayDragOK(),this.openDialog!==""){f=249810153,m=1347773157,C=2;for(var A=1;e.Y5b(A.toString(),A.toString().length,75136)!==f;A++)S="stx-drag-char",S+="t",this.insideChart&&this.container.classList.remove(S),C+=2;e.Y5b(C.toString(),C.toString().length,"23754">>64)!==m&&this.insideChart&&this.container.classList.remove("");return}if(this.grabOverrideClick){w="s",w+="tx-drag-chart",!this.overXAxis&&!this.overYAxis&&this.swipeRelease&&this.swipeRelease(),this.container.classList.remove(w),this.grabOverrideClick=!1,this.doDisplayCrosshairs(),this.updateChartAccessories();return}if(this.insideChart&&this.container.classList.remove("stx-drag-chart"),n.ChartEngine.resizingPanel){this.releaseHandle();return}if(y||h.ctrlKey)return this.anyHighlighted&&this.bypassRightClick!==!0?(this.rightClickHighlighted(),h.preventDefault&&this.captureTouchEvents&&h.preventDefault(),h.stopPropagation(),!1):(this.dispatch("rightClick",{stx:this,panel:b,x:p,y:c}),!0);h.clientX<this.left||h.clientX>this.right||h.clientY<this.top||h.clientY>this.bottom||(k=b&&b.subholder===h.target,g&&(k||this.overYAxis||this.overXAxis)?this.doubleClick(h.button,p,c):(u&&k&&((!this.longHoldTookEffect||this.activeDrawing)&&this.drawingClick(b,p,c),!this.longHoldTookEffect&&this.activeMarker&&this.activeMarker.click({cx:p,cy:c,panel:b})),!this.longHoldTookEffect&&!this.activeDrawing&&this.dispatch("tap",{stx:this,panel:b,x:p,y:c})),this.runAppend("mouseup",arguments))}}},n.ChartEngine.prototype.registerPointerEvent=function(h,o){this.pointerEvents[o].length>1&&this.pointerEvents[o].pop(),this.pointerEvents[o].unshift(h)},n.ChartEngine.prototype.resetPointerEvent=function(h){e.f9T(),this.pointerEvents[h].splice(0)},n.ChartEngine.prototype.isDoubleClick=function(h){var o,l;o=h?1200:400;var{up:u,down:c}=this.pointerEvents;return this.cancelTouchSingleClick=!1,u.length<2||c.length<2?!1:(l=c[0].time-u[1].time<this.doubleClickTime&&Math.pow(c[1].x-c[0].x,2)+Math.pow(c[1].y-c[0].y,2)<=o&&Math.pow(u[1].x-u[0].x,2)+Math.pow(u[1].y-u[0].y,2)<=o&&u[1].time-c[1].time<this.longHoldTime&&u["0"-0].time-c[0].time<this.longHoldTime,l&&(this.resetPointerEvent("up"),this.resetPointerEvent("down"),this.cancelTouchSingleClick=!0),l)},n.ChartEngine.prototype.doubleClick=function(h,o,l){var u,c;if(u="doubleCli",u+="ck",!this.runPrepend("doubleClick",arguments)&&!this.editingAnnotation){if(n.ChartEngine.drawingLine)return this.currentVectorParameters.vectorType=="continuous"&&n.ChartEngine.completeDrawing(this),this.undo();this.activeDrawing||(c=this.activeMarker&&this.activeMarker.doubleClick({cx:o,cy:l,panel:this.currentPanel}),c||this.dispatch(u,{stx:this,button:h,x:o,y:l}),this.runAppend("doubleClick",arguments))}},n.ChartEngine.prototype.handleMouseOut=function(h){var o,l,u,c;if(h=h||window.event,!h.relatedTarget||!n.withinElement(this.chart.container,h.pageX,h.pageY)){if(o="handleMouse",o+="Out",l="handleMou",l+="seO",l+="ut",this.runPrepend(l,arguments))return;this.grabbingScreen||this.findHighlights(null,!0),this.undisplayCrosshairs(),this.touches=[],this.touching=!1,this.activeDrawing&&this.userPointerDown&&(this.userPointerDown=!1,this.drawingLine=!1,u=this.backOutY(h.pageY),c=this.backOutX(h.pageX),this.drawingClick(this.currentPanel,c,u));var{sd:p,tapToAdd:y}=this.repositioningAnchorSelector||{};p&&!y&&(this.repositioningAnchorSelector=null,this.controls.anchorHandles[p.uniqueId].highlighted=!1,n.Studies.displayAnchorHandleAndLine(this,p,this.chart.dataSegment),this.draw()),this.insideChart=!1,this.overYAxis=!1,this.overXAxis=!1,this.displaySticky(),this.runAppend(o,arguments)}},n.ChartEngine.prototype.startLongHoldTimer=function(h){var o,l;e.f9T(),o=this,this.cancelLongHold=!1,this.longHoldTimeout&&clearTimeout(this.longHoldTimeout),l=function(){o.cancelLongHold||(o.longHoldTookEffect=!0,h&&h(),o.dispatch("longhold",{stx:o,panel:o.currentPanel,x:o.cx,y:o.cy}),e.Q1Y(),o.displayDragOK())},this.longHoldTime?this.longHoldTimeout=setTimeout(l,this.longHoldTime):this.longHoldTime===0&&l()},n.ChartEngine.prototype.grabHandle=function(h){this.runPrepend("grabHandle",arguments)||h&&(n.ChartEngine.crosshairY=this.resolveY(h.top),n.ChartEngine.resizingPanel=h,h.handle.classList.add("stx-grab"),this.runAppend("grabHandle",arguments))},n.ChartEngine.prototype.grabbingHand=function(){this.allowScroll&&(e.Q1Y(),this.grabbingScreen&&(n.touchDevice||this.container.classList.add("stx-drag-chart")))},n.ChartEngine.prototype.releaseHandle=function(){var h;if(h="releaseHan",h+="dle",this.runPrepend("releaseHandle",arguments))return!0;n.clearCanvas(this.chart.tempCanvas,this),this.resizePanels(),n.ChartEngine.resizingPanel&&n.ChartEngine.resizingPanel.handle.classList.remove("stx-grab"),n.ChartEngine.resizingPanel=null,this.runAppend(h,arguments)},n.ChartEngine.prototype.findHighlights=function(h,o){var l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q,j,Z,ee,$,ie,te,re,H,U,G,ae,ne,oe,le,he;l=this.preferences[h?"highlightsTapRadius":"highlightsRadius"],this.highlightViaTap=h;var{cx:ue,cy:ce}=this;if(this.anyHighlighted=!1,!this.currentPanel)return;var{chart:de}=this.currentPanel;if(this.activeDrawing&&(o=!0),u=!1,c=null,p=o?{}:{forceShow:!0,type:"drawing"},y={x0:this.tickFromPixel(ue-l,de),x1:this.tickFromPixel(ue+l,de),y0:this.valueFromPixel(ce-l,this.currentPanel),y1:this.valueFromPixel(ce+l,this.currentPanel),cx0:ue-l,cx1:ue+l,cy0:ce-l,cy1:ce+l,r:l},this.repositioningDrawing&&y.x1-y.x0<2?(y.x1++,y.x0--):y.x1==y.x0&&(y.x0-=.5,y.x1+=.5),!de.hideDrawings)for(var Ce=this.drawingObjects.length-1;Ce>=0;Ce--)d=this.drawingObjects[Ce],this.panels[d.panelName]&&(this.repositioningDrawing&&this.repositioningDrawing!=d||(g=d.highlighted,b=d.panelName==this.currentPanel.name,b&&(d.repositioner=d.intersected(this.crosshairTick,this.crosshairValue,y)),b=b&&d.repositioner&&!this.overXAxis&&!this.overYAxis,!o&&b?(g?(c=d,this.anyHighlighted&&this.singleDrawingHighlight&&(d.highlighted=!1),d.highlighted&&d.highlighted!=g&&(u=!0)):g!=d.highlight(!0)&&(c||(c=d),this.anyHighlighted&&this.singleDrawingHighlight&&(d.highlighted=!1),u=!0),this.anyHighlighted=!0):g!=d.highlight(!1)&&(u=!0),d.highlighted&&(p.noDelete=d.permanent,p.noEdit=!this.callbackListeners.drawingEdit.length,p.noText=p.noEdit||!d.edit,p.message=n.capitalize(d.name))));function pe(ge,Se,De,Re,Qe,Lt){var Mt,xt,st,ut,it,Ft,pt,$e,St,gt,ht,Je,et,mt,ct,lt,rt,ot,Oe,We,Et,Bt,yt,Nt,It;if(Mt="s",Mt+="eg",Mt+="ment",xt="C",xt+="lo",xt+="s",xt+="e",st=this,ut=st.chart,it=st.currentPanel,Re||(Re=it.yAxis),Ft=De.split("-->"),e.B42(33),pt=Ft[e.C2Z("0",32)],$e=Ft[1],$e||($e=xt),St=ut.dataSegment[L],ct=null,lt=null,rt=null,ot=new Array(3),Oe=Qe&&Qe.caches[Lt],St&&Oe){for(Je=Oe[L],ct=St.tick,(Je||Je===0)&&(e.q08(8),ot[e.o_T("0",0)]=1),We=L-1;We>=0;We--)if(Oe[We]||Oe[We]===0){et=Oe[We],e.q08(92),lt=e.o_T(ct,We,L),ot[1]=1;break}for(We=L+1;We<ut.dataSegment.length;We++)if(Oe[We]||Oe[We]===0){mt=Oe[We],e.q08(92),rt=e.C2Z(ct,We,L),ot[2]=1;break}}if(lt===null&&(gt=st.getPreviousBar.call(st,ut,De,L),gt&&(lt=gt.tick,et=Kt(gt))),rt===null&&(ht=st.getNextBar.call(st,ut,De,L),ht&&(rt=ht.tick,mt=Kt(ht))),lt===null&&rt===null)return!1;e.f9T(),Oe||(Je=Kt(St),et=Kt(gt),mt=Kt(ht),ct=St.tick,gt&&(lt=gt.tick),ht&&(rt=ht.tick));function Kt(Wt){var fi,Ht,Gt,bt;fi=-2110575500,Ht=-1627855467,e.f9T(),Gt=2;for(var qt=1;e.Y5b(qt.toString(),qt.toString().length,37044)!==fi;qt++){if(-Wt)return e.B42(33),e.o_T("1",0);bt=Wt[pt],Gt+=2}if(e.X30(Gt.toString(),Gt.toString().length,"48125"*1)!==Ht){if(!Wt)return null;bt=Wt[pt]}return bt&&(bt[$e]||bt[$e]===0)&&(bt=bt[$e]),Qe&&Qe.getBasis&&(bt+=Qe.getBasis(Wt,pt,$e)),!ut.transformFunc||Re!=ut.yAxis?bt:Wt.transform&&pt in Wt.transform?(bt=Wt.transform[pt],bt&&(bt[$e]||bt[$e]===0)&&(bt=bt[$e]),bt):ut.transformFunc(st,ut,bt)}if(!et&&et!==0&&(et=0,lt=0),!mt&&mt!==0)if(Je||Je===0?(mt=Je,ot[2]=ot[0]):(mt=et,ot[2]=ot[1]),Lt&&ut.series[Lt].parameters.extendToEndOfDataSet){e.q08(93);var zt=e.C2Z(1,2,2,14,8);rt=ut.dataSet.length-zt}else rt=lt;return!Je&&Je!==0&&(Je=mt,ct=rt,ot[0]=ot[2],et===0&&lt===0&&(et=Je,lt=ct,ot[1]=ot[0])),Et=st.pixelFromTransformedValue.bind(st),Bt=st.valueFromPixel.bind(st),Je=Bt(ot["0"|0]?Je:Et(Je,it,Re),it),et=Bt(ot[1]?et:Et(et,it,Re),it),mt=Bt(ot[2]?mt:Et(mt,it,Re),it),yt=n.convertBoxToPixels(st,it.name,Se),Nt=n.convertBoxToPixels(st,it.name,{x0:lt,y0:et,x1:ct,y1:Je}),It=n.convertBoxToPixels(st,it.name,{x0:ct,y0:Je,x1:rt,y1:mt}),n.boxIntersects(yt.x0,yt.y0,yt.x1,yt.y1,Nt.x0,Nt.y0,Nt.x1,Nt.y1,Mt)||n.boxIntersects(yt.x0,yt.y0,yt.x1,yt.y1,It.x0,It.y0,It.x1,It.y1,"segment")?Math.min(Math.pow(ce-(Nt.y1+Nt.y0)/2,2)+Math.pow(ue-(Nt.x1+Nt.x0)/2,2),Math.pow(ce-(It.y1+It.y0)/2,2)+Math.pow(ue-(It.x1+It.x0)/("2">>0),2)):!1}e.Q1Y();for(f in this.layout.studies)m=this.layout.studies[f],m.prev=m.highlight,m.highlight=this.yaxisMatches(m,this.grabStartYAxis);for(f in de.seriesRenderers){k=de.seriesRenderers[f],k.params.highlight=this.yaxisMatches(k,this.grabStartYAxis);for(var xe=0;xe<k.seriesParams.length;xe++)w=k.seriesParams[xe],w.prev=w.highlight,w.highlight=k.params.highlight}var{anchorHandles:Te}=this.controls;if(Te)for(var be in Te)Te[be].highlighted=!1;for(D=this.markerHelper&&this.markerHelper.visibleCanvasMarkers,C="0"-0;D&&C<D.length;C++)S=D[C],this.activeMarker=null,S.prev=D[C].highlight,S.highlight=!1;if(this.markerHelper&&(this.markerHelper.highlighted=[]),this.highlightedDataSetField=null,this.highlightedDraggable=null,!o&&!this.anyHighlighted&&Te){for(var _e in Te)if(v=Te[_e],n.getFromNS(v,"sd.signalData.reveal")!==!1){if(!this.anyHighlighted){var{sd:Be,currentPixel:Pe}=v;e.q08(8),x=e.o_T(Pe,l),e.q08(0),A=e.o_T(l,Pe),T=this.panels[Be.panel];var{top:Ie,bottom:Le}=T.yAxis;if(_=n.boxIntersects(x,Ie,A,Le,ue,ce,ue,ce),_){this.anyHighlighted=!0,v.highlighted=!0,u=!0,p={message:Be.name,type:"anchorHandle",noDelete:!0};continue}}v.highlighted===!0&&(v.highlighted=!1,u=!0)}}if(!o&&!this.anyHighlighted&&de.dataSegment&&(L=this.barFromPixel(ue),L>=0&&L<de.dataSegment.length)){for(F=n.convertBoxToPixels(this,this.currentPanel.name,y),P=Number.MAX_VALUE,C=0;D&&C<D.length;C++)if(S=D[C],E=S.params.box,!!E&&S.params.panelName===this.currentPanel.name){if(n.boxIntersects(F.x0,F.y0,F.x1,F.y1,E.x0,E.y0,E.x1,E.y1)){e.B42(0);var Fe=e.C2Z(2,0);e.q08(17);var Ue=e.o_T(1,5,3);O=Math.pow(ce-(E.y1+E.y0)/2,2)+Math.pow(ue-(E.x1+E.x0)/Fe,Ue),O<=P&&(P=O,this.activeMarker=S),S.highlight=!0,this.markerHelper.highlighted.push(S)}S.prev!=S.highlight&&(u=!0)}P=Number.MAX_VALUE,I=null;for(f in this.overlays){if(D&&this.markerHelper.highlighted.length)break;if(m=this.overlays[f],!(m.signalData&&!m.signalData.reveal)&&m.panel==this.currentPanel.name&&m.study.isHighlighted!==!1){if(typeof m.study.isHighlighted=="function"){if(m.study.isHighlighted(this,ue,ce)){I={o:m,out:at},P=0;break}continue}if(B=de.dataSegment[L],!!B)for(var at in m.outputMap)N=pe.call(this,L,y,at,m.getYAxis(this)),N!==!1&&N<=P&&(I={o:m,out:at},P=N)}}for(f in de.seriesRenderers){if(this.highlightedDataSetField)break;if(R=de.seriesRenderers[f],q=R.params.panel,R!=this.mainSeriesRenderer&&!(!R.params.highlightable&&!this.currentVectorParameters.vectorType)&&q==this.currentPanel.name)for(C=0;C<R.seriesParams.length;C++)if(w=R.seriesParams[C],Y=w.field,!Y&&!R.highLowBars&&(Y=this.defaultPlotField||"Close"),w.symbol&&w.subField&&(Y+="-->"+w.subField),z=R.params.yAxis,!z&&q&&(z=this.panels[q].yAxis),R.params.step&&L>0){if(!R.caches[w.id]||(M=R.caches[w.id][L],!M&&M!==0))continue;if(e.q08(8),V=R.caches[w.id][e.C2Z(L,1)],(V||V===0)&&ce+l>=M&&ce-l<=V||ce-l<=M&&ce+l>=V){I={s:w,fullField:Y};break}}else K=pe.call(this,L,y,Y,z,R,w.id),K!==!1&&K<=P&&(I={s:w,fullField:Y},P=K)}I&&(m=I.o,m?(m.name!=m.panel&&(this.anyHighlighted=!0),m.highlight=I.out,this.highlightedDataSetField=I.out):(this.anyHighlighted=!0,I.s.highlight=!0,this.highlightedDataSetField=I.fullField))}j=this.preferences.dragging;for(f in this.overlays)m=this.overlays[f],m.highlight&&(this.anyHighlighted=!0,ee=m.inputs.display||m.name,ee=this.translateIf(ee),p={message:ee,noDelete:m.permanent,noEdit:!m.editFunction,noText:!m.textFunction,type:"study"},c=null,(j===!0||j&&j.study)&&(m.undraggable(this)||(Q=m)),Z=m.getYAxis(this)),m.prev!=m.highlight&&(u=!0);for(f in de.seriesRenderers){$=de.seriesRenderers[f],ie=$.params.yAxis?$.params.yAxis.textStyle:null;for(var He=0;He<$.seriesParams.length;He++)w=$.seriesParams[He],$.params.highlightable&&w.highlight&&(te="s",te+="e",te+="ries",re="a",re+="u",re+="t",re+="o",this.anyHighlighted=!0,H=w.color||ie,H==re&&(H=this.defaultColor),w.opacity&&w.opacity!==1&&(H=n.hexToRgba(n.colorToHex(H),parseFloat(w.opacity))),p={message:w.display||w.symbol,backgroundColor:H,noDelete:w.permanent,type:te},c=null,(j===!0||j&&j.series)&&(Q=$,$.params.highlight=!0),Z=$.getYAxis(this)),w.prev!=w.highlight&&(u=!0)}for(f in this.plugins)U=this.plugins[f],G={},U.findHighlights&&(G=U.findHighlights(this,h,o),G.somethingChanged&&(u=!0),G.anyHighlighted&&(this.anyHighlighted=!0,p=G.stickyArgs||{}));ae=this.whichPanel(ce),ne=this.whichYAxis(ae,ue),Z||(Z=ne),this.currentBaseline&&(Z=this.currentBaseline.getYAxis(this)),Z&&(Z.highlight||(u=!0),Z.highlight=!0),oe=[];for(var Me in this.panels)oe=oe.concat(this.panels[Me].yaxisLHS).concat(this.panels[Me].yaxisRHS);for(f=0;f<oe.length;f++)Z==oe[f]&&!o||(oe[f].highlight&&(u=!0),oe[f].highlight=!1);if((j===!0||j&&j.yaxis)&&ne&&!ne.noDraw&&(this.anyHighlighted=!0,Q=ne,p={}),u&&(this.draw(),p.panel=ae,this.anyHighlighted&&!this.grabStartYAxis?p.panel=ae:p={},this.displaySticky(p),this.clearMeasure(),c&&c.measure()),this.anyHighlighted?this.controls.mSticky&&(p&&p.positioner?p.positioner.call(this,this.controls.mSticky):this.positionSticky(this.controls.mSticky)):this.setMeasure(),Q&&ae&&!ae.noDrag){if(le="stx-drag",le+="gable",this.longHoldTookEffect&&!this.cancelLongHold){if(Q.params){Q.params.dependentOf&&(Q=de.seriesRenderers[Q.params.dependentOf],Q.params.highlight=!0);for(f in de.seriesRenderers)de.seriesRenderers[f].params.dependentOf==Q.params.name&&(de.seriesRenderers[f].params.highlight=!0)}if(this.highlightedDraggable=Q,Q.getDependents){he=Q.getDependents(this,!0);for(f in this.overlays)m=this.overlays[f],he.indexOf(m)>-1&&(m.highlight=!0)}}this.container.classList.add(le)}else this.container.classList.remove("stx-draggable");this.highlightedDataSetField=this.adjustHighlightedDataSetField(this.highlightedDataSetField),this.displayDrawOK()},n.ChartEngine.prototype.rightClickHighlighted=function(){var h;h="rightCl",h+="ick",h+="Highlig",h+="hted",!this.runPrepend(h,arguments)&&(this.deleteHighlighted(!0),this.runAppend("rightClickHighlighted",arguments))},n.ChartEngine.prototype.deleteHighlighted=function(h,o,l){var u,c,p,y,d,g,b,f,m,C,S,w,k,D;if(u="deleteHighlig",u+="hted",!this.runPrepend(u,arguments)){if(this.cancelTouchSingleClick=!0,n.clearCanvas(this.chart.tempCanvas,this),c=this.bypassRightClick===!1,c||!this.bypassRightClick.drawing)for(var v=this.drawingObjects.length-1;v>=0;v--)p=this.drawingObjects[v],p.highlighted&&(h?this.rightClickDrawing(p,o,l):p.permanent||(y=p.abort(),y||(d=this.exportDrawings(),e.q08(34),this.drawingObjects.splice(v,e.o_T("1",0)),this.undoStamp(d,this.exportDrawings())),this.changeOccurred("vector")));if(c||!this.bypassRightClick.study)for(var x in this.overlays)g=this.overlays[x],(g.overlay||g.underlay)&&g.highlight&&!g.permanent&&(h||o?this.rightClickOverlay(x,o):this.removeOverlay(x));if(b=this.currentPanel&&this.currentPanel.chart,b&&(c||!this.bypassRightClick.series)){for(var A in b.seriesRenderers)if(f=b.seriesRenderers[A],f.params.highlightable){m=this.panels[f.params.panel],C=m&&m.yAxis.name;for(var T=f.seriesParams.length-("1"|1);T>=0;T--)S=f.seriesParams[T],(f.params.highlight||S.highlight)&&!S.permanent&&(f.removeSeries(S.id),f.seriesParams.length<1&&(this.removeSeriesRenderer(f),f.params.name==C?this.electNewPanelOwner(f.params.panel):(this.checkForEmptyPanel(f.params.panel),w=this.getYAxisByName(m,f.params.name),w&&(w.name=w.studies[0]||w.renderers[1]))))}}e.Q1Y(),this.draw(),this.resizeChart(),this.clearMeasure(),k=this.controls.mSticky,k&&(D="non",D+="e",k.style.display=D,k.children[0].innerHTML=""),this.runAppend("deleteHighlighted",arguments)}},n.ChartEngine.prototype.displayDragOK=function(h){var o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v;if(o=this,l=this.controls.dragOk,l){if(h||(!this.tapForHighlighting||!this.touching||this.anyHighlighted)&&this.findHighlights(this.highlightViaTap),u=this.highlightedDraggable,c=u&&u.undraggable&&u.undraggable(this),p=this.cx,y=this.cy,!h){if(u&&!c&&this.longHoldTookEffect&&!this.cancelLongHold)d="stx-d",d+="rag-",d+="axis",g="inlin",g+="e-block",b=u.inputs&&u.inputs.display||u.params&&(u.params.display||u.params.name)||u.name,l.querySelector(".field").setAttribute("text",b),A.call(this,l),l.style.display=g,this.draw(),this.displaySticky(),this.grabStartYAxis?this.container.classList.replace("stx-drag-chart",d):this.container.classList.replace("stx-drag-chart","stx-drag-series");else{f="s",f+="t",f+="x-drag-ax",f+="is",m="stx-",m+="drag-seri",m+="e",m+="s",l.style.display="none",this.draw(),this.container.classList.remove(m),this.container.classList.remove(f);for(var x in this.panels){for(C="le",C+="f",C+="t",S="dr",S+="op",S+="zone",w=this.panels[x].subholder.classList,w.remove(S),w.remove("all"),w.remove(C),w.remove("right"),w.remove("top"),w.remove("bottom"),k=0;k<this.panels[x].yaxisLHS.length;k++)this.panels[x].yaxisLHS[k].dropzone=null;for(k=0;k<this.panels[x].yaxisRHS.length;k++)this.panels[x].yaxisRHS[k].dropzone=null}}this.draw()}u&&(D=y+l.offsetHeight,v=Math.max(0,p-l.offsetWidth),e.q08(0),l.style.top=e.o_T("px",D),e.q08(0),l.style.left=e.C2Z("px",v),A.call(this,l))}function A(T){var _,L,M;_="a",_+="l",_+="l",L=o.translateIf(T.querySelector(".field").getAttribute("text")),M=o.whichYAxis(o.whichPanel(o.cy),o.cx,o.cy),M&&M.dropzone==_&&(L+="-->"+o.translateIf(M.name)),T.querySelector(".field").innerHTML=L}},n.ChartEngine.prototype.displayDrawOK=function(){var h,o,l,u,c,p,y;e.Q1Y(),h=this.controls.drawOk,h&&n.Drawing&&(o="n",o+="o",o+="n",o+="e",l=n.Drawing[this.currentVectorParameters.vectorType],l&&(l=new l),this.highlightedDataSetField&&l&&l.isAllowed(this,this.highlightedDataSetField)?(u=".",u+="f",u+="ield",c="p",c+="x",h.style.display="inline-block",p=this.cy+h.offsetHeight,y=this.cx-h.offsetWidth,e.q08(0),h.style.top=e.o_T("px",p),e.q08(0),h.style.left=e.C2Z(c,y),h.querySelector(u).innerHTML=this.translateIf(this.highlightedDataSetField)):h.style.display=o)},n.ChartEngine.prototype.mouseWheel=function(h){var o,l,u,c,p,y,d,g,b,f;if(o="MozMousePixe",o+="lScro",o+="l",o+="l",l="ve",l+="rtic",l+="al",!this.runPrepend("mouseWheel",arguments)&&(h.preventDefault&&h.preventDefault(),this.openDialog===""&&(e.Q1Y(),u=h.deltaX,c=h.deltaY,Math.abs(c)>Math.abs(u)?u=0:c=0,this.lastMouseWheelEvent=Date.now(),!(Math.abs(u)===0&&Math.abs(c)===0)))){if(h.shiftKey&&c&&(u=c,c=0),this.allowSideswipe&&u!==0){y="hor",y+="izontal",this.lastMove=y,d=u,this.grabbingScreen=!0,this.currentPanel||(this.currentPanel=this.chart.panel),this.grabStartX=n.ChartEngine.crosshairX,this.grabStartY=n.ChartEngine.crosshairY,this.grabStartScrollX=this.chart.scroll,this.grabStartScrollY=this.currentPanel.yAxis.scroll,this.grabStartMicropixels=this.micropixels,this.grabStartPanel=this.currentPanel,this.mouseWheelAcceleration&&(p=Math.max(Math.pow(Math.abs(d),.3),1),d*=p),this.mousemoveinner(n.ChartEngine.crosshairX-d,n.ChartEngine.crosshairY),this.updateChartAccessories(),this.grabbingScreen=!1;return}if(this.lastMove=l,!(!this.allowZoom||this.activeDrawing&&!this.allowDrawingZoom)&&this.displayInitialized){if(!c)if(n.wheelEvent=="mousewheel"){if(c=-1/("40"^0)*h.wheelDelta,h.wheelDeltaX){e.q08(94);var m=e.o_T(10,11);e.B42(95);var C=e.C2Z(12,19,54,61,39);u=m/C*h.wheelDeltaX}}else c=h.detail;if(typeof h.deltaMode>"u"&&(h.deltaMode=h.type==o?0:1),g=-c,h.deltaMode==1&&(g*=33),b=null,f=null,this.mouseWheelAcceleration&&(p=Math.max(Math.pow(Math.abs(g),.3),1),b=Math.max(Number.MIN_VALUE,1-.1*p),e.B42(9),f=e.C2Z(b,1)),this.zoomInitiatedByMouseWheel=!0,g>0?this.reverseMouseWheel?this.zoomOut(null,f):this.zoomIn(null,b):g<0&&(this.reverseMouseWheel?this.zoomIn(null,b):this.zoomOut(null,f)),!this.runAppend("mouseWheel",arguments))return!1}}},n.ChartEngine.handleContextMenu=function(h){var o,l;e.Q1Y(),o=n.ChartEngine.registeredContainers;for(var u=0;u<o.length;u++)if(h.target.ownerDocument===o[u].ownerDocument&&(l=o[u].stx,l&&l.anyHighlighted))return h.preventDefault&&h.preventDefault(),!1},n.ChartEngine.registerGlobalEvent("contextmenu",n.ChartEngine.handleContextMenu),n.ChartEngine.htmlControls={annotationSave:i,annotationCancel:'<span class="stx-btn stx_annotation_cancel" style="display: none; margin-left:10px;"></span>',mSticky:`
		<div class="stx_sticky">
			<span class="mStickyInterior"></span>
			<span class="mStickyRightClick">
				<span class="overlayText stx-btn" style="display:none">
					<span>&nbsp;</span>
				</span>
				<span class="overlayEdit stx-btn" style="display:none">
					<span>&nbsp;</span>
				</span>
				<span class="overlayTrashCan stx-btn" style="display:none">
					<span>&nbsp;</span>
				</span>
				<span class="mouseDeleteInstructions">
					<span>(</span>
					<span class="mouseDeleteText">right-click to delete</span>
					<span class="mouseManageText">right-click to manage</span>
					<span>)</span>
				</span>	
			</span>
			<span class="stickyLongPressText">(long-press to drag)</span>
			<span class="customInstructions">
				<span>(</span>
				<span class="dragAnchorText" type="anchorHandle">
					drag to change anchor time
				</span>
				<span>)</span>
			</span>
		</div>
	`,drawOk:'<div class="stx_draw_ok"><div class="icon"></div><div class="field"></div></div>',dragOk:'<div class="stx_drag_ok"><div class="icon"></div><div class="field"></div></div>',crossX:'<div class="stx_crosshair stx_crosshair_x" style="display: none;"></div>',crossY:'<div class="stx_crosshair stx_crosshair_y" style="display: none;"></div>',chartControls:'<div class="stx_chart_controls" style="display: none;"><div class="chartSize"><span class="stx-zoom-out"></span><span class="stx-zoom-in"></span></div></div>',home:r,floatDate:'<div class="stx-float-date" style="visibility: hidden;"></div>',handleTemplate:a,iconsTemplate:'<div class="stx-panel-control"><div class="stx-panel-title"></div><div class="stx-panel-legend"></div><div class="stx-btn-panel"><span class="stx-ico-up"></span></div><div class="stx-btn-panel"><span class="stx-ico-focus"></span></div><div class="stx-btn-panel"><span class="stx-ico-down"></span></div><div class="stx-btn-panel"><span class="stx-ico-edit"></span></div><div class="stx-btn-panel"><span class="stx-ico-close"></span></div></div>',baselineHandle:'<div class="stx-baseline-handle" style="display: none;"></div>',notificationTray:t},n.ChartEngine.prototype.registerChartControl=function(h,o,l){var u,c,p;if(u=this.controls,!(!u||!u.chartControls)&&!u.chartControls.querySelector("."+h)&&(c=null,p=u.chartControls.querySelector(".stx-zoom-in"),p))return c=document.createElement("span"),e.q08(14),c.innerHTML=e.o_T('<span class="stx-tooltip">',"</span>",o),e.B42(0),c.className=e.o_T(h,"stx-chart-control-button "),p.parentNode.appendChild(c),l&&n.safeClickTouch(c,l),n.touchDevice||this.makeModal(c),c},n.ChartEngine.prototype.zoomOut=function(h,o){var l,u,c,p,y;if(l="zo",l+="o",l+="m",l+="Out",this.runPrepend(l,arguments))return;this.preferences.zoomOutSpeed?o=this.preferences.zoomOutSpeed:o||(e.q08(9),o=e.C2Z(.7,1));function d(b){return function(f){var m;if(u.zoomSet(f,b),u.animations.zoom.hasCompleted){if(m="zo",m+="o",m+="m",m+="Out",u.runAppend(m,arguments))return;u.changeOccurred("layout"),u.continuousZoom&&u.continuousZoom.execute(!0)}}}h&&h.preventDefault&&h.preventDefault(),this.cancelTouchSingleClick=!0,u=this;for(var g in this.charts)c=this.charts[g],p=c.width*o/this.layout.candleWidth,c.allowScrollFuture===!1&&c.allowScrollPast===!1&&p>c.dataSet.length&&(p=c.dataSet.length),y=this.chart.width/p,this.layout.setSpan=null,this.layout.range=null,this.animations.zoom.run(d(c),this.layout.candleWidth,y)},n.ChartEngine.prototype.zoomIn=function(h,o){e.Q1Y();var l,u,c,p;if(this.runPrepend("zoomIn",arguments))return;function y(b){return function(f){if(l.zoomSet(f,b),e.Q1Y(),l.animations.zoom.hasCompleted){if(l.runAppend("zoomIn",arguments))return;l.changeOccurred("layout"),l.continuousZoom&&l.continuousZoom.execute()}}}this.preferences.zoomInSpeed?o=this.preferences.zoomInSpeed:o||(o=.7),h&&h.preventDefault&&h.preventDefault(),this.cancelTouchSingleClick=!0,l=this;for(var d in this.charts){if(u=this.charts[d],c=u.width*o/this.layout.candleWidth,u.maxTicks-c<1){e.B42(7);var g=e.o_T(0,4,3,1);c=u.maxTicks-g}c<this.minimumZoomTicks&&(c=this.minimumZoomTicks),p=this.chart.width/c,this.layout.setSpan=null,this.layout.range=null,this.animations.zoom.run(y(u),this.layout.candleWidth,p)}},n.ChartEngine.prototype.createCrosshairs=function(){var h,o,l;h="createCr",h+="oss",h+="hair",h+="s",!this.runPrepend("createCrosshairs",arguments)&&(!this.manageTouchAndMouse||this.mainSeriesRenderer&&this.mainSeriesRenderer.nonInteractive||(o=this.controls.crossX,l=this.controls.crossY,o&&(o.onmousedown||(o.onmousedown=function(u){return u.preventDefault&&u.preventDefault(),e.Q1Y(),!1})),l&&(l.onmousedown||(l.onmousedown=function(u){return u.preventDefault&&u.preventDefault(),!1})),this.runAppend(h,arguments)))},s=!1,n.ChartEngine.prototype.mousemoveinner=n.ChartEngine.prototype.mousemoveinner||function(h,o){var l;l="intera",l+="ction feature requires activa",l+="ting movement feature.",s||console.error(l),s=!0}};qs=W=>{var e,t;e="un",e+="defined",t=typeof _CIQ!==e?_CIQ:W.CIQ,t.Marker||(t.ChartEngine.helpersToRegister.push(function(a){X.Q1Y(),a.markerHelper={chartMap:{},classMap:{},domMarkers:[],visibleCanvasMarkers:[],highlighted:[],placementMap:{}}}),t.ChartEngine.prototype.addToHolder=function(a){var r,i,n,s;r=this.panels[a.params.panelName],r&&(i=a.params,n=a.node,s=a.stxNodeCreator,X.Q1Y(),s&&s.prepareForHolder&&(n=s.prepareForHolder(a)),i.chartContainer?this.container.appendChild(a.node):i.includeAxis?r.holder.appendChild(a.node):r.subholder.appendChild(n),a.chart=r.chart,s&&s.addToHolder&&s.addToHolder(a),s&&s.expand&&t.Marker.initializeScrollBehavior(s))},t.ChartEngine.prototype.getMarkerArray=function(a,r){var i,n;X.f9T(),i=[];for(var s in this.markers)for(var h=0;h<this.markers[s].length;h++)n=this.markers[s][h],a=="panelName"?n.params.panelName==r&&i.push(n):a=="label"?s==r&&i.push(n):a=="all"&&i.push(n);return i},t.ChartEngine.prototype.removeFromHolder=function(a){var r,i,n,s,h,o;if(r=this.panels[a.params.panelName],r&&(a.node.parentNode==r.holder?r.holder.removeChild(a.node):a.node.parentNode==r.subholder?r.subholder.removeChild(a.node):a.node.parentNode==this.container&&this.container.removeChild(a.node)),i=this.markers[a.params.label],!!i){for(n="0"*1;n<i.length;n++)if(i[n]===a){i.splice(n,1);break}if(s=this.markerHelper.chartMap[a.chart.name],s){for(n=0;n<s.markers.length;n++)if(s.markers[n]===a){s.markers.splice(n,1);break}}if(h=this.markerHelper.classMap[a.className],X.f9T(),h&&(o=h[a.params.panelName],o)){for(n=0;n<o.length;n++)if(o[n]===a){o.splice(n,1);break}}}},t.ChartEngine.prototype.moveMarkers=function(a,r){var i,n,s;X.f9T(),i="panel",i+="N",i+="a",i+="me",n=this.getMarkerArray(i,a);for(var h="0"<<32;h<n.length;h++)n[h].params.panelName=r;for(var o in this.markerHelper.classMap)s=this.markerHelper.classMap[o][a],s&&(this.markerHelper.classMap[o][r]=s,delete this.markerHelper.classMap[o][a])},t.ChartEngine.prototype.establishMarkerTicks=function(){var a,r;X.f9T(),a=this.markerHelper.chartMap;for(var i in a){r=a[i];for(var n=0;n<r.markers.length;n++)this.setMarkerTick(r.markers[n])}},t.ChartEngine.prototype.futureTickIfDisplayed=function(a){var r=X,i,n,s,h,o,l,u,c,p;if(i=a.chart,!(i.dataSet.length<1)){n=i.xaxis[i.xaxis.length-1].DT,r.q08(13);var y=r.o_T(23,59991,14);if(n=new Date(n.getTime()-this.timeZoneOffset*y),!(a.params.x>n)){s=i.maxTicks-i.dataSegment.length,h=i.dataSet.length+s,u=new Date(+i.dataSet[i.dataSet.length-1].DT),c=this.standardMarketIterator(u,null,i),p=a.params.x.getTime();for(var d=i.dataSet.length;d<h;d++)if(o=u.getTime(),u=c.next(),l=u.getTime(),l==p){a.tick=d;return}else if(l>p&&o<p){r.B42(8),a.tick=Math.max(r.o_T(d,1),0);return}}}},t.ChartEngine.prototype.setMarkerTick=function(a){var r,i,n,s,h,o,l;if(r="d",r+="at",r+="e",i=a.chart,a.params.xPositioner=="master"&&a.params.x)a.tick=Math.floor(a.params.x/this.layout.periodicity);else if(a.params.xPositioner=="tick"&&a.params.x)a.tick=a.params.x;else if(a.params.xPositioner==r&&a.params.x){h=a.params.x.getTime();for(var u="0">>64;u<i.dataSet.length;u++)if(o=i.dataSet[u],s=o.DT.getTime(),n=s,u>0&&(n=i.dataSet[u-1].DT.getTime()),s==h){a.tick=u;return}else if(s>h&&n<h){X.q08(8),a.tick=Math.max(X.o_T(u,1),0);return}else if(h<s){a.tick=null;return}if(i.dataSet.length<1)return;l=new Date(+i.dataSet[u-1].DT),l.getTime()<h&&(a.params.future=!0),a.tick=null}},t.ChartEngine.prototype.positionMarkers=function(){var a,r,i,n,s,h,o,l;if(a="a",a+="l",a+="l",r=this,i=this.chart,!r.markerHelper)return;this.markerHelper.placementMap={};function u(){var p,y,d,g,b;if(p="positionM",p+="ark",p+="er",p+="s",!r.runPrepend("positionMarkers",arguments)){r.markerTimeout=null;for(var f in r.markerHelper.classMap)for(var m in r.markerHelper.classMap[f])y=r.markerHelper.classMap[f][m],d=r.panels[m],y.length&&(g={stx:r,arr:y,panel:d},g.firstTick=d.chart.dataSet.length-d.chart.scroll,g.lastTick=g.firstTick+d.chart.dataSegment.length,b=y[0].constructor.placementFunction,b?b(g):r.defaultMarkerPlacement(g));r.runAppend(p,arguments)}}if(this.markerDelay||this.markerDelay===0?this.markerTimeout||(this.markerTimeout=setTimeout(u,this.markerDelay)):u(),n=this.getFirstLastDataRecord(i.dataSegment,"tick"),s=this.getFirstLastDataRecord(i.dataSegment,"tick",!0),!(!n||!s)){h=this.getMarkerArray(a),this.markerHelper.visibleCanvasMarkers=[];for(var c=0;c<h.length;c++)o=h[c],l=o.stxNodeCreator,n.tick<=o.tick&&o.tick<=s.tick?(this.markerHelper.visibleCanvasMarkers.push(o),l&&l.drawMarker&&l.drawMarker(o)):(o.highlight=!1,o.params.box=null,o.attached&&l&&l.expand&&(l.expand.style.visibility="hidden"))}},t.Marker=t.Marker||function(a){var r,i,n,s,h,o,l;if(r="c",X.Q1Y(),r+="ha",r+="r",r+="t",i="d",i+="a",i+="t",i+="e",this.params={xPositioner:i,yPositioner:"value",panelName:r,permanent:!1,label:"generic",includeAxis:!1},t.extend(this.params,a),this.params.node||(this.params.node=document.createElement("DIV")),n=this.params.stx,!n){console.log("Marker created without specifying stx");return}this.className||(this.className="CIQ.Marker"),t.derivedFrom(this.params.node,t.Marker.NodeCreator)?(this.stxNodeCreator=this.params.node,this.node=this.stxNodeCreator.node):this.node=this.params.node,s=this.params.label,n.markers[s]||(n.markers[s]=[]),n.markers[s].push(this),h=n.panels[this.params.panelName],this.chart=h.chart,n.markerHelper.chartMap[this.chart.name]||(n.markerHelper.chartMap[this.chart.name]={markers:[]}),n.markerHelper.chartMap[this.chart.name].markers.push(this),o=n.markerHelper.classMap[this.className],o||(o=n.markerHelper.classMap[this.className]={}),o[this.params.panelName]||(o[this.params.panelName]=[]),o[this.params.panelName].push(this),l=this.stxNodeCreator&&this.stxNodeCreator.deferAttach,l||n.addToHolder(this),n.setMarkerTick(this),this.stxNodeCreator&&this.stxNodeCreator.drawMarker&&this.stxNodeCreator.drawMarker(this)},t.Marker.prototype.remove=function(){this.params.stx.removeFromHolder(this),this.stxNodeCreator&&this.stxNodeCreator.remove&&this.stxNodeCreator.remove(this)},t.Marker.prototype.click=function(a){var r,i;r="num",r+="b",r+="er",typeof arguments[0]===r&&(a={cx:arguments[0],cy:arguments[1],panel:arguments[3]});var{cx:n,cy:s,panel:h}=a;this.params.stx&&(i=this.params.node,i.click&&i.click(n,s,this,h))},t.Marker.prototype.doubleClick=function({cx:a,cy:r,panel:i}){return X.Q1Y(),!1},t.Marker.prototype.render=function(){var a,r;a=[this],r={stx:this.params.stx,arr:a,panel:this.params.stx.panels[this.params.panelName],showClass:this.showClass},this.constructor.placementFunction(r)},t.Marker.removeByLabel=function(a,r){var i,n;i=a.getMarkerArray("label",r);for(var s=0;s<i.length;s++)n=i[s],a.removeFromHolder(n),n.stxNodeCreator&&n.stxNodeCreator.remove&&n.stxNodeCreator.remove(n);a.draw()},t.Marker.positionContentVerticalAndHorizontal=function(a,r){var i=X,n,s,h,o,l,u,c,p,y,d,g,b;if(n=a.querySelector(".stx-marker-expand"),!!(r||n&&n.isConnected&&t.trulyVisible(n))){s=n.offsetHeight,h=n.style,h.left=h.right="",h.bottom=h.top="",o=getComputedStyle(n),l=o.left,u=o.bottom,i.B42(54);var f=i.C2Z(1,1,9,1);c=a.offsetLeft+parseInt(l,f),i.f9T(),p=parseInt(u,10),y=a.offsetTop-(p+s-a.offsetHeight),d=a.parentNode.offsetWidth,g=a.parentNode.offsetHeight,c+n.offsetWidth>d&&(h.right=l,h.left="auto"),a.offsetTop<=g?y>g-s&&(h.top=g-a.offsetTop-s+"px",h.bottom="auto"):(b="p",b+="x",i.q08(0),h.top=i.C2Z(b,g)),a.offsetTop+a.offsetHeight>=0?y<0&&(h.top=-a.offsetTop+"px",h.bottom="auto"):h.bottom="0px"}},t.Marker.initializeScrollBehavior=function(a){var r,i,n;r="t",r+="o",r+="uc",r+="hmove",i="</div",i+=">";var{expand:s}=a;if(!(!s||s.scrollInitialized)){s.querySelector(".marker_content")||(s.innerHTML='<div class="marker_content">'+s.innerHTML+i),s.addEventListener(t.wheelEvent,o=>(X.f9T(),o.stopPropagation()),{passive:!1}),s.addEventListener(r,o=>o.stopPropagation(),{passive:!1});var{scrollbarStyling:h}=t.UI||{};h?h.refresh(s):(n="scr",n+="o",n+="ll",s.style.overflowY=n),s.scrollInitialized=!0}},t.ChartEngine.prototype.getBarBounds=function(a,r){var i,n,s,h,o;return this.layout.chartType,i=this.layout.aggregationType,!r&&i=="pandf"?n={high:Math.max(a.pfOpen,a.pfClose),low:Math.min(a.pfOpen,a.pfClose)}:n={high:a.High,low:a.Low},a.markerHigh&&(n.high=a.markerHigh),a.markerLow&&(n.low=a.markerLow),a.Open===void 0&&(s=a.Close),X.f9T(),a.High===void 0&&(h=Math.max(a.Open||s,a.Close)),a.Low===void 0&&(o=Math.min(a.Open||s,a.Close)),!n.high&&n.high!=="0">>0&&(n.high=h),!n.low&&n.low!==0&&(n.low=o),n},t.ChartEngine.prototype.defaultMarkerPlacement=function(a){var r=X,i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V;i=a.panel,n=i.chart,s=a.stx,h=s.chart.highLowBars,r.f9T(),o=n.defaultPlotField,(!o||h)&&(o="Close");for(var K=0;K<a.arr.length;K++)if(l=a.arr[K],u=l.params,!l.params.box){if(c=l.node,l.clientWidth||(l.clientWidth=c.clientWidth),l.clientHeight||(l.clientHeight=c.clientHeight),p=null,y=u.xPositioner,d=u.yPositioner,g=u.yAxis||i.yAxis,b=u.field,f=l.tick,m=n.dataSet,C=l.clientWidth,y!="none"){if(S="ba",S+="r",y==S&&u.x){w="p",w+="x",u.x<n.xaxis.length&&(k=n.xaxis[u.x],k&&(p=k.data)),r.B42(24);var Q=r.o_T(2,2,0,2);r.B42(96);var j=r.o_T(10,2,9,13,0);c.style.left=Math.round(s.pixelFromBar(u.x,n)-C/Q)+j+w}else{if(!f&&f!==0)if(u.future&&n.scroll<n.maxTicks){if(s.futureTickIfDisplayed(l),f=l.tick,!f&&f!==0){c.style.left="-1000px";continue}}else{D="-1",D+="0",D+="00p",D+="x",c.style.left=D;continue}if(f<m.length&&(p=m[f]),l.leftpx=Math.round(s.pixelFromTick(f,n)-n.left-C/2),l.rightEdge=l.leftpx+C,c.style.left=l.leftpx+"px",f<a.firstTick&&l.rightEdge<n.left-50)continue}if(!p){r.B42(97);var Z=r.C2Z(41,4,83,9);p=m[m.length-("1">>Z)]}}else if(d.indexOf("candle")>-1&&(v=getComputedStyle(c).left,v&&(x=s.barFromPixel(parseInt(v,10),n),x>=0&&(p=n.xaxis[x].data,!p)))){r.q08(98);var ee=r.o_T(1,1,18,20,1);p=m[m.length-ee]}if(c.style.top="auto",A=u.y,T=l.clientHeight,L=0,d!="none"){M="bo",M+="ttom",F="t",F+="o",F+="p",P="und",P+="e",P+="r_candle",E="u",E+="nde",E+="fin",E+="ed",O=d.indexOf("_lane")>-1,I=s.markerHelper.placementMap,B=d+"|"+i.name,O&&typeof I[B]>"u"&&(I[B]=2),r.q08(99),r.o_T(11,5291,5283,6457),r.q08(0);var $=r.C2Z(6567,1095);r.q08(100);var ie=r.C2Z(544,4898,3);r.B42(14);var te=r.C2Z(3917,8,5);r.q08(59),r.C2Z(2,46765,4673,11),r.q08(100);var re=r.o_T(97,779,8);if(N=B+($==ie?"e":te<=re?"0x140e"<<0:"-")+(O?l.params.label:c.style.left),R=u.chartContainer?s.height:i.yAxis.bottom,q=0,typeof I[N]==E&&(I[N]=O?I[B]:0,r.B42(0),I[B]+=r.C2Z(2,T)),L=I[N],O||(I[N]+=T),p&&b&&(p=p[b]),typeof p=="number"&&(p={Close:p},p[o]=p.Close,h=!1),d=="value"&&(A||A==="0"-0)){r.q08(101);var H=r.C2Z(5,8,12,13);q=Math.round(R-s.pixelFromPrice(A,i,g)-T/H)+"px"}else if((d=="below_candle"||d==P)&&p)Y="l",Y+="ow",z="h",z+="igh",_=p[o],h&&(_=s.getBarBounds(p,!!b)[g.flipped?z:Y]),q=Math.round(R-s.pixelFromPrice(_,i,g)-T-L)+"px";else if(d=="on_candle"&&p){if(_=p[o],h){_=s.getBarBounds(p,!!b),r.B42(102);var U=r.o_T(0,6,9,8,9);_=(_.high+_.low)/U}r.B42(3);var G=r.C2Z(30,16,4,8);q=Math.round(R-s.pixelFromPrice(_,i,g)-T/G-L)+"px"}else d==F||d=="top_lane"?q=Math.round(R-T-L-i.top)+"px":d==M||d=="bottom_lane"?q=Math.round(L)+"px":p&&(V="h",V+="ig",V+="h",_=p[o],h&&(_=s.getBarBounds(p,!!b)[g.flipped?"low":V]),q=Math.round(R-s.pixelFromPrice(_,i,g)+L)+"px");c.style.bottom!=q&&(c.style.bottom=q)}t.Marker.positionContentVerticalAndHorizontal(c)}},t.Marker.NodeCreator=function(){},t.Marker.NodeCreator.toNode=function(){return this.node},t.Marker.Simple=function(a){var r,i,n,s,h,o,l,u,c,p;r="c",r+="a",r+="l",r+="lout",i="d",i+="i",i+="v",n="d",n+="i",n+="v",s=this.node=document.createElement(n),s.className="stx-marker",s.classList.add(a.type),a.category&&s.classList.add(a.category),h=t.newChild(s,i,"stx-visual"),t.newChild(s,"div","stx-stem"),a.type==r?(l="h",l+="4",u="s",u+="t",u+="x-marker-conte",u+="nt",c="d",c+="i",c+="v",p=t.newChild(h,c,u),t.newChild(p,l,null,a.headline),o=t.newChild(p,"div","stx-marker-expand"),t.newChild(o,"p",null,a.story)):(o=t.newChild(s,"div","stx-marker-expand"),t.newChild(o,"h4",null,a.headline),t.newChild(o,"p",null,a.story),t.safeClickTouch(o,function(y){var d;d="h",d+="ighlight",s.classList.toggle(d)})),t.safeClickTouch(h,function(y){var d;d="h",d+="igh",d+="l",d+="ight",X.f9T(),s.classList.toggle(d),t.Marker.positionContentVerticalAndHorizontal(s,!0)}),this.nodeType="Simple",X.f9T(),this.expand=o},t.inheritsFrom(t.Marker.Simple,t.Marker.NodeCreator,!1))};Ys=W=>{var e=X,t,a,r,i,n,s,h,o,l,u;t="undefi",t+="n",t+="ed",a="undefine",a+="d",r=typeof _CIQ!==a?_CIQ:W.CIQ,i=typeof _timezoneJS!==t?_timezoneJS:W.timezoneJS,n=6e4*60,s=n*("24"-0),h=!0,o=r.Market,r.Market=function(c){var p,y,d,g;if(this.market_def=!1,this.rules=!1,this.normalHours=[],this.extraHours=[],this.class_name="Market",i.Date?this.tz_lib=i.Date:this.tz_lib=Date,this.market_tz="",this.hour_aligned=!1,this.convertOnDaily=!1,this.enabled_by_default=!1,typeof c<"u"&&c&&!r.isEmpty(c)){if(p="und",p+="efin",p+="ed",c.market_definition&&(c=c.market_definition),c.rules){y=-1396553747,d=52266895,g=2;for(var b="1"<<64;e.X30(b.toString(),b.toString().length,23035)!==y;b++)this.rules=c.rules,g+=2;e.Y5b(g.toString(),g.toString().length,59306)!==d&&(this.rules=c.rules)}c.market_tz&&(this.market_tz=c.market_tz),c.convertOnDaily&&(this.convertOnDaily=c.convertOnDaily),c.hour_aligned,this.hour_aligned=c.hour_aligned,typeof c.beginningDayOfWeek!==p&&(this.beginningDayOfWeek=c.beginningDayOfWeek),typeof c.minimum_session_length<"u"&&(this.minimumSessionLength=c.minimum_session_length),typeof c.enabled_by_default<"u"&&c.enabled_by_default instanceof Array&&(this.enabled_by_default=c.enabled_by_default),this.market_def=c,this.market_def.name===void 0&&(this.market_def.name="no market name specified")}else{this.hour_aligned=!0;return}r.Market._createTimeSegments(this),this.getSessionNames()},r.Market.Symbology=function(){},r.Market.Symbology.isForeignSymbol=function(c){return e.Q1Y(),!1},r.Market.Symbology.isFuturesSymbol=function(c){return!1},e.Q1Y(),r.Market.Symbology.isRateSymbol=function(c){return!1},r.Market.Symbology.isForexSymbol=function(c){return e.Q1Y(),!1},r.Market.Symbology.isForexMetal=function(c,p){return!1},r.Market.Symbology.isForexCrypto=function(c){return!1},r.Market.Symbology.isForexFuturesSymbol=function(c){return!!(r.Market.Symbology.isForexSymbol(c)||r.Market.Symbology.isFuturesSymbol(c))},r.Market.Symbology.factory=function(c){return null},r.Market.Symbology.encodeTermStructureInstrumentSymbol=function(c,p){console.warn("You are trying to call `CIQ.Market.Symbology.encodeTermStructureInstrumentSymbol` but have not implemented it.")},o&&r.extend(r.Market,o),r.Market.prototype.sessions=null,r.Market.prototype.beginningDayOfWeek=0,r.Market.prototype.minimumSessionLength=30,r.Market.prototype.tradingDays=function(){var c;if("_tradingDays"in this)return this._tradingDays;if(c=[],this.rules)for(var p of this.rules)p.dayofweek>=0&&c.push(p.dayofweek);else c=[0,1,"2"*1,"3"|1,4,5,"6"-0];return this._tradingDays=[...new Set(c)],this._tradingDays.sort(),this._tradingDays},r.Market.prototype.getSessionNames=function(){var c,p;return this.rules?this.sessions||(c=[],p=[],this.rules.map(function(y){e.f9T(),y.name&&c.indexOf(y.name)===-1&&(c.push(y.name),p.push({name:y.name,enabled:y.enabled?y.enabled:!1}))}),this.sessions=p):this.sessions=[],this.sessions.slice()},r.Market.prototype._find_next_segment=function(c,p){var y,d,g,b;return!this.market_def||(e.Q1Y(),!this.rules)?null:(y=new Date(+c),d=this.newIterator({begin:y,interval:"1"<<0,inZone:this.market_tz,outZone:this.market_tz}),this._wasOpenIntraDay(y)&&(g=this.zseg_match.close_parts.hours,b=this.zseg_match.close_parts.minutes,y.setHours(g),y.setMinutes(b),d=this.newIterator({begin:y,interval:"1"<<64,inZone:this.market_tz,outZone:this.market_tz})),d.next())},r.Market.prototype._find_prev_segment=function(c,p){var y,d,g,b,f;return!this.market_def||!this.rules?null:(y=new Date(+c),d=this.newIterator({begin:y,interval:1,inZone:this.market_tz,outZone:this.market_tz}),e.Q1Y(),g=this._wasOpenIntraDay(y),g===null?(y=new Date(y-6e4),g=this._wasOpenIntraDay(y)):(p&&y.getHours()===this.zseg_match.open_parts.hours&&y.getMinutes()===this.zseg_match.open_parts.minutes||!p&&y.getHours()===this.zseg_match.close_parts.hours&&y.getMinutes()===this.zseg_match.close_parts.minutes)&&(y=d.previous()),g?(b=this.zseg_match.open_parts.hours,f=this.zseg_match.open_parts.minutes,y.setHours(b),y.setMinutes(f),d=this.newIterator({begin:y,interval:1,inZone:this.market_tz,outZone:this.market_tz}),y=d.previous(),this.zseg_match.close_parts.hours===b&&this.zseg_match.close_parts.minutes===f?p?d.next():y:this.zseg_match.adjacent_child?y:p?d.next():y):d.previous())},r.Market.prototype.disableSession=function(c,p){var y,d,g,b,f;if(y="u",y+="ndefine",y+="d",d=!1,typeof p!==y&&p){g=-828340674,b=-854467007,f=2;for(var m=1;e.Y5b(m.toString(),m.toString().length,61472)!==g;m++)d=!1,f+=2;e.Y5b(f.toString(),f.toString().length,89521)!==b&&(d=!1),d=!0}if(c){for(var C=0;C<this.normalHours.length;C++)delete this.normalHours[C]._refid,this.normalHours[C].name===c&&(this.normalHours[C].enabled=d);for(C=0;C<this.extraHours.length;C++)delete this.extraHours[C]._refid,this.extraHours[C].name===c&&(this.extraHours[C].enabled=d)}this._zseg_matches&&this._zseg_matches.clear()},r.Market.prototype.enableSession=function(c){var p,y,d,g;p=661437380,e.Q1Y(),y=1010657028,d=2;for(var b=1;e.X30(b.toString(),b.toString().length,12310)!==p;b++)this.disableSession(c,""),d+=2;e.Y5b(d.toString(),d.toString().length,28641)!==y&&(g="enabl",g+="e_inste",g+="ad",this.disableSession(c,g))},r.Market.prototype.enableAllAvailableSessions=function(){var c,p,y,d;c=-347047354,p=-1592979298,y=2;for(var g=1;e.Y5b(g.toString(),g.toString().length,58830)!==c;g++)d=this.getSessionNames(),y+=2;e.Y5b(y.toString(),y.toString().length,"57930"^0)!==p&&(d=this.getSessionNames()),e.f9T();for(var b=0;b<d.length;b++)this.enableSession(d[b].name)},r.Market.prototype.getClose=function(c,p,y,d){var g,b;if(!this.market_def||(e.f9T(),!this.rules))return null;if(g=c,c||(g=new Date,y=null),g=this._convertToMarketTZ(g,y),typeof p<"u"){if(this._wasOpenIntraDay(g)&&this.zseg_match.name===p)return g.setHours(this.zseg_match.close_parts.hours,this.zseg_match.close_parts.minutes,0,0),g=this._convertFromMarketTZ(g,d),g}else if(this._wasOpenDaily(g)){for(b=this.zseg_match;b.child_;)b=b.child_;for(;!b.enabled;)b=b.parent_;return g.setHours(b.close_parts.hours,b.close_parts.minutes,0,0),g=this._convertFromMarketTZ(g,d),g}return null},r.Market.prototype.getNextClose=function(c,p,y){var d,g,b,f;if(!this.market_def||!this.rules)return null;for(d=c,c||(d=new Date,p=null),d=this._convertToMarketTZ(d,p),this._wasOpenIntraDay(d)||(g=this.newIterator({begin:d,interval:1,inZone:this.market_tz,outZone:this.market_tz}),d=g.next()),b=d.getDate(),f=this.zseg_match;f.adjacent_child;)f=f.adjacent_child,b+=1;return d.setDate(b),d.setHours(f.close_parts.hours,f.close_parts.minutes,0,0),d=this._convertFromMarketTZ(d,y),d},r.Market.prototype.getNextOpen=function(c,p,y){var d;return!this.market_def||!this.rules?null:(d=c,c||(d=new Date,p=null),d=this._convertToMarketTZ(d,p),d=this._find_next_segment(d),this.zseg_match.adjacent_parent?(d=this.getNextOpen(d,this.market_tz,this.market_tz),d=this._convertFromMarketTZ(d,y),d):(d.setHours(this.zseg_match.open_parts.hours),e.Q1Y(),d.setMinutes(this.zseg_match.open_parts.minutes),d=this._convertFromMarketTZ(d,y),d))},r.Market.prototype.getOpen=function(c,p,y,d){var g,b,f;if(g="u",g+="n",e.Q1Y(),g+="de",g+="fined",!this.market_def||!this.rules)return null;if(b=c,c||(b=new Date,y=null),b=this._convertToMarketTZ(b,y),typeof p!==g){if(this._wasOpenIntraDay(b)&&this.zseg_match.name==p)return b.setHours(this.zseg_match.open_parts.hours,this.zseg_match.open_parts.minutes,0,0),b=this._convertFromMarketTZ(b,d),b}else if(this._wasOpenDaily(b)){for(f=this.zseg_match;f.parent_;)f=f.parent_;for(;!f.enabled;)f=f.child_;return b.setHours(f.open_parts.hours,f.open_parts.minutes,"0"*1,0),b=this._convertFromMarketTZ(b,d),b}return null},r.Market.prototype.getNormalOpen=function(){var{market_def:c,rules:p}=this;return c&&p?c.normal_daily_open?c.normal_daily_open:c.name==="FOREX"?"17:00":p.find(({name:y})=>!y||y==="").open:"00:00"},r.Market.prototype.getNormalClose=function(){var c;c="2",c+="4",c+=":",c+="00";var{market_def:p,rules:y}=this;return p&&y?p.normal_daily_close?p.normal_daily_close:p.name==="FOREX"?"17:00":y.filter(({dayofweek:d,name:g})=>d&&(!g||g==="")).pop().close:c},r.Market.prototype.getPreviousClose=function(c,p,y){var d;return!this.market_def||!this.rules?null:(d=c,c||(d=new Date,p=null),d=this._convertToMarketTZ(d,p),d=this._find_prev_segment(d,!1),this.zseg_match.adjacent_child?this.getPreviousClose(d,this.market_tz,this.market_tz):(d.setHours(this.zseg_match.close_parts.hours),d.setMinutes(this.zseg_match.close_parts.minutes),d=this._convertFromMarketTZ(d,y),d))},r.Market.prototype.getPreviousOpen=function(c,p,y){var d;return!this.market_def||!this.rules?null:(d=c,c||(d=new Date,p=null),d=this._convertToMarketTZ(d,p),d=this._find_prev_segment(d,!0),this.zseg_match.adjacent_parent?this.getPreviousOpen(d,this.market_tz,this.market_tz):(d.setHours(this.zseg_match.open_parts.hours),d.setMinutes(this.zseg_match.open_parts.minutes),d=this._convertFromMarketTZ(d,y),e.Q1Y(),d))},r.Market.prototype.getSession=function(c,p){return c=this._convertToMarketTZ(c,p),this._wasOpenIntraDay(c)&&this.zseg_match?this.zseg_match.name:null},r.Market.prototype.marketZoneNow=function(){return e.Q1Y(),this._convertToMarketTZ(new Date)},r.Market.prototype.isHourAligned=function(){return e.Q1Y(),this.hour_aligned},r.Market.prototype.isOpen=function(){var c;return c=new Date,e.f9T(),this.market_tz&&(c=new this.tz_lib(c.getTime(),this.market_tz)),this._wasOpenIntraDay(c)},r.Market.prototype.isMarketDay=function(){var c;return c=new Date,this.market_tz&&(c=new this.tz_lib(c.getTime(),this.market_tz)),this._wasOpenDaily(c)},r.Market.prototype.isMarketDate=function(c){return e.Q1Y(),this._wasOpenDaily(c)},r.Market.prototype.isFirstMarketDayOfMonth=function(c){var p,y;if(!this.isMarketDate(c))return!1;p=new Date(+c),y=c.getDate();for(var d="1">>0;d<y;d++)if(p.setDate(d),this.isMarketDate(p))return!1;return!0},r.Market.prototype.isFirstMarketDayOfWeek=function(c){var p,y,d;if(!this.isMarketDate(c))return!1;for(p=this.tradingDays(),y=Math.max(this.beginningDayOfWeek,p[0])||0,d=new Date(+c);d.getDay()!==y;)if(d.setDate(d.getDate()-1),this.isMarketDate(d))return!1;return!0},r.Market.prototype.newIterator=function(c){var p,y,d,g,b,f;return p="h",p+="o",p+="u",p+="r",y=!1,c.periodicity?y=c.periodicity:c.multiple&&(y=c.multiple),d=c.interval,d||(g="minu",g+="te",d=g),d==p&&(d=60),y||(y=1),c.begin||(c.begin=new Date,c.inZone=null),d==parseInt(d,10)&&(d=parseInt(d,10),c.periodicity<1/60?(b="mi",b+="llisecond",y=y*d*6e4,d=b):c.periodicity<1?(y=y*d*60,d="second"):(y=y*d,d="minute")),c.timeUnit&&(c.timeUnit==="millisecond"||c.timeUnit==="second"?d=c.timeUnit:c.timeUnit==="tick"&&(f="se",f+="con",f+="d",d=f)),d=="tick"&&(d="second"),c.interval=d,c.multiple=y,c.market=this,new r.Market.Iterator(c)},r.Market.prototype._wasOpenDaily=function(c){return this._was_open(c,!1)},r.Market.prototype._wasOpenIntraDay=function(c){return e.f9T(),this._was_open(c,!0)},r.Market.prototype._was_open=function(c,p){var y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_;if(typeof p>"u"&&(p=!0),y=this.zseg_match,this.zopen_hour=0,this.zopen_minute=0,this.zclose_hour=0,this.zclose_minute="0"-0,this.zmatch_open=!1,this.zseg_match=null,!this.market_def||!this.rules)return this.zclose_hour=24,!0;if(this.tradingDays().indexOf(c.getDay())<0)return null;if(h){if(this._zseg_matches||(this._zseg_matches=new Map),d=this._zseg_matches.get(+c*(p?1:-1)),d===null)return null;if(d)return d=this._zseg_matches.get(d),Object.assign(this,d),this.zseg_match}for(g=!1,b=!1,f=c.getFullYear(),m=c.getMonth()+1,C=c.getDay(),S=c.getDate(),w=c.getHours(),k=c.getMinutes(),D=c.getSeconds(),A=w*60*60+k*60+D,T=0;T<this.normalHours.length;T++)if(v=this.normalHours[T],!!v.enabled&&(g=v.dayofweek===C,g&&p&&(g=A>=v.open&&A<v.close),g)){if(!p&&this.zseg_match&&(v.open_parts.hours>this.zopen_hour||v.open_parts.hours==this.zopen_hour&&v.open_parts.minutes>this.zopen_minute))continue;if(v!==y&&!v.adjacent_parent&&!v.adjacent_child&&(this.shouldResetToBeginningOfSegment=!0),x=T+1,this.zopen_hour=v.open_parts.hours,this.zopen_minute=v.open_parts.minutes,this.zclose_hour=v.close_parts.hours,this.zclose_minute=v.close_parts.minutes,this.zmatch_open=A===v.open,this.zseg_match=v,p)break}for(T=0;T<this.extraHours.length;T++)if(v=this.extraHours[T],!!v.enabled&&(v.year==="*"||f===v.year)&&m===v.month&&S===v.day&&(b=!p&&v.open||A>=v.open&&A<v.close,!b&&this.zseg_match&&(g=!1,this.zopen_hour=0,this.zopen_minute=0,this.zclose_hour=0,this.zclose_minute=0,this.zmatch_open=!1,this.zseg_match=null),b)){if(!p&&this.zseg_match&&(v.open_parts.hours>this.zopen_hour||v.open_parts.hours==this.zopen_hour&&v.open_parts.minutes>this.zopen_minute))continue;if(x=-(T+1),this.zopen_hour=v.open_parts.hours,this.zopen_minute=v.open_parts.minutes,this.zclose_hour=v.close_parts.hours,this.zclose_minute=v.close_parts.minutes,this.zmatch_open=A===v.open,this.zseg_match=v,p)break}return h&&(_=null,this.zseg_match&&(this.zseg_match._refid||(this.zseg_match._refid=x,this._zseg_matches.set(this.zseg_match._refid,{zopen_hour:this.zopen_hour,zopen_minute:this.zopen_minute,zclose_hour:this.zclose_hour,zclose_minute:this.zclose_minute,zmatch_open:this.zmatch_open,zseg_match:this.zseg_match})),_=this.zseg_match._refid),this._zseg_matches.set(+c*(p?1:-1),_)),this.zseg_match},r.Market.prototype._wasClosed=function(c){return e.f9T(),!this._was_open(c,!0)},r.Market.prototype._wasOpen=function(c){return e.f9T(),this._was_open(c,!0)},r.Market.prototype._tzDifferenceMillis=function(c,p,y){var d,g,b,f;return d="0">>0,g=c,e.Q1Y(),b=c,f=g.getTimezoneOffset()-b.getTimezoneOffset(),d=f*60*("1000"-0),d},r.Market._createTimeSegments=function(c){var p,y,d,g,b,f,m,C;p=function(k,D){return e.f9T(),k.close_parts.hours==="24"<<32&&D.open_parts.hours===0&&D.open_parts.minutes===0&&(y.dayofweek===m.dayofweek-1||y.dayofweek===6&&m.dayofweek===0)};for(var S=0;S<c.rules.length;S++){d="nam",d+="e",g="un",g+="defined",b=JSON.parse(JSON.stringify(c.rules[S])),typeof b.open===g&&typeof b.close>"u"&&(f="00:",f+="00",b.open=f,b.close="00:00"),b.hasOwnProperty(d)||(b.name="");try{if(typeof b.dayofweek<"u"?(b.year="*",m=l._createDayOfWeekSegment(c,b),y&&(y.dayofweek===m.dayofweek?(y.child_=m,m.parent_=y):p(y,m)&&(y.adjacent_child=m,m.adjacent_parent=y)),y=m):typeof b.date<"u"?(b.isDayOfWeek=!1,b.dayofweek=-1,m=l._createDateTimeSegment(c,b)):console.log("Error, unknown rule type "+b),c.enabled_by_default){for(var w=0;w<c.enabled_by_default.length;w++)if(C=c.enabled_by_default[w],m.name===C){m.enabled=!0;break}}}catch(k){console.log("Error, creating market rules "+k)}}},r.Market._timeSegment={},l=r.Market._timeSegment,l.re_wild_card_iso=/^(\*)-(\d\d)-(\d\d)$/,l.re_regular_iso=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,l.re_split_hours_minutes=/^(\d\d):(\d\d)$/,l.re_split_hour_minutes=/^(\d):(\d\d)$/,l._hashCode=function(c){var p,y,d,g;if(p=0,c.length===0)return p;for(y=0,g=c.length;y<g;y++)d=c.charCodeAt(y),p=(p<<5)-p+d,p|=0;return p},l._splitHoursMinutes=function(c){var p,y;return p=l.re_split_hour_minutes.exec(c),y={hours:NaN,minutes:NaN},p===null&&(p=l.re_split_hours_minutes.exec(c),p===null)||(y.hours=parseInt(p[1],10),y.minutes=parseInt(p[2],"10">>0)),y},l._createDayOfWeekSegment=function(c,p){var y;return y={name:p.name,isDayOfWeek:!0,dayofweek:p.dayofweek,date_str:"*",open_parts:l._splitHoursMinutes(p.open),close_parts:l._splitHoursMinutes(p.close),open:l._secSinceMidnight(c,p.open,!0),close:l._secSinceMidnight(c,p.close,!1),child_:!1,parent_:!1,adjacent_child:!1,adjacent_parent:!1,enabled:!1},e.Q1Y(),y.name===""&&(y.enabled=!0),y.hash_code=this._hashCode((y.open+y.close).toString()),c.normalHours.push(y),y},l._createDateTimeSegment=function(c,p){var y,d,g;if(y=this.re_regular_iso.exec(p.date),e.Q1Y(),y===null){if(y=this.re_wild_card_iso.exec(p.date),y===null){console.log("Warning: invalid date format on rule -> "+p.date);return}d="*"}else d=parseInt(y[1],10);return g={name:p.name,isDayOfWeek:!1,dayofweek:-1,year:d,month:parseInt(y[2],10),day:parseInt(y[3],10),date_str:p.date,open_parts:l._splitHoursMinutes(p.open),close_parts:l._splitHoursMinutes(p.close),open:l._secSinceMidnight(c,p.open,!0),close:l._secSinceMidnight(c,p.close,!1),enabled:!1},g.name===""&&(g.enabled=!0),g.hash_key=this._hashCode(g.date_str+g.open+g.close),c.extraHours.push(g),g},l._secSinceMidnight=function(c,p,y){var d,g,b,f;return d=p.split(":"),g=parseInt(d[0],10),b=parseInt(d[1],10),f=g*("60"*1)*60+b*60,y||g===24&&(f=g*60*60+1),f},r.Market.prototype._convertToMarketTZ=function(c,p){var y;return p?y=new this.tz_lib(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds(),p):y=new this.tz_lib(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds()),y.setTimezone&&y.setTimezone(this.market_tz),e.f9T(),new Date(y.getFullYear(),y.getMonth(),y.getDate(),y.getHours(),y.getMinutes(),y.getSeconds(),y.getMilliseconds())},r.Market.prototype._convertFromMarketTZ=function(c,p){var y;if(y=new this.tz_lib(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds(),this.market_tz),p)y.setTimezone&&y.setTimezone(p);else return new Date(y.getTime());return new Date(y.getFullYear(),y.getMonth(),y.getDate(),y.getHours(),y.getMinutes(),y.getSeconds(),y.getMilliseconds())},r.Market.Iterator=function(c){this.market=c.market,this.begin=c.begin,this.interval=c.interval,this.multiple=c.multiple,this.inZone=c.inZone,this.outZone=c.outZone,this.clock=new r.Market.Iterator._Clock(c.market,c.interval,c.multiple),this.intraDay=this.clock.intra_day,this.intraDay&&(this.begin=this.market._convertToMarketTZ(this.begin,c.inZone)),this.clock._setStart(this.begin),this.clock.minutes_aligned=!1,this.clock.minimumScanMS=c.market.minimumSessionLength*6e4},r.Market.Iterator.prototype.date=function(){return e.f9T(),this.clock._date()},r.Market.Iterator.prototype.futureTick=function(c){var p,y,d,g,b,f,m,C,S;if(this.clock.skip=1,p=0,this.intraDay?y=this.market._convertToMarketTZ(c.end,this.inZone).getTime():y=c.end.getTime(),d=this.clock.ctime,e.Q1Y(),y===d)return p;if(g=2,b=1e3,f=0,c.sample_size&&(g=c.sample_size),m=new Date().getTime(),y>d){for(this.clock.forward=!0;this.clock.ctime<y;)if(p+=1,f+=1,this.clock._findNext(),f===b&&(f=0,C=new Date().getTime(),C-m>=g)){S=(this.clock.ctime-d)/p,p=Math.floor((y-d)/S);break}this.clock.ctime>y&&p--}else for(this.clock.forward=!1;this.clock.ctime>y;)if(p+=1,f+=1,this.clock._findPrevious(),f===b&&(f=0,C=new Date().getTime(),C-m>=g)){S=(d-this.clock.ctime)/p,p=Math.floor((d-y)/S);break}return p},r.Market.Iterator.prototype.isHourAligned=function(){return e.f9T(),!this.intraDay||this.market.isHourAligned()},r.Market.Iterator.prototype.isOpen=function(){return e.f9T(),this.market.isOpen()},r.Market.Iterator.prototype.next=function(c){this.clock.skip=1,e.f9T(),c&&(this.clock.skip=c),this.clock.forward=!0;for(var p=0;p<this.clock.skip;p++)this.begin=this.clock._findNext();return this.intraDay||this.market.convertOnDaily?this.market._convertFromMarketTZ(this.clock.display_date,this.outZone):this.clock.display_date},r.Market.Iterator.prototype.peek=function(){return this.clock._peek()},r.Market.Iterator.prototype.previous=function(c){this.clock.skip=1,c&&(this.clock.skip=c),this.clock.forward=!1;for(var p=0;p<this.clock.skip;p++)this.begin=this.clock._findPrevious();return this.intraDay||this.market.convertOnDaily?this.market._convertFromMarketTZ(this.clock.display_date,this.outZone):this.clock.display_date},r.Market.Iterator._Clock=function(c,p,y){var d,g,b,f;d="ho",d+="ur",y%60===0&&p==="second"&&(g="m",g+="in",g+="u",g+="te",p=g,y=y/60),e.Q1Y(),this.market=c,this.interval=p,this.multiple=y,this.intra_day=!1,this.intervals=[],this.max_iters=10080,b=s,f=this._dayImpl,p==="millisecond"?(f=this._millisImpl,b=1):p==="second"?(f=this._secondImpl,b=1e3):p==="minute"?(f=this._minuteImpl,b=6e4):p===d?(f=this._hourImpl,b=n):p==="day"?(f=this._dayImpl,b=s):p==="week"?(f=this._weekImpl,b=s*7):p==="month"?(f=this._monthImpl,b=s*30):console.log('Periodicity ERROR: "'+p+'" is not a valid interval. Please see setPeriodicity() for details.'),this.tick_time=b*y,this.intra_day=this.tick_time<s,this._findPrevious=this._findNext=f},u=r.Market.Iterator._Clock.prototype,u._total_minutes=function(c,p,y,d){return(y-c)*60-p+d},u._alignMinutes=function(){var c,p,y,d,g,b;if(c=this.market.isHourAligned(),!this.market.market_def&&!c||this.market.zopen_minute===void 0)return[];for(p=this.market.zopen_minute,y=this.market.zseg_match,y&&y.adjacent_parent?p=y.adjacent_parent.open/60-1440:c&&this.multiple%60===0&&(p=0),d=this._total_minutes(this.market.zopen_hour,p,this.market.zclose_hour,this.market.zclose_minute),g=[],e.Q1Y(),b=0;b<d;)g.push(p+b),b+=this.multiple;return g},u._alignBaseZero=function(c){var p,y;for(p=0,y=[p];p+=this.multiple,!(p>=c);)y.push(p);return y},u._date=function(){var c,p;return e.f9T(),c=Math.round(this.ctime),p=new Date(c),this.intra_day?this.display_date=new Date(c+this.shift_millis):this.display_date=p,p},u._alignToBoundary=function(c,p){var y,d,g;y=0,d=0,g=p;for(var b=0;b<c.length-1&&(y=c[b],d=c[b+1],!(p===y||p===d));b++)if(p>y&&p<d){g=y;break}else b+1===c.length-1&&(g=d);return g},u._peek=function(){return e.Q1Y(),this._date().toString()},u._seekHr=function(){var c,p,y;if(this.forward)this.ctime-=n;else{c="1844078600"|0,p=1019661109,y=2;for(var d=1;e.Y5b(d.toString(),d.toString().length,32805)!==c;d++)this.ctime+=n,y+=2;e.X30(y.toString(),y.toString().length,29927)!==p&&(this.ctime*=n)}},u._setStart=function(c){var p,y;p=this.market._tzDifferenceMillis(c),y=new Date(c.getTime()+p),this.shift_millis=p,this.ctime=y.getTime(),this.shift_millis=0,this.ctime=c.getTime()},u._tickTock=function(){e.Q1Y(),this.forward?this.ctime+=this.tick_time:this.ctime-=this.tick_time},u._tockTick=function(){this.forward?this.ctime-=this.tick_time:this.ctime+=this.tick_time},u._tickTock24=function(){e.f9T(),this.ctime+=s},u._tockTick24=function(){this.ctime-=s},u._windMaybe=function(c,p){var y,d,g,b;for(y=0,d=new Date(this.ctime),g=!1;!c.call(this.market,d);)if(p.call(this),g=!0,d=new Date(this.ctime),y+="1"*1,y>this.max_iters){b="Warning! max iter",b+="ations (",b+this.max_iters;break}return g},u._millisImpl=function(){var c,p,y,d,g,b,f,m,C,S;return c=!1,this.mperiods_aligned||(p=this._alignBaseZero(1e3),y=new Date(this.ctime),d=y.getMilliseconds(),d=this._alignToBoundary(p,d),y.setMilliseconds(0),this.ctime=y.getTime()+d,this.mperiods_aligned=!0,c=!0),g=this._date().getMinutes(),this._tickTock(),b=this._date().getMinutes(),(c||g!=b)&&!this.market._wasOpenIntraDay(this._date())&&(f=this._date().getSeconds(),m=this._date().getMilliseconds(),C=this.tick_time,this.tick_time=6e4,S=this.multiple,this.multiple="1"*1,this._minuteImpl(),this.tick_time=C,this.multiple=S,this.ctime+=1e3*f+m),this._date()},u._secondImpl=function(){var c,p,y,d,g,b,f,m,C;return c=!1,this.speriod_aligned||(p=this._alignBaseZero(60),y=new Date(this.ctime),d=y.getSeconds(),d=this._alignToBoundary(p,d),y.setSeconds(d),y.setMilliseconds(0),this.ctime=y.getTime(),this.speriod_aligned=!0,c=!0),g=this._date().getMinutes(),this._tickTock(),b=this._date().getMinutes(),(c||g!=b)&&!this.market._wasOpenIntraDay(this._date())&&(f=this._date().getSeconds(),m=this.tick_time,this.tick_time=6e4,C=this.multiple,this.multiple=1,this._minuteImpl(),this.tick_time=m,this.multiple=C,this.ctime+=1e3*f),this._date()},u._minuteImpl=function(){var c,p,y,d,g,b,f,m,C,S,w,k,D,v;return c=this._windMaybe(this.market._wasOpenIntraDay,this._tockTick),p=new Date(this.ctime),y=p.getTimezoneOffset(),d=p.getMinutes(),g=p.getHours(),b=this._alignMinutes(),f=this._total_minutes(this.market.zopen_hour,this.market.zopen_minute,g,d)+this.market.zopen_minute,c?this.forward?f=b[b.length-1]:f=b[0]:f=this._alignToBoundary(b,f),g=Math.floor(f/60)+this.market.zopen_hour,p.setHours(g,f%60,0,0),m=p.getTimezoneOffset()-y,(this.forward&&m<0||!this.forward&&m>0)&&p.setTime(p.getTime()-m*6e4),this.ctime=p.getTime(),C=this.market.zseg_match,this._tickTock(),S=this.market.hour_aligned&&this.multiple%60===0,c=this._scanForNextSession(),w=C!==this.market.zseg_match,k=C&&C.adjacent_child,D=this.shouldResetToBeginningOfSegment||w&&!k,(c||D&&!S)&&(p=new Date(this.ctime),this.forward?(p.setMinutes(this.market.zopen_minute),p.setHours(this.market.zopen_hour)):(b=this._alignMinutes(),v=b[b.length-1],p.setMinutes(v%60),p.setHours(Math.floor(v/60)+this.market.zopen_hour)),this.ctime=p.getTime()),this._date()},u._hourImpl=function(){var c,p,y,d,g;return this._windMaybe(this.market._wasOpenIntraDay,this._tockTick),c=new Date(this.ctime),this.market.isHourAligned()?c.setMinutes(0):c.setMinutes(this.market.zopen_minute),c.setSeconds(0),c.setMilliseconds(0),this.ctime=c.getTime(),e.f9T(),this._tickTock(),p=this.market.zseg_match,(this._scanForNextSession()||!this.market.hour_aligned&&p!=this.market.zseg_match)&&(y=new Date(this.ctime),this.forward?(y.setMinutes(this.market.zopen_minute),y.setHours(this.market.zopen_hour)):(d=this._alignMinutes(),g=d[d.length-1],y.setMinutes(g%60),y.setHours(Math.floor(g/60)+this.market.zopen_hour)),this.ctime=y.getTime()),this._date()},u._dayImpl=function(){var c,p;for(this._windMaybe(this.market._wasOpenDaily,this._seekHr),c=new Date(this.ctime),c.setHours(12,0,0,"0"*1),this.ctime=c.getTime(),p=0;p<this.multiple;)this.forward?this._tickTock24():this._tockTick24(),this.market._wasOpenDaily(this._date())&&(p+=1);return c=new Date(this.ctime),c.setHours(0),this.ctime=c.getTime(),this._date()},u._weekImpl=function(){e.f9T();var c,p;for(c=this.market,p=new Date(this.ctime),p.setHours(12),this.ctime=p.getTime(),this._tickTock(),p=new Date(this.ctime);p.getDay()!==c.beginningDayOfWeek;)this._tockTick24(),p=new Date(this.ctime);return this._windMaybe(c._wasOpenDaily,this._tickTock24),p=new Date(this.ctime),p.setHours(0,0,0,0),this.ctime=p.getTime(),this._date()},u._monthImpl=function(){var c;return c=new Date(this.ctime),c.setDate(15),this.ctime=c.getTime(),this._tickTock(),c=new Date(this.ctime),c.setDate(1),c.setHours(12),this.ctime=c.getTime(),this._windMaybe(this.market._wasOpenDaily,this._tickTock24),c=new Date(this.ctime),e.Q1Y(),c.setHours(0,0,0,"0"<<0),this.ctime=c.getTime(),this._date()},u._findNext=null,u._findPrevious=null,u._scanForNextSession=function(){return this._windMaybe(this.market._wasOpenIntraDay,(function(){this.ctime+=this.forward?this.minimumScanMS:-this.minimumScanMS}).bind(this))}};zs=W=>{var e=X;e.f9T(),e.r8A=function(i){if(e.f9T(),e)return e.k2L(i)},e.v5Q=function(i){if(e.f9T(),e)return e.k2L(i)},e.C2S=function(i){if(e.f9T(),e&&i)return e.k2L(i)},e.R91=function(i){if(e.f9T(),e)return e.j79(i)},e.l76=function(i){if(e&&i)return e.k2L(i)};var t,a,r;t=typeof _CIQ<"u"?_CIQ:W.CIQ,a="v",a+="a",a+="l",a+="id",t.valid=0,t[e.T09("dcc5")?"":"ChartEngine"][e.g3g("ed34")?"":"prototype"][e.l76("cb77")?"mousemoveinner":""]=function(i,n){e.m0B=function(N){if(e.Q1Y(),e)return e.k2L(N)},e.Q7p=function(N){if(e.Q1Y(),e&&N)return e.k2L(N)},e.w_P=function(N){if(e)return e.k2L(N)},e.w_P("fcce"),-(e.Q7p("9f95")?222283179:691426246),-(e.S$k("a167")?579361879:521937257),-(e.R91("aba4")?158371845:711994850);{let N=function(R){{var q;q="m",q+="ousemoveinne",q+="r",R.currentBaseline=null,R.runAppend(q,h)}};e.Z00=function(R){if(e&&R)return e.j79(R)},e.j4g=function(R){if(e)return e.k2L(R)};var s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P;if(!this[e.j4g("3a1b")?"chart":""].canvas)return;if(!this[e.Z00("3646")?"disableBackingStoreDuringTouch":""]&&(this.chart[e.r8A("b1fa")?"canvas":""].height!=Math.floor(this.devicePixelRatio*this[e.p5T("3799")?"":"chart"].container.clientHeight)||this.chart.canvas.width!=Math.floor(this.devicePixelRatio*this.chart.container.clientWidth))){this.resizeChart();return}if(this.runPrepend("mousemoveinner",arguments))return;if(h=arguments,o=this.container.getBoundingClientRect(),this.top=o.top,this.left=o.left,this.right=this.left+this.width,this.bottom=this.top+this.height,this.hasDragged=!0,t.ChartEngine.crosshairX=i,t.ChartEngine.crosshairY=n,this.crosshairX=i,this.crosshairY=n,l=this.cy=this.crossYActualPos=this.backOutY(t.ChartEngine.crosshairY),u=this.cx=this.crossXActualPos=this.backOutX(t.ChartEngine.crosshairX),this.grabbingScreen&&this.anyHighlighted){e.B42(0);var E=e.C2Z(2,0);e.q08(13);var O=e.C2Z(10,0,8);if(c=Math.pow(this.grabStartX-i,E)+Math.pow(this.grabStartY-n,O),c<36)return}if(this.cancelLongHold=!0,p=function(R,q){{if(t[a]===0)return R.whichPanel(q)||R.chart.panel;R.draw[a]||(R.draw=function(){e.f9T();var Y=439190534,z=-9625938,V=-1589324619,K=926524088;e.L1v(0,!1,502297)!==Y&&e.L1v(0,!1,295289)!==z&&e.L8n(10,!0,979080)!==V&&e.L1v(16,!0,302938)!==K||(console.log("if2"),t.clearCanvas(this.chart.canvas,this))},R.draw[a]=!0)}},this.currentPanel=p(this,l),!this.currentPanel||(y=this.currentPanel.chart,y.dataSet&&(this.crosshairTick=this.tickFromPixel(u,y),s=this.valueFromPixel(l,this.currentPanel),this.crosshairValue=this.adjustIfNecessary(this.currentPanel,this.crosshairTick,s),d=this.currentPanel.name=="chart"?this.preferences.horizontalCrosshairField:this.currentPanel.horizontalCrosshairField,d&&this.crosshairTick<y.dataSet.length&&this.crosshairTick>-1&&(s=y.dataSet[this.crosshairTick][d],this.crossYActualPos=this.pixelFromPrice(s,this.currentPanel))),t.ChartEngine.crosshairX>=this.left&&t.ChartEngine.crosshairX<=this.right&&t.ChartEngine.crosshairY>=this.top&&t.ChartEngine.crosshairY<=this.bottom?this.insideChart=!0:this.insideChart=!1,g=this.xAxisAsFooter===!0?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=this.insideChart&&this.cy<=g&&this.cy>g-this.xaxisHeight,this.overYAxis=(this.cx>=this.currentPanel.right||this.cx<=this.currentPanel.left)&&this.insideChart,(this.overXAxis||this.overYAxis||!this.insideChart&&!this.grabbingScreen)&&(this.undisplayCrosshairs(),!this.overXAxis&&!this.overYAxis)))return;if(!this.displayCrosshairs&&!t.ChartEngine.resizingPanel){this.undisplayCrosshairs();return}if(this.repositioningBaseline)return this.setBaselineUserLevel(),N(this);if(this.repositioningAnchorSelector)return b=this.repositioningAnchorSelector.hoverTick,f=this.tickFromPixel(this.cx,this.chart),f>=0&&f<this.chart.dataSet.length&&(!(b&&b!==0)||f!==b)&&(this.repositioningAnchorSelector.hoverTick=f,this.draw()),N(this);if(this.grabbingScreen&&!t.ChartEngine.resizingPanel&&!this.chart.draggingControls){if(m="p",m+="a",m+="n",this.highlightedDraggable)return this.displayDragOK(!0),this.dragPlotOrAxis(u,l),N(this);if(this.anyHighlighted){t.clearCanvas(this.chart.tempCanvas,this),this.anyHighlighted=!1;for(C in this.overlays)this.overlays[C].highlight=!1;for(C in y.series)y.series[C].highlight=!1;this.displaySticky()}if(this.grabStartX==-1&&(this.grabStartX=t.ChartEngine.crosshairX,this.grabStartScrollX=y.scroll),this.grabStartY==-1&&(this.grabStartY=t.ChartEngine.crosshairY,this.grabStartScrollY=this.currentPanel.yAxis.scroll),S=t.ChartEngine.crosshairX-this.grabStartX,w=t.ChartEngine.crosshairY-this.grabStartY,S===0&&w===0)return;if(Math.abs(S)+Math.abs(w)>5&&(this.grabOverrideClick=!0),D=this.layout.candleWidth,this.allowZoom&&this.grabMode!=m&&(this.grabMode.indexOf("zoom")===0||this.overXAxis||this.grabStartYAxis)){if(v="z",v+="o",v+="om-",v+="y",this.grabMode===""&&(x="zo",x+="om-",x+="x",this.overXAxis?this.grabMode=x:this.grabStartYAxis&&(this.grabMode="zoom-y")),this.grabMode=="zoom-x"?w=0:this.grabMode==v&&(S=0),S&&(this.grabStartX=t.ChartEngine.crosshairX,A=D-S/this.chart.maxTicks,this.zoomSet(A,this.chart)),this.layout.setSpan&&(T="layou",T+="t",this.layout.setSpan=null,this.changeOccurred(T)),k=this.grabStartYAxis,k)if(k.flipped&&(w*=-1),k.zoom=Math.round(this.grabStartZoom+w),this.grabStartZoom<k.height){if(k.zoom>=k.height){e.q08(103);var I=e.C2Z(0,6,125,19,2);k.zoom=k.height-I}}else k.zoom<=k.height&&(k.zoom=k.height+1)}else if(!this.overYAxis&&(this.dispatch("move",{stx:this,panel:this.currentPanel,x:this.cx,y:this.cy,grab:!0}),this.allowScroll)){if(Math.abs(w)<this.yTolerance){if(!this.yToleranceBroken&&(w=0,S===0))return}else this.yToleranceBroken=!0;this.grabStartMicropixels||(this.grabStartMicropixels=0),this.grabMode="pan",y.scroll=this.grabStartScrollX,e.q08(104);var B=e.C2Z(22,3,1,20);if(this.micropixels=this.grabStartMicropixels+S*(this.shift?B:"1"^0),!this.lineTravelSpacing){for(;this.micropixels>0;)this.micropixels-=D,y.scroll++;for(;this.micropixels<-D;)this.micropixels+=D,y.scroll--}y.scroll>=y.maxTicks?this.preferences.whitespace=this.initialWhitespace:this.preferences.whitespace=(y.maxTicks-y.scroll)*D,this.currentPanel==this.grabStartPanel&&(k=this.currentPanel.yAxis,k.flipped&&(w*=-1),k.scroll=this.grabStartScrollY+w),this.dispatch("scroll",{stx:this,panel:this.currentPanel,x:this.cx,y:this.cy})}_=function(R){return e.f9T(),function(){e.Q1Y(),R.draw(),R.updateChartAccessories()}},t.ChartEngine.useAnimation?window.requestAnimationFrame(_(this)):(this.draw(),this.updateChartAccessories()),this.activeDrawing&&(t.clearCanvas(this.chart.tempCanvas,this),this.activeDrawing.render(this.chart.tempCanvas.context),this.activeDrawing.measure()),this.undisplayCrosshairs();return}return this.grabMode="",this.overXAxis||this.overYAxis?(this.updateChartAccessories(),(!this.tapForHighlighting||!this.touching||this.anyHighlighted)&&this.findHighlights(),N(this)):(this.controls.crossX&&(this.controls.crossX.style.left=this.pixelFromTick(this.crosshairTick,y)-.5+"px"),this.controls.crossY&&(this.controls.crossY.style.top=this.crossYActualPos+"px"),this.insideChart&&!t.ChartEngine.resizingPanel?(L=this.currentVectorParameters.vectorType,this.layout.studies&&(M=this.layout.studies[this.currentPanel.name],M&&((!this.preferences.dragging||!this.preferences.dragging.study)&&delete this.overlays[M.name],L&&(this.overlays[M.name]=M))),(!t.Drawing||!L||!t.Drawing[L]||!new t.Drawing[L]().dragToDraw)&&this.doDisplayCrosshairs(),this.updateChartAccessories()):this.undisplayCrosshairs(),this.magnetize&&this.magnetize(),this.repositioningDrawing?this.repositionDrawing(this.repositioningDrawing):t.ChartEngine.drawingLine?this.activeDrawing&&(this.magnetizedPrice===null&&(F=this.panels[this.activeDrawing.panelName],s=this.adjustIfNecessary(F,this.crosshairTick,this.activeDrawing.valueFromPixel(this.backOutY(t.ChartEngine.crosshairY),F,this.getYAxisByField(F,this.activeDrawing.field))),t.clearCanvas(this.chart.tempCanvas,this),this.activeDrawing.move(this.chart.tempCanvas.context,this.crosshairTick,s)),this.activeDrawing.measure&&this.activeDrawing.measure()):t.ChartEngine.resizingPanel&&this.resizePanels(),this.insideChart&&(P="m",P+="o",P+="ve",this.dispatch(P,{stx:this,panel:this.currentPanel,x:this.cx,y:this.cy,grab:!1}),(!this.tapForHighlighting||!this.touching||this.anyHighlighted)&&this.findHighlights()),N(this))}},t.ChartEngine.prototype.swipeStart=function(i){var n;this.swipe&&this.swipe.interval&&clearInterval(this.swipe.interval),this.swipe.velocity=0,this.swipe.amplitude=0,this.swipe.frame=i.scroll,this.swipe.micropixels=this.micropixels,this.swipe.timestamp=Date.now(),this.swipe.chart=i,this.swipe.end=!1,this.swipe.timeConstant=325,this.swipe.cb=null,e.Q1Y(),n=this,requestAnimationFrame(function(){n.swipeSample()})},t.ChartEngine.prototype.swipeSample=function(){var i,n,s,h,o,l,u,c,p;if(i=this.swipe,!i.end){if(n=this,u=20,s=Date.now(),h=s-i.timestamp,h<u){requestAnimationFrame(function(){n.swipeSample()});return}c=t.touchDevice?.4:.8,i.timestamp=s,o=(i.chart.scroll-i.frame)*this.layout.candleWidth+this.micropixels-i.micropixels,i.frame=i.chart.scroll,i.micropixels=this.micropixels,e.B42(105),l=e.o_T(h,1,o,1e3),p=c*l+.2*i.velocity,Math.abs(p)>Math.abs(i.velocity)&&(i.velocity=p),Math.abs(o)<6&&(i.velocity=0),requestAnimationFrame(function(){n.swipeSample()})}},t.ChartEngine.prototype.swipeRelease=function(){var i,n;i=this.swipe,e.f9T(),i.velocity>3e3&&(i.velocity=3e3),i.velocity<-3e3&&(i.velocity=-3e3),(i.velocity>10||i.velocity<-10)&&(i.amplitude=.8*i.velocity,i.scroll=i.chart.scroll,i.target=i.amplitude,i.timestamp=Date.now(),n=this,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),requestAnimationFrame(function(){n.autoscroll()}))},t.ChartEngine.prototype.allowDragControls=function(){var i;e.f9T(),i={down:function(n){return function(s){n.modalBegin(),n.chart.draggingControls={bottom:n.chart.chartControls.style.bottom}}}(this),move:function(n){return e.Q1Y(),function(s){var h,o,l,{draggingControls:u,chartControls:c,home:p}=n.chart;if(e.f9T(),u){var{style:y,offsetHeight:d}=c;h=n.height-d,o=0,l=t.stripPX(u.bottom)-s.displacementY,l=Math.min(Math.max(l,o),h),e.q08(0),y.bottom=e.o_T("px",l),p.style.bottom=y.bottom}}}(this),up:function(n){return function(s){n.chart.draggingControls=null,n.modalEnd()}}(this)},this.chart.chartControls&&t.safeDrag(this.chart.chartControls,i),this.chart.home&&t.safeDrag(this.chart.home,i)},t.ChartEngine.prototype.dragPlotOrAxis=function(i,n){var s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q,j,Z,ee,$,ie,te,re,H,U,G,ae,ne,oe,le,he,ue,ce,de,Ce,pe,xe,Te,be,_e;if(s="righ",s+="t",h=this,!Be.call(this)&&!this.grabbingScreen)return;function Be(){e.Q1Y();var He,Me,ge;He=!1;for(var Se in h.panels){for(Me="lef",Me+="t",["dropzone","all",Me,"right","top","bottom"].forEach(De(h.panels[Se])),ge=0;ge<h.panels[Se].yaxisLHS.length;ge++)h.panels[Se].yaxisLHS[ge].dropzone&&(He=!0),h.panels[Se].yaxisLHS[ge].dropzone=null;for(ge=0;ge<h.panels[Se].yaxisRHS.length;ge++)h.panels[Se].yaxisRHS[ge].dropzone&&(He=!0),h.panels[Se].yaxisRHS[ge].dropzone=null}function De(Re){return function(Qe){e.f9T(),Re.subholder.classList.contains(Qe)&&(Re.subholder.classList.remove(Qe),He=!0)}}return He}if(o=null,l=this.whichPanel(n),u=this.highlightedDraggable,c=0,!!l&&!(u.undraggable&&u.undraggable(this))){this.xAxisAsFooter&&l==Object.values(this.panels).pop()&&(c=this.xaxisHeight,o&&(o+=c)),p=Math.min(20,(l.height-c)/3),y=Math.min(10,l.width/3),d=this.whichYAxis(l,i,n),e.q08(8),g=this.whichYAxis(l,e.C2Z(i,y),n),e.q08(0),b=this.whichYAxis(l,e.o_T(y,i),n),e.B42(8),f=this.whichPanel(e.o_T(n,p)),e.q08(14),m=this.whichPanel(e.C2Z(n,c,p)),C=!1,S=!1,w=!1,t.Renderer&&(C=u instanceof t.Renderer),t.Studies&&(S=u instanceof t.Studies.StudyDescriptor),w=u instanceof t.ChartEngine.YAxis,k=function(He){if(e.f9T(),!w){if(He=="right"){e.q08(13);var Me=e.o_T(21,2,17);return l.right-l.width/Me}if(He=="left")return l.left+l.width/("6"<<0)}e.q08(8);var ge=e.C2Z(18,16);return(l.left+l.right)/ge},!w&&!d&&(i<k("left")?g=this.whichYAxis(l,l.left-1,n):i>k("right")&&(b=this.whichYAxis(l,l.right+1,n))),D=[],u.getDependents&&(D=u.getDependents(this,!0)),v=u.panel,x=u.getYAxis(this),C?v=u.params.panel:w&&(v=this.grabStartPanel.name),A=this.panels[v];for(T in this.panels)this.panels[T].soloing&&(_=!0);if(L=x.isShared(this),M=!d&&!w&&!_&&(A!==l&&A!=f&&A!=m||!this.checkForEmptyPanel(A,!0,[u].concat(D))),F=v==l.name&&x!==d&&x!==b&&x!==g||L,M&&(!f||l!==f))O="t",O+="o",O+="p",l.subholder.classList.add("dropzone"),l.subholder.classList.add(O),m=l;else if(M&&(!m||l!==m))l.subholder.classList.add("dropzone"),l.subholder.classList.add("bottom");else if(l!==A)!w&&!l.noDrag&&(I="a",I+="l",I+="l",B="dro",B+="pzon",B+="e",l.subholder.classList.add(B),l.subholder.classList.add(I),P=l.name);else if((!l.yaxisRHS.length||l.yaxisRHS.length==1&&l.yaxisRHS[0]==x&&x.position=="none")&&!d&&!b&&i>k(s))l.subholder.classList.add("dropzone"),l.subholder.classList.add("right"),E="right";else if((!l.yaxisLHS.length||l.yaxisLHS.length==1&&l.yaxisLHS[0]==x&&x.position=="none")&&!d&&!g&&i<k("left"))N="le",N+="f",N+="t",l.subholder.classList.add("dropzone"),l.subholder.classList.add("left"),E=N;else if(F){if(w&&i>l.left&&i<l.right){e.B42(64);var Pe=e.C2Z(17,2,17);R=l.yaxisLHS[l.yaxisLHS.length-"1"*Pe],q=l.yaxisRHS[0],Y=k(),i<Y&&R!=x?g=R:i>Y&&q!=x&&(b=q)}if(!w||d!==x){if(z=!w&&L,b&&(b!==x||z)&&(!d||d!==b))V="r",V+="ig",V+="ht",b.dropzone="left",E=b.position||this.chart.panel.yAxis.position||V;else if(g&&(g!==x||z)&&(!d||d!==g))g.dropzone="right",E=g.position||this.chart.panel.yAxis.position||"right";else if(d){if(K="ri",K+="g",K+="ht",!b&&(d!==x||z))d.dropzone="right";else if(!g&&(d!==x||z))d.dropzone="left";else if(d!==x){Q=1710203170,j=-1354847202,Z=2;for(var Ie=1;e.Y5b(Ie.toString(),Ie.toString().length,"67130"-0)!==Q;Ie++)ee="a",ee+="l",ee+="l",d.dropzone=ee,Z+=2;e.X30(Z.toString(),Z.toString().length,95072)!==j&&(d.dropzone="")}d.dropzone&&(E=d.position||this.chart.panel.yAxis.position||K)}}}if(e.f9T(),this.grabbingScreen||!l.subholder.classList.contains("dropzone")&&!E){this.draw();return}if(ie=-1,!P&&!E&&M){P=S?u.inputs.id:u.params.name||t.uniqueID();for(var Le in this.panels)if(ie++,this.panels[Le]==m)break;m||ie++,this.panels[v].yAxis.name==P&&(v=this.electNewPanelOwner(v)),te=S?u.inputs.display:null,v?this.createPanel(te||P,P,o,this.chart.name,new t.ChartEngine.YAxis({name:P})):v=P,S?u.panel=v:u.params.panel=v}if(P){if(S)u.parameters||(u.parameters={}),u.parameters.panelName=P,this.highlightedDraggable=t.getFn("Studies.replaceStudy")(this,u.inputs.id,u.type,u.inputs,u.outputs,u.parameters,null,u.study);else if(C)for(var Fe in u.seriesParams)re=u.seriesParams[Fe],H=null,u.params.yAxis&&u.params.yAxis!==this.chart.panel.yAxis&&(H=u.params.yAxis,H.name=u.params.name),this.modifySeries(re.id,{panel:P,yAxis:H});if(ie>-1){U={},G=0;for(T in this.panels)ie==G++&&(U[P]=this.panels[P]),T!=P&&(U[T]=this.panels[T]);U[P]||(U[P]=this.panels[P]),this.panels=U}this.checkForEmptyPanel(v);for(var Ue=0;Ue<D.length;Ue++)D[Ue].params?this.checkForEmptyPanel(D[Ue].params.name):this.checkForEmptyPanel(D[Ue].name);this.adjustPanelPositions()}else if(E){if(ae=function(He,Me,ge,Se){var De,Re,Qe;if(ge=="study"&&(Re="S",Re+="tudies.repla",Re+="ceStudy",Me.parameters||(Me.parameters={}),Se?Me.parameters.yaxisDisplayValue=Se.position:delete Me.parameters.yaxisDisplayValue,De=t.getFn(Re)(He,Me.inputs.id,Me.type,Me.inputs,Me.outputs,Me.parameters,Me.panel,Me.study)),e.Q1Y(),ge=="renderer")for(var Lt in Me.seriesParams)Qe=Me.seriesParams[Lt],De=He.modifySeries(Qe.id,{panel:P,yAxis:Se});return De},ne=d&&d.dropzone=="all",ne||(w?(u.position=E,this.layout.studies&&(oe=this.layout.studies[u.name],oe&&(oe.parameters||(oe.parameters={}),oe.parameters.yaxisDisplayValue=E))):S?(le="st",le+="udy",this.highlightedDraggable=ae(this,u,le,{position:E})):C&&(he="re",he+="nderer",ae(this,u,he,new t.ChartEngine.YAxis({name:u.params.name||t.uniqueID(),position:E}))),x=this.highlightedDraggable.getYAxis(this)),!L||!ne||w){for(ue=x,ne&&x==this.chart.panel.yAxis&&(ue=d),$=0;$<l.yaxisLHS.length;$++)if(l.yaxisLHS[$]==ue){l.yaxisLHS.splice($,1);break}for($=0;$<l.yaxisRHS.length;$++)if(l.yaxisRHS[$]==ue){l.yaxisRHS.splice($,1);break}}if(ne)if(this.getYAxisByName(l,x.name)==l.yAxis&&this.electNewPanelOwner(l,d),w){Ce=x,pe=d,x==this.chart.panel.yAxis&&(Ce=d,pe=x);for(de in Ce.studies)xe="s",xe+="tu",xe+="dy",ae(this,this.layout.studies[Ce.studies[de]],xe,pe===this.chart.panel.yAxis?null:{position:pe.name});for(de in Ce.renderers)ae(this,this.chart.seriesRenderers[Ce.renderers[de]],"renderer",pe);this.highlightedDraggable=pe}else S?this.highlightedDraggable=ae(this,u,"study",{position:d.name}):C&&(Te="render",Te+="e",Te+="r",ae(this,u,Te,d));else{for(x.position=="none"&&(x.width=t.ChartEngine.YAxis.prototype.width),x.position=E,ce=E=="left"?l.yaxisLHS:l.yaxisRHS,$=0;$<ce.length;$++){if(ce[$]!==x)if(ce[$].dropzone=="left")ce.splice($,0,x);else if(ce[$].dropzone=="right")e.q08(0),ce.splice(e.C2Z(1,$),0,x);else continue;break}$==ce.length&&ce.push(x)}}for(var at in this.panels)for(be=this.panels[at],_e=be.yaxisLHS.concat(be.yaxisRHS),$=0;$<_e.length;$++)_e[$].height=be.yAxis.height,_e[$].lockScale||this.calculateYAxisMargins(_e[$]);this.displayDragOK(),this.draw(),this.calculateYAxisPositions(),this.draw(),this.findHighlights(null,!0),this.savePanels()}},r=!1,t.ChartEngine.prototype.findHighlights=t.ChartEngine.prototype.findHighlights||function(i,n){r||console.error("movement feature requires activating interaction feature."),r=!0}};Hs=W=>{var e;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.NameValueStore=e.NameValueStore||function(){},e.NameValueStore.prototype.toJSONIfNecessary=function(t){var a;if(X.f9T(),t.constructor==String)return t;try{return a=JSON.stringify(t),a}catch{return X.q08(0),console.log(X.C2Z(t,"Cannot convert to JSON: ")),null}},e.NameValueStore.prototype.fromJSONIfNecessary=function(t){var a;try{return a=JSON.parse(t),a}catch{return t}},e.NameValueStore.prototype.get=function(t,a){var r;r=e.localStorage.getItem(t),X.Q1Y(),a(null,this.fromJSONIfNecessary(r))},e.NameValueStore.prototype.set=function(t,a,r){e.localStorageSetItem(t,this.toJSONIfNecessary(a)),r&&r(null)},e.NameValueStore.prototype.remove=function(t,a){e.localStorage.removeItem(t),X.f9T(),a&&a(null)}};Vs=W=>{var e;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.ChartEngine||(e.ChartEngine=function(){}),e.QuoteFeed=e.QuoteFeed||function(){},e.QuoteFeed.prototype.fetch=function(t,a){var r;this.v2QuoteFeed||(r="You must implement CIQ.QuoteFee",r+="d.[yourfeedname].prototype.fetch()",console.log(r))},e.QuoteFeed.prototype.announceError=function(t,a){var r,i,n;if(!(t.suppressErrors||a.suppressAlert)&&!t.startDate){if(!t.endDate){if(a.error){r=-1211644901,i=-319848503,n=2;for(var s=1;X.X30(s.toString(),s.toString().length,51121)!==r;s++)e.alert(""*a.error),n+=2;X.Y5b(n.toString(),n.toString().length,41109)!==i&&e.alert("Error fetching quote:"+a.error)}}}},e.QuoteFeed.prototype.multiFetch=function(t,a){return t.length===0&&a([]),t[0].stx.driver.multiFetch(t,a)},e.QuoteFeed.Subscriptions=function(){X.Q1Y(),this.subscriptions=[]},e.inheritsFrom(e.QuoteFeed.Subscriptions,e.QuoteFeed),e.QuoteFeed.Subscriptions.prototype.checkSubscriptions=function(t){var a,r,i,n,s,h;i=t.getSymbols({"breakout-equations":!0}),n=this,i=i.filter(function(u){var c;return c=t.quoteDriver.getQuoteFeed(u),c&&c.engine==n});for(var o=0;o<this.subscriptions.length;o++)this.subscriptions[o].match=!1;X.Q1Y();for(var l="0"*1;l<i.length;l++)for(r=i[l],s=r.interval,(s=="month"||s=="week")&&!t.dontRoll&&(s="day"),r.interval=s,r.period=1,r.match=!1,isNaN(r.interval)||(r.period=r.interval,r.interval=r.timeUnit,r.interval||(r.interval="minute")),delete r.periodicity,delete r.timeUnit,delete r.setSpan,o="0">>32;o<this.subscriptions.length;o++)if(a=this.subscriptions[o],a.symbol==r.symbol&&a.period==r.period&&a.interval==r.interval){r.match=!0,a.match=!0;break}else a.symbol!=r.symbol?(h="s",h+="y",h+="mbol",r.reason!="period"&&(r.reason="symbol"),a.reason=h):(r.reason="period",a.reason="period");this.subscriptions=this.subscriptions.filter(function(u){return u.match||(u.stx||(u.stx=t),n.unsubscribe(u)),u.match}),i.forEach(function(u){u.match||(u.stx||(u.stx=t),u.reason||(u.reason="initialize"),u.symbol!==t.chart.symbol&&(u.series=!0),n.subscribe(u),n.subscriptions.push(u))})},e.QuoteFeed.Subscriptions.prototype.fetch=function(t,a){var r;X.f9T(),r=this,this.fetchFromSource(t,function(i){X.f9T(),i.error||r.checkSubscriptions(t.stx),a(i)})},e.QuoteFeed.Subscriptions.prototype.subscribe=function(t){console.log("subscribe",t)},e.QuoteFeed.Subscriptions.prototype.unsubscribe=function(t){X.f9T(),console.log("unsubscribe",t)},e.QuoteFeed.Subscriptions.prototype.fetchFromSource=function(t,a){console.log("Please provide implementation of fetchFromSource")},e.QuoteFeed.prototype.requiresImmediateRefresh=function(t){return!1},e.ChartEngine.prototype.attachQuoteFeed=function(t,a,r){var i,n,s;i="f",i+="unct",i+="io",i+="n",a||(a={}),(typeof t.fetchInitialData===i||typeof t.fetchUpdateData=="function"||typeof t.fetchPaginationData=="function")&&(n="funct",n+="ion",typeof t.fetchPaginationData!="function"&&typeof t.fetchUpdateData!="function"&&(a.noLoadMore=!0),t.v2QuoteFeed=!0,["multiFetch","announceError","requiresImmediateRefresh"].forEach(function(h){X.f9T(),!t[h]&&t[h]!==!1&&(t[h]=e.QuoteFeed.prototype[h])}),typeof t.subscribe===n&&(t.checkSubscriptions=e.QuoteFeed.Subscriptions.prototype.checkSubscriptions,t.subscriptions=[])),a.maximumTicks||(a.maximumTicks=t.maxTicks?t.maxTicks:2e4),(!a.bufferSize||a.bufferSize<0)&&(a.bufferSize=0),X.f9T(),a.bufferSize=Math.round(a.bufferSize),t.intervalTimer=null,this.quoteDriver&&(!r&&this.quoteDriver.hasUnfilteredQuoteFeed?this.detachQuoteFeed():(s=this.quoteDriver.hasUnfilteredQuoteFeed&&this.quoteDriver.quoteFeeds.pop(),this.quoteDriver.quoteFeeds.push({engine:t,behavior:a,filter:r}),s&&this.quoteDriver.quoteFeeds.push(s),this.quoteDriver.updateChartLoop(null,a,t))),this.quoteDriver||(this.quoteDriver=new e.ChartEngine.Driver(this,t,a,r)),r||(this.quoteDriver.hasUnfilteredQuoteFeed=!0)},e.ChartEngine.prototype.detachQuoteFeed=function(t){var a;if(a=this.quoteDriver,!!a){for(var r=a.quoteFeeds.length-1;r>=0;r--)(!t||a.quoteFeeds[r].engine==t)&&(a.die(a.quoteFeeds[r]),a.quoteFeeds.splice(r,1));a.quoteFeeds.length?t==a.quoteFeed&&(a.quoteFeed=a.quoteFeeds[0].quoteFeed,a.behavior=a.quoteFeeds[0].behavior):a=this.quoteDriver=null}},e.ChartEngine.Driver=function(t,a,r,i){X.Q1Y(),this.stx=t,r||(r={}),this.quoteFeeds=[{engine:a,behavior:r,filter:i}],this.id=e.uniqueID(!0),this.behavior=r,this.quoteFeed=a,this.loadingNewChart=!1,this.updatingChart=!1,i||(this.hasUnfilteredQuoteFeed=!0),this.updateChartLoop()},e.ChartEngine.Driver.prototype.die=function(t){for(var a,r=0;r<this.quoteFeeds.length;r++)(!t||this.quoteFeeds[r]==t)&&(a=this.quoteFeeds[r],clearInterval(a.intervalTimer),a.intervalTimer=-1)},e.ChartEngine.Driver.prototype.getQuoteFeed=function(t){var a;t.symbolObject||(t.symbolObject={symbol:t.symbol}),X.Q1Y();for(var r=0;r<this.quoteFeeds.length;r++)if(a=this.quoteFeeds[r],a.behavior.generator==t.symbolObject.generator&&(!a.filter||a.filter(t)))return a;return null},e.ChartEngine.Driver.prototype.multiFetch=function(t,a){var r=X;r.f9T();var i,n,s;t.length===0&&a([]);function h(l,u,c){return function(p){var y,d,g,b;r.Q1Y(),u.results.push({dataCallback:p,params:l}),y=1068397573,d=811942193,g=2;for(var f=1;r.Y5b(f.toString(),f.toString().length,90919)!==y;f++)u.counter--,g+=2;r.X30(g.toString(),g.toString().length,50530)!==d&&u.counter++,u.counter>=u.finished&&(b=u.results,u.results=[],c(b))}}i={counter:0,finished:t.length,results:[]};for(var o=0;o<t.length;o++)n=t[o],n.stx.isEquationChart(n.symbol)?e.fetchEquationChart(n,h(n,i,a)):(s=this.getQuoteFeed(n),s&&e.ChartEngine.Driver.fetchData(e.QuoteFeed.SERIES,s.engine,n,h(n,i,a)))},e.ChartEngine.Driver.prototype.updateSubscriptions=function(){for(var t=0;t<this.quoteFeeds.length;t++)this.quoteFeeds[t].checkSubscriptions&&this.quoteFeeds[t].checkSubscriptions(this.stx)},e.ChartEngine.Driver.prototype.loadDependents=function(t,a,r,i){var n=X,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_;if(n.Q1Y(),s=this,!i){h=0,o=[],l=[],u=function(P){n.Q1Y(),a&&++h>=s.quoteFeeds.length&&a(null)},c=function(P){++h<o.length||(l.length||u(P),l.forEach(function(E){s.loadDependents(t,u,r,E.behavior)}))},s.quoteFeeds.forEach(function(P){P.behavior.generator?l.push(P):o.push(P)}),o.forEach(function(P){n.Q1Y(),s.loadDependents(t,c,r,P.behavior)});return}y=t.stx,d=t.chart,g=d.series,y.masterData;function L(P){return n.f9T(),function(E){var O,I,B,N,R,q,Y,z,V,K;n.Q1Y(),O=null;for(var Q=0;Q<E.length;Q++)if(I=E[Q],B=I.dataCallback.error,!B&&B!==0){N=I.params.symbolObject,R=I.dataCallback,q=R.quotes,Y=R.moreAvailable,z=R.upToDate,V=[],y.getSeries&&(V=y.getSeries({symbolObject:N})),K=!1;for(var j=0;j<V.length;j++)b=V[j],P||(t.future?(b.upToDate=z===!0?!0:z||q.length<=(I.params.startDate?1:0),y.isHistoricalModeSet&&q.length<2&&(b.mostRecentForwardAttempt=new Date)):b.moreAvailable=Y===!1?!1:Y||q.length>(I.params.endDate?1:0),b.loading=!1),K=b.parameters.fillGaps||K;q=s.cleanup(y,b,q,r,t,K),y.updateChartData(q,d,{secondarySeries:N.symbol,noCreateDataSet:!0,noCleanupDates:!0,allowReplaceOHL:!0}),q&&q.length&&(!O||O>q[0].DT)&&(O=q[0].DT)}E.length&&(y.createDataSet(null,null,{appending:t.originalState.update||t.future,appendToDate:O}),t.nodraw||y.draw(),r==e.QuoteFeed.INITIAL&&s.resetRefreshInterval(i.refreshInterval,i)),a&&a(null)}}m=[],C={},S=r==e.QuoteFeed.UPDATE,w=r==e.QuoteFeed.PAGINATION,k=e.shallowClone(t);for(p in g)if(b=g[p],D=b.parameters,!(!S&&(!t.future&&b.moreAvailable===!1||t.future&&b.upToDate===!0))&&!b.loading&&D.loadData!==!1&&!((S||w)&&(!b.endPoints||!Object.keys(b.endPoints).length))&&!(D.data&&!D.data.useDefaultQuoteFeed)&&(f=D.symbolObject,!!f.symbol&&f.generator==i.generator&&(k.symbolObject=f,k.symbol=f.symbol,v=this.getQuoteFeed(k),i==(v&&v.behavior)))){x=!0,S||(b.loading=!0);for(var M=0;M<m.length;M++)e.symbolEqual(m[M],f)&&(x=!1);x&&(m.push(f),C[f.symbol]=b.endPoints)}A=[];for(var F=0;F<m.length;F++)f=m[F],T=e.shallowClone(t.originalState),T.symbol=f.symbol,T.symbolObject=f,T.update||T.future?(T.endDate||(T.endDate=t.endDate),T.startDate=C[f.symbol].end):(T.startDate||(T.startDate=t.startDate),T.endDate=w&&!t.future?C[f.symbol].begin:t.endDate,T.ticks=t.ticks),A.push(T);if(!A.length&&S){_={appending:t.appending||t.originalState.update},_.appending&&(_.appendToDate=t.startDate),y.createDataSet(null,null,_),t.nodraw||y.draw(),a&&a(null);return}this.multiFetch(A,L(S))},e.ChartEngine.Driver.prototype.cleanup=function(t,a,r,i,n,s){var h,o,l,u,c;return t.doCleanupDates(r,t.layout.interval),!n.missingBarsCreated&&r&&r.length&&t.cleanupGaps&&s!==!1&&(l=n.chart,a?(l=a,o=a.parameters.symbol||a.id):o=l.defaultPlotField,i==e.QuoteFeed.PAGINATION&&!n.loadMoreReplace?l.endPoints.begin&&l.endPoints.begin>r[r.length-1].DT&&(u=t.getFirstLastDataRecord(t.masterData,o,!1),a&&(u=u[o]),r.push(u),h="pop"):i==e.QuoteFeed.UPDATE&&l.endPoints.end&&l.endPoints.end<r["0"^0].DT&&(c=t.getFirstLastDataRecord(t.masterData,o,!0),a&&(c=c[o]),r.unshift(c),h="shift"),r=t.doCleanupGaps(r,n.chart,{cleanupGaps:s,noCleanupDates:!0}),h&&r[h]()),r},e.ChartEngine.Driver.prototype.updateChart=function(t){var a,r,i,n,s,h,o,l,u;if(this.updatingChart||this.loadingNewChart)return;a=Object.keys(this.stx.charts).length,r=0,i=this.stx,n=i.layout.interval,s=i.layout.timeUnit;for(var c in i.charts)if(h=i.charts[c],!!h.symbol){if(o=this.makeParams(h.symbol,h.symbolObject,h),l=this.getQuoteFeed(o),h.masterData&&h.masterData.length&&(o.startDate=h.endPoints.end),o.update=!0,o.originalState=e.shallowClone(o),t&&t!=o.behavior){this.loadDependents(o,null,e.QuoteFeed.UPDATE,t);continue}this.updatingChart=!0,u=p(this,o,h.symbol,l),i.isEquationChart(o.symbol)?e.fetchEquationChart(o,u):l&&e.ChartEngine.Driver.fetchData(e.QuoteFeed.UPDATE,l.engine,o,u)}function p(y,d,g,b){return d.behavior.prefetchAction&&d.behavior.prefetchAction("updateChart"),function(f){var m=X,C,S,w,k,D,v,x,A;C=-1680243243,S=-1115034893,m.B42(34),w=m.C2Z("2",0);for(var T="1"^0;m.Y5b(T.toString(),T.toString().length,89645)!==C;T++)r--,k=d.chart,k.masterData,w+=2;if(m.X30(w.toString(),w.toString().length,84861)!==S&&(r++,k=d.chart,k.masterData),r++,k=d.chart,k.masterData,g==k.symbol&&n==i.layout.interval&&s==i.layout.timeUnit&&!i.isHistoricalMode())b===y.getQuoteFeed(d)&&!f.error?(D=f.quotes,D=y.cleanup(i,null,D,e.QuoteFeed.UPDATE,d),i.updateChartData(D,k,{noCreateDataSet:!0,noCleanupDates:!0}),k.attribution=f.attribution):b&&b.engine.announceError(d.originalState,f);else{y.updatingChart=!1;return}if(r==a){v=-608575750,x=-2120828951,m.q08(8),A=m.C2Z("2",0);for(var _=1;m.X30(_.toString(),_.toString().length,64508)!==v;_++)y.updatingChart=!0,A+=2;m.Y5b(A.toString(),A.toString().length,3363)!==x&&(y.updatingChart=!1)}d.behavior.callback&&d.behavior.callback(d),y.loadDependents(d,null,e.QuoteFeed.UPDATE,d.behavior),m.Q1Y()}}},e.ChartEngine.Driver.prototype.updateChartLoop=function(t,a,r){var i,n;if(a||(a=this.behavior),r||(this.quoteFeeds.forEach(function(h){h.behavior===a&&(r=h)}),r||(r=this.quoteFeed)),r.intervalTimer!==-1){clearInterval(r.intervalTimer),r.intervalTimer=null,i=function(h,o){return function(){o.noUpdate||h.updateChart(o)}};for(var s=0;s<this.quoteFeeds.length;s++)n=this.quoteFeeds[s].behavior,a==n&&!n.noUpdate&&(!t&&t!==0&&(t=n.refreshInterval),t&&(r.intervalTimer=setInterval(i(this,n),t*1e3)))}},e.ChartEngine.Driver.prototype.resetRefreshInterval=function(t,a){(a||this.behavior).refreshInterval=t,this.updateChartLoop(null,a)},e.ChartEngine.Driver.prototype.pause=function(t){this.paused={symbol:t,interval:this.behavior.refreshInterval},this.resetRefreshInterval(0)},e.ChartEngine.Driver.prototype.resume=function(){var{interval:t,symbol:a}=this.paused;e.symbolEqual(a,this.stx.chart.symbol)||(this.resetRefreshInterval(t),this.paused=null)},e.ChartEngine.Driver.prototype.loadAll=function(t,a){var r,i;r=this;function n(){return X.f9T(),function(s){X.f9T(),s?a(s):r.stx.currentlyImporting||!t.moreAvailable&&t.upToDate?a(null):++i>20?(console.warn("moreAvailable and upToDate not implemented correctly in quotefeed"),a()):(t.loadingMore=!1,r.checkLoadMore(t,!0,!0,n(),!0))}}X.q08(8),i=X.o_T("0",0),n()()},e.ChartEngine.Driver.prototype.checkLoadMore=function(t,a,r,i,n){var s=X,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F;h=this.stx,o=this;function P(q){return s.Q1Y(),o.paused?!1:!q.endPoints.end||t.scroll-t.maxTicks+1<d.bufferSize||h.tickFromDate(q.endPoints.end,t,null,!0)-b.length+t.scroll-t.maxTicks+2<d.bufferSize}if(t.loadingMore||this.loadingNewChart){t.initialScroll=t.scroll,i&&i(null);return}if(l=h.isHistoricalMode(),l||(h.isHistoricalModeSet=!1),u=this.makeParams(t.symbol,t.symbolObject,t),h.currentlyImporting){i&&i(null);return}c=1175375657,p=-1643115938,s.B42(44),y=s.o_T(0,"2");for(var E=1;s.Y5b(E.toString(),E.toString().length,12306)!==c;E++)d=u.behavior,y+=2;s.Y5b(y.toString(),y.toString().length,98854)!==p&&(d=u.behavior),d=u.behavior;function O(q){return o.paused?!1:(s.Q1Y(),!q.endPoints.begin||b.length-t.scroll<d.bufferSize||b.length-t.scroll-h.tickFromDate(q.endPoints.begin,t)<d.bufferSize)}b=t.dataSet;function I(q){s.f9T(),t.loadingMore=!1,i&&i(q)}s.B42(67);var B=s.o_T(10,6e3,5,64835,11);if(m=B*(d.forwardPaginationRetryInterval||5),C=!1,S=!1,t.dataSet.length)for(var N in t.series)w=t.series[N],!w.loading&&w.parameters.loadData!==!1&&(f=!w.mostRecentForwardAttempt||w.mostRecentForwardAttempt.getTime()+m<Date.now(),w.moreAvailable!==!1&&O(w)&&(C=!0),f&&!w.upToDate&&P(w)&&(S=!0));f=!t.mostRecentForwardAttempt||t.mostRecentForwardAttempt.getTime()+m<Date.now(),k=(O(t)||a)&&t.moreAvailable!==!1,D=(P(t)||a)&&!t.upToDate&&f,v=k||C,x=(h.isHistoricalModeSet||!t.upToDate)&&!v&&(D||S),A=h.layout.interval,T=h.layout.timeUnit,_=!1;function R(q,Y){return d.prefetchAction&&d.prefetchAction("checkLoadMore"),function(z){var V,K,Q,j,Z,ee,$,ie,te;if(V=q.stx,s.f9T(),K=Y.chart,Y.symbol==K.symbol&&A==V.layout.interval&&T==V.layout.timeUnit)if(Y.loadMore||(Y.chart.loadingMore=!1),g===q.getQuoteFeed(Y)&&!z.error){if(z.quotes||(z.quotes=[]),Q=z.quotes,j=K.masterData,Q=q.cleanup(V,null,Q,e.QuoteFeed.PAGINATION,Y),Q.length&&K.masterData&&K.masterData.length)if(Y.future)Z=Q[0],Z.DT&&Z.DT==K.masterData[K.masterData.length-1].DT&&j.pop();else{s.B42(106);var re=s.C2Z(15,0,16,1,1);ee=Q[Q.length-re],ee.DT&&+ee.DT==+K.masterData[0].DT&&Q.pop()}Y.future?(K.maximumForwardPagination=null,z.upToDate?K.upToDate=!0:z.upToDate===!1||Q.length>1?K.upToDate=!1:(!Q.length||Q.length===1&&+Y.startDate==+z.quotes[0].DT)&&(Y.fetchMaximumBars?K.upToDate=!0:K.maximumForwardPagination=!0),V.isHistoricalModeSet&&Q.length<2&&(K.mostRecentForwardAttempt=new Date)):z.moreAvailable?K.moreAvailable=!0:z.moreAvailable===!1||!Q.length?K.moreAvailable=!1:K.moreAvailable=!0,q.tickMultiplier=Q.length?2:q.tickMultiplier*2,$=Q[0]?Q[0].DT:Y.startDate,ie=Q[0]?Q[Q.length-1].DT:Y.endDate,(!K.endPoints.begin||K.endPoints.begin>$)&&(K.endPoints.begin=$),(!K.endPoints.end||K.endPoints.end<ie)&&(K.endPoints.end=ie),K.loadingMore=!1,Y.loadMoreReplace?V.setMasterData(Q,K,{noCleanupDates:!0}):Y.future?V.updateChartData(Q,K,{noCreateDataSet:!0,noCleanupDates:!0}):e.addMemberToMasterdata({stx:V,chart:K,data:Q,fields:["*"],noCleanupDates:!0}),Y.future&&(te={appending:!0,appendToDate:Q[0]&&Q[0].DT}),V.createDataSet(void 0,void 0,te),n||V.draw(),d.callback&&d.callback(Y),q.loadDependents(Y,i,e.QuoteFeed.PAGINATION)}else q.quoteFeed.announceError(Y.originalState,z),Y.chart.loadingMore=!1,i&&i(z.error);else return}}if(L=d.findHeadOfData||t.masterData&&t.masterData.length,!d.noLoadMore&&L&&(x||!h.maxDataSetSize||t.dataSet.length<h.maxDataSetSize)&&(v||x)){if(t.initialScroll=t.scroll,t.loadingMore=!0,u=this.makeParams(t.symbol,t.symbolObject,t),u.pagination=!0,u.future=x,t.masterData&&t.masterData.length?(x?u.startDate=t.endPoints.end:u.endDate=t.endPoints.begin,x&&!u.startDate?(M=h.getFirstLastDataRecord(t.masterData,"DT",!0),M&&(u.startDate=M.DT)):v&&!u.endDate&&(M=h.getFirstLastDataRecord(t.masterData,"DT"),M&&(u.endDate=M.DT))):u.endDate=new Date,u.originalState=e.shallowClone(u),u.nodraw=n,!k&&(C||!D&&S)){this.loadingMore=!0,this.loadDependents(u,I,e.QuoteFeed.PAGINATION),i&&i(null);return}(t.maximumForwardPagination||h.fetchMaximumBars[h.layout.aggregationType])&&(u.fetchMaximumBars=!0,!h.maxMasterDataSize||d.maximumTicks<h.maxMasterDataSize?u.ticks=d.maximumTicks:u.ticks=h.maxMasterDataSize),F=R(this,u),h.isEquationChart(u.symbol)?e.fetchEquationChart(u,F):(x&&(u.appending=!0),g=o.getQuoteFeed(u),g&&e.ChartEngine.Driver.fetchData(e.QuoteFeed.PAGINATION,g.engine,u,F)),_=!0}!_&&i&&i(null)},e.ChartEngine.Driver.prototype.extendHistoricalData=function({from:t},a=()=>{}){var r,i,{stx:n}=this,{chart:s,layout:h}=n,{masterData:o,dataSet:l}=s;X.Q1Y();var{interval:u,timeUnit:c}=h;if(r=this.makeParams(s.symbol,s.symbolObject,s),i=this.getQuoteFeed(r),s.loadingMore||this.loadingNewChart||n.currentlyImporting||!o.length||!i||n.maxDataSetSize&&l.length>n.maxDataSetSize)return a(null);s.loadingMore=!0,r.originalState=Object.assign({},r),r.startDate=t,r.endDate=o[0].DT;function p(y,d){return function({quotes:g,moreAvailable:b,error:f}){if(!(d.symbol!==s.symbol||u!==h.interval||c!==h.timeUnit)){if(s.loadingMore=!1,f)return a(f);g=y.cleanup(n,null,g,e.QuoteFeed.PAGINATION,d),typeof b=="boolean"?s.moreAvailable=b:s.moreAvailable=!!g.length,s.endPoints.begin=t,e.addMemberToMasterdata({stx:n,chart:s,data:g,fields:["*"],noCleanupDates:!0}),n.createDataSet(),n.draw()}}}e.ChartEngine.Driver.fetchData(e.QuoteFeed.PAGINATION,i.engine,r,p(this,r))},e.ChartEngine.Driver.prototype.barsToFetch=function(t){var a,r,i,n,s;return a="w",a+="eek",e.isValidNumber(this.tickMultiplier)||(this.tickMultiplier=2),r=this.stx.layout.interval,i=t.stx.layout.periodicity,(r=="month"||r==a)&&!this.stx.dontRoll&&(n="w",n+="e",n+="e",n+="k",i*=r==n?"7"*1:30),s=t.stx.chart.maxTicks*i,s*this.tickMultiplier},e.ChartEngine.Driver.determineStartDate=function(t,a,r){return X.Q1Y(),this.determineStartOrEndDate(t,a,r,!0)},e.ChartEngine.Driver.determineStartOrEndDate=function(t,a,r,i){var n;return i?n=t.startDate||a.previous(r):n=t.future?a.next(r):new Date,n},e.ChartEngine.Driver.prototype.makeParams=function(t,a,r){var i,n,s,h,o,l,u,c,p,y;X.f9T(),i=this.stx,n=i.layout.interval,s=this.barsToFetch({stx:i}),(n=="month"||n=="week")&&!i.dontRoll&&(h="d",h+="a",h+="y",n=h),o=this.getQuoteFeed({interval:n,symbol:t,symbolObject:a}),l=o&&o.behavior,u=e.shallowClone(l)||{},u.behavior=l,c=!1,p=[],r.market&&r.market.getSessionNames&&(p=r.market.getSessionNames()),i.extendedHours?i.extendedHours.filter?c=!0:(c=i.layout.extended,p=p.filter(function(g){return X.f9T(),g.enabled||i.layout.marketSessions[g.name]})):p=p.filter(function(g){return g.enabled});for(var d=0;d<p.length;d++)p[d]=p[d].name;return e.extend(u,{stx:i,symbol:t,symbolObject:a,chart:r,interval:n,extended:c,period:1,ticks:s,additionalSessions:p,quoteDriverID:this.id},!0),u.symbolObject||(u.symbolObject={symbol:t}),isNaN(u.interval)||(y="min",y+="ute",u.period=parseInt(u.interval,10),u.interval=i.layout.timeUnit,u.interval||(u.interval=y)),u},e.ChartEngine.Driver.prototype.newChart=function(t,a){var r,i,n,s,h,o,l,u,c;r=this.stx,i=t.symbol,n=r.layout.interval,s=r.layout.timeUnit,h=t.chart,h.moreAvailable=null,h.upToDate=null,h.loadingMore=!1,h.attribution=null,o=this.makeParams(i,t.symbolObject,h),e.extend(o,t,!0),l=this.getQuoteFeed(o),u=o.behavior,(r.fetchMaximumBars[r.layout.aggregationType]||t.fetchMaximumBars)&&(!r.maxMasterDataSize||u.maximumTicks<r.maxMasterDataSize?o.ticks=u.maximumTicks:o.ticks=r.maxMasterDataSize,o.fetchMaximumBars=!0),this.loadingNewChart=!0,this.updatingChart=!1,o.originalState=e.shallowClone(o),c=p(this,o);function p(y,d){var g;return g="ne",g+="wC",g+="h",g+="art",u.prefetchAction&&u.prefetchAction(g),function(b){var f=X,m,C,S,w,k,D,v;if(m=d.chart,C=b.quotes,f.Q1Y(),S=!1,i==m.symbol&&n==r.layout.interval&&s==r.layout.timeUnit)y.loadingNewChart=!1,l===y.getQuoteFeed(d)&&!b.error?(C=y.cleanup(r,null,C,e.QuoteFeed.INITIAL,d),r.setMasterData(C,m,{noCleanupDates:!0}),m.endPoints={},m.endPoints.begin=C[0]?C[0].DT:d.startDate,m.endPoints.end=C[0]?C[C.length-1].DT:d.endDate,C?(m.moreAvailable=b.moreAvailable!==!1,m.upToDate=b.upToDate):(m.moreAvailable=!1,m.upToDate=!0),m.attribution=b.attribution,t.initializeChart&&r.initializeChart(),r.createDataSet(),S=!0):l.engine.announceError(d.originalState,b);else{a&&a("orphaned");return}for(var x in m.series)m.series[x].endPoints={},m.series[x].moreAvailable=null,m.series[x].upToDate=null;w=392583517,k=-1795657607,f.B42(30),D=f.C2Z(0,"2");for(var A=1;f.Y5b(A.toString(),A.toString().length,7180)!==w;A++)v=m.masterData,D+=2;f.X30(D.toString(),D.toString().length,36375)!==k&&(v=m.masterData),v=m.masterData,v&&v.length&&(d.startDate=v[0].DT,d.endDate=v[v.length-1].DT),u.callback&&u.callback(d),y.loadDependents(d,function(){var T;T="newC",T+="h",T+="art",S&&!d.nodraw&&y.stx.home(),a&&a(b.error),y.stx.dispatch(T,{stx:y.stx,symbol:y.stx.chart.symbol,symbolObject:y.stx.chart.symbolObject,moreAvailable:y.stx.chart.moreAvailable,upToDate:y.stx.chart.upToDate,quoteDriver:y}),y.resetRefreshInterval(u.refreshInterval,u)},e.QuoteFeed.INITIAL)}}this.stx.isEquationChart(o.symbol)?e.fetchEquationChart(o,c):l&&e.ChartEngine.Driver.fetchData(e.QuoteFeed.INITIAL,l.engine,o,c)},e.QuoteFeed.INITIAL=1,e.QuoteFeed.UPDATE=2,e.QuoteFeed.PAGINATION=3,e.QuoteFeed.SERIES=4,e.ChartEngine.Driver.fetchData=function(t,a,r,i){if(!r.symbol)return i({quotes:[]});a.v2QuoteFeed?typeof a.subscribe!="function"?e.ChartEngine.Driver.fetchDataInContext(t,a,r,i):e.ChartEngine.Driver.fetchDataInContext(t,a,r,(function(n){X.f9T(),n.error||this.checkSubscriptions(r.stx),i(n)}).bind(a)):(r.stx.convertToDataZone(r.startDate),r.stx.convertToDataZone(r.endDate),a.fetch(r,i))},e.ChartEngine.Driver.fetchDataInContext=function(t,a,r,i){var n,s,h,o,l,u,c,p,y,d;if(n="fun",X.Q1Y(),n+="ct",n+="io",n+="n",u=r.stx,!u.chart.market.newIterator){console.error("quoteFeed feature requires first activating market feature.");return}switch(t===e.QuoteFeed.SERIES&&(r.series=!0,t=e.QuoteFeed.INITIAL,r.endDate&&!r.startDate||r.future?t=e.QuoteFeed.PAGINATION:r.startDate&&!r.endDate&&(t=e.QuoteFeed.UPDATE)),c=Math.min(r.ticks,r.maximumTicks),a.maxTicks&&(c=Math.min(c,a.maxTicks)),p=r.symbolObject.masterSymbol||r.symbol,t){case e.QuoteFeed.UPDATE:if(u.isHistoricalModeSet){u.quoteDriver.updatingChart=!1;return}r.startDate?y=r.startDate:(y=new Date,y.setHours(0,0,0,0)),typeof a.fetchUpdateData=="function"&&a.fetchUpdateData(p,u.convertToDataZone(y),r,i);break;case e.QuoteFeed.INITIAL:l=r.endDate||new Date,s={begin:l,interval:r.interval,periodicity:r.interval=="tick"?u.chart.xAxis.futureTicksInterval:r.period,outZone:u.dataZone},h=u.chart.market.newIterator(s),o=e.ChartEngine.Driver.determineStartDate(r,h,c),r.endDate&&(l=r.endDate),typeof a.fetchInitialData===n&&a.fetchInitialData(p,o,u.convertToDataZone(l),r,i);break;case e.QuoteFeed.PAGINATION:if(s={begin:r.endDate||r.startDate,interval:r.interval,periodicity:r.interval=="tick"?u.chart.xAxis.futureTicksInterval:r.period,outZone:u.dataZone},h=u.chart.market.newIterator(s),d=e.ChartEngine.Driver.determineStartOrEndDate(r,h,c,!r.future),o=r.startDate||d,l=r.endDate||d,r.startDate?r.stx.convertToDataZone(o):r.stx.convertToDataZone(l),typeof a.fetchPaginationData=="function"){if(u.maxMasterDataSize&&u.maxMasterDataSize<=u.masterData.length)return;a.fetchPaginationData(p,o,l,r,function(g){l>=Date.now()&&(u.isHistoricalModeSet=!1),i&&i(g)})}break;default:console.error("Illegal fetchData constant")}}};Qs=W=>{var e=X,t,a;t="und",t+="efi",t+="ned",a=typeof _CIQ!==t?_CIQ:W.CIQ,e.Q1Y(),a.ChartEngine.prototype.addSeries=function(r,i,n){var s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_;if(s="a",s+="d",s+="dS",s+="eries",h="perc",h+="ent",o="d",o+="isplay",l=this.runPrepend("addSeries",arguments),l)return l;u=r||null,c=r,r||(r=a.uniqueID()),i&&i.panel===!0&&(i.panel=r),p={parameters:i?a.clone(i):{},yValueCache:[],display:u,id:r,loading:i?i.loadData!==!1:!0},p.parameters.yAxis=i&&i.yAxis,i=p.parameters,i.symbol&&(c=i.symbol),i.isComparison&&(i.shareYAxis=!0),i.yAxis&&!(i.yAxis instanceof a.ChartEngine.YAxis)&&(i.yAxis=new a.ChartEngine.YAxis(i.yAxis)),a.ensureDefaults(i,{chartName:this.chart.name,symbolObject:{symbol:c},panel:this.chart.panel.name,fillGaps:!1,action:"add-series"}),o in i&&(p.display=i.display);function L(F){return e.Q1Y(),function(P){var E,O;P.error||(E=P.quotes,O=i.fillGaps,S.cleanupGaps||(O=!1),E=S.doCleanupGaps(E,S.chart,{cleanupGaps:O}),S.updateChartData(E,S.chart,{secondarySeries:c,noCreateDataSet:!0,noCleanupDates:!0,allowReplaceOHL:!0}),p.loading=!1,p.moreAvailable=P.moreAvailable,p.upToDate=P.upToDate,M(S)),i.action!==null&&!b.length&&S.dispatch(w?"symbolImport":"symbolChange",{stx:S,symbol:F.symbol,symbolObject:F.symbolObject,action:i.action,id:p.id,parameters:i}),n&&n.call(S,P.error,p)}}function M(F,P){var E,O,I,B,N;if(E="L",e.f9T(),E+="in",E+="es",O=i.renderer||E,I=i.name||r,i.yAxis&&!(i.yAxis instanceof a.ChartEngine.YAxis)&&!w&&(i.yAxis.name=I),!(!i.renderer&&!i.name&&!i.color&&!i.chartType)){if(B=F.getSeriesRenderer(I),!B){if(N={name:I,overChart:i.overChart!==!1,useChartLegend:!0},i.chartType?B=a.Renderer.produce(i.chartType,a.extend({highlightable:i.highlightable,dependentOf:i.dependentOf,panel:i.panel,yAxis:i.yAxis,baseline:i.baseline},N)):(a.ensureDefaults(i,N),B=new a.Renderer[O]({params:i})),!B)return;F.setSeriesRenderer(B)}B.attachSeries(r,i),i.loadData!==!1&&B.ready(),F.layout.symbols=F.getSymbols({"include-parameters":!0,"exclude-studies":!0})}}return y=this.charts[i.chartName],d=i.symbolObject,c=i.symbol=d.symbol,p.display||(p.display=c||i.field),p.endPoints={},!i.gapDisplayStyle&&i.gapDisplayStyle!==!1&&(i.gapDisplayStyle=i.gaps),i.isComparison&&(g="transparen",g+="t",i.gapDisplayStyle===void 0&&(i.gapDisplayStyle=g)),b=this.getSeries({symbolObject:d,chart:y,includeMaster:!0}),f=i.panel,this.panels[f]?!i.yAxis&&!i.shareYAxis&&(C="n",C+="o",C+="n",C+="e",i.yAxis=new a.ChartEngine.YAxis({name:r,position:C})):(m=i.yAxis||new a.ChartEngine.YAxis,m.name=r,this.createPanel(r,f,null,null,m),(!this.preferences.dragging||!this.preferences.dragging.series)&&(i.highlightable=!1)),y.series[r]=p,S=this,w=this.currentlyImporting,i.isComparison&&y.forcePercentComparison&&i.panel==y.panel.name&&(!i.yAxis||i.yAxis==y.yAxis)&&this.setChartScale(h),k=y.masterData,k||(k=y.masterData=this.masterData=[]),D=k.length,i.data&&!i.data.useDefaultQuoteFeed?(v={symbol:c,symbolObject:d,action:i.action},L(v)({quotes:i.data})):b.length?(p.endPoints=b[0].endPoints,p.loading=b[0].loading,M(this),n&&setTimeout(function(){n.call(S,null,p)},0)):this.quoteDriver&&i.loadData!==!1?(x=this.quoteDriver,A=x.makeParams(c,d,y),D&&(A.startDate=k[0].DT,A.endDate=this.isHistoricalMode()?k[k.length-1].DT:new Date),A.stx.isEquationChart(A.symbol)?a.fetchEquationChart(A,L(A)):(T=x.getQuoteFeed(A),T&&a.ChartEngine.Driver.fetchData(4,T.engine,A,L(A)))):(_="sym",_+="bolImp",_+="o",_+="rt",M(this),i.action!==null&&!b.length&&S.dispatch(w?_:"symbolChange",{stx:S,symbol:c,symbolObject:d,action:i.action,id:p.id,parameters:i}),n&&n.call(this,null,p)),this.runAppend(s,arguments),p},a.ChartEngine.prototype.getSeries=function(r){var i,n,s,h,o;i=r.chart?r.chart:this.chart,n=i.series,s=r.symbolObject,s||(s={symbol:r.symbol}),h=[];for(var l in n)o=n[l],a.symbolEqual(s,o.parameters.symbolObject)&&h.push(o);return r.includeMaster&&a.symbolEqual(s,i.symbolObject)&&h.push({}),e.Q1Y(),h},a.ChartEngine.prototype.modifySeries=function(r,i,n){var s,h,o,l,u,c,p,y,d,g,b,f,m,C,S;if(s="strin",s+="g",!this.runPrepend("modifySeries",arguments)&&i&&(typeof r===s?(l=i.chartName?this.charts[i.chartName]:this.chart,o=r,h=l.series[o]):(h=r,o=h.id,l=this.charts[h.parameters.chartName]),!!h)){a.extend(h.parameters,i,!0),this.getRendererFromSeries(o).modifyRenderer(i),u=h.parameters;for(var w in l.seriesRenderers){p=l.seriesRenderers[w],y=p.params,d=p.seriesParams;for(var k=0;k<d.length;++k)if(g=d[k],b=this.panels[g.panel],f=b&&b.yAxis.name,g.id===h.id){u.panel===!0&&(u.panel=u.dependentOf||u.name),y.panel=u.panel,i.yAxis&&(i.yAxis instanceof a.ChartEngine.YAxis||(i.yAxis=new a.ChartEngine.YAxis(i.yAxis)),y.yAxis=i.yAxis),u.panel!=g.panel&&y.name==f?this.electNewPanelOwner(g.panel):(m=this.getYAxisByName(u.panel,y.name),m&&u.yAxis&&m.name!==u.yAxis.name&&(m.name=this.electNewYAxisOwner(m))),u.field||(u.field=null),p.attachSeries(o,a.ensureDefaults(u,g)),u.field||(u.field=u.subField),delete u.subField,u.isComparison&&l.forcePercentComparison&&u.panel==l.panel.name&&(!h.parameters.yAxis||u.yAxis.name==l.yAxis.name)&&this.setChartScale("percent"),c=p;break}}if(a.getFn("Drawing.updateSource")(this,h.parameters.symbol||o,null,h.parameters.panel),this.runAppend("modifySeries",arguments),n!==!0){C=c.getDependents(this);for(var D=0;D<C.length;D++)this.modifySeries(C[D].params.name,{panel:c.params.panel,yAxis:h.parameters.yAxis},!0);S=l.seriesRenderers[c.params.dependentOf],S&&(S.params.yAxis!=h.parameters.yAxis||S.params.panel!=c.params.panel)&&this.modifySeries(c.params.dependentOf,{panel:c.params.panel,yAxis:h.parameters.yAxis},!0)}return this.draw(),h}},a.ChartEngine.prototype.deleteSeries=function(r,i,n){var s,h,o,l,u,c,p,y,d,g;s="symbolCh",s+="ange",h="symbo",h+="lImport",o="r",o+="emove-ser",o+="i",o+="es",!this.runPrepend("deleteSeries",arguments)&&(n=n||{},l=n.action?n.action:o,typeof r=="object"?(u=r.id,i=i||this.charts[r.parameters.chartName]):(u=r,i=i||this.chart),c=i.series[u],c&&(p=c.parameters.loadData,y=c.parameters.symbolObject,delete i.series[u],this.layout.symbols=this.getSymbols({"include-parameters":!0,"exclude-studies":!0}),d=this.getSeries({symbolObject:y,includeMaster:!0}),p!==!1&&!d.length&&this.cleanMasterData(y,i),g=this.panels[c.parameters.panel],g&&this.checkForEmptyPanel(g),this.createDataSet(),d.length||this.dispatch(this.currentlyImporting?h:s,{stx:this,symbol:y.symbol,symbolObject:y,id:u,action:l}),this.quoteDriver&&this.quoteDriver.updateSubscriptions(),this.runAppend("deleteSeries",arguments)))},a.ChartEngine.prototype.removeSeries=function(r,i){var n,s,h,o,l,u,c;if(!this.runPrepend("removeSeries",arguments)){s=!1,typeof r=="object"?(n=r.id,i=i||this.charts[r.parameters.chartName]):(n=r,i=i||this.chart);for(var p in i.seriesRenderers){h=i.seriesRenderers[p],o=this.panels[h.params.panel],l=o&&o.yAxis.name;for(var y=h.seriesParams.length-1;y>=0;y--)u=h.seriesParams[y],u.id===n&&(h.removeSeries(n),h.seriesParams.length<1&&(this.removeSeriesRenderer(h),h.params.name==l?this.electNewPanelOwner(h.params.panel):this.checkForEmptyPanel(h.params.panel)||(c=this.getYAxisByName(o,h.params.name),c&&(c.name=c.studies[0]||c.renderers[1]))),s=!0)}s||this.deleteSeries(n,i),this.resetDynamicYAxis(),this.draw(),this.resizeChart(),this.runAppend("removeSeries",arguments)}},a.Comparison=a.Comparison||function(){},a.Comparison.initialPrice=100,a.Comparison.getInitialPrice=function(r){var i,n,s,h;if(i="n",i+="umber",r.initialComparisonPrice)return r.initialComparisonPrice;if(r.initialComparisonPrice=100,n=a.Comparison.initialPrice,typeof n==i&&(r.initialComparisonPrice=n),typeof n=="string"&&(r.series[n]||n==="")){s="Close",r.defaultPlotField&&(r.highLowBars||(s=r.defaultPlotField));for(var o=r.dataSet.length-r.scroll-1;o<r.dataSet.length;o++)if(h=r.dataSet[o],h){if(h[n]&&h[n][s]){r.initialComparisonPrice=h[n][s];break}else if(n===""&&h[s]){r.initialComparisonPrice=h[s];break}}}return r.initialComparisonPrice},a.Comparison.priceToPercent=function(r,i,n,s,h){var o,l;o="ob",o+="je",o+="ct",l=r.comparisonBaseline,e.Q1Y(),l&&h in l&&(l=l[h]),l&&typeof l===o&&(l=l[i.defaultPlotField||"Close"]),l=l||n,e.B42(14);var u=e.o_T(7,83,10);e.B42(36);var c=e.C2Z(3,19955,9985);e.q08(14);var p=e.C2Z(9992,3,5);return Math.round((n-l)/l*u*c)/p},a.Comparison.percentToPrice=function(r,i,n,s,h){var o,l;return o="obje",o+="ct",l=r.comparisonBaseline,l&&h in l&&(l=l[h]),l&&typeof l===o&&(l=l[i.defaultPlotField||"Close"]),l=l||1,e.B42(107),e.o_T("100",n,l,0,"1")},a.Comparison.priceToRelative=function(r,i,n,s,h){var o,l,u;return o="C",e.f9T(),o+="lo",o+="s",o+="e",l=r.comparisonBaseline,u=a.Comparison.getInitialPrice(i),l&&h in l&&(l=l[h]),l&&typeof l=="object"&&(l=l[i.defaultPlotField||o]),e.q08(108),e.o_T(n,l||n,u)},a.Comparison.relativeToPrice=function(r,i,n,s,h){var o,l,u;return o="C",o+="l",o+="o",o+="se",l=r.comparisonBaseline,e.Q1Y(),u=a.Comparison.getInitialPrice(i),l&&h in l&&(l=l[h]),l&&typeof l=="object"&&(l=l[i.defaultPlotField||o]),e.q08(108),e.o_T(n,u,l||1)},a.Comparison.createComparisonSegmentInner=function(r,i){var n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F;n="Lo",n+="w",s="Cl",s+="o",s+="s",s+="e",h=[];for(o in i.series)c=i.series[o].parameters,(!c.yAxis&&c.shareYAxis||c.yAxis===i.yAxis)&&h.push(c.symbol);p=[s,"Open","High",n,"iqPrevClose"],y=r.chart.highLowBars,i.defaultPlotField&&!y&&p.unshift(i.defaultPlotField),d=p[0],g=r.layout.studies;for(var P in g)if(b=g[P],l=r.panels[b.panel],u=b.getYAxis(r),!(!l||l.yAxis!=u)){for(o in b.outputMap)p.push(o);for(var E=0;E<=2;E++)p.push(b.name+"_hist"+(E||""));b.referenceOutput&&p.push(b.referenceOutput+" "+b.name)}for(var O in r.plugins)if(f=r.plugins[O],!!f.transformOutputs)for(o in f.transformOutputs)p.push(o);i.initialComparisonPrice=null,i.dataSegment=[],m=null,e.B42(52);var I=e.C2Z(17,24,11,5);C=i.dataSet.length-i.scroll-I,r.startComparisonsAtFirstVisibleBar&&(C+=1),e.q08(13);var B=e.C2Z(8,0,5);S=i.maxTicks+("3"|B);for(var N=0;N<=S;N++){if(N==S&&(N=-1),e.q08(0),w=e.C2Z(N,C),w<i.dataSet.length&&w>=0){if(k=i.dataSet[w],D=k[d],!m){if(D===0||D===null){if(N<0)break;continue}m=a.clone(k)}for(k.transform||(k.transform={cache:{},DT:k.DT,Date:k.Date}),!(m&&m[d])&&D&&(m=a.clone(k)),r.comparisonBaseline=m,v=0;v<p.length;v++)o=p[v],x=k[o],(x||x===0)&&(k.transform[o]=i.transformFunc(r,i,x));for(v=0;v<h.length;v++){if(o=h[v],A=i.series[o],N==-1&&A&&A.parameters.isComparison){delete k.transform[o];continue}T=k[o];for(var R="0"*1;T&&R<p.length;R++)_=T[p[R]],(_||_===("0"^0))&&(L=m[o]&&m[o][p[0]],!L&&L!==0&&(m[o]||(m[o]={}),m[o][p[R]]=L=_*m[d]/k[d]),L!==0&&(M=m[d]||1,e.q08(109),F=e.C2Z(_,M,L),k.transform[o]||(k.transform[o]={}),k.transform[o][p[R]]=i.transformFunc(r,i,F)))}i.dataSegment.push(k)}else w<0&&i.dataSegment.push(null);if(N<0)break}},a.Comparison.priceFormat=function(r,i,n){var s,h;if(n===null||typeof n>"u"||isNaN(n))return"";if(s=i.yAxis.priceTick,h=r.internationalizer,h)s>=5?(e.B42(9),n=h.percent.format(e.C2Z(100,n))):s>=.5?(e.B42(23),n=h.percent1.format(e.o_T("100",n))):s>=.05?(e.q08(9),n=h.percent2.format(e.C2Z(100,n))):s>=.005?(e.B42(23),n=h.percent3.format(e.C2Z("100",n))):(e.q08(9),n=h.percent4.format(e.C2Z(100,n)));else if(s>=5){e.q08(3),e.o_T(103774,16,1,6919),e.q08(61),e.C2Z(6600,12,4,3308,1),e.q08(14);var o=e.C2Z(9914,7,9);e.B42(104);var l=e.o_T(8193,702,3,2);e.B42(59);var u=e.C2Z(8,39156,2294,18);e.q08(36);var c=e.C2Z(17,83700,4960);n=n.toFixed(0)+(235.98<o?l==u?"V":"%":c)}else if(s>=.5){e.q08(110);var p=e.o_T(5,39,17,5,13);n=n.toFixed(p)+"%"}else if(s>=.05){e.B42(41);var y=e.o_T(4,33,7,38);n=n.toFixed(y)+"%"}else if(s>=.005){e.q08(0);var d=e.C2Z(2,1);e.B42(55);var g=e.C2Z(16,96,6);n=n.toFixed(d)+(("8784"^0)==="4588"<<g?6991:"%")}else{e.B42(8);var b=e.o_T(48,44);n=n.toFixed(b)+"%"}return e.f9T(),parseFloat(n)===0&&n.charAt(0)=="-"&&(n=n.substring(1)),n},a.ChartEngine.prototype.setComparison=function(r,i,n){var s,h,o,l,u;if(s="percen",s+="t",i||(i=this.chart),typeof i=="string"&&(i=this.charts[i]),(n||n==="")&&(a.Comparison.initialPrice=n),r===!0){if(h="perc",h+="ent",i.isComparison)return;r=h}switch(this.resetDynamicYAxis(),o=i.panel.yAxis,l=o.priceFormatter==a.Comparison.priceFormat,r){case"relative":this.setTransform(i,a.Comparison.priceToRelative,a.Comparison.relativeToPrice),l&&(o.priceFormatter=o.originalPriceFormatter?o.originalPriceFormatter.func:null,o.originalPriceFormatter=null),o.whichSet="dataSegment",i.isComparison=!0;break;case s:u="dataSeg",u+="men",u+="t",this.setTransform(i,a.Comparison.priceToPercent,a.Comparison.percentToPrice),l||(o.originalPriceFormatter={func:o.priceFormatter},o.priceFormatter=a.Comparison.priceFormat),o.whichSet=u,i.isComparison=!0;break;default:this.unsetTransform(i),l&&(o.priceFormatter=o.originalPriceFormatter?o.originalPriceFormatter.func:null,o.originalPriceFormatter=null),o.whichSet="dataSet",i.isComparison=!1;break}},a.ChartEngine.prototype.setChartScale=function(r){var i,n,s,h;i="li",i+="n",e.f9T(),i+="ear",n=this.chart,s={percent:!0,relative:!0},r||(r=i),s[r]?this.setComparison(r,n,a.Comparison.initialPrice):s[this.layout.chartScale]&&this.setComparison(!1,n),h=this.layout.chartScale!==r,this.layout.chartScale=r,n.canvas&&this.draw(),h&&this.changeOccurred("layout")}};js=W=>{var e=X,t,a,r;function i(o,l,u){var c,p,y,d,g,b,f,m,C,S,w;if(c="b",c+="o",c+="dy",p="ciq-n",p+="o-",p+="sh",p+="are",l||(l={}),y=p,d=o.container.ownerDocument.querySelector(c),l.hide&&l.hide instanceof Array){g=",",g+=" ",b=l.hide.join(g),f=d.querySelectorAll(b);for(var k=0;k<f.length;k++)f[k].classList.add(y)}for(d.classList.add("sharing"),o.draw(),m=o.chart.container.getElementsByTagName("svg"),C=[],S=0;S<m.length;S++)w=m[S],C.push(w.innerHTML),s(w);r(o.chart.container,{allowTaint:!1,logging:!1,width:l.width||null,height:l.height||null,backgroundColor:l.background||null,useCORS:!0}).then(function(D){var v,x,A;for(u&&u(null,l.data?D.toDataURL("image/png"):D),S=0;S<m.length;S++)m[S].innerHTML=C[S];v=-1625653745,x=1583789616,A=2;for(var T=1;e.Y5b(T.toString(),T.toString().length,30375)!==v;T++)d.classList.remove("sharing"),A+=2;e.Y5b(A.toString(),A.toString().length,54242)!==x&&d.classList.remove("")}).catch(function(D){var v;for(v="s",v+="haring",u&&u(D),S=0;S<m.length;S++)m[S].innerHTML=C[S];d.classList.remove(v)})}t="undefin",t+="ed",e.f9T(),a=typeof _CIQ!==t?_CIQ:W.CIQ,a.Share=a.Share||function(){};function n(o){if(typeof html2canvas>"u"){if(typeof requirejs<"u")try{return requirejs(["html2canvas.min.js"],function(l){return e.Q1Y(),r=l,o()})}catch{console.warn("Require loading has failed, attempting to load html2canvas manually.")}a.loadScript(h()+"html2canvas.min.js",function(){return r=html2canvas,o()})}else return r=html2canvas,o()}a.Share.fullChart2PNG=function(o,l,u){if(!(!o||!o.chart)){if(typeof html2canvas>"u")return n(function(){return i(o,l,u)});r=html2canvas,e.f9T(),i(o,l,u)}},a.Share.createImage=function(o,l,u){var c,p,y,d,g,b,f,m,C,S;c="i",c+="m",c+="age/",p="o",p+="bject",y=[].slice.call(arguments),e.Q1Y(),u=y.pop(),(l===null||typeof l!=p)&&(l={widthPX:y[1],heightPX:y["2"^0],imageType:y[3]}),d=l.widthPX,g=l.heightPX,b=l.imageType,f=o.chart.canvas.height,m=o.chart.canvas.width,o.chart.canvas.style.height&&(f=a.stripPX(o.chart.canvas.style.height),m=a.stripPX(o.chart.canvas.style.width)),d&&g?(f=g,m=d):g?m=o.chart.canvas.width*(f/o.chart.canvas.height):d&&(m=d,f=o.chart.canvas.height*(d/o.chart.canvas.width)),C=b?c+b:"image/png",S=document.createElement("img"),S.onload=function(){a.Share.fullChart2PNG(o,{image:this,width:m,height:f,hide:l.hide},function(w,k){if(e.Q1Y(),w)e.q08(0),console.warn(e.o_T(w,"Error producing canvas snapshot: "));else try{u(k.toDataURL(C))}catch{console.warn("Safari devices do not handle CORS enabled images. Using the charts' canvas as a fallback."),u(S.src)}})},S.src=o.chart.canvas.toDataURL(C)},a.Share.uploadImage=function(o,l,u,c){var p;u||(u={}),u.image=o,p=a.postAjax(l,JSON.stringify(u),function(y,d){var g,b,f;if(y!=200){c(y,null),g=1486717895,e.B42(8),b=e.C2Z("657131458",0),f=2;for(var m="1"^0;e.X30(m.toString(),m.toString().length,50490)!==g;m++)return;if(e.Y5b(f.toString(),f.toString().length,40189)!==b)return}c(null,d)}),p||c(0,null)};function s(o){var l,u,c;if(l="fon",l+="t-v",l+="ar",l+="iant",!!o.style){u=getComputedStyle(o),c=["alignment-baseline","dominant-baseline","fill","fill-opacity","font-family","font-size",l,"font-weight","text-align","text-anchor"],c.forEach(function(y){!o.style[y]&&u[y]&&(o.style[y]=u[y])});for(var p in o.children)s(o.children[p])}}function h(){var o,l,u,c;if(o="j",o+="s/",o+="th",o+="irdparty/",a.Share.html2canvasLocation)return a.Share.html2canvasLocation;l=document.getElementsByTagName("script");for(var p=0;p<l.length;p++)if(u="shar",u+="e",u+=".js",c=l[p],c.src&&c.src.indexOf(u)>-1)return c.src.replace(/standard\/share\.js/,"")+"thirdparty/";return o}a.Share.shareChart=function(o,l,u){e.f9T(),a.Share.createImage(o,{},function(c){var p,y,d,g,b,f;if(p=a.uniqueID(),y="https://share.chartiq.com",e.q08(14),d=e.C2Z(y,p,"/upload/"),l&&(l.host&&(y=l.host),l.path)){e.q08(20);var m=e.C2Z(20,6,94);e.q08(8);var C=e.o_T(38320,33530);d=y+l.path+(("6384"|m)>=C?"/":!0)+p}g=o.getStartDateOffset(),b={layout:o.exportLayout(),drawings:o.exportDrawings(),xOffset:g,startDate:o.chart.dataSegment[g].Date,endDate:o.chart.dataSegment[o.chart.dataSegment.length-1].Date,id:p,symbol:o.chart.symbol},f={id:p,image:c,config:b},a.Share.uploadImage(c,d,f,function(S,w){S!==null?a.alert("error sharing chart: ",S):(e.B42(0),u(e.o_T(w,y)))})})}};Us=W=>{var e,t;e="u",e+="ndefi",e+="ne",e+="d",t=typeof _CIQ!==e?_CIQ:W.CIQ,t.ChartEngine.prototype.setRange=function(a,r){var i=X,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B;t.isEmpty(a)&&(a={dtLeft:arguments[0],dtRight:arguments["1"*1],padding:arguments[2],chart:arguments[3]},i.q08(8),r=arguments[i.o_T("4",0)]),this.staticRange&&(a.goIntoPast=a.goIntoFuture=!0),a.chart||(a.chart=this.chart);function N(V){if(V&&c===0){s.scroll=x,u.setCandleWidth(A),u.layout.interval=T,u.layout.periodicity=_,u.layout.timeUnit=L,r&&r(V);return}if(c++,c>10){R();return}R()}typeof a.padding>"u"&&(a.padding=0),n=!1;function R(V){var K,Q,j,Z,ee,$,ie,te,re,H,U,G,ae,ne,oe,le,he,ue,ce,de;if(K="u",K+="ndefined",typeof V==K&&(V=null),Q=0,j=0,Z=new Date,ee=a.base,$=a.periodicity,ie=u.layout,a.goIntoFuture&&(!s.masterData.length||h>s.masterData[s.masterData.length-1].DT)&&(te="g",te+="a",te+="p",re=s.masterData.length?s.masterData.pop():{DT:h},H=u.doCleanupGaps([re,{DT:o}],s,{cleanupGaps:te,noCleanupDates:!0}),u.setMasterData(s.masterData.concat(H),s,{noCleanupDates:!0}),u.createDataSet(null,null,{appending:!0})),U=s.dataSet,G=U.length,!U||G===0){r&&r(V);return}if(ee==="day"&&$&&$.interval==="day")ne=a.multiplier,Q=G<ne?0:G-ne,i.q08(40),j=i.C2Z("1",G);else if(ee==="today"&&U[G-1].DT.getDate()<Z.getDate()){oe=new Date(U[G-1].DT.getTime()),oe.getTime(),ae=0;for(var Ce=G-1;Ce>=0;Ce--)if(U[Ce]&&U[Ce].DT.getDate()!=oe.getDate()){oe=new Date(+U[Ce+1].DT),i.B42(0),ae=i.C2Z(1,Ce);break}Q=ae,i.B42(8),j=i.o_T(G,1)}else le="a",le+="ll",a.base!="all"&&(h.getTime()>=U[0].DT.getTime()||a.goIntoPast)?Q=u.tickFromDate(h,s,null,!0):Q=0,a.base!=le&&(o.getTime()<=U[G-1].DT.getTime()||a.goIntoFuture)?(j=u.tickFromDate(o,s),j>G-1&&j--):(i.B42(8),j=i.C2Z(G,1));if(i.B42(13),he=i.o_T(1,j,Q),he<1){r&&r(V);return}ue=a.padding||"0"|0,j<G-1&&(i.B42(34),ue=i.C2Z("0",0)),ce=(s.width-ue)/he,u.setCandleWidth(ce,s),i.B42(111),s.scroll=i.o_T(1,G,j,he),u.micropixels=1;for(var pe in u.panels)u.calculateYAxisMargins(u.panels[pe].yAxis);a.dontSaveRangeToLayout?delete ie.range:(delete a.chart,delete ie.setSpan,ie.range=a),u.draw(),u.changeOccurred("layout"),n||(de="pe",de+="r",de+="iodicity",u.dispatch(de,{stx:u,differentData:M,prevPeriodicity:{interval:T,periodicity:_,timeUnit:L}})),i.f9T(),r&&r(V)}s=a.chart,h=typeof a.dtLeft=="string"?new Date(a.dtLeft):a.dtLeft,o=new Date,a.dtRight&&(o=typeof a.dtRight=="string"?new Date(a.dtRight):a.dtRight),h||(l=this.standardMarketIterator(o,null,s),h=l.previous(s.maxTicks),a.periodicity||(n=!0));function q(V,K,Q,j,Z,ee){var $,ie;return $=0,i.B42(8),ie=i.C2Z(V,K),t.ChartEngine.isDailyInterval(Q)?Q=="month"?$=ie/t.MONTH/j:Q=="week"?$=ie/t.WEEK/j:$=ie/t.DAY/j:isNaN(Q)||(Z=="millisecond"?(i.q08(112),$=i.C2Z(Q,ie,j)):Z=="second"?$=ie/t.SECOND/(j*Q):$=ie/t.MINUTE/(j*Q)),Math.round($)}if(s.inflectionPoint=h,this.layout.range={dtLeft:h,dtRight:o},u=this,c=0,this.quoteDriver){if(n)p=this.layout.interval,d=this.layout.timeUnit,y=this.layout.periodicity;else if(a.periodicity)g=t.cleanPeriodicity(a.periodicity.period,a.periodicity.interval,a.periodicity.timeUnit),p=g.interval,d=g.timeUnit,y=g.period;else if(b=o.getTime()-h.getTime(),this.autoPickCandleWidth.turnOn){S=0,this.autoPickCandleWidth.candleWidth?S=this.autoPickCandleWidth.candleWidth:S=this.chart.barsHaveWidth?5:2,w=s.width/S,k=this.dynamicRangePeriodicityMap,p=k[0].interval,y=1;for(var z=0;z<k.length;z++){if(v=b/k[z].rangeInMS,v<w){k[z-1]?(p=k[z-1].interval,d=k[z-1].timeUnit,i.B42(9),y=Math.ceil(i.C2Z(w,D))):(p=k[z].interval,d=k[z].timeUnit,y=1);break}D=v}}else{f=this.staticRangePeriodicityMap,m=null;for(var Y=0;Y<f.length;Y++)if(C=f[Y],b/C.rangeInMS<1.001){m=C;break}p=m.interval,y=m.periodicity,d=m.timeUnit}x=this.chart.scroll,A=this.layout.candleWidth,T=this.layout.interval,_=this.layout.periodicity,L=this.layout.timeUnit,this.chart.scroll=this.chart.maxTicks=q(o.getTime(),h.getTime(),p,y,d,this.dontRoll),this.layout.candleWidth=this.chart.width/this.chart.maxTicks,M=this.needDifferentData({period:y,interval:p,timeUnit:d}),Object.keys(this.chart.endPoints).length&&(this.chart.endPoints.begin>h||this.chart.endPoints.end<o)&&(M=!0),!this.chart.masterData||!this.chart.masterData.length||M||a.forceLoad?(this.layout.interval=p,this.layout.periodicity=y,this.layout.timeUnit=d,this.layout.timeUnit||(F="m",F+="i",F+="nut",F+="e",P="tic",P+="k",E="se",E+="co",E+="n",E+="d",t.ChartEngine.isDailyInterval(this.layout.interval)?this.layout.timeUnit=null:this.layout.interval==E?this.layout.timeUnit="second":this.layout.interval!=P&&(this.layout.timeUnit=F)),O={symbol:s.symbol,symbolObject:s.symbolObject,chart:s,nodraw:!0},this.layout.interval=="tick"&&(O.startDate=h,O.endDate=o),this.displayInitialized||(O.initializeChart=!0),I={symbol:s.symbol,symbolObject:s.symbolObject,interval:this.layout.interval},(I.interval=="month"||I.interval=="week")&&!this.dontRoll&&(I.interval="day"),B=Math.max(this.quoteDriver.getQuoteFeed(I).behavior.bufferSize+50,200),l=this.standardMarketIterator(h,null,s),O.startDate=new Date(l.previous(B).getTime()),l=this.standardMarketIterator(o,null,s),O.endDate=new Date(l.next(B).getTime()),O.endDate<Date.now()&&(this.isHistoricalModeSet=!0),this.clearCurrentMarketData(this.chart),clearTimeout(this.streamParameters.timeout),this.quoteDriver.newChart(O,N)):((this.layout.interval!=p||this.layout.periodicity!=y||this.layout.timeUnit!=d||!this.chart.dataSegment||!this.chart.dataSegment[0]||this.chart.dataSegment["0"<<64].DT!=s.inflectionPoint)&&(this.layout.interval=p,this.layout.periodicity=y,this.layout.timeUnit=d,this.createDataSet()),N())}else R()},t.ChartEngine.prototype.setSpan=function(a,r){var i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A;if(i="to",i+="d",i+="ay",n="y",n+="e",n+="ar",s="mont",s+="h",h="y",h+="t",h+="d",o="y",o+="e",o+="a",o+="r",l=arguments[0],u=arguments[1],c=arguments[2],p=arguments[3],typeof a=="object"?(l=a.period?a.period:a.multiplier?a.multiplier:1,u=a.interval?a.interval:a.base?a.base:a.span?a.span:a.period,c=a.padding,p=a.chart):(a={period:l,interval:u,padding:c,chart:p},r=arguments[5]),p||(p=this.chart),y=p.market,u=u.toLowerCase(),u=="all"){a.dontSaveRangeToLayout=!0,this.displayAll(a,r);return}g=u,b=1,u=="today"?(f="d",f+="a",f+="y",g=f):u==o&&(g="month",b=12);function T(L){return L.setHours(0),L.setMinutes(0),L.setSeconds(0),X.Q1Y(),X.q08(34),L.setMilliseconds(X.o_T("0",0)),L}m=t.shallowClone(a),C={begin:y.marketZoneNow(),interval:g,period:b},S=C.begin,w=t.Market.Symbology.isForexSymbol(p.symbol),u===h?(S=T(S),S.setMonth(0),S.setDate(1)):u===s?(S=T(new Date),S.setMonth(S.getMonth()-l)):u===n?(S=T(new Date),S.setFullYear(S.getFullYear()-l)):u==="week"?(S=T(new Date),S.setDate(S.getDate()-l*7)):u==="day"&&l=="1"-0&&y.isMarketDay()?(k=S.getHours(),D=S.getMinutes(),v=S.getSeconds(),x=S.getMilliseconds(),d=y.newIterator(C),S=d.previous(),S.setHours(k,D,v,x),S=y._convertFromMarketTZ(S)):u===i?(C.begin=_(S,!0),d=y.newIterator(C),(y.isOpen()||y.getPreviousOpen().getDate()==S.getDate())&&d.next(),S=d.previous(),_(S),m.goIntoFuture=!0,m.dtRight=new Date(+S),m.dtRight.setDate(S.getDate()+1),m.dtRight=y._convertFromMarketTZ(m.dtRight),w||(S.setHours(d.market.zopen_hour),S.setMinutes(d.market.zopen_minute),S.setSeconds(0)),S=y._convertFromMarketTZ(S)):(u=="day"&&(C.begin=_(S,!0)),d=y.newIterator(C),l==1&&l++,X.B42(8),S=d.previous(X.o_T(l,1)),u=="day"&&(S=y._convertFromMarketTZ(_(S)))),m.dtLeft=S,m.maintainPeriodicity&&(m.periodicity={},m.periodicity.interval=this.layout.interval,m.periodicity.period=this.layout.periodicity),p.spanLock=!1,m.dontSaveRangeToLayout=!0,A=this,this.setRange(m,function(L){A.layout.setSpan=a,A.changeOccurred("layout"),u=="today"&&(p.spanLock=!0),r&&r(L)});function _(L,M){X.Q1Y();var F;return w&&(F=7,M?L.setHours(L.getHours()+F):(L.setHours(L.getHours()-F),y.isMarketDate(L)||L.setDate(L.getDate()-2))),L}},t.ChartEngine.prototype.getSpanCandleWidth=function(a){var r=X,i,n,s,h,o,l,u;if(i="Y",i+="T",i+="D",!(!a||!a.base||!a.multiplier)){n=parseFloat(a.multiplier),s=a.base,h=new Date,o=new Date,s=="year"?o.setFullYear(o.getFullYear()-n):s=="month"?o.setMonth(o.getMonth()-n):s=="day"?o.setDate(o.getDate()-n):s=="week"?o.setDate(o.getDate()-7*n):s==i&&(o.setMonth(0),o.setDate(1)),r.q08(59);var c=r.o_T(12,71108,8e3,9);r.B42(13);var p=r.C2Z(30,40,10);r.q08(14);var y=r.o_T(4,48,8);r.B42(113);var d=r.o_T(1,23,12,12,1);return l=(h.getTime()-o.getTime())/c/p/y/d,r.q08(114),l=r.C2Z("7",0,"5",l,1),u=this.chart.width/l,u}},t.ChartEngine.prototype.displayAll=function(a,r){X.Q1Y();var i,n,s;function h(){var c;!o.masterData||!o.masterData.length||(c=t.clone(a),c.dtLeft=o.endPoints.begin,c.dtRight=o.endPoints.end,c.periodicity={},c.periodicity.interval=l.interval,c.periodicity.period=l.periodicity,c.periodicity.timeUnit=l.timeUnit,i.setRange(c,function(p){i.layout.setSpan={base:a.base,multiplier:a.multiplier},i.changeOccurred("layout");for(var y in i.panels)i.calculateYAxisMargins(i.panels[y].yAxis);i.draw(),r&&r(p)}))}var{chart:o,layout:l}=this;if(a&&a.chart&&(o=a.chart),i=this,!this.quoteDriver){h();return}n=a.maintainPeriodicity?{period:l.periodicity,interval:l.interval,timeUnit:l.timeUnit}:{period:"1"-0,interval:"month",timeUnit:null};function u(c){X.f9T(),c||i.quoteDriver.loadAll(o,h)}n=a.periodicity?a.periodicity:n,n=t.cleanPeriodicity(n.period,n.interval,n.timeUnit),s=this.needDifferentData(n),this.layout.periodicity=n.period,this.layout.interval=n.interval,this.layout.timeUnit=n.timeUnit,a.forceLoad||s?(this.clearCurrentMarketData(this.chart),this.quoteDriver.newChart({nodraw:!0,symbol:this.chart.symbol,symbolObject:this.chart.symbolObject,chart:this.chart,initializeChart:!0,fetchMaximumBars:!0},u)):o.moreAvailable||!o.upToDate?u():(this.createDataSet(),h())}};Zs=W=>{var e=X,t;t=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Q1Y(),t.ChartEngine.prototype.importLayout=function(a,r){var i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N;if(i="li",i+="ne",!a){r.cb&&r.cb();return}n=this,s=[],typeof r!="object"&&(r={managePeriodicity:arguments[1],preserveTicksAndCandleWidth:arguments["2"<<0]}),h=this.layout,o=t.shallowClone(h),l=r.managePeriodicity,u=r.cb,c=r.seriesCB,p=r.noDataLoad,y=r.preserveTicksAndCandleWidth,d=null,this.exportDrawings&&(d=this.exportDrawings(),this.abortDrawings()),this.currentlyImporting=!0;for(var R in h.studies)g="Studi",g+="es.removeStudy",b=h.studies[R],t.getFn(g)(this,b);this.overlays={},f=t.shallowClone(this.panels),this.panels={},m=t.clone(a),h.periodicity=o.periodicity,h.interval=o.interval,h.timeUnit=o.timeUnit,h.setSpan=o.setSpan,h.range=o.range,y?h.candleWidth=o.candleWidth:h.candleWidth||(h.candleWidth=8),this.setCandleWidth(h.candleWidth),h.flipped&&this.flipChart(h.flipped),C=m.panels;function q(){n.calculateYAxisPositions(),Q(n.panels),c&&c()}D=function(Z,ee){return Z.index<ee.index?-1:"1"-0};for(S in C)"index"in C[S]||(D=null),w=C[S],w.name=S,s.push(w);if(h.panels={},v=null,s.length>0){D&&s.sort(D);for(var Y=0;Y<s.length;++Y)w=s[Y],k=w.yAxis?new t.ChartEngine.YAxis(w.yAxis):null,this.stackPanel(w.display,w.name,w.percent,w.chartName,k),w.soloing&&(v=this.panels[w.name])}t.isEmpty(C)&&this.stackPanel("chart","chart",1,"chart"),this.resizeCanvas();function z(Z){var ee,$,ie,te,re;ee="la",ee+="yout",d&&n.importDrawings(d),n.currentlyImporting=!1;function H(){n.createDataSet(),Q(n.panels),n.calculateYAxisPositions(),n.draw()}if(!Z){te=[];for(var U in n.chart.series){if(re="stu",re+="dy",!n.removeSeries)break;ie=n.chart.series[U],ie.parameters.bucket==re&&($=!0,n.removeSeries(ie),te.push(ie))}for(var G=0;G<te.length;G++)ie=te[G],n.addSeries(ie.id,ie.parameters,H);e.f9T(),$||n.draw(),n.updateListeners(ee),n.changeOccurred("layout")}}e.f9T();for(var V in f)if(x=f[V],A=this.panels[V],A){this.container.removeChild(A.holder),x.handle&&this.container.removeChild(x.handle),T={holder:!0,subholder:!0,display:!0,icons:!0};for(var K in T)A[K]=x[K];this.configurePanelControls(A),x.chart.panel==x&&(x.chart.panel=A)}else this.privateDeletePanel(x);this.chart.panel=this.panels.chart,Q(this.panels),t.extend(h,t.clone(m)),_=t.clone(h.studies);function Q(Z){for(var ee,$,ie=0;ie<s.length;ie++)ee="y",ee+="axisRHS",$=s[ie],re($,"yaxisLHS"),re($,ee);e.f9T(),n.chart.yAxis=n.chart.panel.yAxis;function te(H){return!!H}function re(H,U){e.f9T();var G,ae,ne,oe;if(!(!H[U]||!H[U].length)&&(G=Z[H.name],!!G)){ae=G[U],ne=new Array(ae.length);for(var le="0"^0;le<ae.length;le++)oe=H[U].indexOf(ae[le].name),oe>-1?ne[oe]=ae[le]:ne.push(ae[le]);ne.length&&(G[U]=ne.filter(te))}}}delete h.studies;for(var j in _)L=_[j],M=t.getFn("Studies.addStudy")(this,L.type,L.inputs,L.outputs,L.parameters,L.panel),L.signalData&&(M.signalData=L.signalData,F=this.panels[M.panel],this.checkForEmptyPanel(F,!0,M)&&(F.hidden=!0,F.percent=0));if(this.extendedHours&&this.extendedHours.prepare(h.extended,h.marketSessions),typeof h.chartType>"u"&&(h.chartType=i),this.setMainSeriesRenderer(),v&&this.panelSolo(v),this.adjustPanelPositions(),Q(this.panels),this.storePanels(),!p){if(m.symbols&&m.symbols.length){P={chart:this.chart},!y&&l&&m.range&&Object.keys(m.range).length?P.range=m.range:!y&&l&&m.setSpan&&Object.keys(m.setSpan).length?P.span=m.setSpan:l&&m.interval?P.periodicity={interval:m.interval,period:m.periodicity,timeUnit:m.timeUnit}:P.periodicity={interval:o.interval,period:o.periodicity,timeUnit:o.timeUnit},E=m.symbols[0].symbolObject||m.symbols[0].symbol,this.loadChart(E,P,function(Z){var ee;if(!Z){for(var $,ie=1;ie<m.symbols.length&&n.addSeries;++ie)$=m.symbols[ie],$.parameters||($.parameters={}),ee=t.clone($.parameters),this.panels[ee.panel]?n.addSeries($.id,ee,q):console.warn('Warning: Series "'+$.id+'" could not be imported due to a missing corresponding panel "'+ee.panel+'"');m.chartScale&&n.setChartScale(m.chartScale)}e.f9T(),z(Z),u&&u.apply(null,arguments)});return}if(l){if(!y&&this.setRange){if(O=m.range,O&&Object.keys(O).length&&this.chart.symbol){this.setRange(O,function(){z(),e.f9T(),u&&u()});return}else if(m.setSpan&&Object.keys(m.setSpan).length&&this.chart.symbol){this.setSpan(m.setSpan,function(){z(),u&&u()});return}}I=m.interval,B=m.periodicity,N=m.timeUnit,isNaN(B)&&(B=1),I||(I="day"),this.setPeriodicity({period:B,interval:I,timeUnit:N},function(){z(),u&&u()});return}}l&&(h.periodicity=m.periodicity,h.interval=m.interval,h.timeUnit=m.timeUnit,h.setSpan=m.setSpan),this.createDataSet(),y||this.home(),z(),u&&u()},t.ChartEngine.prototype.exportLayout=function(a){var r,i,n,s,h,o,l,u,c,p,y;e.f9T(),r={};function d(C){e.Q1Y();var S;S=[];for(var w=0;w<C.length;w++)S.push(C[w].name);return S}for(var g in this.layout)i="dr",i+="a",i+="w",i+="ing",n="s",n+="tu",n+="di",n+="es",g!=n&&g!="panels"&&g!=i?r[g]=t.clone(this.layout[g]):g=="studies"?r.studies={}:g=="panels"&&(r.panels={});s=0;for(var b in this.panels)h=this.panels[b],h.exportable!==!1&&(o=r.panels[b]={},o.percent=h.percent,o.display=h.display,o.chartName=h.chart.name,o.soloing=h.soloing,o.index=s++,o.yAxis={name:h.yAxis.name,position:h.yAxis.position},h.yaxisLHS&&(o.yaxisLHS=d(h.yaxisLHS)),h.yaxisRHS&&(o.yaxisRHS=d(h.yaxisRHS)));for(var f in this.layout.studies)l=r.studies[f]={},u=this.layout.studies[f],l.type=u.type,l.inputs=t.clone(u.inputs),l.outputs=t.clone(u.outputs),l.panel=u.panel,l.parameters=t.clone(u.parameters),u.signalData&&(u.signalData.cloneForExport?l.signalData=u.signalData.cloneForExport():l.signalData=t.clone(u.signalData));if(a){c=1502633389,p=1606300318,y=2;for(var m=1;e.Y5b(m.toString(),m.toString().length,40132)!==c;m++)r.symbols=this.getSymbols({"include-parameters":!1,"exclude-studies":!1,"exclude-generated":!1}),(r.symbols.length||r.symbols["5">>32].symbolObject||r.symbols[9].symbolObject.static)&&+r.symbols[6].symbolObject.static,y+=2;e.Y5b(y.toString(),y.toString().length,86258)!==p&&(r.symbols=this.getSymbols({"include-parameters":!0,"exclude-studies":!0,"exclude-generated":!0}),r.symbols.length&&r.symbols[0].symbolObject&&r.symbols[0].symbolObject.static&&delete r.symbols["0"<<32].symbolObject.static)}else delete r.symbols;return r},t.ChartEngine.prototype.importPreferences=function(a){var r;r="p",e.f9T(),r+="re",r+="ferences",t.extend(this.preferences,a),a.timeZone&&this.setTimeZone(this.dataZone,a.timeZone),a.language&&t.I18N&&t.I18N.localize(this,a.language),this.changeOccurred(r)},t.ChartEngine.prototype.exportPreferences=function(){return e.Q1Y(),this.preferences}};Xs=W=>{var e=X,t,a,r,i,n,s,h,o,l,u,c,p,y,d,g,b;t="#",t+="e90",t+="88",t+="c",a="#",a+="b8",a+="2c",a+="0c",r="0 ",r+="to max",i="f",i+="ie",i+="l",i+="d",n="Standard Dev",n+="iati",n+="on",s="#F",s+="F",s+="000",s+="0",h="m",h+="a",o="Movin",o+="g Averag",o+="e",l="Expone",l+="ntial",u="we",u+="i",u+="gh",u+="ted",c="exponen",c+="tia",c+="l",p="s",p+="im",p+="pl",p+="e",y="t",y+="m",y+="a",d="un",d+="d",d+="efined",g=typeof _CIQ<"u"?_CIQ:W.CIQ,b=typeof _timezoneJS!==d?_timezoneJS:W.timezoneJS,g.ChartEngine&&(g.ChartEngine.prototype.rightClickOverlay=function(f,m){e.f9T();var C;this.runPrepend("rightClickOverlay",arguments)||(C=this.overlays[f],C.editFunction?C.editFunction(m):this.removeOverlay(f),this.runAppend("rightClickOverlay",arguments))},g.ChartEngine.prototype.addOverlay=function(f){var m;m="addOve",m+="r",m+="l",m+="ay",!this.runPrepend("addOverlay",arguments)&&(this.overlays[f.name]=f,this.runAppend(m,arguments))},g.ChartEngine.prototype.removeOverlay=function(f){var m,C,S,w;if(!this.runPrepend("removeOverlay",arguments)){if(e.Q1Y(),m=this.overlays[f],m){for(var k in this.overlays){C="F",C+="i",C+="e",C+="ld",S=this.overlays[k],w=[C],g.Studies&&(w=g.Studies.getFieldInputs(S));for(var D="0"-0;D<w.length;D++)m.outputMap[S.inputs[w[D]]]&&this.removeOverlay(S.name)}this.cleanupRemovedStudy(m),this.panels[m.panel],delete this.overlays[f],this.checkForEmptyPanel(m.panel)}this.currentlyImporting||(this.displaySticky(),this.createDataSet(),this.changeOccurred("layout")),this.resetDynamicYAxis(),this.runAppend("removeOverlay",arguments)}},g.ChartEngine.prototype.cleanupRemovedStudy=function(f){var m,C,S;if(f){f.study.removeFN&&f.study.removeFN(this,f);for(var w in this.plugins)w.indexOf("{"+f.id+"}")>-1&&delete this.plugins[w];f.removeSignals&&f.removeSignals(),this.layout.studies&&delete this.layout.studies[f.name],m=-1111013068,C=-600820563,S=2;for(var k=1;e.X30(k.toString(),k.toString().length,65771)!==m;k++){e.B42(44),this.chart.state.studies.sorted=e.C2Z(0,"1"),+this.overlays[f.name];var{sd:D}=this.repositioningAnchorSelector&&{};S+=2}if(e.Y5b(S.toString(),S.toString().length,3798)!==C){this.chart.state.studies.sorted=null,delete this.overlays[f.name];var{sd:D}=this.repositioningAnchorSelector||{}}if(D&&D===f){this.repositioningAnchorSelector=null;var{anchorHandles:v}=this.controls;v&&v[f.uniqueId]&&(v[f.uniqueId].highlighted=!1,g.Studies.displayAnchorHandleAndLine(this,f,this.chart.dataSegment))}g.Studies&&g.Studies.removeStudySymbols(f,this),e.f9T(),this.quoteDriver&&this.quoteDriver.updateSubscriptions()}}),g.Studies=g.Studies||function(){},g.Studies.DEFAULT_INPUTS={Period:14},g.Studies.DEFAULT_OUTPUTS={Result:"auto"},g.Studies.impliedVolatilityAvailable=!1,g.Studies.sortForProcessing=f=>{var m,C;m=[],C=f.layout.studies;function S(w,k){w.forEach(D=>{var v;k.indexOf(D)==-1&&(v=D.getDependents(f),v.length&&S(v,k),k.unshift(D))})}return C&&S(Object.values(C),m),m},g.Studies.StudyDescriptor=function(f,m,C,S,w,k){var D,v,x,A;D="C",D+="l",D+="os",D+="e",this.name=f,this.type=m,this.panel=C,this.inputs=S,this.outputs=w,this.parameters=k,this.outputMap={},this.min=null,this.max=null,e.q08(8),this.startFrom=e.C2Z("0",0),this.subField=D,v=g.Studies.studyLibrary[m],v||(x="c",x+="ha",x+="rt",A="c",A+="ha",A+="r",A+="t",v={},(C==A||!C&&k&&k.chartName==x)&&(this.overlay=!0)),typeof v.inputs>"u"&&(v.inputs=g.clone(g.Studies.DEFAULT_INPUTS)),typeof v.outputs>"u"&&(v.outputs=g.clone(g.Studies.DEFAULT_OUTPUTS)),this.study=v,this.libraryEntry=v},g.Studies.StudyDescriptor.prototype.getYAxis=function(f){e.Q1Y();var m,C,S;return m=this.yAxis,this.parameters&&(C=this.parameters.yaxisDisplayValue),m||(S=f.panels[this.panel],S&&(m=f.getYAxisByName(S,C)||f.getYAxisByName(S,this.name)||S.yAxis)),m||(m=f.getYAxisByName(f.chart.panel,C)||f.chart.panel.yAxis),m},g.Studies.StudyDescriptor.prototype.getContext=function(f){return e.f9T(),f.chart.context},g.Studies.StudyDescriptor.prototype.getDependents=function(f,m){var C,S,w;C=[],e.f9T();for(var k in f.layout.studies)if(S=f.layout.studies[k],S!=this){w=g.Studies.getFieldInputs(S);for(var D="0"*1;D<w.length;D++)if(S.inputs[w[D]].includes(this.name)){if(m&&S.parameters&&S.parameters.panelName)continue;C.push(S),C=C.concat(S.getDependents(f,m));break}}return C},g.Studies.StudyDescriptor.prototype.undraggable=function(f){var m,C,S,w;if(this.signalData)return!0;m=1791111324,e.f9T(),C=-1132816357,S=2;for(var k=1;e.X30(k.toString(),k.toString().length,"49168"-0)!==m;k++)w=this.study.attributes,S+=2;return e.Y5b(S.toString(),S.toString().length,32493)!==C&&(w=this.study.attributes),w=this.study.attributes,!!(w&&(w.panelName&&w.panelName.hidden||w.yaxisDisplayValue&&w.yaxisDisplayValue.hidden))},e.Q1Y(),g.Studies.StudyDescriptor.prototype.appendFutureTicks=function(f,m){var C,S,w,k;if(C=f.chart.scrubbed,!!C.length){for(S=f.standardMarketIterator(C[C.length-1].DT),w=m.length-1;w>=0;w--){k=m[w];for(var D in k)if(k[D]||k[D]===0){w=-1;break}if(w==-1)break;m.pop()}for(w=0;w<m.length;w++)k=m[w],k.DT||(k.DT=S.next()),k.displayDate||f.setDisplayDate(k),k.futureTick=!0,C.push(k)}},g.Studies.generateID=function(f,m,C,S,w){var k,D,v,x,A,T,_;if(k=g.Studies.studyLibrary[m],e.B42(14),D=e.o_T("","",w||m),v=D,k&&k.customRemoval)return v;if(!g.isEmpty(C)){x=!0;for(var L in C)A="dis",A+="pla",A+="y",!["id",A,"Shading","Anchor Selector"].includes(L)&&(T=C[L],T!="field"&&(T=T.toString(),g.Studies.prettify[T]!==void 0&&(T=g.Studies.prettify[T]),x?(x=!1,v+=" ("):T&&(v+=","),v+=T));x||(v+=")")}if(S&&S.indexOf(v)===0)return S;if(f.layout.studies&&f.layout.studies[v]){for(var M=2;M<50;M++)if(e.q08(14),_=e.C2Z(v,M,"-"),!f.layout.studies[_]){v=_;break}}return v},g.Studies.DialogHelper=function(f){var m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q,j,Z,ee,$,ie,te,re,H,U,G,ae,ne,oe,le,he,ue,ce,de,Ce,pe;m=this.stx=f.stx,C=this.sd=f.sd,this.name=C?C.type:f.name,this.signal=1,this.inputs=[],this.outputs=[],this.parameters=[],S=this.libraryEntry=C?C.study:g.Studies.studyLibrary[f.name];function xe(ge){var Se,De,Re;Se={},De=ge.defaults,Re={name:ge.name,heading:m.translateIf(ge.label),defaultValue:De[0],value:ge.value,options:Se,type:"select"};for(var Qe=0;Qe<De.length;Qe++)Se[De[Qe]]=m.translateIf(De[Qe]);return ge.color!==void 0&&(Re.defaultColor=m.defaultColor,Re.color=ge.color),Re}typeof S.inputs>"u"&&(S.inputs=g.clone(g.Studies.DEFAULT_INPUTS)),typeof S.outputs>"u"&&(S.outputs=g.clone(g.Studies.DEFAULT_OUTPUTS)),w=C&&m.panels[C.panel]?m.panels[C.panel]:m.chart.panel,k=w.chart,this.title=m.translateIf(S.name);function Te(ge){var Se,De;function Re(Lt,Mt){return e.Q1Y(),"Panel "+Mt.toString()}if(Se="a",Se+="l",Se+="i",Se+="as",ae==Se){De=1;for(var Qe in m.panels){if(Qe==ge)return Re(Qe,De);De++}}return ge}this.attributes=g.clone(S.attributes),this.attributes||(this.attributes={});for(var be in this.attributes){D=this.attributes[be];for(var _e in D)typeof D[_e]=="function"&&(D[_e]=D[_e].call(C))}v=[],x=m.layout.studies;function Be(ge){var Se,De;return Se="ch",Se+="e",Se+="ck",Se+="box",De={name:ge.name,heading:m.translateIf(ge.label),defaultValue:ge.defaults,value:ge.value,type:Se},De}A=[],C&&(A=Array.prototype.concat(C,C.getDependents(m)));for(var Pe in x)if(!x[Pe].signalData&&!(A.indexOf(x[Pe])>-1))for(var Ie in x[Pe].outputMap)v.push(Ie);for(var Le in S.inputs)if(T={},this.inputs.push(T),T.name=Le,T.heading=m.translateIf(Le),_=S.inputs[Le],C&&C.inputs&&typeof C.inputs[Le]<"u"&&C.inputs[Le]!==null?T.value=C.inputs[Le]:T.value=S.inputs[Le],T.defaultInput=S.inputs[Le],this.attributes[Le]||(this.attributes[Le]=g.Studies.inputAttributeDefaultGenerator(T.defaultInput)),_.constructor==Number)T.type="number";else if(_.constructor==String)if(L=g.Studies.movingAverageHelper(m,T.defaultInput),L)M="op",M+="t",M+="ions",T.type="select",T.defaultInput=L,F=g.Studies.movingAverageHelper(m,T.value),F||(F=T.value),T.value=F,T.options=g.Studies.movingAverageHelper(m,M);else if(_=="field"){P="fie",P+="ld",E="hl/",E+="2",O="Ad",O+="j_Close",I="Cl",I+="os",I+="e",B="O",B+="p",B+="en",T.type="select",T.options={},N=[B,"High","Low",I,O,E,"hlc/3","hlcc/4","ohlc/4",k.defaultPlotField].concat(v);for(var Fe="0"<<32;Fe<N.length;Fe++)R=N[Fe],T.options[R]=m.translateIf(R);T.value=="field"&&(T.value="Close"),T.defaultInput==P&&(T.defaultInput="Close")}else q="d",q+="a",q+="t",q+="e",Y="yyyy-mm-d",Y+="d",z="t",z+="ex",z+="t",T.type=z,this.attributes[Le].placeholder==Y?T.type=q:this.attributes[Le].placeholder=="hh:mm:ss"&&(T.type="time");else if(_.constructor==Boolean)V="o",V+="n",K="checkb",K+="ox",T.type=K,(T.value===!0||T.value=="true"||T.value==V)&&(T.value=!0);else if(_.constructor==Array){T.type="select",T.options={};for(var Ue=0;Ue<_.length;Ue++)T.options[_[Ue]]=m.translateIf(_[Ue]);T.value.constructor==Array&&(e.B42(8),T.value=T.value[e.C2Z("0",0)]),this.attributes[Le].defaultSelected?T.defaultInput=this.attributes[Le].defaultSelected:T.defaultInput=_[0]}this.dateTimeInputs=[];for(var at=0;at<this.inputs.length;at++)if(Q="dat",Q+="e",j=this.inputs[at],j.type==Q){Z=j.name.substring(0,j.name.indexOf(" Date"));for(var He=0;He<this.inputs.length;He++)if(ee=this.inputs[He],ee.type=="time"&&($=" Ti",$+="m",$+="e",ee.name==Z+$)){this.dateTimeInputs.push(Z);break}}this.adjustInputTimesForDisplayZone();for(Le in S.outputs)ie={name:Le,heading:m.translateIf(Le)},ie.color=ie.defaultOutput=S.outputs[Le],C&&C.outputs&&C.outputs[Le]&&(ie.color=C.outputs[Le]),ie.color=="auto"&&(ie.color=m.defaultColor),this.outputs.push(ie);te=C?C.parameters:null,S.parameters&&(re=S.parameters.init,re&&(re.studyOverZonesEnabled!==void 0&&(H={name:"studyOverZones",heading:m.translateIf("Show Zones"),defaultValue:re.studyOverZonesEnabled,value:re.studyOverZonesEnabled},te&&(te.studyOverZonesEnabled||te.studyOverZonesEnabled===!1)&&(H.value=te.studyOverZonesEnabled),H.type="checkbox",this.parameters.push(H)),re.studyOverBoughtValue!==void 0&&(U="te",U+="x",U+="t",H={name:"studyOverBought",heading:m.translateIf("OverBought"),defaultValue:re.studyOverBoughtValue,value:re.studyOverBoughtValue,defaultColor:re.studyOverBoughtColor,color:re.studyOverBoughtColor},te&&te.studyOverBoughtValue&&(H.value=te.studyOverBoughtValue),te&&te.studyOverBoughtColor&&(H.color=te.studyOverBoughtColor),H.color=="auto"&&(H.color=m.defaultColor),H.type=U,this.parameters.push(H)),re.studyOverSoldValue!==void 0&&(G="au",G+="t",G+="o",H={name:"studyOverSold",heading:m.translateIf("OverSold"),defaultValue:re.studyOverSoldValue,value:re.studyOverSoldValue,defaultColor:re.studyOverSoldColor,color:re.studyOverSoldColor},te&&te.studyOverSoldValue&&(H.value=te.studyOverSoldValue),te&&te.studyOverSoldColor&&(H.color=te.studyOverSoldColor),H.color==G&&(H.color=m.defaultColor),H.type="text",this.parameters.push(H)),this.attributes.studyOverBoughtValue||(this.attributes.studyOverBoughtValue={}),this.attributes.studyOverSoldValue||(this.attributes.studyOverSoldValue={}))),ae=this.panelSelect=f.panelSelect,ne=this.axisSelect=f.axisSelect;function Me(ge,Se){var De;De=this,De.attributes[ge]||(De.attributes[ge]={}),Se&&(De.attributes[ge].hidden=!0)}f.addWhenDone&&(ne=ae=!1),(ne||ae)&&(oe="yax",oe+="isD",oe+="isplayValue",le="flippe",le+="dE",le+="nabled",C||(C=g.Studies.addStudy(m,f.name,null,null,{calculateOnly:!0}),g.Studies.removeStudy(m,C)),ae&&(he="Sho",he+="w as Underlay",ue="pa",ue+="n",ue+="el",ue+="Name",this.parameters.push(xe({label:"Panel",name:ue,defaults:function(){e.f9T();var ge,Se;ge="Aut",ge+="o",Se=[],Se.push(ge);for(var De in m.panels)(De!=C.panel||!te||!te.panelName)&&(m.panels[De].noDrag||Se.push(Te(De)));return m.checkForEmptyPanel(C.panel,!0,C)||Se.push("New panel"),Se}(),value:te&&te.panelName?Te(te.panelName):"Auto"}),Be({label:he,name:"underlay",defaults:!1,value:C.underlay||C.parameters&&C.parameters.underlayEnabled}))),ce=m.getYAxisByName(w,C.name),ne&&(de="f",de+="l",de+="ipped",Ce="d",Ce+="efault",pe="sh",pe+="ar",pe+="ed",this.parameters.push(xe({label:"Y-Axis",name:"yaxisDisplay",defaults:function(){var ge,Se,De,Re;ge="n",ge+="on",ge+="e",Se="r",Se+="i",Se+="g",Se+="ht",De=w.yaxisLHS.concat(w.yaxisRHS),Re=[],Re.push("default",Se,"left",ge,"shared");for(var Qe=0;Qe<De.length;Qe++)De[Qe]!=ce&&Re.push(De[Qe].name);return Re}(),value:te&&te.yaxisDisplayValue||ce&&ce.position||(ce?Ce:pe),color:ce&&ce.textStyle?ce.textStyle:"auto"}),Be({label:"Invert Y-Axis",name:de,defaults:!1,value:te&&te.flippedEnabled!==void 0?te.flippedEnabled:ce?ce.flipped:!1}))),Me.call(this,le,!ce&&C.panel!=C.name),Me.call(this,"underlayEnabled",S.underlay),Me.call(this,"panelName",S.seriesFN===null),Me.call(this,oe,S.seriesFN===null||S.yAxis&&S.yAxis.noDraw))},g.Studies.DialogHelper.prototype.updateStudy=function(f){var m,C,S,w;function k(v){var x,A,T;x="a",x+="l",x+="ia";function _(M){var F;return e.f9T(),F=M.match(/.* (\d)/),F&&F[1]}if(x+="s",A=this,A.panelSelect==x&&(T=_(v),T)){for(var L in A.stx.panels)if(!--T)return L}return v}m={},C=this.sd,S=this.libraryEntry,S||(S={}),C||(C=S),m.inputs=g.clone(C.inputs),m.outputs=g.clone(C.outputs),m.parameters=g.clone(C.parameters),this.adjustInputTimesForDisplayZone(f),f.parameters&&f.parameters.panelName&&(f.parameters.panelName=k.call(this,f.parameters.panelName)),g.extend(m,f),m.parameters||(m.parameters={}),m.inputs&&m.inputs.id?C=g.Studies.replaceStudy(this.stx,m.inputs.id,this.name,m.inputs,m.outputs,m.parameters,null,C.study):C=g.Studies.addStudy(this.stx,this.name,m.inputs,m.outputs,m.parameters,null,C.study),e.f9T(),w=new g.Studies.DialogHelper({stx:this.stx,sd:C,axisSelect:this.axisSelect,panelSelect:this.panelSelect});for(var D in w)D!="signal"&&(this[D]=w[D]);this.signal*=-1},g.Studies.DialogHelper.prototype.adjustInputTimesForDisplayZone=function(f){var m,C,S,w,k,D,v,x,A,T,_;if(this.stx.displayZone)for(var L=0;L<this.dateTimeInputs.length;L++){for(m=this.dateTimeInputs[L],D="",f&&f.inputs&&(v=" Ti",v+="me",e.q08(0),S=f.inputs[e.o_T(" Date",m)],e.q08(0),w=f.inputs[e.C2Z(v,m)],S&&(D=S),w&&(D+=w)),C=0;C<this.inputs.length;C++)x=" ",x+="Da",x+="te",k=this.inputs[C],!S&&S!==""&&k.name==m+x?D=k.value+D:!w&&w!==""&&k.name==m+" Time"&&(D+=k.value);if(D=D.replace(/\D/g,""),D.length<12)return;if(A=g.strToDateTime(D),!isNaN(A.valueOf()))if(f)f.inputs||(f.inputs={}),T=g.convertTimeZone(A,this.stx.displayZone),e.B42(0),f.inputs[e.o_T(" Date",m)]=g.yyyymmdd(T),e.B42(0),f.inputs[e.C2Z(" Time",m)]=g.hhmmss(T);else for(T=g.convertTimeZone(A,null,this.stx.displayZone),C=0;C<this.inputs.length;C++)_=" ",_+="T",_+="ime",k=this.inputs[C],k.name==m+" Date"&&(k.value=g.yyyymmdd(T)),k.name==m+_&&(k.value=g.hhmmss(T))}},g.Studies.prepareStudy=function(f,m,C){if(e.Q1Y(),typeof m.calculateFN>"u"&&(m.useRawValues=!0),g.isEmpty(C.outputMap))for(var S in C.outputs)m.useRawValues?C.outputMap[S]=S:C.outputMap[S+" "+C.name]=S},g.Studies.rejiggerDerivedStudies=function(f,m,C){var S,w,k,D,v,x,A;S=m.name,m.panel,w=m.getDependents(f);for(var T=0;T<w.length;T++)if(k=w[T],D=g.clone(k.inputs),v=D.id,!!v){x=g.Studies.getFieldInputs(k);for(var _=0;_<x.length;_++)D[x[_]]=D[x[_]].replace(S,C);A=g.Studies.replaceStudy(f,v,k.type,D,k.outputs,g.extend(k.parameters,{rejiggering:!0}),null,k.study),delete A.parameters.rejiggering}},g.Studies.removeStudySymbols=function(f,m){if(f.series)for(var C in f.series)m.deleteSeries(f.series[C],null,{action:"remove-study"})},g.Studies.replaceStudy=function(f,m,C,S,w,k,D,v){var x,A,T,_;k||(k={}),m&&(k.replaceID=m),m=k.replaceID,x=f.layout.studies[m],g.Studies.removeStudySymbols(x,f),x.attribution&&f.removeFromHolder(x.attribution.marker),f.quoteDriver&&f.quoteDriver.updateSubscriptions(),S&&(S.id==S.display&&delete S.display,delete S.id),A=g.Studies.addStudy(f,C,S,w,k,D,v),e.f9T(),A.highlight=x.highlight,A.uniqueId=x.uniqueId,x.signalData&&(A.signalData=x.signalData,A.signalData.updateConditions&&A.signalData.updateConditions(m,A.inputs.id)),_={};for(T in f.layout.studies)T==m?_[A.name]=A:_[T]=f.layout.studies[T];f.layout.studies=_,_={};for(T in f.overlays)T==m?(A.overlay||A.underlay)&&(_[A.name]=A):_[T]=f.overlays[T];return f.overlays=_,!f.overlays[A.name]&&(A.overlay||A.underlay)&&f.addOverlay(A),f.checkForEmptyPanel(x.panel),k.rejiggering||(f.initializeDisplay(f.chart),g.Studies.rejiggerDerivedStudies(f,x,A.inputs.id,A.panel)),g.transferObject(x,A),f.layout.studies[A.name]=x,f.overlays[A.name]=x,f.chart.state.studies.sorted=null,k.rejiggering||(f.changeOccurred("layout"),!x.currentlyImporting&&!k.calculateOnly&&x.chart.dataSet&&f.createDataSet(null,x.chart),f.draw()),x},g.Studies.addStudy=function(f,m,C,S,w,k,D){var v,x,A,T,_,L,M,F,P,E,O,I,B,N,R;if(v="l",v+="a",e.f9T(),v+="yo",v+="ut",x=D||g.Studies.studyLibrary[m],w||(w={}),x){if(x.inputs){A=g.clone(x.inputs);for(var q in A)A[q]instanceof Array&&(x.attributes&&x.attributes[q]&&x.attributes[q].defaultSelected?A[q]=x.attributes[q].defaultSelected:A[q]=A[q][0]);C=g.extend(A,C)}x.outputs&&(S=g.extend(g.clone(x.outputs),S)),T=x.parameters,T&&T.init&&(w=g.extend(g.clone(T.init),w)),T&&!w.display&&(w.display=T.display)}if(C||(C=g.clone(g.Studies.DEFAULT_INPUTS)),S||(S=g.clone(g.Studies.DEFAULT_OUTPUTS)),w.chartName||(w.chartName="chart"),(w.panelName=="Auto"||w.panelName=="Default panel")&&(w.panelName=""),C.Period<1&&(C.Period=1),_=null,f.layout.studies||(f.layout.studies={}),x&&x.initializeFN?_=x.initializeFN(f,m,C,S,w,k,D):_=g.Studies.initializeFN(f,m,C,S,w,k,D),_){if(_==="abort")return}else{e.B42(0),console.log(e.o_T(m,"CIQ.Studies.addStudy: initializeFN() returned null for "));return}if(D=_.study,_.chart=f.charts[w.chartName],_.type=m,_.permanent=D.permanent,_.customLegend=D.customLegend,_.uniqueId=g.uniqueID(),g.Studies.prepareStudy(f,D,_),L=f.chart.state.studies,L||(L=f.chart.state.studies={}),L.sorted=null,w.replaceID?(M=!0,delete w.replaceID):(f.layout.studies[_.inputs.id]=_,(_.overlay||_.underlay)&&f.addOverlay(_),!f.currentlyImporting&&!w.calculateOnly&&_.chart.dataSet&&f.createDataSet(null,_.chart)),f.quoteDriver&&f.quoteDriver.updateSubscriptions(),w.calculateOnly)return F="layo",F+="ut",f.changeOccurred(F),_;if(P=f.panels[_.panel],E=!1,O=!(_.overlay||_.underlay),O&&D.horizontalCrosshairFieldFN&&(P.horizontalCrosshairField=D.horizontalCrosshairFieldFN(f,_)),f.editCallback?E=!0:O?f.callbackListeners.studyPanelEdit&&f.callbackListeners.studyPanelEdit.length&&(E=!0):f.callbackListeners.studyOverlayEdit&&f.callbackListeners.studyOverlayEdit.length&&(E=!0),E){w.editMode=!0,I=!1;for(var Y in _.inputs)if(B="dis",B+="p",B+="la",B+="y",Y!="id"&&Y!=B){I=!0;break}if(!I)for(var z in _.outputs){I=!0;break}I&&(N="undef",N+="ined",typeof _.study.edit!=N?_.study.edit&&(R=function(V,K,Q,j){return e.Q1Y(),function(){g.clearCanvas(V.chart.tempCanvas,V),K.study.edit(K,{stx:V,inputs:Q,outputs:j,parameters:w})}}(f,_,C,S),f.setPanelEdit(P,R),_.editFunction=R):O?f.editCallback?(R=function(V,K,Q,j){return e.f9T(),function(){var Z;Z=V.editCallback(V,K),g.clearCanvas(V.chart.tempCanvas,V),g.Studies.studyDialog(V,m,Z,{inputs:Q,outputs:j,parameters:w})}}(f,_,C,S),P.name!="chart"&&f.setPanelEdit(P,R)):(R=function(V,K,Q,j,Z){return function(){g.clearCanvas(V.chart.tempCanvas,V),V.dispatch("studyPanelEdit",{stx:V,sd:K,inputs:Q,outputs:j,parameters:Z})}}(f,_,C,S,w),P.name!="chart"&&(f.setPanelEdit(P,R),_.editFunction=R)):(R=function(V,K,Q,j,Z){return e.Q1Y(),function(ee){var $;$="study",$+="Overlay",$+="E",$+="dit",g.clearCanvas(V.chart.tempCanvas,V),V.dispatch($,{stx:V,sd:K,inputs:Q,outputs:j,parameters:Z,forceEdit:ee})}}(f,_,C,S,w),_.editFunction=R))}return f.changeOccurred(v),M||f.draw(),_},g.Studies.removeStudy=function(f,m){var C,S,w,k;C=f.panels[m.panel],S=C&&C.yAxis.name,(m.overlay||m.underlay)&&f.removeOverlay(m.name),w=f.panels[m.panel],m.attribution&&f.removeFromHolder(m.attribution.marker),f.cleanupRemovedStudy(m),w&&!f.checkForEmptyPanel(w)&&(S==m.name&&f.electNewPanelOwner(w),k=f.getYAxisByName(m.panel,m.name),k&&(k.name=k.studies[1]||k.renderers[0])),f.draw(),f.resizeChart()},g.Studies.getPanelFromFieldName=function(f,m){var C,S,w,k,D;if(C=g.Studies.getFieldInputs(m),!C.length||(S=f.layout.studies,e.f9T(),!S))return null;w={};for(var v in S)for(var x in S[v].outputMap)w[x]=S[v].panel;for(var A=0;A<C.length;A++)if(k=m.inputs[C[A]],k&&(D=w[k],D))return D;return null},g.Studies.createLibraryHash=function(){return Object.keys(g.Studies.studyLibrary).join("|")},g.Studies.displayStudies=function(f,m,C){e.f9T();var S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I;if(C&&(m.studyLibraryHash=g.Studies.createLibraryHash()),S=f.layout.studies,!!S){w={},w[m.name]=!0;for(var B in S)if(k=S[B],D=k.study,!!D&&!(k.signalData&&!k.signalData.reveal)&&(v=k.underlay||k.parameters&&k.parameters.underlayEnabled,!(C&&!v||!C&&v))){if(x=g.clone(D.renderer),x&&!(x instanceof Array)&&(x=[x]),A=f.panels[k.panel],A){if(A.chart!=m||A.hidden)continue;w[A.name]||(T=k.permanent||!f.manageTouchAndMouse,A.closeX?(_="n",_+="o",_+="n",_+="e",T&&(A.closeX.style.display=_)):A.close&&(L="n",L+="o",L+="n",L+="e",T&&(A.close.style.display=L)),A.edit&&T&&(A.edit.style.display="none"),w[A.name]=T)}else{f.currentlyImporting&&delete S[B];continue}if(M=k.chart.dataSegment,k.panel==k.parameters.chartName&&(!k.parameters||!k.parameters.panelName)&&(F=g.Studies.getPanelFromFieldName(f,k),F&&k.panel!=F&&(k.panel=F)),typeof D.seriesFN>"u"){if(x){k.overlay||g.Studies.createYAxis(f,k,M,A);for(var N=0;N<x.length;N++){P=x[N];for(var R in k.outputMap)k.outputMap[R]==P.field&&(P.field=R);if(P.field){if(P.panel=k.panel,E=P.binding,E)for(var q in E)O=g.Studies.determineColor(k.outputs[E[q]]),O&&O!="auto"&&(P[q]=O);P.yAxis=null,I=g.Renderer.produce(P.type,P),I.stx=f,I.attachSeries(null,P).draw()}}}else g.Studies.displaySeriesAsLine(f,k,M);A&&g.Studies.displayError(f,k)}else D.seriesFN&&A&&(D.seriesFN(f,k,M),g.Studies.displayError(f,k))}}},g.Studies.displayError=function(f,m,C){var S,w,k;if(S="c",S+="en",S+="ter",!!m.error){if(w=C&&C.panel?C.panel:m.panel,k=m.error===!0?f.translateIf("Not enough data to compute ")+f.translateIf(m.study.name):f.translateIf(m.error),C&&(C.h!==S||C.v!=="bottom")){f.watermark(w,C);return}f.displayErrorAsWatermark(w,k)}},g.Studies.calculateMinMaxForDataPoint=function(f,m,C){var S,w,k,D;S=Number.MAX_VALUE,w=Number.MAX_VALUE*-1;for(var v=0;v<C.length;v++)k="unde",k+="f",k+="ine",k+="d",D=C[v][m],!(D===null||typeof D==k)&&(isNaN(D)||(S=Math.min(D,S),w=Math.max(D,w)));return e.f9T(),{min:S,max:w}},g.Studies.getYAxisParameters=function(f,m){var C,S,w,k;return C={},S=f.layout.studies&&f.layout.studies[m.name],S&&(w=S.study,w.yaxis||w.yAxisFN?C.noDraw=!0:(w.parameters&&w.parameters.excludeYAxis&&(C.noDraw=!0),C.ground=w.yAxis&&w.yAxis.ground,m&&(w.range!="bypass"&&(k="-1",k+=" to",k+=" ",k+="1",w.range=="0 to 100"?C.range=[0,100]:w.range==k?(e.B42(33),C.range=[-e.C2Z("1",64),1]):w.range=="0 to max"?(e.B42(34),C.range=[0,Math.max(e.o_T("0",0),m.high)]):(w.centerline||w.centerline===0)&&(C.range=[Math.min(w.centerline,m.low),Math.max(w.centerline,m.high)])),C.range&&(m.low=C.range[0],m.high=C.range[1]),S.min&&(m.min=S.min),S.max&&(m.max=S.max),S.parameters&&S.parameters.studyOverZonesEnabled&&(C.noDraw=!0)))),C},g.Studies.doPostDrawYAxis=function(f,m){e.f9T();var C,S,w,k,D;for(var v in f.layout.studies)C=f.layout.studies[v],S=f.panels[C.panel],!(!S||S.hidden)&&(w=C.getYAxis(f),w==m&&(k=C.study,m.name==C.name&&(k.yaxis&&k.yaxis(f,C),k.yAxisFN&&k.yAxisFN(f,C)),g.Studies.drawZones(f,C),C.error||(D=k.centerline,(D||D==="0"*1||D!==null&&m.highValue-1e-12>0&&m.lowValue+1e-12<0)&&g.Studies.drawHorizontal(f,C,null,D||0,m))))},g.Studies.displaySeriesAsLine=function(f,m,C){var S;if(C.length&&(S=f.panels[m.panel],!(!S||S.hidden)))for(var w in m.outputMap)g.Studies.displayIndividualSeriesAsLine(f,m,S,w,C)},g.Studies.displaySeriesAsHistogram=function(f,m,C){var S,w,k,D,v,x,A,T,_,L;if(C.length&&(S=f.panels[m.panel],!!S&&!S.hidden)){w=[];for(var M in m.outputMap)k=m.outputs[m.outputMap[M]],k&&(D=.3,typeof k=="object"&&(D=k.opacity,k=k.color),v={field:M,fill_color_up:k,border_color_up:k,fill_color_down:k,border_color_down:k},m.underlay&&(v.opacity_up=v.opacity_down=D||.3),w.push(v));x=m.getYAxis(f),A=m.inputs,T=A.WidthFactor,m.study&&m.study.parameters&&(_=m.study.parameters,typeof _.widthFactor<"u"&&(T=_.widthFactor)),L={name:m.name,type:A.HistogramType?A.HistogramType:"overlaid",panel:m.panel,yAxis:x,widthFactor:T||.5,bindToYAxis:!0,highlight:m.highlight},f.drawHistogram(L,w)}},g.Studies.displayIndividualSeriesAsLine=function(f,m,C,S,w){var k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q;if(k="s",k+="t",k+="e",k+="p",D="s",D+="tri",D+="n",D+="g",C.height||(C.height=C.bottom-C.top),v=m.getContext(f),x=m.outputs[m.outputMap[S]],!!x){if(v.save(),typeof x===D&&(x={color:x,width:1}),v.lineWidth=x.width||1,A=x.color,A=="auto"&&(A=f.defaultColor),v.strokeStyle=A,T=x.pattern,v.setLineDash(g.borderPatternToArray(v.lineWidth,T)),e.q08(30),v.lineDashOffset=e.C2Z(32,"0"),_=0,L=m.study,M=m.getYAxis(f),_=f.decimalPlacesFromPriceTick(M.priceTick,M.idealTickSizePixels),(m.overlay||m.underlay)&&(_=null),(M.decimalPlaces||M.decimalPlaces===0)&&(_=M.decimalPlaces),F=null,m.parameters&&(F=m.parameters.label),P=L.parameters,P||(P={}),E=P.plotType==k,m.series)for(var Y in m.series)O="st",O+="e",O+="p",I=m.series[Y].parameters.type,I&&(e.q08(68),E=e.C2Z(I,O));P.noLabels&&(F=!1),!m.noSlopes&&m.noSlopes!==!1&&(m.noSlopes=P.noSlopes),!m.extendToEnd&&m.extendToEnd!==!1&&(m.extendToEnd=P.extendToEnd),B=F||f.preferences.labels&&F!==!1,N=m.gaplines,N===!1&&(N="transparent"),R=m.inputs.Symbol,q=N?f.getGapColorFunction(R,S,x,N):null,f.plotDataSegmentAsLine(S,C,{yAxis:M,skipTransform:f.panels[m.panel].name!=m.chart.name,label:B,labelDecimalPlaces:_,noSlopes:m.noSlopes,step:E,alignStepToSide:m.alignStepToSide,extendToEndOfLastBar:m.extendToEndOfLastBar,width:m.lineWidth,extendToEndOfDataSet:m.extendToEnd,gapDisplayStyle:N,highlight:m.highlight},q),L.appendDisplaySeriesAsLine&&L.appendDisplaySeriesAsLine(f,m,w,S,C),v.restore()}},g.Studies.drawHorizontal=function(f,m,C,S,w,k){var D,v,x;D=f.panels[m.panel],v=f.getBackgroundCanvas().context,D&&(k||(k=w.textStyle),x=f.pixelFromPrice(S,D,w),x>w.top&&x<w.bottom&&f.plotLine(D.left,D.right,x,x,k,"segment",v,!1,{opacity:k&&k.opacity?k.opacity:.5}))},g.Studies.displayHistogramWithSeries=function(f,m,C){var S;f.panels[m.panel],S=.5,m.underlay&&(S=.3),g.Studies.createHistogram(f,m,C,!1,S),g.Studies.displaySeriesAsLine(f,m,C)},g.Studies.drawZones=function(f,m,C){var S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q,j,Z;if(S="stx_",S+="grid",S+="_border",!(!m.parameters||!m.parameters.studyOverZonesEnabled)){if(e.Q1Y(),w=parseFloat(m.parameters.studyOverSoldValue),k=parseFloat(m.parameters.studyOverBoughtValue),D=m.parameters.studyOverSoldColor,v=m.parameters.studyOverBoughtColor,x=m.zoneOutput,x||(x="Result"),A=g.Studies.determineColor(m.outputs[x]),(!A||A=="auto"||g.isTransparent(A))&&(A=f.defaultColor),D||(D=A),(!D||D=="auto"||g.isTransparent(D))&&(D=f.defaultColor),v||(v=A),(!v||v=="auto"||g.isTransparent(v))&&(v=f.defaultColor),T=f.panels[m.panel],_=m.getYAxis(f),L=_.displayBorder,f.axisBorders===!1&&(L=!1),f.axisBorders===!0&&(L=!0),_.width===0&&(L=!1),M=f.getYAxisCurrentPosition(_,T),e.B42(68),F=e.o_T(M,"left"),P=_.justifyRight,!P&&P!==!1&&(f.chart.yAxis.justifyRight||f.chart.yAxis.justifyRight===!1?P=f.chart.yAxis.justifyRight:P=F),E=Math.round(_.left+(F?_.width:0))+("0.5"-0),O=L?3:0,I=f.getBackgroundCanvas().context,B=I.fillStyle,I.globalAlpha=.2,f.startClip(T.name,!0),I.beginPath(),N=Math.round(f.pixelFromPrice(k,T,_))-.5,I.strokeStyle=v,I.moveTo(T.left,N),I.lineTo(T.right,N),I.stroke(),I.closePath(),I.beginPath(),R=Math.round(f.pixelFromPrice(w,T,_))+.5,I.strokeStyle=D,I.moveTo(T.left,R),I.lineTo(T.right,R),I.stroke(),I.closePath(),q=new g.Plotter,q.newSeries("border","stroke",f.canvasStyle(S)),L&&(Y=F?E-O:E-.5,z=F?E+.5:E+O,q.moveTo("border",Y,N),q.lineTo("border",z,N),q.moveTo("border",Y,R),q.lineTo("border",z,R)),I.fillStyle=B,V={skipTransform:f.panels[m.panel].name!=m.chart.name,panelName:m.panel,band:x+" "+m.name,yAxis:_,opacity:.3},!m.highlight&&f.highlightedDraggable&&(V.opacity*=.3),g.preparePeakValleyFill(f,g.extend(V,{threshold:k,direction:_.flipped?-1:1,color:v})),g.preparePeakValleyFill(f,g.extend(V,{threshold:w,direction:_.flipped?1:-1,color:D})),I.globalAlpha=1,(!m.study||!m.study.yaxis)&&(L&&(K=Math.round(_.bottom)+.5,q.moveTo("border",E,_.top),q.lineTo("border",E,K),q.draw(I,"border")),_.width!==0)){Q="stx_yax",Q+="i",Q+="s",f.canvasFont(Q,I),f.canvasColor("stx_yaxis",I),I.textAlign=P?"right":"left",e.q08(115);var ee=e.o_T(3,10,10,2,2);if(j=f.getCanvasFontSize("stx_yaxis")/ee,F){e.B42(116);var $=e.C2Z(13,8,12,31,11);if(Z=_.left+$,P){e.q08(36);var ie=e.o_T(12,681,57);Z=_.left+_.width-O-ie}}else{e.q08(8);var te=e.C2Z(9,6);Z=_.left+O+te,P&&(Z=_.left+_.width)}N>_.top+j&&(I.fillStyle=v,I.fillText(k,Z,N)),R<_.bottom-j&&(I.fillStyle=D,I.fillText(w,Z,R)),I.fillStyle=B}f.endClip(),I.globalAlpha=1,_.name==m.name&&(_.yAxisPlotter=new g.Plotter)}},g.Studies.createHistogram=function(f,m,C,S,w){var k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V;k="_",k+="hi",k+="s",k+="t",D=f.panels[m.panel],v=m.getContext(f),x=m.getYAxis(f),f.startClip(D.name),e.Q1Y(),e.B42(94);var K=e.C2Z(18,16);A=f.layout.candleWidth-K,A<2&&(A=1),T=f.pixelFromPrice(0,D,x),x.min>0&&(T=f.pixelFromPrice(x.min,D,x)),S&&(T=Math.floor(D.top+D.height/2)),_=m.name+k,f.canvasColor("stx_histogram"),L=v.fillStyle,(w||w===0)&&(v.globalAlpha=w),!m.highlight&&f.highlightedDraggable&&(v.globalAlpha*=.3),M=null,F=null,P=m.outputs;for(var Q=0;Q<C.length;Q++)if(E="N",E+="egative Bar",O=C[Q],!!O){if(O.candleWidth&&(A=Math.floor(Math.max(1,O.candleWidth-2))),I=Math.floor(f.pixelFromBar(Q,D.chart)-A/("2"<<32)),B=Math.floor(A),M===null){e.B42(59);var j=e.C2Z(20,79,0,4);N=f.tickFromPixel(I,D.chart)-j,N<0?M=F:M=f.pixelFromPrice(f.chart.dataSet[N][_],D,x)-T}else M=F;F=f.pixelFromPrice(O[_],D,x)-T,R=g.Studies.determineColor(P["Decreasing Bar"]),q=g.Studies.determineColor(P["Increasing Bar"]),Y=g.Studies.determineColor(P["Positive Bar"]),z=g.Studies.determineColor(P[E]),V=x.flipped,v.fillStyle=L,R&&(V?F<M:F>M)?v.fillStyle=R:q&&(V?F>M:F<M)?v.fillStyle=q:Y&&(V?F>0:F<0)?v.fillStyle=Y:z&&(V?F<0:F>0)&&(v.fillStyle=z),v.fillRect(I,T,B,Math.floor(F))}v.globalAlpha=1,f.endClip()},g.Studies.prettify={Close:"C",Open:"O",High:"H",Low:"L",simple:"ma",exponential:"ema",triangular:y,VIDYA:"vdma",weighted:"wma","welles wilder":"smma",true:"y",false:"n"},g.Studies.prettyRE=/^.*\((.*?)\).*$/,g.Studies.prettyDisplay=function(f){var m,C;if(m=g.Studies.prettyRE.exec(f),!m)return f;if(C=m[1],C){for(var S in g.Studies.prettify)C=C.replace(S,g.Studies.prettify[S]);f=f.replace(m[1],C)}return f},g.Studies.getFieldInputs=function(f){var m,C,S;m=[],C=f.study.inputs;for(var w in C)S="f",S+="ie",S+="ld",C[w]==S&&m.push(w);return m},g.Studies.initializeFN=function(f,m,C,S,w,k,D){var v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y;if(C||(C={}),w||(w={}),C.id||(C.id=g.Studies.generateID(f,m,C,w.replaceID,w.display)),C.display||(C.display=C.id),v=new g.Studies.StudyDescriptor(C.id,m,C.id,C,S,w),C.Period&&(v.days=Math.max(1,parseInt(v.inputs.Period,10))),D?(D.inputs||(D.inputs=v.study.inputs),D.outputs||(D.outputs=v.study.outputs),v.study=D):D=v.study,D.display&&(C.display=D.display),typeof w.panelName=="string"&&(k=w.panelName),(k==C.id||k&&!f.panelExists(k))&&(v.underlay=v.overlay=!1),(k=="Own panel"||k=="New panel")&&(k=null),x=v.overlay||C.Overlay||v.overlay!==!1&&D.overlay,A=v.underlay||C.Underlay||v.underlay!==!1&&D.underlay,x&&w.underlayEnabled&&(A=!0),A&&(v.underlay=!0),!A&&f.chart.panel&&k==f.chart.panel.name&&(x=!0),x&&(v.overlay=!0),T=f.preferences.dragging,(T===!0||T&&T.study)&&(v.overlay=!0),k?w.panelName=k:!x&&!A&&(k=C.id),w.calculateOnly)return(x||A)&&(f.panels[w.panelName]?v.panel=w.panelName:v.panel=g.Studies.getPanelFromFieldName(f,v)||w.chartName),v;if(_={},L=f.layout.studies[w.replaceID],L&&(_={outputMap:g.clone(L.outputMap),panel:L.panel}),v.panel="",k?(M="ri",M+="g",M+="h",M+="t",F=g.Studies.smartMovePanel(f,v.inputs,k,w.replaceID,w.panelName=="New panel"),F&&(v.panel=F.name),w.yaxisDisplayValue&&!["left",M,"none","shared","default"].includes(w.yaxisDisplayValue)&&!f.getYAxisByName(F,w.yaxisDisplayValue)&&(w.yaxisDisplayValue="default")):(x||A)&&(v.panel=g.Studies.getPanelFromFieldName(f,v)||w.chartName),v.panel||(P=D.panelHeight||null,E=w.yAxis||D.yAxis||{},E.name=v.inputs.id,v.panel=v.inputs.id,f.createPanel(v.inputs.display,v.panel,P,w.chartName,new g.ChartEngine.YAxis(E))),v.parameters&&v.parameters.panelName&&(v.parameters.panelName=v.panel),O=f.panels[v.panel],I=D?g.clone(D.yAxis):null,B=w.yAxis||I,(B||{}).ground&&(B["initialMargin"+(B.flipped?"Top":"Bottom")]=0),N=g.Studies.smartCreateYAxis(f,O,v.inputs.id,w.yaxisDisplayValue,B),N&&(N.name==w.replaceID&&(N.name=v.inputs.id),!w.replaceID&&N.name===v.name&&f.calculateYAxisMargins(N),N.allowSharing=!w.yAxis&&!D.yAxis,N.width=N.position=="none"?"0"*1:g.ChartEngine.YAxis.prototype.width,w.yaxisDisplayValue=="shared"||w.yaxisDisplayValue=="default"?delete w.yaxisDisplayValue:(I&&g.ensureDefaults(N,I),N.name==v.name&&(!(I||{}).textStyle&&!w.yaxisDisplayColor||w.yaxisDisplayColor=="auto"?delete N.textStyle:w.yaxisDisplayColor&&(N.textStyle=g.colorToHex(w.yaxisDisplayColor)),(I||{}).justifyRight===void 0&&(N.justifyRight=null),w.flippedEnabled!==void 0&&(N.flipped=w.flippedEnabled))),N!=O.yAxis?N.displayGridLines=!1:N!=f.chart.yAxis&&(N.displayGridLines=f.displayGridLinesInStudies)),f.calculateYAxisPositions(),L){R="ve",R+="c",R+="to",R+="r",q=!1;for(var z in f.drawingObjects)Y=f.drawingObjects[z],_.outputMap&&_.outputMap.hasOwnProperty(Y.field)?(Y.field=Y.field.replace(w.replaceID,v.inputs.id),v.parameters&&v.parameters.panelName?Y.panelName=v.parameters.panelName:Y.panelName=v.panel,q=!0):_.panel&&_.panel==Y.panelName&&(Y.panelName=Y.panelName.replace(w.replaceID,v.inputs.id),q=!0);q&&f.changeOccurred(R)}return v},g.Studies.smartMovePanel=function(f,m,C,S,w){var k,D,v,x;return e.Q1Y(),D=m.id,S&&(k=f.layout.studies[S]),k&&(v=f.panels[k.panel],v&&v.yAxis.name==S&&((w||C!=S&&C!=D)&&!f.checkForEmptyPanel(v.name,!0,k)?(f.electNewPanelOwner(v),x=k.getYAxis(f),x.name==S&&f.electNewYAxisOwner(x)):(C==S||!f.panels[C])&&(D!=v.name&&f.modifyPanel(v,{name:D,display:m.display}),C=D))),f.panels[C]},g.Studies.smartCreateYAxis=function(f,m,C,S,w){var k,D,v,x,A,T,_,L,M,F,P,E,O;if(k="s",k+="h",k+="a",k+="red",D="defa",D+="ult",v=w||{},e.Q1Y(),x=f.getYAxisByName(m,C),!S&&w&&(S=w.position),["left","right","none"].indexOf(S)>-1||S===void 0&&w)return!x||x.isShared(f)?(g.extend(v,{name:C,position:S}),!x&&!f.currentlyImporting&&m!=m.chart.panel&&!m.yAxis.studies.length&&!m.yAxis.renderers.length?(x=m.yAxis,g.extend(x,v)):(A=x==m.yAxis,x&&(x.name=f.electNewYAxisOwner(x)),T=x||m.yAxis,T.lockScale&&g.extend(v,{zoom:T.zoom,scroll:T.scroll,lockScale:!0}),x=f.addYAxis(m,new g.ChartEngine.YAxis(v)),A&&(m.yAxis=x))):(w&&g.extend(x,w),x.position=S,x.name=C),x;if(S&&S!==D&&S!=="shared"&&S!==m.yAxis.name){if(_=f.getYAxisByName(m,S),_&&x==m.yAxis&&!x.isShared(f)&&(m.yAxis=_),x&&x.isShared(f))x.name=f.electNewYAxisOwner(x);else{L=1501099980,M=599282079,F=2;for(var I=1;e.X30(I.toString(),I.toString().length,50211)!==L;I++)x!=m.yAxis&&f.deleteYAxisIfUnused(m,x),F+=2;e.Y5b(F.toString(),F.toString().length,89305)!==M&&x!==m.yAxis&&f.deleteYAxisIfUnused(m,x)}return _}if(S==k||S==m.yAxis.name||m.yAxis.allowSharing&&(!x||x.allowSharing)){if(x)if(x!==m.yAxis&&x.isShared(f))x.name=f.electNewYAxisOwner(x);else{P=-1685098307,E=1748863445,O=2;for(var B=1;e.X30(B.toString(),B.toString().length,48649)!==P;B++)delete x.position,O+=2;e.X30(O.toString(),O.toString().length,57672)!==E&&+x.position,f.deleteYAxisIfUnused(m,x)}return f.resizeChart(),m.yAxis}return g.extend(v,{name:C}),x&&(x.name=f.electNewYAxisOwner(x)),!x||x.name?x=f.addYAxis(m,new g.ChartEngine.YAxis(v)):(g.extend(x,v),delete x.position),x},g.Studies.calculateVolume=function(f,m){var C,S,w,k;if(m.type=="vol undr"){if(C="la",C+="yout",!f||!f.chart.dataSet)return;S=f.layout,w=m.parameters.removeStudy,k=S.volumeUnderlay,S.volumeUnderlay=!w,k!=S.volumeUnderlay&&f.changeOccurred(C),w&&g.Studies.removeStudy(f,m)}m.outputMap={},e.f9T(),m.outputMap.Volume=""},g.Studies.MA=function(f,m,C,S,w,k,D,v){var x;e.q08(6);var A=e.o_T(4019,12,1,3);e.q08(0);var T=e.o_T(20,479);e.B42(117),e.o_T(4998,2,19,137453,3),e.B42(8);var _=e.C2Z(110160,104040);e.q08(55);var L=e.o_T(3714,52080,8680);e.B42(7),e.o_T(7164,596,6,7158),x=new g.Studies.StudyDescriptor(w+(A===6530?T:_==4340?L:" ")+D.name,"ma",D.panel),x.chart=D.chart,x.days=parseInt(m,10),e.Q1Y(),x.startFrom=D.startFrom,v&&(x.subField=v),x.inputs={},f&&(x.inputs.Type=f),C&&(x.inputs.Field=C),S&&(x.inputs.Offset=parseInt(S,10)),g.Studies.calculateMovingAverage(k,x)},g.Studies.movingAverage={conversions:{ma:p,sma:"simple",ema:c,tma:"triangular",vdma:"vidya",wma:u,smma:"welles wilder"},translations:{simple:"Simple",exponential:"Exponential",triangular:"Triangular",vidya:"VIDYA",weighted:"Weighted","welles wilder":"Welles Wilder"},typeMap:{ema:"Exponential",exponential:"Exponential",tma:"Triangular",triangular:"Triangular",vdma:"VIDYA",vidya:"VIDYA",wma:"Weighted",weighted:"Weighted",smma:"Exponential","welles wilder":l}},g.Studies.movingAverageHelper=function(f,m){var C,S;if(C="o",C+="ption",C+="s",m==C){S={};for(var w in g.Studies.movingAverage.translations)S[w]=f.translateIf(g.Studies.movingAverage.translations[w]);return S}return g.Studies.movingAverage.conversions[m]},g.Studies.createVolumeChart=function(f,m,C){var S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I;S="_",S+="up",w="_",w+="down",k="c",k+="olor",D="_",D+="up",v="stx",v+="_vo",v+="lume_underlay",x="Dow",x+="n Vo",x+="l",x+="ume",A="U",A+="p Volume",T=m.panel,m.inputs,_=m.underlay,m.overlay,L=g.Studies.determineColor(m.outputs[A]),e.Q1Y(),M=g.Studies.determineColor(m.outputs[x]),F=_?v:"stx_volume",e.B42(0),f.setStyle(e.o_T(D,F),k,L),e.q08(0),f.setStyle(e.C2Z(w,F),"color",M),P=[{field:m.volumeField||"Volume",fill_color_up:f.canvasStyle(F+"_up").color,border_color_up:f.canvasStyle(F+"_up").borderLeftColor,opacity_up:f.canvasStyle(F+S).opacity,fill_color_down:f.canvasStyle(F+"_down").color,border_color_down:f.canvasStyle(F+"_down").borderLeftColor,opacity_down:f.canvasStyle(F+"_down").opacity,color_function:m.colorFunction}],E=P[0],!_&&E.border_color_down==="rgb(184, 44, 12)"&&(E.border_color_down="#000000",E.border_color_up="#000000"),O=m.getYAxis(f),I={name:"Volume",panel:T,yAxis:O,widthFactor:1,bindToYAxis:!0,highlight:m.highlight},g.extend(I,m.study.parameters),g.extend(I,m.parameters),f.colorByCandleDirection&&!m.colorFunction&&(E.color_function=function(B){var N,R;return N=B.Open,R=B.Close,{fill_color:N>R?E.fill_color_down:E.fill_color_up,border_color:N>R?E.border_color_down:E.border_color_up,opacity:N>R?E.opacity_down:E.opacity_up}}),f.drawHistogram(I,P)},g.Studies.calculateStandardDeviation=function(f,m){var C,S,w,k,D,v,x,A,T,_,L,M,F,P,E;if(C="C",C+="lo",C+="s",C+="e",S=m.chart.scrubbed,S.length<m.days+("1"<<64)){m.error=!0;return}w=m.inputs.Field,(!w||w=="field")&&(w=C),k=m.inputs["Moving Average Type"],k||(k=m.inputs.Type),g.Studies.MA(k,m.days,w,m.inputs.Offset,"_MA",f,m),D=0,e.q08(8),v=e.o_T("0",0),x=0,A=Number(m.inputs["Standard Deviations"]),A<0&&(A=2),T=m.name;for(var O in m.outputs)e.B42(14),T=e.o_T(O,T," ");for(_=m.startFrom-1,M=0;_>=0&&M<m.days;_--,M++)F="o",F+="bject",L=S[_][w],L&&typeof L==F&&(L=L[m.subField]),isNaN(L)&&(L=0),D+=Math.pow(L,2),v+=L;for(_=m.startFrom;_<S.length;_++)if(P=S[_],L=P[w],L&&typeof L=="object"&&(L=L[m.subField]),!L&&L!==("0"^0)&&(L=0),D+=Math.pow(L,2),v+=L,!(_<m.days-1)&&(_>=m.days&&(E=S[_-m.days][w],E&&typeof E=="object"&&(E=E[m.subField]),isNaN(E)&&(E=0),D-=Math.pow(E,2),v-=E),x=P["_MA "+m.name],x||x===0)){e.q08(110);var I=e.C2Z(0,23,4,9,12);e.B42(0);var B=e.C2Z(2,0);P[T]=Math.sqrt((D+m.days*Math.pow(x,"2"|I)-B*x*v)/m.days)*A}},g.Studies.calculateMovingAverage=function(f,m){var C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q;if(C="C",C+="lose",S="fi",S+="eld",w="s",w+="m",w+="a",!!m.chart.scrubbed){if(k=m.inputs.Type,(k=="ma"||k==w||!k)&&(k="simple"),D=g.Studies.movingAverage.typeMap,k in D)return g.Studies["calculateMovingAverage"+D[k]](f,m);if(k!=="simple")return;v=m.chart.scrubbed,x=0,A=[],T=m.name;for(var Y in m.outputs)e.B42(14),T=e.C2Z(Y,T," ");for(_=m.inputs.Field,(!_||_==S)&&(_=C),L=parseInt(m.inputs.Offset,"10"|0),isNaN(L)&&(L=0),E=m.startFrom,O=L,M=m.startFrom-1;M>=0;M--)if(F=v[M][_],F&&typeof F=="object"&&(F=F[m.subField]),!(!F&&F!==0)){if(O>0){O--,E=M;continue}if(A.length==m.days-1)break;x+=F,A.unshift(F)}for(A.length<m.days-1&&(A=[],E=0),I=[],M=E;M<v.length;M++){if(B=v[M],F=B[_],F&&typeof F=="object"&&(F=F[m.subField]),N=M+L>="0"<<32&&M+L<v.length,R=N?v[M+L]:null,!F&&F!==0){R?R[T]=null:M+L>=v.length&&(P={},P[T]=null,I.push(P));continue}x+=F,A.push(F),A.length>m.days&&(x-=A.shift()),q=A.length==m.days?x/m.days:null,R?R[T]=q:M+L>=v.length&&(P={},P[T]=q,I.push(P))}m.appendFutureTicks(f,I)}},g.Studies.calculateMovingAverageExponential=function(f,m){var C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q;C="C",C+="lo",C+="se",S=m.inputs.Type,w=m.chart.scrubbed,k=0,D=0,v=0,e.q08(56);var Y=e.o_T(6,18,19,10,17);e.B42(11);var z=e.o_T(9,6,10,7);x=Y/(m.days+z),(S==="welles wilder"||S==="smma")&&(x=1/m.days),A=null,T=m.name;for(var V in m.outputs)e.B42(14),T=e.o_T(V,T," ");for(_=m.inputs.Field,(!_||_=="field")&&(_=C),L=parseInt(m.inputs.Offset,10),isNaN(L)&&(L=0),P=m.startFrom,E=L,M=m.startFrom-("1"^0);M>=0;M--)if(F=w[M][T],!(!F&&F!==0)){if(A===null&&(A=F),v=m.days,E<=0)break;E--,P=M}for(A===null&&(A=P=0),O=[],M=P;M<w.length;M++)I=w[M],F=I[_],F&&typeof F=="object"&&(F=F[m.subField]),B=M+L>=0&&M+L<w.length,N=B?w[M+L]:null,!F&&F!==0?R=null:(v==m.days-1?(k+=F,D=k/m.days,R=D):v<m.days-1?(k+=F,e.q08(118),D=e.C2Z(1,k,v),R=null):v===0?(k+=F,D=k,R=null):(A||A===0)&&(e.B42(11),D=e.C2Z(x,F,A,A),R=D),A=D,v++),N?N[T]=R:M+L>=w.length&&(q={},q[T]=R,O.push(q));m.appendFutureTicks(f,O)},g.Studies.calculateMovingAverageVIDYA=function(f,m){var C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q;C="_",C+="M",C+="AS",C+="TD",S="_S",S+="TD",S+=" ",w="m",w+="a",k="fi",k+="e",k+="l",k+="d",m.inputs.Type,D=m.chart.scrubbed,e.q08(119);var j=e.o_T(0,8,15,15,7);e.B42(120);var Z=e.o_T(2,20,565,6,14);v=j/(m.days+Z),x=null,A=m.name;for(var ee in m.outputs)e.q08(14),A=e.o_T(ee,A," ");for(T=m.inputs.Field,(!T||T==k)&&(T="Close"),m.std=new g.Studies.StudyDescriptor(m.name,"sdev",m.panel),m.std.chart=m.chart,m.std.days=5,m.std.startFrom=m.startFrom,m.std.inputs={Field:T,"Standard Deviations":1,Type:w},m.std.outputs={_STD:null},g.Studies.calculateStandardDeviation(f,m.std),e.Q1Y(),g.Studies.MA("ma",20,S+m.name,0,C,f,m),_=parseInt(m.inputs.Offset,10),isNaN(_)&&(_=0),P=m.startFrom,E=_,L=m.startFrom-1;L>=0;L--)if(M=D[L][A],!(!M&&M!==0)){if(x===null&&(x=M),E<=0)break;E--,P=L}x===null&&(x=P=0),e.B42(30),O=-e.C2Z(0,"1539286666"),I=-205222528,B=2;for(var $=1;e.X30($.toString(),$.toString().length,82340)!==O;$++)N=[],B+=2;for(e.Y5b(B.toString(),B.toString().length,6841)!==I&&(N=[]),N=[],L=P;L<D.length;L++){if(R="_",R+="MAS",R+="T",R+="D ",q="_",q+="MA",q+="STD ",Y=D[L],M=Y[T],M&&typeof M=="object"&&(M=M[m.subField]),z=L+_>=0&&L+_<D.length,V=z?D[L+_]:null,!M&&M!==0){V?V[A]=null:L+_>=D.length&&(F={},F[A]=null,N.push(F));continue}!Y[q+m.name]&&Y["_MASTD "+m.name]!==0||(K=Y["_STD "+m.name]/Y[R+m.name],e.B42(121),Q=e.C2Z(v,M,K,v,K,x,"1"),x=Q,L<m.days&&(Q=null),V?V[A]=Q:L+_>=D.length&&(F={},F[A]=Q,N.push(F)))}m.appendFutureTicks(f,N)},g.Studies.calculateMovingAverageTriangular=function(f,m){var C,S,w,k,D,v,x,A,T,_,L,M,F;C="T",C+="RI",C+="2",S="si",S+="m",S+="ple",w="fie",w+="ld",k=m.chart.scrubbed,D=m.inputs.Field,(!D||D==w)&&(D="Close"),v=Math.ceil(m.days/("2">>32)),g.Studies.MA(S,v,D,0,"TRI1",f,m),m.days%2===0&&v++,g.Studies.MA("simple",v,"TRI1 "+m.name,0,C,f,m),x=m.name;for(var P in m.outputs)e.B42(14),x=e.o_T(P,x," ");A=parseInt(m.inputs.Offset,10),isNaN(A)&&(e.B42(30),A=e.o_T(0,"0")),T=A;for(var E=m.startFrom-1;E>=0;E--)if(_=k[E][x],!(!_&&_!==("0"^0))){if(T>0){T--;continue}break}for(L=[],E++;E<k.length;E++)E+A>=0&&(M="T",M+="RI2",M+=" ",E+A<k.length?(e.q08(0),k[e.o_T(A,E)][x]=k[E][M+m.name]):(F={},F[x]=k[E]["TRI2 "+m.name],L.push(F)));m.appendFutureTicks(f,L)},g.Studies.calculateMovingAverageWeighted=function(f,m){var C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N;C=m.chart.scrubbed,e.q08(8),S=e.C2Z("0",0),w=0,k=m.inputs.Field,(!k||k=="field")&&(k="Close"),e.q08(122);var R=e.C2Z(5,15,1,74,0);e.B42(20);var q=e.C2Z(14,16,0);D=m.days*(m.days+R)/q,v=m.name;for(var Y in m.outputs)e.B42(14),v=e.o_T(Y,v," ");for(x=parseInt(m.inputs.Offset,"10"-0),isNaN(x)&&(x=0),L=[],M=m.startFrom,F=x,A=m.startFrom-1;A>=0;A--)if(T=C[A][k],T&&typeof T=="object"&&(T=T[m.subField]),!(!T&&T!=="0"*1)){if(F>0){F--,M=A;continue}if(L.length==m.days-1)break;L.unshift(T)}for(L.length<m.days-1&&(L=[],M=0),A="0"<<0;A<L.length;A++){e.B42(27);var z=e.o_T(11,4,10,4,0);S+=(A+z)*L[A],w+=L[A]}for(P=[],A=M;A<C.length;A++){if(E="o",E+="b",E+="je",E+="ct",O=C[A],T=O[k],T&&typeof T==E&&(T=T[m.subField]),I=A+x>=0&&A+x<C.length,B=I?C[A+x]:null,!T&&T!==0){B?B[v]=null:A+x>=C.length&&(_={},_[v]=null,P.push(_));continue}L.push(T),L.length>m.days&&(S-=w,w-=L.shift()),S+=L.length*T,w+=T,N=A<m.days-1?null:S/D,B?B[v]=N:A+x>=C.length&&(_={},_[v]=N,P.push(_))}m.appendFutureTicks(f,P)},g.Studies.calculateMultMA=function(f,m){var C,S,w,k,D,v;if(C="fi",C+="eld",S=m.chart.scrubbed,w=[Number.MAX_VALUE],Object.keys(m.inputs).filter(A=>{var T;T="Per",T+="io",T+="d",e.B42(37),e.Q1Y();var _=e.o_T(21,251,12);return A.indexOf(T)>_}).forEach((A,T)=>{e.B42(0),e.Q1Y(),w[e.C2Z(1,T)]=m.inputs[A]}),S.length<Math.min(...w)+1){m.error=!0;return}k=m.inputs.Field,(!k||k==C)&&(k="Close"),D=m.inputs["Moving Average Type"],D||(D="simple"),v=m.inputs.Offset||0;for(var x=1;x<w.length;x++)g.Studies.MA(D,w[x],k,v,"MA "+x,f,m)},g.Studies.calculateStudyATR=function(f,m){var C,S,w,k,D,v,x,A;if(C=m.chart.scrubbed,S=m.days,C.length<S+1){m.error=!0;return}e.Q1Y(),w=0,k=m.name;for(var T=Math.max(m.startFrom,"1"|0);T<C.length;T++)if(D="A",D+="TR",D+=" ",v=C[T],e.B42(8),x=C[e.C2Z(T,1)],A=v.trueRange,x["Sum True Range "+k]&&(e.q08(0),w=x[e.o_T(k,"Sum True Range ")]),w+=A,T>S&&(e.B42(8),w-=C[e.C2Z(T,S)][e.C2Z(k,"True Range ",e.B42(0))]),e.q08(0),v[e.o_T(k,"True Range ")]=A,e.q08(0),v[e.o_T(k,"Sum True Range ")]=w,T==S)e.q08(0),v[e.C2Z(k,D)]=e.C2Z(S,w,e.B42(9));else if(T>S){e.B42(64);var _=e.o_T(1,3,2);e.q08(0),v[e.C2Z(k,"ATR ")]=(x["ATR "+k]*(S-_)+A)/S}},g.Studies.displayPSAR2=function(f,m,C){var S,w,k,D,v,x,A,T,_,L,M,F,P,E;S="Plot Typ",S+="e",w=f.panels[m.panel],k=m.getYAxis(f),D=k==f.chart.panel.yAxis,f.startClip(w.name),v=m.getContext(f),x=m.inputs[S]=="squarewave";for(var O in m.outputs){e.q08(123);var I=e.o_T(198,38,9,8,8);e.q08(120),e.o_T(82,6,3528,7,9),e.B42(124);var B=e.C2Z(9,13,11,241,241);e.q08(8);var N=e.o_T(6858,18);A=O+(I!=B?" ":N)+m.name,v.beginPath(),T=f.layout.candleWidth,_=Math.max(3,Math.floor(f.chart.tmpWidth/2));for(var R="0"^0;R<C.length;R++)L=C[R],!(!L||!L[A]&&L[A]!==0)&&(L.candleWidth&&(T=L.candleWidth),D&&L.transform&&(L=L.transform),M=f.pixelFromBar(R,w.chart),x&&(e.q08(9),M-=e.o_T(2,T)),F=f.pixelFromTransformedValue(L[m.referenceOutput?m.referenceOutput+" "+m.name:A],w,k),(R===("0"|0)||!C[R-1]||!C[R-1][A]&&C[R-1][A]!==0)&&v.moveTo(M,F),x?(v.lineTo(M,F),e.q08(0),v.lineTo(e.C2Z(T,M),F),C[R+("1"-0)]&&(e.q08(125),P=C[e.C2Z("1",0,R)],D&&P.transform&&(P=P.transform),!P[A]&&P[A]!==0&&(e.q08(0),v.lineTo(e.o_T(T,M),f.pixelFromTransformedValue(P[m.referenceOutput?m.referenceOutput+" "+m.name:A],f.panels[m.panel],k))))):(e.q08(50),v.moveTo(e.C2Z(_,2,M),F),e.B42(45),v.lineTo(e.C2Z(_,2,M),F)));v.lineWidth=1,m.highlight&&(v.lineWidth=3),E=g.Studies.determineColor(m.outputs[O]),E=="auto"&&(E=f.defaultColor),v.strokeStyle=E,!m.highlight&&f.highlightedDraggable&&(v.globalAlpha*=.3),v.stroke(),v.closePath(),v.lineWidth=1}f.endClip()},g.Studies.inputAttributeDefaultGenerator=function(f){return e.f9T(),!f&&f!=="0"<<64?{}:f.constructor==Number?Math.floor(f)==f?f>0?{min:1,step:1}:{step:1}:f>0?{min:"0"<<0,step:.01}:{step:.01}:{}},g.Studies.getMarketOffset=function({stx:f,localQuoteDate:m,shiftToDateBoundary:C}){var S,w,k,D,v,x;S="Am",S+="e",S+="rica/Ne",e.Q1Y(),S+="w_York",arguments.length>1&&(f=arguments[0],m=arguments[1],w=arguments[2]);var{symbol:A}=f.chart;k=g.getFn("Market.Symbology.isForexMetal")(A),w===void 0&&(w=g.getFn("Market.Symbology.isForexSymbol")(A)),f.chart.market?D=w?S:f.chart.market.market_tz:D=null,e.q08(110);var T=e.C2Z(59992,45,14,20,19);return v=new Date(m.getTime()+m.getTimezoneOffset()*T),(!D||D.indexOf("UTC")==-1)&&(v=g.convertTimeZone(v,"UTC",D)),x=new Date(v.getFullYear(),v.getMonth(),v.getDate(),v.getHours(),v.getMinutes(),v.getSeconds(),v.getMilliseconds()).getTime()-m.getTime(),C&&w&&(e.q08(126),x+=e.C2Z(60,60,k?6:7,1e3)),x},g.Studies.getStudyList=function(f){var m,C;m={},C={},g.extend(C,f),e.Q1Y();for(var S in g.Studies.studyLibrary)C[S]||(m[g.Studies.studyLibrary[S].name]=S);return m},g.Studies.determineColor=function(f){var m;if(e.f9T(),m="o",m+="bje",m+="c",m+="t",f){if(typeof f===m)return f.color}else return null;return f},g.Studies.calculateGenericEnvelope=function(f,m,C,S,w,k){var D,v,x,A,T,_,L,M,F;D="C",D+="l",D+="os",D+="e",C||(C=0),k||(e.B42(33),k=e.o_T("0",32)),(!S||S=="field")&&(S=D),w||(w=S),v=m.chart.scrubbed,x=m.inputs.Field,(!x||x==="field")&&(x="Close");for(var P=m.startFrom;v&&P<v.length;P++)A="obje",A+="ct",T=v[P],T&&T[S]&&(_=T[x],_&&typeof _=="object"&&(_=_.Close),L=T[S],L&&typeof L==A&&(L=L[m.subField]),M=T[w],M&&typeof M=="object"&&(M=M[m.subField]),e.B42(100),F=e.o_T(C,k,M),e.q08(0),T[m.type+" Top "+m.name]=e.C2Z(F,L),e.B42(8),T[m.type+" Bottom "+m.name]=e.o_T(L,F),T[m.type+" Median "+m.name]=L,T["Bandwidth "+m.name]=L?200*F/L:0,e.B42(127),T["%b "+m.name]=e.o_T(L,"1",1,F,_,50))},g.Studies.displayChannel=function(f,m,C){e.f9T();var S,w,k,D;if(m.inputs["Channel Fill"]){S={panelName:m.panel};for(var v in m.outputs)if(w="M",w+="edi",w+="an",k=v.split(" ").pop(),k=="Top"||k=="High"){e.q08(128);var x=e.o_T(1,15,6963,6974,3474);e.q08(124),e.C2Z(9,13,11,88,1074),e.q08(20);var A=e.o_T(25,15,5074);e.B42(95);var T=e.C2Z(8,13,7988,1,11);e.q08(0);var _=e.o_T(2,835);e.B42(14),e.C2Z(244,3163,13),e.q08(0);var L=e.C2Z(2,6498);e.q08(129);var M=e.C2Z(19,11245,4,3756,10);e.B42(130),e.C2Z(2724,9,17,2,1810),S.topBand=v+(x==A?T===826.97?_:L>M?"9.07e+3"^0:62.31:" ")+m.name}else k=="Bottom"||k=="Low"?S.bottomBand=v+" "+m.name:(k==w||k=="Channel")&&(S.color=g.Studies.determineColor(m.outputs[v]));m.parameters&&m.parameters.opacity?S.opacity=m.parameters.opacity:S.opacity=.2,D=f.panels[m.panel],S.skipTransform=D.name!=m.chart.name,S.yAxis=m.getYAxis(f),!m.highlight&&f.highlightedDraggable&&(S.opacity*=.3),g.prepareChannelFill(f,S)}g.Studies.displaySeriesAsLine(f,m,C)},g.Studies.initAnchorHandle=function(f,m){var C,S,{handle:w}=m;if(!w){f.controls.anchorHandles||(f.controls.anchorHandles={});var{anchorHandles:k,chartControls:D}=f.controls;k[m.uniqueId]?{handle:w}=k[m.uniqueId]:(C="s",C+="tx_a",C+="nchor_handle",S="d",S+="i",S+="v",w=document.createElement(S),w.classList.add(C),w.setAttribute(m.uniqueId,""),k[m.uniqueId]={handle:w,sd:m},D&&D.parentElement.appendChild(w)),m.anchorHandle=w}},g.Studies.removeAnchorHandle=function(f,m){e.f9T();var{handle:C}=(f.controls.anchorHandles||{})[m.uniqueId]||{};C&&(delete f.controls.anchorHandles[m.uniqueId],C.remove())},g.Studies.repositionAnchor=function(f,m){var C,S,w,k,D,v,x,A,T,_,{currentAnchorTime:L,uniqueId:M}=m,{hoverTick:F}=f.repositioningAnchorSelector||{};e.f9T();var{dataSet:P,market:E}=f.chart;f.controls.anchorHandles||(f.controls.anchorHandles={});var{anchorHandles:O}=f.controls;if(C={},F||F===("0"^0)){if(F>=P.length||(S=!m.inputs.hasOwnProperty("Anchor Date"),w=P[F].DT,k=g.Studies.getMarketOffset({stx:f,localQuoteDate:w,shiftToDateBoundary:!0}),L&&S&&new Date(w.getTime()+k).getDate()!==new Date(L.getTime()+k).getDate()))return;if(E.market_def&&E.market_def.market_tz){D=433408067,v=1055827468,x=2;for(var I=1;e.X30(I.toString(),I.toString().length,5949)!==D;I++)w=new b.Date(w,E.market_def.market_tz),x+=2;e.X30(x.toString(),x.toString().length,52924)!==v&&(w=new b.Date(w,E.market_def.market_tz)),w=new b.Date(w,E.market_def.market_tz)}A=!S&&g.dateToStr(w,"YYYY-MM-dd"),T=g.dateToStr(w,"HH:mm:ss"),C={"Anchor Time":T},A&&(C["Anchor Date"]=A)}_=g.Studies.replaceStudy(f,m.inputs.id,m.type,Object.assign(m.inputs,C),m.outputs,m.parameters,m.panel),O[M]&&(O[M].sd=_),f.draw()},g.Studies.cancelRepositionAnchor=function(f){var{sd:m,tapToAdd:C}=f.repositioningAnchorSelector||{};if(m){C&&g.Studies.removeStudy(f,m),f.repositioningAnchorSelector=null;var{anchorHandles:S}=f.controls;S&&S[m.uniqueId]&&(S[m.uniqueId].highlighted=!1,g.Studies.displayAnchorHandleAndLine(f,m,f.chart.dataSegment)),f.draw()}},g.Studies.displayAnchorHandleAndLine=function(f,m,C){var S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y;if(S="l",S+="i",S+="n",S+="e",w="Mar",w+="ket.Symbology.isFor",w+="exSymbol",k="stx_an",k+="chor_han",k+="dle",!(m.signalData&&!m.signalData.reveal)){D=(f.repositioningAnchorSelector||{}).sd===m;var{hoverTick:z}=D&&f.repositioningAnchorSelector,{chart:V,panels:K,cy:Q}=f;e.Q1Y();var{market:j={},symbol:Z}=V;v=K[m.panel];var{top:ee,right:$,left:ie,height:te,subholder:re}=v,{bottom:H}=v.yAxis,{inputs:U,anchorHandle:G,currentAnchorTime:ae,lineWidth:ne=1}=m,{backgroundColor:oe,borderLeftColor:le}=f.canvasStyle(k);x=!U["Anchor Date"],A=g.getFn(w)(Z),T=(z||z===0)&&(f.chart.dataSet[z]||{}).DT,_=g.Studies.getMarketOffset({stx:f,localQuoteDate:C[C.length-1].DT,shiftToDateBoundary:!0}),L=ae&&T&&x&&new Date(T.getTime()+_).getDate()!==new Date(ae.getTime()+_).getDate();var{floatDate:he,anchorHandles:ue={}}=f.controls;M=ue[m.uniqueId]||{};var{highlighted:ce}=M,[de,Ce]=j.getNormalOpen().split(":").map(Se=>(e.f9T(),parseInt(Se)));F=Se=>{var De;return De=Se?f.tickFromDate(Se,null,null,!0):z,[f.pixelFromTick(De,V),De]},P={y0:ee,y1:H,type:S,confineToPanel:v};var[pe]=F();if(pe&&(pe-=.5,f.plotLine(Object.assign(P,{x0:pe,x1:pe,color:L?le:oe,pattern:[6,6],lineWidth:1,opacity:L?.5:1})),g.efficientDOMUpdate(he.style,"visibility",""),f.updateChartAccessories()),G){if(E="A",E+="nc",E+="hor Date",O=x?new Date(C[C.length-1].DT):g.strToDate(U[E]),j.market_def&&j.market_def.market_tz&&(O=new b.Date(O,j.market_def.market_tz)),!x){var[xe,Te,be]=(U["Anchor Date"]||"").split("-");be||([,xe,Te,be]=xe.match(/([0-9]{4})([0-9]{2})([0-9]{2})/)),e.B42(92),O.setFullYear(xe,e.o_T(Te,0,"1"),be)}var[_e,Be,Pe=0]=(U["Anchor Time"]||"").split(":");!Be&&Be!==0&&([,_e,Be,Pe]=_e.match(/([0-9]{2})([0-9]{2})([0-9]{2})/)),O.setHours(_e,Be,Pe),I=A&&(O.getHours()>de||O.getHours()===de&&O.getMinutes()>=Ce),I&&O.setDate(O.getDate()-1);var[Ie,Le]=F(O);B=new Date(O),B.setHours(...j.getNormalClose().split(":")),I&&B.setDate(B.getDate()+1);var[Fe]=B&&F(B)||[];if(x&&(Ie>$||Fe>$)){N=new Date(O);do N.setDate(N.getDate()-1);while(j&&!j.isMarketDate(N));var[Ue,at]=F(N);Ue>ie&&(O=N,Ie=Ue,Le=at)}if(Ie-=.5,f.plotLine(Object.assign(P,{x0:Ie,x1:Ie,color:oe,pattern:"solid",lineWidth:ne,opacity:ce||m.highlight?"1"|1:.5})),M.currentPixel=Ie,ce){G.style.display="",e.B42(131);var He=e.C2Z(12,183,5,1,16);e.q08(132);var Me=e.o_T(23,5,4,10,3);G.style.height=Math.max(Math.min("25"^0,te/He),Me)+"px",R=G.getBoundingClientRect(),q=Math.max(Math.min(Q-R.height/2,H-3-R.height),ee+("3"|1)),e.q08(0),G.style.top=e.C2Z("px",q),e.q08(133);var ge=e.o_T(7,58,2,13,19);G.style.left=(z||z===0?pe:Ie)-R.width/ge+"px",re.style.cursor="ew-resize"}else Y="a",Y+="uto",G.style.display="none",re.style.cursor=Y;m.currentAnchorTime=O,m.currentAnchorTick=Le}}},g.Studies.studyScriptLibrary={},g.Studies.studyLibrary=g.Studies.studyLibrary||{},g.extend(g.Studies.studyLibrary,{ma:{name:o,overlay:!0,calculateFN:g.Studies.calculateMovingAverage,inputs:{Period:50,Field:"field",Type:h,Offset:0},outputs:{MA:s}},"STD Dev":{name:n,calculateFN:g.Studies.calculateStandardDeviation,inputs:{Period:14,Field:i,"Standard Deviations":2,"Moving Average Type":"ma"},attributes:{"Standard Deviations":{min:"0.1"*1,step:.1}}},"True Range":{name:"True Range",calculateFN:g.Studies.calculateStudyATR,inputs:{},outputs:{"True Range":"auto"}},volume:{name:"Volume Chart",range:r,yAxis:{ground:!0},seriesFN:g.Studies.createVolumeChart,calculateFN:g.Studies.calculateVolume,inputs:{},outputs:{"Up Volume":"#8cc176","Down Volume":a}},MACross:{name:"Moving Average Cross",overlay:!0,calculateFN:g.Studies.calculateMultMA,inputs:{"MA 1 Period":20,"MA 2 Period":50,"MA 3 Period":200,Field:"field","Moving Average Type":"ma",Offset:0},outputs:{"MA 1":t,"MA 2":"#00afed","MA 3":"#f4932f"}}})};Js=W=>{var e,t,a;e="un",e+="def",e+="ine",e+="d",t=typeof _CIQ!==e?_CIQ:W.CIQ,t.ChartEngine.Driver?(t.ChartEngine.Driver.Lookup=function(r){},t.ChartEngine.Driver.Lookup.prototype.acceptText=function(r,i,n,s){this.cb}):(a="symbo",a+="l",a+="LookupBase feat",a+="ure requires first activating quoteFeed feature.",console.error(a))};Ks=W=>{var e,t;e="undefi",e+="n",e+="ed",t=typeof _CIQ!==e?_CIQ:W.CIQ,t.ThemeHelper=t.ThemeHelper||function(a){var r,i,n,s,h,o,l;r="stx",r+="_",r+="candle_do",r+="wn",i="stx_candl",i+="e_",i+="u",i+="p",n="stx_c",n+="andle_s",n+="hadow_even",s="Can",s+="dle/",s+="Bar",h="Candle",h+="/Bar",this.params=a,o=a.stx,l="#FFFFFF",o.chart.container&&(l=getComputedStyle(o.chart.container).backgroundColor,t.isTransparent(l)&&(l=o.containerColor)),this.settings.chart.Background.color=t.hexToRgba(l),this.settings.chart["Grid Lines"].color=t.hexToRgba(o.canvasStyle("stx_grid").color),this.settings.chart["Grid Dividers"].color=t.hexToRgba(o.canvasStyle("stx_grid_dark").color),X.f9T(),this.settings.chart["Axis Text"].color=t.hexToRgba(o.canvasStyle("stx_xaxis").color),this.settings.chartTypes[h].up.color=t.hexToRgba(o.canvasStyle("stx_candle_up").color),this.settings.chartTypes["Candle/Bar"].down.color=t.hexToRgba(o.canvasStyle("stx_candle_down").color),this.settings.chartTypes["Candle/Bar"].up.wick=t.hexToRgba(o.canvasStyle("stx_candle_shadow_up").color),this.settings.chartTypes["Candle/Bar"].down.wick=t.hexToRgba(o.canvasStyle("stx_candle_shadow_down").color),this.settings.chartTypes[s].even.wick=t.hexToRgba(o.canvasStyle(n).color),this.settings.chartTypes["Candle/Bar"].up.border=t.hexToRgba(o.canvasStyle(i).borderLeftColor),this.settings.chartTypes["Candle/Bar"].down.border=t.hexToRgba(o.canvasStyle(r).borderLeftColor),t.isTransparent(o.canvasStyle("stx_candle_up").borderLeftColor)&&(this.settings.chartTypes["Candle/Bar"].up.border=null),t.isTransparent(o.canvasStyle("stx_candle_down").borderLeftColor)&&(this.settings.chartTypes["Candle/Bar"].down.border=null),this.settings.chartTypes.Line.color=t.hexToRgba(o.canvasStyle("stx_line_chart").color),this.settings.chartTypes.Mountain.color=t.hexToRgba(o.canvasStyle("stx_mountain_chart").backgroundColor),this.settings.chartTypes.Mountain.basecolor=t.hexToRgba(o.canvasStyle("stx_mountain_chart").color)},t.ThemeHelper.prototype.settings={chart:{Background:{color:null},"Grid Lines":{color:null},"Grid Dividers":{color:null},"Axis Text":{color:null}},chartTypes:{"Candle/Bar":{up:{color:null,wick:null,border:null},down:{color:null,wick:null,border:null},even:{color:null,wick:null,border:null}},Line:{color:null},Mountain:{color:null,basecolor:null}}},t.ThemeHelper.prototype.update=function(a){var r=X,i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k;i="c",i+="o",i+="lor",n="back",n+="groun",n+="dColor",s="s",s+="tx_mountain_chart",h="co",h+="lo",h+="r",o="stx",o+="_candle_down",l="borderLeftColo",l+="r",u="c",u+="olo",u+="r",c="stx_shadow_",c+="up",p="co",p+="l",r.Q1Y(),p+="or",y="c",y+="ol",y+="o",y+="r",d="Grid Divid",d+="ers",g="c",g+="olor",b="s",b+="tx",b+="_",b+="grid",a||(a=this.params.stx),f={stx_candle_up:{stx_candle_up:!0,stx_bar_up:!0,stx_hollow_candle_up:!0,stx_line_up:!0,stx_baseline_up:!0},stx_candle_down:{stx_candle_down:!0,stx_bar_down:!0,stx_hollow_candle_down:!0,stx_line_down:!0,stx_baseline_down:!0},stx_candle_even:{stx_hollow_candle_even:!0,stx_bar_even:!0},stx_shadow_up:{stx_candle_shadow_up:!0},stx_shadow_down:{stx_candle_shadow_down:!0},stx_shadow_even:{stx_candle_shadow_even:!0},stx_line_chart:{stx_bar_chart:!0,stx_line_chart:!0},stx_grid:{stx_grid:!0},stx_grid_dark:{stx_grid_dark:!0},stx_xaxis:{stx_xaxis_dark:!0,stx_xaxis:!0,stx_yaxis:!0,stx_yaxis_dark:!0,stx_grid_border:!0},stx_mountain_chart:{stx_mountain_chart:!0},stx_market_session:{stx_market_session:!0}},a.chart.container.style.backgroundColor=this.settings.chart.Background.color;function D(x,A,T){var _;_=f[x];for(var L in _)a.setStyle(L,A,T)}if(a.defaultColor="",D(b,g,this.settings.chart["Grid Lines"].color),D("stx_grid_dark","color",this.settings.chart[d].color),D("stx_xaxis","color",this.settings.chart["Axis Text"].color),m=this.settings.chartTypes["Candle/Bar"],!m.even){r.B42(8),C=r.o_T("815397590",0),r.q08(44),S=-r.o_T(4,"1493427860"),w=2;for(var v=1;r.X30(v.toString(),v.toString().length,74348)!==C;v++)k="s",k+="tx_cand",k+="le_shadow_",k+="even",m.even={color:null,wick:t.hexToRgba(a.canvasStyle(k).color),border:null},w+=2;r.Y5b(w.toString(),w.toString().length,28953)!==S&&(m.even={color:1,wick:t.hexToRgba(a.canvasStyle("").color),border:1})}D("stx_candle_up","color",m.up.color),D("stx_candle_down",y,m.down.color),D("stx_candle_even",p,m.even.color),D(c,u,m.up.wick),D("stx_shadow_down","color",m.down.wick),D("stx_shadow_even","color",m.even.wick),a.setStyle("stx_candle_up",l,m.up.border),a.setStyle(o,"borderLeftColor",m.down.border),D("stx_line_chart",h,this.settings.chartTypes.Line.color),a.setStyle("stx_mountain_chart","borderTopColor",t.hexToRgba(this.settings.chartTypes.Mountain.color,"1"<<0)),a.setStyle(s,n,t.hexToRgba(this.settings.chartTypes.Mountain.color,.5)),a.setStyle("stx_mountain_chart",i,t.hexToRgba(this.settings.chartTypes.Mountain.basecolor,"0.01"-0)),a.draw()},t.ChartEngine.prototype.setThemeSettings=function(a){var r,i;this.styles={},X.Q1Y(),this.chart.container.style.backgroundColor="",this.defaultColor="",a&&(r=new t.ThemeHelper({stx:this}),r.settings=a,r.update()),this.updateListeners("theme"),this.changeOccurred("theme"),this.displayInitialized&&(i="the",i+="m",i+="e",this.headsUpHR(),this.clearPixelCache(),this.updateListeners(i),this.draw())}};Gs=W=>{var e=X,t,a,r,i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q,j,Z,ee,$,ie,te,re,H,U,G,ae,ne,oe,le,he,ue,ce,de,Ce,pe,xe,Te,be,_e,Be,Pe,Ie,Le,Fe,Ue,at,He,Me,ge,Se,De,Re,Qe,Lt,Mt,xt,st,ut,it,Ft,pt,$e,St,gt,ht,Je,et,mt,ct,lt,rt,ot,Oe,We,Et,Bt,yt,Nt,It,Kt,zt,Wt,fi,Ht,Gt,bt,qt,ni,Vt,ft,jt,ti,si,$t,ei,Zt,dr,pr,$r,ea,ta,ia,ra,aa,wi,Ti,gr,na,_i,sa,Di,Li,oa,la,mr,Mi,ha,yr,ua,ca,fa,da,pa,ga,vr,br,Cr,xr,kt,sn,on,Sr,Pi,ma,kr,Fi,ya,Ei,va,Ar,Ii,ba,Ca,xa,Sa,wr,ka,Oi,Ni,Bi,Aa,wa,Ta,Wi,Tr,_r,Ri,_a,Da,La,Dr,qi,Yi,Ma,Lr,zi,Pa,Mr,Fa,Ea,Hi,Pr,Vi,Ia,Qi,ji,Ui,Fr,Oa,Zi,Na,Er,Ba,Xi,Ji,Ki,Ir,Or,Nr,Wa,Br,Wr,Gi,Rr,$i,Ra;t="Su",t+="n>=22",a="O",a+="c",a+="t",r="S",r+="e",r+="p",i="A",i+="p",i+="r",n="Su",n+="n>",n+="=9",s="Sun>",s+="=1",h="Su",h+="n>=",h+="1",h+="5",o="Fe",o+="b",l="O",l+="c",l+="t",u="S",u+="u",u+="n>",u+="=8",c="Su",c+="n",c+=">=",c+="1",p="m",p+="ax",y="S",y+="u",y+="n>=",y+="1",d="ma",d+="x",g="No",g+="v",b="S",b+="un",b+=">=8",f="M",f+="ar",m="Su",m+="n>",m+="=1",C="No",C+="v",S="ma",S+="x",w="m",w+="a",w+="x",k="las",k+="tSun",D="Oc",D+="t",v="m",v+="ax",x="lastS",x+="un",A="l",A+="as",A+="tSu",A+="n",T="m",T+="a",T+="x",_="S",_+="e",_+="p",L="m",L+="a",L+="x",M="A",M+="pr",F="ma",F+="x",P="S",P+="ep",E="S",E+="un",E+=">=1",O="2",O+="0",I="De",I+="c",B="J",B+="a",B+="n",N="Su",N+="n>=",N+="1",R="S",R+="un",R+=">=",R+="1",q="O",q+="c",q+="t",Y="m",Y+="ax",z="Ap",z+="r",V="m",V+="a",V+="x",K="m",K+="ax",Q="Su",Q+="n>",Q+="=1",j="A",j+="p",j+="r",Z="Su",Z+="n>=1",ee="l",ee+="ast",ee+="Fr",ee+="i",$="lastF",$+="ri",ie="M",ie+="a",ie+="r",te="m",te+="a",te+="x",re="m",re+="ax",H="2",H+="9",U="M",U+="ar",G="S",G+="at",G+=">=2",G+="4",ae="Sat",ae+=">=2",ae+="4",ne="M",ne+="a",ne+="r",oe="las",oe+="tS",oe+="u",oe+="n",le="O",le+="c",le+="t",he="M",he+="a",he+="r",ue="2",ue+="1",ce="2",ce+="1",de="2",de+="0",Ce="o",Ce+="nly",pe="M",pe+="a",pe+="r",xe="m",xe+="a",xe+="x",Te="M",Te+="a",Te+="r",be="+0",be+="0",_e="O",_e+="c",_e+="t",Be="m",Be+="a",Be+="x",Pe="W",Pe+="A",Pe+="T",Ie="A",Ie+="p",Ie+="r",Le="Se",Le+="p",Fe="F",Fe+="e",Fe+="b",Ue="A",Ue+="p",Ue+="r",at="1",at+="0",He="3",He+="0",Me="o",Me+="nly",ge="1",ge+="6",Se="M",Se+="a",Se+="y",De="3",De+="1",Re="M",Re+="a",Re+="y",Qe="J",Qe+="u",Qe+="n",Lt="J",Lt+="un",Mt="onl",Mt+="y",xt="la",xt+="stS",xt+="u",xt+="n",st="M",st+="a",st+="r",ut="last",ut+="Sun",it="Asia/Riy",it+="adh",Ft="U",Ft+="T",Ft+="C",pt="As",pt+="ia",pt+="/Yangon",$e="-03",$e+="/-02",St="C",St+="h",St+="ile",gt="-",gt+="03/-02",ht="-",ht+="0",ht+="3/-",ht+="02",Je="A",Je+="S",Je+="T",et="E",et+="%",et+="sT",mt="H",mt+="aiti",ct="C%",ct+="sT",lt="C",lt+="%",lt+="sT",rt="M",rt+="exi",rt+="co",ot="A",ot+="%",ot+="sT",Oe="C",Oe+="an",Oe+="a",Oe+="da",We="N",We+="%",We+="s",We+="T",Et="Can",Et+="ada",Bt="M",Bt+="S",Bt+="T",yt="M",yt+="%",yt+="s",yt+="T",Nt="U",Nt+="S",It="C",It+="%s",It+="T",Kt="E%s",Kt+="T",zt="Europe/Be",zt+="lgrade",Wt="E",Wt+="U",fi="+",fi+="11",e.Q1Y(),Ht="+",Ht+="1",Ht+="0",Gt="+",Gt+="0",Gt+="6",bt="+0",bt+="3",qt="+",qt+="03",ni="M",ni+="SK",Vt="EE%",Vt+="s",Vt+="T",ft="C",ft+="E",ft+="%",ft+="sT",jt="CE",jt+="%s",jt+="T",ti="E",ti+="U",si="Th",si+="ule",$t="M",$t+="E%sT",ei="C",ei+="-",ei+="E",ei+="ur",Zt="CE",Zt+="%sT",dr="I",dr+="ST/G",dr+="MT",pr="GMT/",pr+="BS",pr+="T",$r="U",$r+="TC",ea="S",ea+="ST",ta="+1245/+134",ta+="5",ia="+11",ia+="/+12",ra="+1",ra+="4",aa="L",aa+="H",wi="A",wi+="E",wi+="%",wi+="sT",Ti="A",Ti+="E",Ti+="%",Ti+="sT",gr="+",gr+="0",gr+="4",na="+",na+="07",_i="E",_i+="E",_i+="%",_i+="sT",sa="+",sa+="0545",Di="+08",Di+="/",Di+="+",Di+="09",Li="+",Li+="0",Li+="7/",Li+="+08",oa="EE",oa+="%sT",la="K",la+="ST",mr="Jor",mr+="da",mr+="n",Mi="Z",Mi+="i",Mi+="o",Mi+="n",ha="IS",ha+="T",yr="E",yr+="UA",yr+="sia",ua="C%",ua+="sT",ca="+",ca+="0630",fa="+06/+",fa+="07",da="%",da+="s",pa="C",pa+="E%sT",ga="Namibi",ga+="a",vr="E",vr+="A",vr+="T",br="E",br+="E%s",br+="T",Cr="-",Cr+="0",Cr+="1",xr=typeof _CIQ<"u"?_CIQ:W.CIQ,kt=typeof _timezoneJS<"u"?_timezoneJS:W.timezoneJS,sn=831513691,on=1646319422,Sr=2;for(var qa="1"-0;e.Y5b(qa.toString(),qa.toString().length,16310)!==sn;qa++)Pi="(UTC-05:00) P",Pi+="ort-au-",Pi+="Pr",Pi+="ince",ma="Asia/Bei",ma+="rut",kr="(UTC+02:0",kr+="0) B",kr+="eirut",Fi="(UTC+",Fi+="09:0",Fi+="0) Pyon",Fi+="gyang",ya="(UTC+10:00) Guam, Port Mor",ya+="esby",Ei="A",Ei+="sia/B",Ei+="ei",Ei+="rut",va="Europe/",va+="Kaliningrad",Ar="(U",Ar+="TC+02:00) ",Ar+="Harare, Johannesburg",Ii="Asia/K",Ii+="ual",Ii+="a_L",Ii+="umpur",ba="Au",ba+="stralia/Brisbane",Ca="(UTC+05:",Ca+="00) Yekaterinburg",xa="(UTC+02:00) Je",xa+="rusalem",Sa="(UT",Sa+="C+03:00) Nairobi",wr="(UTC+02:0",wr+="0) B",wr+="eirut",ka="(UTC-03:00) B",ka+="uenos Aires",Oi="P",Oi+="acifi",Oi+="c/Kiri",Oi+="timati",Ni="Austr",Ni+="alia",Ni+="/Brisban",Ni+="e",Bi="(UT",Bi+="C+0",Bi+="2:00) Beiru",Bi+="t",Aa="(UTC+02:00) Jerusale",Aa+="m",wa="(UTC-05:00) Port-au-Princ",wa+="e",Ta="(UTC+01:00) Sa",Ta+="rajevo, Skopje, Warsaw, Zagreb",Wi="Europe/K",Wi+="alinin",Wi+="gr",Wi+="ad",Tr="(UTC+13:00) S",Tr+="a",Tr+="moa",_r="As",_r+="ia",_r+="/Tokyo",Ri="Ameri",Ri+="ca/Port-",Ri+="au-Pri",Ri+="nce",_a="Australia",_a+="/Brisbane",Da="(UTC-01:0",Da+="0) Azores",La="America/Sao_P",La+="aulo",Dr="Pa",Dr+="cific",Dr+="/Chatham",xr.timeZoneMap={"(UTC-11:00) American Samoa, Midway Island":"(UTC-08:00) Pacific Time (US and Canada), Tijuana","(UTC-10:00) Hawaii":"(UTC+09:30) Adelaide","(UTC-09:00) Alaska":Dr,"(UTC-08:00) Pacific Time (US and Canada), Tijuana":"(UTC+05:45) Kathmandu","(UTC-07:00) Arizona":"(UTC-06:00) Saskatchewan","(UTC-07:00) Chihuahua, Mazatlan":La,"(UTC-07:00) Mountain Time (US and Canada)":"(UTC+06:00) Almaty","(UTC-06:00) Central America":"Asia/Beirut","(UTC-06:00) Central Time (US and Canada)":Da,"(UTC-06:00) Guadalajara, Mexico City, Monterrey":_a,"(UTC-06:00) Saskatchewan":"America/Sao_Paulo","(UTC-05:00) Bogota, Lima, Quito, Rio Branco":Ri,"(UTC-05:00) Eastern Time (US and Canada)":_r,"(UTC-05:00) Havana":"Asia/Amman","(UTC-05:00) Port-au-Prince":"Europe/Kaliningrad","(UTC-04:00) Asuncion":"Asia/Vladivostok","(UTC-04:00) Santiago":Tr,"(UTC-04:00) Caracas":Wi,"(UTC-04:00) Atlantic Time (Canada)":Ta,"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan":"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi","(UTC-03:30) Newfoundland and Labrador":"Australia/Adelaide","(UTC-03:00) Cancun, Jamaica, Panama":"(UTC-04:00) Asuncion","(UTC-03:00) Buenos Aires":"(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague","(UTC-03:00) Punta Arenas":"(UTC+04:00) Astrakhan, Samara, Saratov, Ulyanovsk","(UTC-03:00) Montevideo":wa,"(UTC-03:00) Sao Paulo":"Australia/Adelaide","(UTC-02:00) Mid-Atlantic":"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi","(UTC-01:00) Azores":Aa,"(UTC-01:00) Cape Verde Islands":"(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague","(UTC) Greenwich Mean Time, Reykjavik":"(UTC+06:00) Omsk","(UTC) Dublin":"Asia/Dhaka","(UTC) Lisbon, London":"(UTC+03:00) Nairobi","(UTC+01:00) Algiers, Tunis":"Asia/Karachi","(UTC+01:00) Casablanca":"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris","(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna":"(UTC-04:00) Asuncion","(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague":"Pacific/Chatham","(UTC+01:00) Brussels, Copenhagen, Madrid, Paris":"(UTC+09:30) Adelaide","(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb":"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi","(UTC+02:00) Kaliningrad":Bi,"(UTC+02:00) Athens, Bucharest":"(UTC+14:00) Kiritimati","(UTC+02:00) Cairo":"(UTC+07:00) Barnaul, Novosibirsk, Tomsk","(UTC+02:00) Harare, Johannesburg":"(UTC-05:00) Eastern Time (US and Canada)","(UTC+02:00) Helsinki, Kiev, Riga, Sofia, Tallinn, Vilnius":"(UTC+08:00) Brunei, Kuala Lumpur, Singapore","(UTC+02:00) Cyprus":Ni,"(UTC+02:00) Beirut":Oi,"(UTC+02:00) Damascus":"(UTC+03:30) Tehran","(UTC+02:00) Jerusalem":"(UTC+06:00) Almaty","(UTC+02:00) Amman":"(UTC) Dublin","(UTC+03:00) Istanbul":ka,"(UTC+03:00) Baghdad, Kuwait, Qatar, Riyadh":"(UTC+12:45) Chatham","(UTC+03:00) Minsk, Moscow, Kirov, Simferopol":"(UTC+12:45) Chatham","(UTC+03:00) Volgograd":wr,"(UTC+03:00) Nairobi":"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi","(UTC+03:30) Tehran":Sa,"(UTC+04:00) Baku":"Asia/Kamchatka","(UTC+04:00) Dubai, Muscat":"(UTC+02:00) Beirut","(UTC+04:00) Astrakhan, Samara, Saratov, Ulyanovsk":"(UTC+07:00) Novokuznetsk","(UTC+04:30) Kabul":"(UTC+03:00) Nairobi","(UTC+05:00) Karachi, Tashkent":"(UTC+02:00) Jerusalem","(UTC+05:00) Yekaterinburg":"(UTC+03:30) Tehran","(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi":"Pacific/Chatham","(UTC+05:45) Kathmandu":xa,"(UTC+06:00) Almaty":Ca,"(UTC+06:00) Omsk":"(UTC-08:00) Pacific Time (US and Canada), Tijuana","(UTC+06:00) Astana, Dhaka":"(UTC+06:00) Almaty","(UTC+06:30) Yangon":"(UTC+04:00) Dubai, Muscat","(UTC+07:00) Bangkok, Jakarta, Vietnam":"(UTC-07:00) Mountain Time (US and Canada)","(UTC+07:00) Hovd":"(UTC+05:45) Kathmandu","(UTC+07:00) Krasnoyarsk":ba,"(UTC+07:00) Novokuznetsk":Ii,"(UTC+07:00) Barnaul, Novosibirsk, Tomsk":"(UTC+12:00) Anadyr, Kamchatka","(UTC+08:00) Beijing, Chongqing, Hong Kong SAR":"(UTC+03:00) Minsk, Moscow, Kirov, Simferopol","(UTC+08:00) Brunei, Kuala Lumpur, Singapore":"Australia/Adelaide","(UTC+08:00) Irkutsk":"(UTC+09:30) Adelaide","(UTC+08:00) Choibalsan, Ulaanbaatar":"Pacific/Apia","(UTC+08:00) Manila, Taipei":"Europe/Kaliningrad","(UTC+08:00) Perth":"(UTC+01:00) Algiers, Tunis","(UTC+08:45) Eucla":Ar,"(UTC+09:00) Osaka, Sapporo, Tokyo":va,"(UTC+09:00) Pyongyang":"(UTC+07:00) Barnaul, Novosibirsk, Tomsk","(UTC+09:00) Seoul":"Europe/Kaliningrad","(UTC+09:00) Chita, Khandyga, Yakutsk":Ei,"(UTC+09:30) Adelaide":"Asia/Magadan","(UTC+09:30) Darwin":ya,"(UTC+10:00) Brisbane":Fi,"(UTC+10:00) Canberra, Melbourne, Sydney":"(UTC+07:00) Krasnoyarsk","(UTC+10:00) Guam, Port Moresby":"(UTC+07:00) Bangkok, Jakarta, Vietnam","(UTC+10:00) Ust-Nera, Vladivostok":kr,"(UTC+11:00) Noumea, Solomon Islands":"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb","(UTC+11:00) Magadan":"(UTC+03:00) Nairobi","(UTC+11:00) Sakhalin, Srednekolymsk":"(UTC+04:00) Astrakhan, Samara, Saratov, Ulyanovsk","(UTC+12:00) Anadyr, Kamchatka":"Asia/Kamchatka","(UTC+12:00) Auckland, Wellington":ma,"(UTC+12:00) Fiji":Pi,"(UTC+12:45) Chatham":"(UTC-09:00) Alaska","(UTC+13:00) Tonga":"(UTC+08:00) Beijing, Chongqing, Hong Kong SAR","(UTC+13:00) Samoa":"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi","(UTC+14:00) Kiritimati":"(UTC+08:45) Eucla"},Sr+=2;e.X30(Sr.toString(),Sr.toString().length,35301)!==on&&(qi="As",qi+="ia/Vl",qi+="adivosto",qi+="k",Yi="As",Yi+="ia/Yak",Yi+="u",Yi+="tsk",Ma="Asia/Pyong",Ma+="yang",Lr="Asia/T",Lr+="o",Lr+="kyo",zi="Aust",zi+="ralia",zi+="/Eucl",zi+="a",Pa="Asia/",Pa+="Irkutsk",Mr="As",Mr+="ia/Ku",Mr+="ala_Lumpur",Fa="As",Fa+="ia/Yekaterinburg",Ea="Asi",Ea+="a/Karachi",Hi="Asia",Hi+="/K",Hi+="ab",Hi+="ul",Pr="A",Pr+="s",Pr+="ia/Tehran",Vi="Af",Vi+="r",Vi+="i",Vi+="ca/Nairobi",Ia="Asia/",Ia+="Riyadh",Qi="A",Qi+="sia",Qi+="/",Qi+="Damascus",ji="A",ji+="s",ji+="ia/Nicosi",ji+="a",Ui="Europ",Ui+="e/Buchare",Ui+="s",Ui+="t",Fr="Euro",Fr+="pe/Sara",Fr+="jevo",Oa="Europ",Oa+="e/Brussels",Zi="A",Zi+="fr",Zi+="ic",Zi+="a/Tunis",Na="Eur",Na+="ope/London",Er="U",Er+="T",Er+="C",Ba="Atlantic/Azor",Ba+="es",Xi="A",Xi+="tlantic/",Xi+="South_Georg",Xi+="ia",Ji="Ameri",Ji+="ca",Ji+="/Sa",Ji+="o_Paulo",Ki="Ame",Ki+="rica",Ki+="/Pun",Ki+="ta_Arenas",Ir="America/",Ir+="Argentina/Buen",Ir+="os_Aires",Or="Ame",Or+="ri",Or+="ca/Halifax",Nr="Ame",Nr+="ric",Nr+="a/Havana",Wa="Americ",Wa+="a/New_York",Br="Ameri",Br+="ca/Bo",Br+="gota",Wr="Amer",Wr+="ica",Wr+="/Mexico_City",Gi="A",Gi+="meri",Gi+="ca/Cost",Gi+="a_Rica",Rr="America",Rr+="/Denve",Rr+="r",$i="A",$i+="merica/J",$i+="unea",$i+="u",Ra="Pacific/Honolul",Ra+="u",xr.timeZoneMap={"(UTC-11:00) American Samoa, Midway Island":"Pacific/Pago_Pago","(UTC-10:00) Hawaii":Ra,"(UTC-09:00) Alaska":$i,"(UTC-08:00) Pacific Time (US and Canada), Tijuana":"America/Los_Angeles","(UTC-07:00) Arizona":"America/Phoenix","(UTC-07:00) Chihuahua, Mazatlan":"America/Chihuahua","(UTC-07:00) Mountain Time (US and Canada)":Rr,"(UTC-06:00) Central America":Gi,"(UTC-06:00) Central Time (US and Canada)":"America/Chicago","(UTC-06:00) Guadalajara, Mexico City, Monterrey":Wr,"(UTC-06:00) Saskatchewan":"America/Regina","(UTC-05:00) Bogota, Lima, Quito, Rio Branco":Br,"(UTC-05:00) Eastern Time (US and Canada)":Wa,"(UTC-05:00) Havana":Nr,"(UTC-05:00) Port-au-Prince":"America/Port-au-Prince","(UTC-04:00) Asuncion":"America/Asuncion","(UTC-04:00) Santiago":"America/Santiago","(UTC-04:00) Caracas":"America/Caracas","(UTC-04:00) Atlantic Time (Canada)":Or,"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan":"America/Puerto_Rico","(UTC-03:30) Newfoundland and Labrador":"America/St_Johns","(UTC-03:00) Cancun, Jamaica, Panama":"America/Panama","(UTC-03:00) Buenos Aires":Ir,"(UTC-03:00) Punta Arenas":Ki,"(UTC-03:00) Montevideo":"America/Montevideo","(UTC-03:00) Sao Paulo":Ji,"(UTC-02:00) Mid-Atlantic":Xi,"(UTC-01:00) Azores":Ba,"(UTC-01:00) Cape Verde Islands":"Atlantic/Cape_Verde","(UTC) Greenwich Mean Time, Reykjavik":Er,"(UTC) Dublin":"Europe/Dublin","(UTC) Lisbon, London":Na,"(UTC+01:00) Algiers, Tunis":Zi,"(UTC+01:00) Casablanca":"Africa/Casablanca","(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna":"Europe/Amsterdam","(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague":"Europe/Belgrade","(UTC+01:00) Brussels, Copenhagen, Madrid, Paris":Oa,"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb":Fr,"(UTC+02:00) Kaliningrad":"Europe/Kaliningrad","(UTC+02:00) Athens, Bucharest":Ui,"(UTC+02:00) Cairo":"Africa/Cairo","(UTC+02:00) Harare, Johannesburg":"Africa/Johannesburg","(UTC+02:00) Helsinki, Kiev, Riga, Sofia, Tallinn, Vilnius":"Europe/Helsinki","(UTC+02:00) Cyprus":ji,"(UTC+02:00) Beirut":"Asia/Beirut","(UTC+02:00) Damascus":Qi,"(UTC+02:00) Jerusalem":"Asia/Jerusalem","(UTC+02:00) Amman":"Asia/Amman","(UTC+03:00) Istanbul":"Europe/Istanbul","(UTC+03:00) Baghdad, Kuwait, Qatar, Riyadh":Ia,"(UTC+03:00) Minsk, Moscow, Kirov, Simferopol":"Europe/Moscow","(UTC+03:00) Volgograd":"Europe/Volgograd","(UTC+03:00) Nairobi":Vi,"(UTC+03:30) Tehran":Pr,"(UTC+04:00) Baku":"Asia/Baku","(UTC+04:00) Dubai, Muscat":"Asia/Dubai","(UTC+04:00) Astrakhan, Samara, Saratov, Ulyanovsk":"Europe/Samara","(UTC+04:30) Kabul":Hi,"(UTC+05:00) Karachi, Tashkent":Ea,"(UTC+05:00) Yekaterinburg":Fa,"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi":"Asia/Kolkata","(UTC+05:45) Kathmandu":"Asia/Kathmandu","(UTC+06:00) Almaty":"Asia/Almaty","(UTC+06:00) Omsk":"Asia/Omsk","(UTC+06:00) Astana, Dhaka":"Asia/Dhaka","(UTC+06:30) Yangon":"Asia/Yangon","(UTC+07:00) Bangkok, Jakarta, Vietnam":"Asia/Bangkok","(UTC+07:00) Hovd":"Asia/Hovd","(UTC+07:00) Krasnoyarsk":"Asia/Krasnoyarsk","(UTC+07:00) Novokuznetsk":"Asia/Novokuznetsk","(UTC+07:00) Barnaul, Novosibirsk, Tomsk":"Asia/Novosibirsk","(UTC+08:00) Beijing, Chongqing, Hong Kong SAR":"Asia/Hong_Kong","(UTC+08:00) Brunei, Kuala Lumpur, Singapore":Mr,"(UTC+08:00) Irkutsk":Pa,"(UTC+08:00) Choibalsan, Ulaanbaatar":"Asia/Ulaanbaatar","(UTC+08:00) Manila, Taipei":"Asia/Taipei","(UTC+08:00) Perth":"Australia/Perth","(UTC+08:45) Eucla":zi,"(UTC+09:00) Osaka, Sapporo, Tokyo":Lr,"(UTC+09:00) Pyongyang":Ma,"(UTC+09:00) Seoul":"Asia/Seoul","(UTC+09:00) Chita, Khandyga, Yakutsk":Yi,"(UTC+09:30) Adelaide":"Australia/Adelaide","(UTC+09:30) Darwin":"Australia/Darwin","(UTC+10:00) Brisbane":"Australia/Brisbane","(UTC+10:00) Canberra, Melbourne, Sydney":"Australia/Sydney","(UTC+10:00) Guam, Port Moresby":"Pacific/Guam","(UTC+10:00) Ust-Nera, Vladivostok":qi,"(UTC+11:00) Noumea, Solomon Islands":"Pacific/Noumea","(UTC+11:00) Magadan":"Asia/Magadan","(UTC+11:00) Sakhalin, Srednekolymsk":"Asia/Srednekolymsk","(UTC+12:00) Anadyr, Kamchatka":"Asia/Kamchatka","(UTC+12:00) Auckland, Wellington":"Pacific/Auckland","(UTC+12:00) Fiji":"Pacific/Fiji","(UTC+12:45) Chatham":"Pacific/Chatham","(UTC+13:00) Tonga":"Pacific/Tongatapu","(UTC+13:00) Samoa":"Pacific/Apia","(UTC+14:00) Kiritimati":"Pacific/Kiritimati"}),(function(){var er,qr,tr,ir,Ya,ln,rr,ar,oi,Yr,za,Ci,zr,Xt,li,hn,un,cn,Hr;er="Se",er+="pt",er+="em",er+="ber",qr="Au",qr+="g",qr+="ust",tr="S",tr+="a",tr+="turd",tr+="ay",ir="Fr",ir+="i",ir+="da",ir+="y",Ya="T",Ya+="hursday",ln=typeof window<"u"?window:null,rr=ln||(typeof global<"u"?global:{}),kt.VERSION="0.4.11",ar=rr.$||rr.jQuery||rr.Zepto,oi=rr.fleegix,Yr=kt.Days=["Sunday","Monday","Tuesday","Wednesday",Ya,ir,tr],e.Q1Y(),za=kt.Months=["January","February","March","April","May","June","July",qr,er,"October","November","December"],Ci={},zr={},Xt={};for(var hi=0;hi<za.length;hi++)Ci[za[hi].substr(e.o_T("0",0,e.B42(34)),3)]=hi;for(hi=0;hi<Yr.length;hi++)zr[Yr[hi].substr(0,3)]=hi;li=function(fe,ve){e.f9T();var Ae,Ne,Ye,ze;if(typeof fe!="number")throw Ae="not a nu",Ae+="mber: ",e.B42(0),e.o_T(fe,Ae);if(e.q08(77),Ne=e.C2Z(1e3,fe),Ye=fe.toString(),ze=Ye.length,Ne&&ze>ve)return e.B42(8),Ye.substr(e.o_T(ze,ve),ze);for(Ye=[Ye];ze<ve;)Ye.unshift("0"),ze++;return Ye.join("")},hn=function(fe){var ve;if(ve="a",e.f9T(),ve+="sync",!!fe){if(!fe.url)throw new Error("URL must be specified");if(ve in fe||(fe.async=!0),(!oi||typeof oi.xhr>"u")&&(!ar||typeof ar.ajax>"u"))throw new Error("Please use the Fleegix.js XHR module, jQuery ajax, Zepto ajax, or define your own transport mechanism for downloading zone files.");return fe.async?oi&&oi.xhr?oi.xhr.send({url:fe.url,method:"get",handleSuccess:fe.success,handleErr:fe.error}):ar.ajax({url:fe.url,dataType:"text",method:"GET",error:fe.error,success:fe.success}):oi&&oi.xhr?oi.xhr.doReq({url:fe.url,async:!1}):ar.ajax({url:fe.url,async:!1,dataType:"text"}).responseText}},un=1302355703,cn=-1822332017,Hr=2;for(var Ha=1;e.X30(Ha.toString(),Ha.toString().length,"68527"|1)!==un;Ha++)kt.ruleCache={},Hr+=2;e.X30(Hr.toString(),Hr.toString().length,48672)!==cn&&(kt.ruleCache={}),kt.Date=function(){var fe,ve,Ae,Ne,Ye,ze,dt,Ke;if(fe="[o",fe+="bjec",fe+="t Array]",this===kt)throw ve="timezoneJS.Date object must be constructed with 'ne",ve+="w'",ve;switch(Ae=Array.prototype.slice.apply(arguments),Ne=null,Ye=null,ze=[],dt=!1,Object.prototype.toString.call(Ae[0])===fe&&(Ae=Ae[0]),typeof Ae[Ae.length-1]=="string"&&(dt=Date.parse(Ae[Ae.length-1].replace(/GMT[+-]\d+/,"")),(isNaN(dt)||dt===null)&&(Ye=Ae.pop())),Ke=!1,Ae.length){case 0:Ne=new Date;break;case 1:Ne=new Date(Ae[0]),typeof Ae[0]=="string"&&Ae[0].search(/[+-][0-9]{4}/)==-1&&Ae[0].search(/Z/)==-1&&Ae[0].search(/T/)==-1&&(Ke=!0);break;case 2:Ne=new Date(Ae[0],Ae[1]),Ke=!0;break;default:for(var Ct=0;Ct<7;Ct++)ze[Ct]=Ae[Ct]||0;e.q08(2),Ne=new Date(ze[0],ze[1],ze[2],ze[3],ze[4],ze[e.o_T(1,"5")],ze[6]),Ke=!0;break}if(isNaN(Ne.getTime()))throw new Error("Invalid date");this._useCache=!1,this._tzInfo={},this._day=0,this.year=0,this.month=0,this.date=0,this.hours=0,this.minutes=0,this.seconds=0,this.milliseconds=0,e.Q1Y(),this.timezone=Ye||null,Ke?this.setFromDateObjProxy(Ne):this.setFromTimeProxy(Ne.getTime(),Ye)},xr.extend(kt.Date.prototype,{getDate:function(){return e.f9T(),this.date},getDay:function(){return e.f9T(),this._day},getFullYear:function(){return this.year},getMonth:function(){return e.Q1Y(),this.month},getYear:function(){e.q08(0),e.Q1Y();var fe=e.o_T(1267,633);return this.year-fe},getHours:function(){return this.hours},getMilliseconds:function(){return this.milliseconds},getMinutes:function(){return this.minutes},getSeconds:function(){return e.Q1Y(),this.seconds},getUTCDate:function(){return this.getUTCDateProxy().getUTCDate()},getUTCDay:function(){return this.getUTCDateProxy().getUTCDay()},getUTCFullYear:function(){return e.Q1Y(),this.getUTCDateProxy().getUTCFullYear()},getUTCHours:function(){return this.getUTCDateProxy().getUTCHours()},getUTCMilliseconds:function(){return this.getUTCDateProxy().getUTCMilliseconds()},getUTCMinutes:function(){return this.getUTCDateProxy().getUTCMinutes()},getUTCMonth:function(){return this.getUTCDateProxy().getUTCMonth()},getUTCSeconds:function(){return e.Q1Y(),this.getUTCDateProxy().getUTCSeconds()},getTime:function(){e.B42(13),e.Q1Y();var fe=e.C2Z(16,56,12);e.q08(97);var ve=e.o_T(997,5673,17e3,19);return this._timeProxy+this.getTimezoneOffset()*fe*ve},getTimezone:function(){return e.Q1Y(),this.timezone},getTimezoneOffset:function(){return this.getTimezoneInfo().tzOffset},getTimezoneAbbreviation:function(){return e.Q1Y(),this.getTimezoneInfo().tzAbbr},getTimezoneInfo:function(){var fe;return this._useCache?this._tzInfo:(this.timezone?fe=this.timezone==="Etc/UTC"||this.timezone==="Etc/GMT"?{tzOffset:0,tzAbbr:"UTC"}:kt.timezone.getTzInfo(this._timeProxy,this.timezone):fe={tzOffset:this.getLocalOffset(),tzAbbr:null},this._tzInfo=fe,this._useCache=!0,fe)},getUTCDateProxy:function(){var fe;return fe=new Date(this._timeProxy),fe.setUTCMinutes(fe.getUTCMinutes()+this.getTimezoneOffset()),fe},setDate:function(fe){var ve;return e.f9T(),ve="d",ve+="ate",this.setAttribute(ve,fe),this.getTime()},setFullYear:function(fe,ve,Ae){var Ne,Ye,ze;if(Ae!==void 0&&(e.B42(2),this.setAttribute("date",e.o_T(1,"1"))),this.setAttribute("year",fe),ve!==void 0){Ne=1512012643,Ye=-1190465192,ze=2;for(var dt=1;e.Y5b(dt.toString(),dt.toString().length,31795)!==Ne;dt++)this.setAttribute("month",ve),ze+=2;e.Y5b(ze.toString(),ze.toString().length,5984)!==Ye&&this.setAttribute("",ve)}return Ae!==void 0&&this.setAttribute("date",Ae),this.getTime()},setMonth:function(fe,ve){var Ae;return Ae="mo",Ae+="nt",Ae+="h",this.setAttribute(Ae,fe),ve!==void 0&&this.setAttribute("date",ve),this.getTime()},setYear:function(fe){var ve;return ve="ye",ve+="a",ve+="r",fe=Number(fe),0<=fe&&fe<=99&&(fe+=1900),this.setUTCAttribute(ve,fe),this.getTime()},setHours:function(fe,ve,Ae,Ne){var Ye;return this.setAttribute("hours",fe),ve!==void 0&&(Ye="min",Ye+="ut",Ye+="es",this.setAttribute(Ye,ve)),Ae!==void 0&&this.setAttribute("seconds",Ae),Ne!==void 0&&this.setAttribute("milliseconds",Ne),this.getTime()},setMinutes:function(fe,ve,Ae){return e.Q1Y(),this.setAttribute("minutes",fe),ve!==void 0&&this.setAttribute("seconds",ve),Ae!==void 0&&this.setAttribute("milliseconds",Ae),this.getTime()},setSeconds:function(fe,ve){return e.Q1Y(),this.setAttribute("seconds",fe),ve!==void 0&&this.setAttribute("milliseconds",ve),this.getTime()},setMilliseconds:function(fe){return e.f9T(),this.setAttribute("milliseconds",fe),this.getTime()},setTime:function(fe){var ve;if(isNaN(fe))throw ve="Units",ve+=" must be a num",ve+="ber.",new Error(ve);return this.setFromTimeProxy(fe,this.timezone),e.Q1Y(),this.getTime()},setUTCFullYear:function(fe,ve,Ae){var Ne;return Ae!==void 0&&this.setUTCAttribute("date",1),this.setUTCAttribute("year",fe),ve!==void 0&&(Ne="mo",Ne+="n",Ne+="t",Ne+="h",this.setUTCAttribute(Ne,ve)),Ae!==void 0&&this.setUTCAttribute("date",Ae),e.f9T(),this.getTime()},setUTCMonth:function(fe,ve){return this.setUTCAttribute("month",fe),ve!==void 0&&this.setUTCAttribute("date",ve),e.Q1Y(),this.getTime()},setUTCDate:function(fe){return this.setUTCAttribute("date",fe),this.getTime()},setUTCHours:function(fe,ve,Ae,Ne){e.f9T();var Ye,ze,dt,Ke;if(Ye="hou",Ye+="rs",this.setUTCAttribute(Ye,fe),ve!==void 0&&this.setUTCAttribute("minutes",ve),Ae!==void 0){ze=-704705107,dt=1711497898,Ke=2;for(var Ct=1;e.X30(Ct.toString(),Ct.toString().length,91628)!==ze;Ct++)this.setUTCAttribute("",Ae),Ke+=2;e.Y5b(Ke.toString(),Ke.toString().length,53445)!==dt&&this.setUTCAttribute("seconds",Ae)}return Ne!==void 0&&this.setUTCAttribute("milliseconds",Ne),this.getTime()},setUTCMinutes:function(fe,ve,Ae){return this.setUTCAttribute("minutes",fe),ve!==void 0&&this.setUTCAttribute("seconds",ve),Ae!==void 0&&this.setUTCAttribute("milliseconds",Ae),this.getTime()},setUTCSeconds:function(fe,ve){return this.setUTCAttribute("seconds",fe),ve!==void 0&&this.setUTCAttribute("milliseconds",ve),this.getTime()},setUTCMilliseconds:function(fe){return this.setUTCAttribute("milliseconds",fe),e.f9T(),this.getTime()},setFromDateObjProxy:function(fe){this.year=fe.getFullYear(),this.month=fe.getMonth(),this.date=fe.getDate(),this.hours=fe.getHours(),this.minutes=fe.getMinutes(),e.Q1Y(),this.seconds=fe.getSeconds(),this.milliseconds=fe.getMilliseconds(),this._day=fe.getDay(),this._dateProxy=fe,this._timeProxy=Date.UTC(this.year,this.month,this.date,this.hours,this.minutes,this.seconds,this.milliseconds),this._useCache=!1},setFromTimeProxy:function(fe,ve){var Ae,Ne;Ae=new Date(fe),Ne=ve?kt.timezone.getTzInfo(fe,ve,!0).tzOffset:Ae.getTimezoneOffset(),Ae.setTime(fe+(Ae.getTimezoneOffset()-Ne)*6e4),this.setFromDateObjProxy(Ae)},setAttribute:function(fe,ve){var Ae,Ne,Ye;if(isNaN(ve))throw Ae="Units mu",Ae+="st",Ae+=" be a numbe",Ae+="r.",new Error(Ae);Ne=this._dateProxy,Ye=fe==="year"?"FullYear":fe.substr(0,1).toUpperCase()+fe.substr(1),Ne["set"+Ye](ve),this.setFromDateObjProxy(Ne)},setUTCAttribute:function(fe,ve){e.Q1Y();var Ae,Ne,Ye;if(isNaN(ve))throw Ae="Units must be",Ae+=" a number.",new Error(Ae);Ne=fe==="year"?"FullYear":fe.substr(0,1).toUpperCase()+fe.substr(1),Ye=this.getUTCDateProxy(),Ye["setUTC"+Ne](ve),Ye.setUTCMinutes(Ye.getUTCMinutes()-this.getTimezoneOffset()),this.setFromTimeProxy(Ye.getTime()+this.getTimezoneOffset()*6e4,this.timezone)},setTimezone:function(fe){var ve;ve=this.getTimezoneInfo().tzOffset,this.timezone=fe,this._useCache=!1,this.setUTCMinutes(this.getUTCMinutes()-this.getTimezoneInfo().tzOffset+ve)},removeTimezone:function(){e.f9T(),this.timezone=null,this._useCache=!1},valueOf:function(){return e.f9T(),this.getTime()},clone:function(){return e.f9T(),this.timezone?new kt.Date(this.getTime(),this.timezone):new kt.Date(this.getTime())},toGMTString:function(){return this.toString("EEE, dd MMM yyyy HH:mm:ss Z","Etc/GMT")},toLocaleStringIntl:function(){},toLocaleDateString:function(){},toLocaleTimeString:function(){},toSource:function(){},toISOString:function(){return e.f9T(),this.toString("yyyy-MM-ddTHH:mm:ss.SSS","Etc/UTC")+"Z"},toJSON:function(){return this.toISOString()},toDateString:function(){var fe;return fe="EE",fe+="E MMM dd ",fe+="yy",fe+="yy",this.toString(fe)},toTimeString:function(){return e.f9T(),this.toString("H:mm k")},toString:function(fe,ve){var Ae,Ne,Ye,ze,dt;return Ae="yyyy-MM-",Ae+="ddTHH:mm:ss.SSS",fe||(fe=Ae),Ne=fe,Ye=ve?kt.timezone.getTzInfo(this.getTime(),ve):this.getTimezoneInfo(),ze=this,ve&&(ze=this.clone(),ze.setTimezone(ve)),dt=ze.getHours(),Ne.replace(/a+/g,function(){var Ke,Ct,Yt;Ke=-893447756,Ct=-1243836127,Yt=2;for(var ui="1"|0;e.X30(ui.toString(),ui.toString().length,83316)!==Ke;ui++)return!1;return e.Y5b(Yt.toString(),Yt.toString().length,17483)!==Ct?!1:"k"}).replace(/y+/g,function(Ke){return li(ze.getFullYear(),Ke.length)}).replace(/d+/g,function(Ke){return e.f9T(),li(ze.getDate(),Ke.length)}).replace(/m+/g,function(Ke){return li(ze.getMinutes(),Ke.length)}).replace(/s+/g,function(Ke){return li(ze.getSeconds(),Ke.length)}).replace(/S+/g,function(Ke){return e.Q1Y(),li(ze.getMilliseconds(),Ke.length)}).replace(/h+/g,function(Ke){return e.Q1Y(),li(dt%12===0?12:dt%12,Ke.length)}).replace(/M+/g,function(Ke){var Ct,Yt;return Ct=ze.getMonth(),Yt=Ke.length,e.f9T(),Yt>3?kt.Months[Ct]:Yt>2?kt.Months[Ct].substring(0,Yt):(e.B42(0),li(e.o_T(1,Ct),Yt))}).replace(/k+/g,function(){return e.Q1Y(),dt>=12?(dt>12&&(dt-=12),"PM"):"AM"}).replace(/H+/g,function(Ke){return e.Q1Y(),li(dt,Ke.length)}).replace(/E+/g,function(Ke){return Yr[ze.getDay()].substring(0,Ke.length)}).replace(/Z+/gi,function(){return e.f9T(),Ye.tzAbbr})},toUTCString:function(){return this.toGMTString()},civilToJulianDayNumber:function(fe,ve,Ae){var Ne,Ye,ze;ve++,ve>12&&(e.B42(9),Ne=parseInt(e.o_T(12,ve),10),e.B42(80),ve=e.C2Z(12,ve),fe+=Ne),ve<=2&&(e.q08(8),fe-=e.o_T("1",0),ve+=12),e.B42(9),Ne=Math.floor(e.C2Z(100,fe)),e.B42(36);var dt=e.o_T(10,226,23);Ye=2-Ne+Math.floor(Ne/dt),e.q08(134);var Ke=e.o_T(4704,674,3,4695,14);e.q08(55);var Ct=e.o_T(767,1514,2);return ze=Math.floor(365.25*(fe+Ke))+Math.floor(30.6001*(ve+1))+Ae+Ye-Ct,ze},getLocalOffset:function(){return this._dateProxy.getTimezoneOffset()}},!0),kt.timezone=new function(){var fe,ve,Ae,Ne,Ye,ze,dt,Ke,Ct,Yt,ui,tt,fn,dn;fe="l",fe+="azyLoad",ve="asi";function Va(we){var ke,me;return ke=/(\d+)(?::0*(\d*))?(?::0*(\d*))?([wsugz])?$/,e.f9T(),me=we.match(ke),me[1]=parseInt(me[1],10),me[2]=me[2]?parseInt(me[2],10):0,me[3]=me[3]?parseInt(me[3],10):0,me.slice(1,5)}ve+="a",Ae="e",Ae+="urope",Ne="eu";function pn(we){var ke;throw e.f9T(),ke="Timezo",ke+="n",ke+="e '",e.q08(14),new Error(e.C2Z(ke,"' is either incorrect, or not loaded in the timezone registry.",we))}Ne+="rop",Ne+="e";function gn(we,ke){return e.B42(8),e.Q1Y(),-Math.ceil(e.C2Z(ke,we))}Ye="a",Ye+="si",Ye+="a",ze="a",ze+="ntarctic",ze+="a",dt="europ",dt+="e",Ke="sou",Ke+="thamerica",Ct="no",Ct+="rthameric";function Al(we){var ke,me,Ee,qe;if(we[3])return ke=parseInt(we[3],10),me=11,e.q08(30),Ee=e.o_T(0,"31"),we[4]&&(me=Ci[we["4"-0].substr(0,3)],Ee=parseInt(we[5],10)||1),qe=we[6]?Va(we[6]):[0,0,0],[ke,me,Ee,qe[0],qe[1],qe[2]]}function Vr(we){var ke,me,Ee,qe,Ge;if(ke="st",ke+="rin",ke+="g",me=dn[we],me)return me;if(Ee=we.split("/")[0],qe=fn[Ee],qe)return qe;if(Ge=tt.zones[we],typeof Ge===ke)return Vr(Ge);if(!tt.loadedZones.backward)return tt.loadZoneFile("backward"),Vr(we);pn(we)}Ct+="a",Yt="northa",Yt+="meri",Yt+="c",Yt+="a",ui="northam",ui+="er",ui+="ic",ui+="a",tt=this,fn={Etc:"etcetera",EST:"northamerica",MST:"northamerica",HST:ui,EST5EDT:"northamerica",CST6CDT:"northamerica",MST7MDT:"northamerica",PST8PDT:Yt,America:[Ct,Ke],Pacific:"australasia",Atlantic:dt,Africa:"africa",Indian:"africa",Antarctica:ze,Asia:Ye,Australia:"australasia",Europe:"europe",WET:"europe",CET:"europe",MET:"europe",EET:Ne},dn={"Pacific/Honolulu":"northamerica","Atlantic/Bermuda":"northamerica","Atlantic/Cape_Verde":"africa","Atlantic/St_Helena":"africa","Indian/Kerguelen":"antarctica","Indian/Chagos":"asia","Indian/Maldives":"asia","Indian/Christmas":"australasia","Indian/Cocos":"australasia","America/Danmarkshavn":"europe","America/Scoresbysund":"europe","America/Godthab":"europe","America/Thule":"europe","Asia/Istanbul":"europe","Asia/Yekaterinburg":"europe","Asia/Omsk":"europe","Asia/Novosibirsk":"europe","Asia/Krasnoyarsk":Ae,"Asia/Irkutsk":"europe","Asia/Yakutsk":"europe","Asia/Vladivostok":"europe","Asia/Sakhalin":"europe","Asia/Magadan":"europe","Asia/Kamchatka":"europe","Asia/Anadyr":"europe","Africa/Ceuta":"europe",GMT:"etcetera","Europe/Nicosia":"asia"},this.zoneFileBasePath=null,this.zoneFiles=["africa","antarctica",ve,"australasia","backward","etcetera","europe","northamerica","pacificnew","southamerica"];function wl(we,ke,me,Ee){var qe,Ge,_t,Pt,Ut,mi,Qr,ja,Ua,yi,Qt,vi,yn,vn,jr,Ur,xi;if(e.f9T(),qe=typeof we=="number"?new Date(we):we,e.B42(33),Ge=ke[e.o_T("1",0)],_t=ke[0],Pt=Ge.match(/^([0-9]):([0-9][0-9])$/),Pt){Ut="J",Ut+="an",e.q08(103);var Dl=e.C2Z(1,10,329,13,19);e.q08(24);var Ll=e.C2Z(21,12,2,17);e.q08(0);var Ml=e.o_T(57,3);e.B42(0);var Pl=e.o_T(8,2);return e.q08(30),[-1e6,"max","-",Ut,1,[0,0,e.o_T(64,"0")],parseInt(Pt[Dl],Ll)*Ml+parseInt(Pt["2"^0],Pl),"-"]}if(mi=function(At,nt,vt){var Ve,wt,Rt,di;if(Ve=0,nt==="u"||nt==="g"||nt==="z")Ve=0;else if(nt==="s")Ve=_t;else if(nt==="w"||!nt)Ve=gn(_t,vt[6]);else throw e.q08(0),new Error(e.o_T(nt,"unknown type "));e.B42(2),Ve*=e.C2Z(1e3,60),wt=-1902023745,Rt=1701765948,di=2;for(var ii=1;e.X30(ii.toString(),ii.toString().length,35549)!==wt;ii++)return new Date(At.getTime()-Ve);if(e.Y5b(di.toString(),di.toString().length,53788)!==Rt)return new Date(At.getTime()+Ve)},Qr=function(At,nt){var vt,Ve,wt,Rt,di,ii,Xa,sr;return e.q08(2),vt=At[e.C2Z(1,"0")],Ve=At[1],wt=Ve[5],Xt[vt]||(Xt[vt]={}),Xt[vt][Ve]?Rt=Xt[vt][Ve]:(isNaN(Ve[4])?(di="l",di+="a",di+="st",Ve[4].substr(0,4)===di?(Rt=new Date(Date.UTC(vt,Ci[Ve[3]]+1,1,wt[0]-24,wt[1],wt[2],0)),ii=zr[Ve[4].substr(4,3)],Xa="<="):(Rt=new Date(Date.UTC(vt,Ci[Ve[3]],Ve[4].substr("5">>32),wt[0],wt[1],wt[2],"0">>64)),ii=zr[Ve[4].substr(0,3)],Xa=Ve[4].substr(3,2)),sr=Rt.getUTCDay(),Xa===">="?Rt.setUTCDate(Rt.getUTCDate()+(ii-sr+(ii<sr?7:0))):Rt.setUTCDate(Rt.getUTCDate()+(ii-sr-(ii>sr?7:0)))):Rt=new Date(Date.UTC(vt,Ci[Ve[3]],Ve[4],wt["0"<<64],wt[1],wt[2],0)),Xt[vt][Ve]=Rt),nt&&(Rt=mi(Rt,wt[3],nt)),Rt},ja=function(At,nt){var vt;vt=[];for(var Ve=0;nt&&Ve<nt.length;Ve++)nt[Ve][0]<=At&&(nt[Ve][1]>=At||nt[Ve]["0"-0]===At&&nt[Ve][1]==="only"||nt[Ve][1]==="max")&&vt.push([At,nt[Ve]]);return vt},Ua=function(At,nt,vt){var Ve,wt;return At instanceof Date?vt&&(At=mi(At,me?"u":"w",vt)):(Ve=At[0],wt=At[1],At=!vt&&Xt[Ve]&&Xt[Ve][wt]?Xt[Ve][wt]:Qr(At,vt)),nt instanceof Date?vt&&(nt=mi(nt,me?"u":"w",vt)):(e.B42(8),Ve=nt[e.C2Z("0",0)],wt=nt[1],nt=!vt&&Xt[Ve]&&Xt[Ve][wt]?Xt[Ve][wt]:Qr(nt,vt)),e.Q1Y(),At=Number(At),nt=Number(nt),e.q08(8),e.C2Z(At,nt)},yi=qe.getUTCFullYear(),vi=kt.ruleCache[Ee],vi||(vi=kt.ruleCache[Ee]={}),Qt=vi[yi],!Qt){e.q08(135),Qt=ja(e.o_T("1",yi,1),tt.rules[Ge]),Qt=Qt.concat(ja(yi,tt.rules[Ge])),Qt.sort(Ua),yn=65867947,vn=-868971690,jr=2;for(var Za="1"*1;e.X30(Za.toString(),Za.toString().length,28073)!==yn;Za++)vi[yi]=Qt,jr+=2;e.X30(jr.toString(),jr.toString().length,47637)!==vn&&(vi[yi]=Qt),vi[yi]=Qt}if(!Qt||!Qt.length)return null;for(var nr=Qt.length-1;nr>=0;nr--)if(nr>0?(e.q08(40),Ur=Qt[e.C2Z("1",nr)][1]):Ur=null,xi=Qt[nr],xi[2]||(xi[2]=Qr(xi,Ur)),Ua(qe,xi,Ur)>=0)return xi[1];return null}this.loadingSchemes={PRELOAD_ALL:"preloadAll",LAZY_LOAD:fe,MANUAL_LOAD:"manualLoad"},e.Q1Y(),this.getRegionForTimezone=Vr,this.loadingScheme=this.loadingSchemes.LAZY_LOAD;function mn(we){var ke,me;ke=Va(we),me=we.charAt(0)==="-"?-1:1,e.q08(102);var Ee=e.o_T(13,20,18,4,14);e.q08(0);var qe=e.o_T(9,51);e.q08(36);var Ge=e.C2Z(4,150,38);return ke=me*(((ke[0]*60+ke[Ee])*qe+ke[Ge])*("1000"<<0)),e.q08(136),e.Q1Y(),e.o_T(ke,1e3,"60")}this.loadedZones={},this.zones={};function Qa(we,ke){var me,Ee,qe,Ge,_t,Pt;for(me=typeof we=="number"?we:new Date(+we).getTime(),Ee=ke,qe=tt.zones[Ee];typeof qe=="string";)Ee=qe,qe=tt.zones[Ee];if(!qe){if(tt.loadedZones.backward){if(Ee&&Ee!==ke)return tt.lazyLoadZoneFiles(Ee),Qa(we,Ee)}else return tt.loadZoneFile("backward"),Qa(we,ke);pn(Ee)}if(qe.length===0)throw Ge="'",Ge+=" ",Ge+="on",Ge+=" ",_t="No Z",_t+="one found for '",e.q08(1),new Error(e.C2Z(ke,we,_t,Ge));for(var Ut=qe.length-1;Ut>=("0"|0)&&(Pt=qe[Ut],!(Pt[3]&&me>Pt[3]));Ut--);return e.B42(0),qe[e.C2Z(1,Ut)]}this.rules={};function Tl(we,ke){var me,Ee;return me=we[2],me.indexOf("%s")>-1?(ke?Ee=ke["7"-0]==="-"?"":ke[7]:Ee="S",me.replace("%s",Ee)):me.indexOf("/")>-1?me.split("/",2)[ke&&ke["6"<<64]?1:0]:me}this.init=function(we){e.Q1Y();var ke,me;ke={async:!0},me=this.loadingScheme===this.loadingSchemes.PRELOAD_ALL?this.zoneFiles:this.defaultZoneFile||"northamerica";for(var Ee in we)ke[Ee]=we[Ee];return this.loadZoneFiles(me,ke)},this.loadZoneFiles=function(we,ke){var me,Ee,qe;if(me="strin",me+="g",qe=0,typeof we===me)return this.loadZoneFile(we,ke);ke=ke||{},Ee=ke.callback,ke.callback=function(){e.Q1Y(),qe++,qe===we.length&&typeof Ee=="function"&&Ee()};for(var Ge=0;Ge<we.length;Ge++)this.loadZoneFile(we[Ge],ke)},this.loadZoneFile=function(we,ke){var me;if(me="u",me+="ndefined",typeof this.zoneFileBasePath===me)throw new Error("Please define a base path to your zone file directory -- timezoneJS.timezone.zoneFileBasePath.");if(!this.loadedZones[we])return this.loadedZones[we]=!0,_l(we,ke)},this.loadZoneJSONData=function(we,ke){var me,Ee,qe,Ge;me=function(Pt){e.Q1Y(),Pt=JSON.parse(Pt);for(var Ut in Pt.zones)tt.zones[Ut]=Pt.zones[Ut];for(var mi in Pt.rules)tt.rules[mi]=Pt.rules[mi]},Ee=1223352281,qe=454951819,e.B42(30),Ge=e.o_T(0,"2");for(var _t=1;e.X30(_t.toString(),_t.toString().length,12764)!==Ee;_t++)return ke?me(tt.transport({url:we,async:!1})):tt.transport({url:we,success:me});if(e.X30(Ge.toString(),Ge.toString().length,19796)!==qe)return ke?me(tt.transport({url:we,async:!0})):tt.transport({url:we,success:me})},this.loadZoneDataFromObject=function(we){if(we){for(var ke in we.zones)tt.zones[ke]=we.zones[ke];for(var me in we.rules)tt.rules[me]=we.rules[me]}},this.getAllZones=function(){var we;we=[];for(var ke in this.zones)we.push(ke);return we.sort()};function _l(we,ke){var me;return me=tt.zoneFileBasePath+"/"+we,!ke||!ke.async?tt.parseZones(tt.transport({url:me,async:!1})):tt.transport({async:!0,url:me,success:function(Ee){return e.Q1Y(),tt.parseZones(Ee)&&typeof ke.callback=="function"&&ke.callback()},error:function(){var Ee;throw Ee="Error",Ee+=" re",Ee+="triev",e.f9T(),Ee+="ing '",e.q08(14),new Error(e.C2Z(Ee,"' zoneinfo files",me))}})}this.parseZones=function(we){e.Q1Y();var ke,me,Ee,qe,Ge,_t;if(!we)return!1;ke=we.split(`
`),me=[],Ee="",Ge=null,_t=null;for(var Pt=0;Pt<ke.length;Pt++)if(qe=ke[Pt],qe.match(/^\s/)&&(e.q08(14),qe=e.C2Z("Zone ",qe,Ge)),qe=qe.split("#")[0],qe.length>3)switch(me=qe.split(/\s+/),Ee=me.shift(),Ee){case"Zone":if(Ge=me.shift(),tt.zones[Ge]||(tt.zones[Ge]=[]),me.length<3)break;me.splice(3,me.length,Al(me)),me[3]&&(e.q08(2),me[e.C2Z(1,"3")]=Date.UTC.apply(null,me[3])),me[0]=-mn(me[0]),tt.zones[Ge].push(me);break;case"Rule":_t=me.shift(),tt.rules[_t]||(tt.rules[_t]=[]),me[0]=parseInt(me["0"|0],10),me[1]=parseInt(me[1],10)||me[1],me[5]=Va(me["5"*1]),me[6]=mn(me[6]),tt.rules[_t].push(me);break;case"Link":if(tt.zones[me[1]]){e.B42(17);var Ut=e.o_T(1,2,1);throw new Error("Error with Link "+me[Ut]+". Cannot create link of a preexisted zone.")}isNaN(me[0])?tt.zones[me[1]]=me[0]:tt.zones[me[1]]=parseInt(me["0">>32],10);break}return!0},this.transport=hn,this.getTzInfo=function(we,ke,me){var Ee,qe,Ge,_t;return this.lazyLoadZoneFiles(ke),Ee=Qa(we,ke),qe=+Ee[0],Ge=wl(we,Ee,me,ke),Ge&&(qe=gn(qe,Ge[6])),_t=Tl(Ee,Ge),{tzOffset:qe,tzAbbr:_t}},this.lazyLoadZoneFiles=function(we){var ke,me;if(this.loadingScheme===this.loadingSchemes.LAZY_LOAD){if(ke=Vr(we),!ke)throw me="Not a valid timezo",me+="ne",me+=" ID.",new Error(me);this.loadZoneFiles(ke)}}}}).call(typeof window<"u"?window:void 0),kt.timezone.loadingScheme=kt.timezone.loadingSchemes.MANUAL_LOAD,kt.timezone.loadZoneDataFromObject({zones:{"Atlantic/Cape_Verde":[[60,"-",Cr,null]],"Africa/Cairo":[[-120,"",br,null]],"Africa/Nairobi":[[-180,"-",vr,null]],"Africa/Casablanca":[[0,"Morocco","+00/+01",15406956e5],[-60,"Morocco","+01/+00",null]],"Africa/Windhoek":[[-120,ga,"%s",null]],"Africa/Johannesburg":[[-120,"","SAST",null]],"Africa/Tunis":[[-60,"",pa,null]],"Antarctica/Troll":[[0,"Troll",da,null]],"Asia/Kabul":[[-270,"-","+0430",null]],"Asia/Baku":[[-240,"","+04/+05",null]],"Asia/Dhaka":[[-360,"",fa,null]],"Asia/Yangon":[[-390,"-",ca,null]],"Asia/Shanghai":[[-480,"","C%sT",null]],"Asia/Hong_Kong":[[-480,"","HK%sT",null]],"Asia/Taipei":[[-480,"",ua,null]],"Asia/Nicosia":[[-120,yr,"EE%sT",null]],"Asia/Kolkata":[[-330,"-",ha,null]],"Asia/Tehran":[[-210,"Iran","+0330/+0430",null]],"Asia/Jerusalem":[[-120,Mi,"I%sT",null]],"Asia/Tokyo":[[-540,"","J%sT",null]],"Asia/Amman":[[-120,mr,"EE%sT",null]],"Asia/Almaty":[[-360,"-","ALMT",null]],"Asia/Seoul":[[-540,"","K%sT",null]],"Asia/Pyongyang":[[-510,"-",la,15254766e5],[-540,"-","KST",null]],"Asia/Beirut":[[-120,"Lebanon",oa,null]],"Asia/Kuala_Lumpur":[[-480,"-","+08",null]],"Asia/Hovd":[[-420,"",Li,null]],"Asia/Ulaanbaatar":[[-480,"Mongol",Di,null]],"Asia/Kathmandu":[[-345,"-",sa,null]],"Asia/Karachi":[[-300,"","PK%sT",null]],"Asia/Hebron":[[-120,"Palestine","EE%sT",null]],"Asia/Riyadh":[[-180,"-","+03",null]],"Asia/Damascus":[[-120,"Syria",_i,null]],"Asia/Bangkok":[[-420,"-",na,null]],"Asia/Dubai":[[-240,"-",gr,null]],"Australia/Darwin":[[-570,"","AC%sT",null]],"Australia/Perth":[[-480,"","AW%sT",null]],"Australia/Eucla":[[-525,"AW","+0845/+0945",null]],"Australia/Brisbane":[[-600,"",Ti,null]],"Australia/Adelaide":[[-570,"AS","AC%sT",null]],"Australia/Hobart":[[-600,"AT","AE%sT",null]],"Australia/Melbourne":[[-600,"AV","AE%sT",null]],"Australia/Sydney":[[-600,"AN",wi,null]],"Australia/Lord_Howe":[[-630,aa,"+1030/+11",null]],"Pacific/Fiji":[[-720,"Fiji","+12/+13",null]],"Pacific/Guam":[[-600,"-","ChST",null]],"Pacific/Kiritimati":[[-840,"-",ra,null]],"Pacific/Noumea":[[-660,"",ia,null]],"Pacific/Auckland":[[-720,"NZ","NZ%sT",null]],"Pacific/Chatham":[[-765,"Chatham",ta,null]],"Pacific/Pago_Pago":[[660,"-",ea,null]],"Pacific/Apia":[[-780,"WS","+13/+14",null]],"Pacific/Tongatapu":[[-780,"","+13/+14",null]],"Etc/UTC":[[0,"-",$r,null]],UTC:"Etc/UTC","Europe/London":[[0,"EU",pr,null]],"Europe/Dublin":[[0,"Eire",dr,null]],WET:[[0,"EU","WE%sT",null]],CET:[[-60,"C-Eur",Zt,null]],MET:[[-60,ei,$t,null]],EET:[[-120,"EU","EE%sT",null]],"Europe/Brussels":[[-60,"EU","CE%sT",null]],"America/Thule":[[240,si,"A%sT",null]],"Europe/Helsinki":[[-120,"EU","EE%sT",null]],"Europe/Paris":[[-60,ti,"CE%sT",null]],"Europe/Berlin":[[-60,"EU",jt,null]],"Europe/Amsterdam":[[-60,"EU",ft,null]],"Atlantic/Azores":[[60,"EU","-01/+00",null]],"Europe/Bucharest":[[-120,"EU",Vt,null]],"Europe/Kaliningrad":[[-120,"-","EET",null]],"Europe/Moscow":[[-180,"-",ni,null]],"Europe/Volgograd":[[-180,"-",qt,1540692e6],[-240,"-","+04",16090344e5],[-180,"-",bt,null]],"Europe/Samara":[[-240,"-","+04",null]],"Asia/Yekaterinburg":[[-300,"-","+05",null]],"Asia/Omsk":[[-360,"-",Gt,null]],"Asia/Novosibirsk":[[-420,"-","+07",null]],"Asia/Novokuznetsk":[[-420,"-","+07",null]],"Asia/Krasnoyarsk":[[-420,"-","+07",null]],"Asia/Irkutsk":[[-480,"-","+08",null]],"Asia/Yakutsk":[[-540,"-","+09",null]],"Asia/Vladivostok":[[-600,"-",Ht,null]],"Asia/Magadan":[[-660,"-",fi,null]],"Asia/Srednekolymsk":[[-660,"-","+11",null]],"Asia/Kamchatka":[[-720,"-","+12",null]],"Europe/Belgrade":[[-60,Wt,"CE%sT",null]],"Europe/Sarajevo":zt,"Europe/Istanbul":[[-180,"-","+03",null]],"America/New_York":[[300,"US",Kt,null]],"America/Chicago":[[360,"US",It,null]],"America/Denver":[[420,Nt,yt,null]],"America/Los_Angeles":[["480"|32,"US","P%sT",null]],"America/Juneau":[[540,"US","AK%sT",null]],"Pacific/Honolulu":[[600,"-","HST",null]],"America/Phoenix":[["420"|36,"-",Bt,null]],"America/St_Johns":[[210,Et,We,null]],"America/Halifax":[[240,Oe,ot,null]],"America/Regina":[[360,"-","CST",null]],"America/Mexico_City":[[360,rt,lt,null]],"America/Chihuahua":[[420,"Mexico","M%sT",null]],"America/Costa_Rica":[[360,"",ct,null]],"America/Havana":[[300,"Cuba","C%sT",null]],"America/Port-au-Prince":[[300,mt,et,null]],"America/Panama":[[300,"-","EST",null]],"America/Puerto_Rico":[[240,"-",Je,null]],"America/Argentina/Buenos_Aires":[["180">>64,"",ht,null]],"America/Sao_Paulo":[[180,"Brazil",gt,null]],"America/Santiago":[[240,St,"-04/-03",null]],"America/Punta_Arenas":[[180,"-","-03",null]],"America/Bogota":[[300,"","-05/-04",null]],"America/Asuncion":[[240,"Para","-04/-03",null]],"Atlantic/South_Georgia":[[120,"-","-02",null]],"America/Montevideo":[[180,"",$e,null]],"America/Caracas":[[240,"-","-04",null]],"Europe/Athens":"Europe/Bucharest","Europe/Simferopol":"Europe/Moscow","Asia/Rangoon":pt,"Atlantic/Reykjavik":Ft,"Asia/Kuwait":"Asia/Riyadh","Asia/Muscat":it,"Asia/Istanbul":"Europe/Istanbul"},rules:{Morocco:[[2013,"2018"^0,"-","Oct",ut,[3,0,0,null],"0"*1,"-"],[2014,2018,"-",st,xt,[2,"0"*1,0,null],60,"-"],[2017,"only","-","May","21",[3,0,0,null],0,"-"],[2017,Mt,"-","Jul","2",[2,0,0,null],60,"-"],["2018"-0,"only","-","May","13",[3,0,"0">>64,null],0,"-"],[2018,"only","-",Lt,"17",[2,0,0,null],"60"*1,"-"],[2019,"only","-","May","5",[3,"0"^0,"0"-0,null],-60,"-"],[2019,"only","-",Qe,"9",[2,0,0,null],0,"-"],[2020,"only","-","Apr","19",[3,0,0,null],-60,"-"],[2020,"only","-",Re,De,[2,0,0,null],0,"-"],[2021,"only","-","Apr","11",[3,0,0,null],-60,"-"],[2021,"only","-",Se,ge,[2,0,0,null],0,"-"],[2022,"only","-","Mar","27",[3,"0"-0,0,null],-60,"-"],[2022,"only","-","May","8",["2"-0,0,"0"^0,null],0,"-"],[2023,Me,"-","Mar","19",["3"^0,0,0,null],-60,"-"],[2023,"only","-","Apr",He,["2"*1,0,0,null],0,"-"],[2024,"only","-","Mar",at,[3,0,0,null],-60,"-"],[2024,"only","-",Ue,"14",[2,0,"0"-0,null],0,"-"],[2025,"only","-",Fe,"23",[3,0,0,null],-60,"-"],[2025,"only","-","Apr","6",[2,0,0,null],0,"-"]],Namibia:[[1994,2017,"-",Le,"Sun>=1",[2,0,0,null],0,"CAT"],["1995"*1,2017,"-",Ie,"Sun>=1",[2,0,0,null],-60,Pe]],Troll:[["2005"|84,"max","-","Mar","lastSun",[1,0,0,"u"],"120"|16,"+02"],[2004,Be,"-",_e,"lastSun",[1,0,"0"<<32,"u"],0,be]],EUAsia:[[1981,"max","-",Te,"lastSun",[1,0,0,"u"],60,"S"],[1996,xe,"-","Oct","lastSun",[1,0,0,"u"],0,"-"]],Iran:[[2017,2019,"-","Mar","21",[24,0,0,null],"60"-0,"-"],["2017"|33,"2019"^0,"-","Sep","21",[24,0,0,null],0,"-"],[2020,"only","-",pe,"20",[24,0,0,null],60,"-"],[2020,Ce,"-","Sep",de,[24,0,0,null],0,"-"],[2021,2023,"-","Mar","21",[24,0,0,null],60,"-"],["2021">>96,2023,"-","Sep","21",[24,0,0,null],0,"-"],[2024,"only","-","Mar","20",[24,0,0,null],60,"-"],[2024,"only","-","Sep","20",[24,0,0,null],"0"*1,"-"],[2025,2027,"-","Mar",ce,[24,0,0,null],"60">>64,"-"],["2025"*1,2027,"-","Sep",ue,["24"*1,0,0,null],0,"-"]],Zion:[[2013,"max","-",he,"Fri>=23",[2,0,0,null],60,"D"],[2013,"max","-",le,oe,[2,0,0,null],0,"S"]],Jordan:[[2014,"max","-","Mar","lastThu",[24,0,0,null],60,"S"],[2014,"max","-","Oct","lastFri",[0,0,0,"s"],0,"-"]],Lebanon:[["1993"|72,"max","-",ne,"lastSun",[0,0,0,null],"60"<<32,"S"],[1999,"max","-","Oct","lastSun",[0,0,0,null],0,"-"]],Palestine:[[2016,2018,"-","Mar",ae,[1,0,0,null],60,"S"],[2016,2018,"-","Oct",G,[1,0,0,null],0,"-"],[2019,"only","-",U,H,[0,0,0,null],60,"S"],[2019,"only","-","Oct","Sat>=24",[0,0,0,null],"60"-0,"-"],[2020,"max","-","Mar","Sat>=24",[0,0,0,null],"60">>32,"S"],[2020,re,"-","Oct","Sat>=24",[1,0,0,null],60,"-"]],Syria:[[2012,te,"-",ie,$,[0,0,0,null],60,"S"],[2009,"max","-","Oct",ee,[0,0,0,null],0,"-"]],AS:[[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"],[2008,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"D"]],AT:[["2001"^0,"max","-","Oct",Z,[2,"0"*1,0,"s"],60,"D"],[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"]],AV:[[2008,"max","-",j,Q,[2,0,0,"s"],0,"S"],[2008,K,"-","Oct","Sun>=1",[2,0,0,"s"],60,"D"]],AN:[[2008,V,"-",z,"Sun>=1",[2,0,0,"s"],0,"S"],[2008,Y,"-",q,R,[2,"0"|0,0,"s"],60,"D"]],LH:[[2008,"max","-","Apr","Sun>=1",["2"-0,0,0,null],0,"-"],[2008,"max","-","Oct",N,[2,0,0,null],30,"-"]],Fiji:[["2014"*1,2018,"-","Nov","Sun>=1",[2,0,0,null],60,"-"],["2015"|83,"max","-",B,"Sun>=12",[3,0,0,null],0,"-"],[2019,"only","-","Nov","Sun>=8",[2,0,0,null],60,"-"],[2020,"only","-",I,O,[2,0,0,null],60,"-"],[2021,"max","-","Nov","Sun>=8",["2"|0,0,0,null],60,"-"]],NZ:[["2007"-0,"max","-","Sep","lastSun",[2,0,0,"s"],60,"D"],[2008,"max","-","Apr",E,[2,0,0,"s"],"0"^0,"S"]],Chatham:[["2007"-0,"max","-",P,"lastSun",["2"^0,45,"0"*1,"s"],60,"-"],[2008,F,"-","Apr","Sun>=1",[2,45,0,"s"],0,"-"]],WS:[[2012,"max","-",M,"Sun>=1",[4,0,0,null],0,"-"],[2012,L,"-",_,"lastSun",[3,0,"0"^0,null],60,"-"]],Eire:[[1981,T,"-","Mar","lastSun",[1,0,0,"u"],0,"-"],[1996,"max","-","Oct","lastSun",[1,0,0,"u"],-60,"-"]],EU:[[1981,"max","-","Mar",A,[1,0,0,"u"],"60"^0,"S"],[1996,"max","-","Oct",x,[1,0,0,"u"],"0">>64,"-"]],"C-Eur":[[1981,"max","-","Mar","lastSun",[2,0,"0"^0,"s"],60,"S"],[1996,v,"-",D,k,["2"*1,0,0,"s"],0,"-"]],Thule:[[2007,"max","-","Mar","Sun>=8",["2">>32,"0"*1,0,null],60,"D"],[2007,w,"-","Nov","Sun>=1",[2,0,0,null],0,"S"]],US:[[2007,"max","-","Mar","Sun>=8",["2"|2,0,0,null],60,"D"],["2007"|19,S,"-",C,m,[2,0,0,null],0,"S"]],Canada:[["2007"*1,"max","-",f,b,[2,0,0,null],60,"D"],[2007,"max","-",g,"Sun>=1",[2,0,0,null],0,"S"]],Mexico:[[2002,d,"-","Apr",y,[2,0,0,null],60,"D"],[2002,p,"-","Oct","lastSun",[2,0,0,null],"0"|0,"S"]],Cuba:[[2012,"max","-","Nov",c,[0,0,"0"-0,"s"],0,"S"],[2013,"max","-","Mar",u,[0,0,0,"s"],60,"D"]],Haiti:[[2017,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2017,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],Brazil:[[2008,2017,"-",l,"Sun>=15",[0,0,0,null],60,"-"],[2016,2019,"-",o,h,[0,0,0,null],0,"-"],[2018,"only","-","Nov",s,["0"*1,0,0,null],60,"-"]],Chile:[[2016,2018,"-","May",n,[3,0,0,"u"],0,"-"],[2016,2018,"-","Aug","Sun>=9",[4,0,0,"u"],60,"-"],[2019,"max","-",i,"Sun>=2",[3,"0">>0,0,"u"],0,"-"],["2019"<<32,"max","-",r,"Sun>=2",[4,0,0,"u"],60,"-"]],Para:[[2010,"max","-",a,"Sun>=1",[0,0,0,null],60,"-"],[2013,"max","-","Mar",t,[0,0,0,null],0,"-"]]}})};$s=W=>{var e,t;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.ChartEngine.prototype.touchSingleClick=function(r,i,n){var s,h;return s=this,h=arguments,function(){X.Q1Y(),(function(){var o,l,u,c;if(!this.cancelTouchSingleClick){if(this.runPrepend("touchSingleClick",h)||this.editingAnnotation||(this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1},!this.displayCrosshairs)||!this.displayInitialized||this.openDialog!==""||i<this.left||i>this.right||n<this.top||n>this.bottom)return;o=this.crossYActualPos,l=this.crossXActualPos,this.currentPanel=this.whichPanel(o),u=this.currentVectorParameters.vectorType,(!e.Drawing||!u||!e.Drawing[u]||!new e.Drawing[u]().dragToDraw)&&(this.drawingClick(this.currentPanel,l,o)||a(this,i,n),this.currentVectorParameters.vectorType||(c=this.activeMarker&&this.activeMarker.click({cx:l,cy:o,panel:this.currentPanel}),c||this.dispatch("tap",{stx:this,panel:this.currentPanel,x:l,y:o})))}X.Q1Y(),this.runAppend("touchSingleClick",h)}).apply(s,h)}},e.ChartEngine.prototype.touchDoubleClick=function(r,i,n){var s;if(!this.runPrepend("touchDoubleClick",arguments)&&!this.editingAnnotation){if(e.ChartEngine.drawingLine)return this.undo();this.activeDrawing||(a(this,i,n),s=this.activeMarker&&this.activeMarker.doubleClick({cx:i,cy:n,panel:this.currentPanel}),s||this.dispatch("doubleTap",{stx:this,finger:r,x:i,y:n}),this.runAppend("touchDoubleClick",arguments))}},e.ChartEngine.prototype.startProxy=function(r){var i,n,s;i=-2066925830,n=-1457216925,s=2;for(var h="1"|0;X.Y5b(h.toString(),h.toString().length,32559)!==i;h++)this.touchPointerType=r.pointerType,s+=2;if(X.Y5b(s.toString(),s.toString().length,71803)!==n&&(this.touchPointerType=r.pointerType),this.touchPointerType!="touch"){this.mouseMode=!0;return}this.mouseMode=!1,this.touches[this.touches.length]={pointerId:r.pointerId,pageX:r.clientX,pageY:r.clientY,clientX:r.clientX,clientY:r.clientY},this.changedTouches=[{pointerId:r.pointerId,pageX:r.clientX,pageY:r.clientY,clientX:r.clientX,clientY:r.clientY}],this.touches.length==1&&(this.gesturePointerId=r.pointerId),X.f9T(),this.touchstart(r)},e.ChartEngine.prototype.moveProxy=function(r){if(r.pointerType&&r.pointerType!="touch"){this.mouseMode=!0;return}X.Q1Y(),this.mouseMode=!1,this.touchmove(r)},e.ChartEngine.prototype.endProxy=function(r){var i,n;if(i="t",i+="o",i+="u",i+="ch",this.touchPointerType!=i){this.mouseMode=!0;return}this.mouseMode=!1,n=this.touches.length;for(var s=0;s<this.touches.length;s++)if(this.touches[s].pointerId==r.pointerId){this.touches.splice(s,1);break}if(s==n){this.touches=[],this.grabbingScreen=!1,this.touching=!1;return}this.changedTouches=[{pointerId:r.pointerId,pageX:r.clientX,pageY:r.clientY,clientX:r.clientX,clientY:r.clientY}],this.touchend(r)},e.ChartEngine.prototype.msMouseMoveProxy=function(r){X.f9T(),!(this.touches.length||!this.mouseMode)&&this.mousemove(r)};function a(r,i,n){X.f9T();var s;r.layout.crosshair||(e.ChartEngine.crosshairY=0,e.ChartEngine.crosshairX=0,r.cx=r.backOutX(0),r.cy=r.backOutY(0),r.findHighlights(null,!0),e.ChartEngine.crosshairY=n,e.ChartEngine.crosshairX=i,s=r.container.getBoundingClientRect(),r.top=s.top,r.left=s.left,r.right=r.left+r.width,r.bottom=r.top+r.height,r.cx=r.backOutX(i),r.cy=r.backOutY(n),r.currentPanel&&r.currentPanel.chart.dataSet&&(r.crosshairTick=r.tickFromPixel(r.cx,r.currentPanel.chart),r.crosshairValue=r.adjustIfNecessary(r.currentPanel,r.crosshairTick,r.valueFromPixel(r.cy,r.currentPanel))),r.headsUpHR()),r.findHighlights(!0),r.draw()}e.ChartEngine.prototype.msMouseDownProxy=function(r){this.mouseMode&&this.mousedown(r)},e.ChartEngine.prototype.msMouseUpProxy=function(r){this.mouseMode&&this.mouseup(r)},e.ChartEngine.prototype.iosMouseMoveProxy=function(r){this.touching||(X.Q1Y(),this.mousemove(r))},e.ChartEngine.prototype.iosMouseDownProxy=function(r){if(this.touching){this.mouseMode=!1;return}this.mouseMode=!0,this.mousedown(r)},e.ChartEngine.prototype.iosMouseUpProxy=function(r){this.touching||(X.f9T(),this.mouseup(r))},e.ChartEngine.prototype.touchmove=function(r){var i=X,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q;if(n="p",n+="e",n+="n",s="n",s+="one",!!this.displayInitialized&&this.openDialog===""&&e.ChartEngine.ignoreTouch!==!0){if(h=[],(!this.overYAxis||this.controls&&this.controls.crossX&&this.controls.crossX.style.display!=s)&&(r&&r.preventDefault&&r.cancelable&&this.captureTouchEvents&&r.preventDefault(),r&&r.stopPropagation()),o=new Date().getTime(),this.clicks.s2MS==-1){if(this.clicks.e1MS=o,this.clicks.e1MS-this.clicks.s1MS<25)return}else if(this.clicks.e2MS=o,this.clicks.e2MS-this.clicks.s2MS<25)return;if(r.pointerType||(r.pointerType=this.touchPointerType),e.isSurface){if(this.mouseMode)return;r.pointerId||(r.pointerId=this.gesturePointerId);for(var j=0;j<this.touches.length;j++)if(this.touches[j].pointerId==r.pointerId){if(l=Math.abs(this.touches[j].pageX-r.clientX),u=Math.abs(this.touches[j].pageY-r.clientY),i.q08(43),c=Math.sqrt(i.C2Z(l,u,u,l)),!c||(this.clicks.e1MS=new Date().getTime(),this.clicks.e1MS-this.clicks.s1MS<50)||this.touches[j].pageX==r.clientX&&this.touches[j].pageY==r.clientY)return;this.touches[j].pageX=this.touches[j].clientX=r.clientX,this.touches[j].pageY=this.touches[j].clientY=r.clientY;break}if(j===0?this.movedPrimary=!0:this.movedSecondary=!0,j==this.touches.length)return;this.changedTouches=[{pointerId:r.pointerId,pageX:r.clientX,pageY:r.clientY,clientX:r.clientX,clientY:r.clientY}],h=this.touches.length?this.touches:this.changedTouches}else h=r.touches,this.changedTouches=r.changedTouches;if(!(h.length==1&&Math.pow(this.clicks.x-h[0].clientX,2)+Math.pow(this.clicks.y-h[0].clientY,2)<=16)&&(p=this.crosshairXOffset,y=this.crosshairYOffset,d=this.currentVectorParameters.vectorType&&this.currentVectorParameters.vectorType!=="",g=!this.layout.crosshair&&!d&&!this.touchNoPan,(r.pointerType==n||g||this.activeDrawing&&this.activeDrawing.name=="freeform")&&(p=y=0),!this.runPrepend("touchmove",arguments))){if(e.ChartEngine.resizingPanel){m=h[0],b=m.clientX,f=m.clientY,i.B42(0),this.mousemoveinner(i.C2Z(p,b),i.C2Z(y,f));return}if(this.moveB!=-1&&(this.touchMoveTime=new Date),this.moveA=this.moveB,this.moveB=h[0].pageX,h.length==1&&!this.twoFingerStart)S=h[0],b=S.clientX,f=S.clientY,this.pinchingScreen=0,i.B42(0),this.mousemoveinner(i.o_T(p,b),i.o_T(y,f)),w=this.whichPanel(f),k=this.xAxisAsFooter===!0?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=f<=this.top+k&&f>=k-this.xaxisHeight+this.top&&this.insideChart,w?this.overYAxis=(b>=w.right||b<=w.left)&&this.insideChart:this.overYAxis=!1;else if(h.length==2){if(!this.allowZoom||this.activeDrawing&&!this.allowDrawingZoom||!this.displayCrosshairs)return;D=h[0],v=D.clientX,x=D.clientY,A=h[1],T=A.clientX,_=A.clientY,i.B42(137),C=Math.sqrt(i.C2Z(v,_,x,T,v,_,T,x)),i.B42(138);var Z=i.o_T(7,26,25,15,7);if(this.pinchingCenter=(Math.min(v,T)-Math.max(v,T))/Z,L=Math.round(this.gestureStartDistance-C),g&&(this.pinchingScreen=5),this.clearPixelCache(),this.pinchingScreen<2){if(e.isSurface&&(!this.movedPrimary||!this.movedSecondary))return;if(v<this.pt.x1&&T<this.pt.x2||v>this.pt.x1&&T>this.pt.x2||x<this.pt.y1&&_<this.pt.y2||x>this.pt.y1&&_>this.pt.y2)this.pinchingScreen=0;else if(this.pinchingScreen++,this.pinchingScreen<2)return}if(this.pt={x1:v,x2:T,y1:x,y2:_},this.pinchingScreen===("0"^0))M="p",M+="a",M+="n",this.grabMode=M,i.q08(0),this.mousemoveinner(i.o_T(p,v),i.o_T(y,x)),this.gestureStartDistance=C;else if(this.grabStartValues){if(F=Math.asin((Math.max(_,x)-Math.min(_,x))/C),Math.abs(L)<12&&!g){if(this.moveCount++,this.moveCount==4){this.pinchingScreen=0,this.moveCount=0;return}}else this.moveCount=0;if(F<1||!this.goneVertical&&F<1.37){if(!this.currentPanel)return;if(P=this.currentPanel.chart,this.goneVertical=!1,C=this.pt.x2-this.pt.x1,E=this.grabStartValues.t2-this.grabStartValues.t1||1,O=this.grabStartValues.t1+E/("2"<<0),i.q08(9),I=Math.abs(i.C2Z(E,C)),P.allowScrollFuture===!1&&P.allowScrollPast===!1&&(I=Math.max(I,P.width/P.dataSet.length)),B=this.layout.candleWidth,this.setCandleWidth(I,P),P.maxTicks<this.minimumZoomTicks){this.setCandleWidth(B,P);return}i.q08(30),this.micropixels=i.o_T(64,"0"),N=this.pixelFromTick(Math.round(O),P),i.B42(64);var ee=i.C2Z(1,15,13);R=this.pt.x1-this.left+Math.round(C/ee),i.q08(8),q=i.C2Z(N,R),i.B42(9),Y=i.C2Z(I,q),z=Math.round(Y),P.scroll-=z,i.B42(8),this.microscroll=i.C2Z(z,Y),this.micropixels=I*this.microscroll,this.draw()}else if(V=this.grabStartYAxis,this.goneVertical=!0,V){if(V.zoom=this.grabStartZoom+(this.gestureStartDistance-C),this.grabStartZoom<V.height){if(V.zoom>=V.height){i.q08(101);var $=i.o_T(4,12,0,7);V.zoom=V.height-$}}else if(V.zoom<=V.height){i.B42(15);var ie=i.o_T(2,0,3);V.zoom=V.height+ie}this.draw()}this.updateChartAccessories()}}else if(h.length==("3"^0)&&e.ChartEngine.allowThreeFingerTouch){if(!this.displayCrosshairs)return;K=h[0],Q=K.clientX,C=this.grabStartX-Q,i.q08(139);var te=i.C2Z(1,29,13,12,6);this.grabEndPeriodicity=this.grabStartPeriodicity+Math.round(C/te),this.grabEndPeriodicity<1&&(i.B42(30),this.grabEndPeriodicity=i.C2Z(64,"1"))}this.runAppend("touchmove",arguments)}}},e.ChartEngine.prototype.touchstart=function(r){var i=X,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I;if(n="tou",n+="chstart",s="touch",s+="st",s+="art",!e.ChartEngine.ignoreTouch&&(e.isSurface?(this.movedPrimary=!1,this.movedSecondary=!1):(this.touchingEvent&&clearTimeout(this.touchingEvent),this.touching=!0,this.touches=r.touches,this.changedTouches=r.changedTouches),h=this.crosshairXOffset,o=this.crosshairYOffset,this.touchPointerType=="pen"&&(i.B42(8),h=o=i.o_T("0",0)),!this.runPrepend(s,arguments))){var{layout:B}=this,{vectorType:N}=this.currentVectorParameters;if(l=B.crosshair&&N!==""||N,this.manageTouchAndMouse&&r&&r.preventDefault&&r.cancelable&&this.captureTouchEvents&&r.preventDefault(),this.hasDragged=!1,this.doubleFingerMoves=0,this.moveCount=0,this.twoFingerStart=!1,this.touches.length==1||this.touches.length==2){if(this.touchMoveTime=Date.now(),g=this.touches[0],p=g.clientX,y=g.clientY,this.moveA=p,this.moveB=-1,this.openDialog===""&&(this.registerPointerEvent({x:p,y,time:this.touchMoveTime},"down"),this.changedTouches.length==1&&!this.isDoubleClick(!0)&&e.extend(this.clicks,{s1MS:this.touchMoveTime,e1MS:-1,s2MS:-1,e2MS:-1,x:this.changedTouches["0"^0].pageX,y:this.changedTouches[0].pageY})),b=this.container.getBoundingClientRect(),this.top=b.top,this.left=b.left,this.right=this.left+this.width,this.bottom=this.top+this.height,this.touches.length==1&&(f=this.backOutY(y),this.currentPanel=this.whichPanel(f)),this.currentPanel||(this.currentPanel=this.chart.panel),d=this.currentPanel,p>=this.left&&p<=this.right&&y>=this.top&&y<=this.bottom){this.insideChart=!0,m=this.xAxisAsFooter===!0?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=y<=this.top+m&&y>=this.top+m-this.xaxisHeight,this.overYAxis=p>=this.left+d.right||p<=this.left+d.left,i.q08(34),C=-i.o_T("1",0),this.cy=this.backOutY(y),this.cx=this.backOutX(p),this.crosshairTick=this.tickFromPixel(this.cx,d.chart),this.crosshairValue=this.adjustIfNecessary(d,this.crosshairTick,this.valueFromPixel(this.cy,this.currentPanel));for(var R=0;R<this.drawingObjects.length;R++)if(S=this.drawingObjects[R],S.highlighted){if(C<0&&(C=R),w=S.highlighted,this.findHighlights(!0),R==C&&S.highlighted&&!S.permanent){this.clicks.s2MS==-1?this.activateRepositioning(S):this.findHighlights(!1,!0);return}this.anyHighlighted=!0,S.highlighted=w}}else this.insideChart=!1;if(this.insideChart&&!l&&B.headsUp!=="floating"&&!(B.headsUp&&B.headsUp.floating)&&!N&&!this.touchNoPan){h=o=0;var{baselineHelper:q}=this;if(q.size&&this.findBaselineHandle(r,!0))return;if(this.controls.anchorHandles){k=Object.values(this.controls.anchorHandles),D=!1;for(var Y=0;Y<k.length;Y++){v=k[Y];var{handle:z,sd:V}=v;x=this.resolveX(this.cx),A=this.resolveY(this.cy);var{left:K,top:Q,right:j,bottom:Z}=z.getBoundingClientRect();T=this.preferences.highlightsTapRadius,i.q08(8),_=e.boxIntersects(i.o_T(K,T),Q,i.o_T(T,j,i.q08(0)),Z,x,A,x,A),_&&(L="st",L+="x-g",L+="r",L+="ab",this.repositioningAnchorSelector={sd:V},z.classList.add(L),D=!0),v.highlighted=_}if(D)return}for(u in this.panels)if(c=this.panels[u],c.highlighted){this.grabHandle(c);return}this.grabbingScreen=!0,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),d.chart.spanLock=!1,this.yToleranceBroken=!1,i.q08(0),this.grabStartX=i.C2Z(h,p),i.q08(0),this.grabStartY=i.o_T(o,y),this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=d.chart.scroll,this.grabStartScrollY=d.yAxis.scroll,this.grabStartPanel=this.currentPanel,this.swipeStart&&this.swipeStart(d.chart),this.grabStartYAxis=this.whichYAxis(d,this.backOutX(p)),this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,setTimeout(function(ee){return function(){ee.grabbingHand()}}(this),100)}else if(this.grabbingScreen=!1,this.insideChart&&d.subholder===r.target&&(M=this.currentVectorParameters.vectorType,e.Drawing&&M&&e.Drawing[M]&&new e.Drawing[M]().dragToDraw)){this.userPointerDown=!0,e.ChartEngine.crosshairX=p,e.ChartEngine.crosshairY=y,d&&d.chart.dataSet&&(this.crosshairTick=this.tickFromPixel(this.backOutX(e.ChartEngine.crosshairX),this.currentPanel.chart),this.crosshairValue=this.adjustIfNecessary(d,this.crosshairTick,this.valueFromPixel(this.backOutY(e.ChartEngine.crosshairY),this.currentPanel))),this.drawingClick(d,this.backOutX(p),this.backOutY(y)),this.headsUpHR();return}this.touches.length=="1"-0&&(l?!N&&d.subholder===r.target&&(i.B42(0),this.mousemoveinner(i.C2Z(h,p),i.o_T(o,y))):(this.mouseTimer=Date.now(),this.longHoldTookEffect=!1,(this.longHoldTime||this.longHoldTime===0)&&this.startLongHoldTimer((ee=>(i.Q1Y(),()=>(i.Q1Y(),a(ee,p,y))))(this))))}if(this.touches.length==2){if(this.cancelLongHold=!0,this.swipe.end=!0,!this.displayCrosshairs&&!this.touchNoPan||!this.insideChart)return;F=this.touches[1],P=F.clientX,E=F.clientY;for(u in this.panels)if(c=this.panels[u],c.highlighted){this.grabHandle(c);return}d=this.currentPanel,i.q08(137),this.gestureStartDistance=Math.sqrt(i.C2Z(p,E,y,P,p,E,P,y)),this.pt={x1:p,x2:P,y1:y,y2:E},this.grabbingScreen=!0,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),d.chart.spanLock=!1,i.q08(0),this.grabStartX=i.C2Z(h,p),i.q08(0),this.grabStartY=i.o_T(o,y),this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=d.chart.scroll,this.grabStartScrollY=d.yAxis.scroll,this.grabStartPanel=d,this.swipeStart&&this.swipeStart(d.chart),this.grabStartCandleWidth=B.candleWidth,this.grabStartYAxis=this.whichYAxis(d,this.backOutX((p+P)/2))||d.yAxis,this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,this.grabStartPt=this.pt,this.grabStartValues={x1:this.pt.x1,x2:this.pt.x2,y1:this.valueFromPixel(this.pt.y1-this.top,d),y2:this.valueFromPixel(this.pt.y2-this.top,d),t1:this.tickFromPixel(this.pt.x1-this.left,d.chart),t2:this.tickFromPixel(this.pt.x2-this.left,d.chart)},this.twoFingerStart=!0,setTimeout(function(ee){return function(){i.f9T(),ee.grabbingHand()}}(this),"100"<<32)}else if(this.touches.length=="3">>0){if(!this.displayCrosshairs)return;i.q08(8),O=this.touches[i.o_T("0",0)],I=O.clientX,this.grabStartX=I,this.grabStartPeriodicity=B.periodicity}this.runAppend(n,arguments)}},e.ChartEngine.prototype.touchend=function(r){var i=X,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v;if(n="t",n+="ouche",i.f9T(),n+="nd",!e.ChartEngine.ignoreTouch){if(this.swipe.end=!0,!e.isSurface){this.touches=r.touches,i.q08(8),s=i.o_T("635858128",0),i.q08(2),h=-i.C2Z(1,"625068246"),o=2;for(var x=1;i.X30(x.toString(),x.toString().length,84005)!==s;x++)this.changedTouches=r.changedTouches,o+=2;i.Y5b(o.toString(),o.toString().length,641)!==h&&(this.changedTouches=r.changedTouches)}if(!this.runPrepend(n,arguments)){var{touches:A,layout:T}=this,{vectorType:_}=this.currentVectorParameters;if(l=T.crosshair&&_!==""||_,this.cancelLongHold=!0,A.length<=1&&l&&(!A.length||!this.twoFingerStart)&&(this.grabbingScreen=!1),A.length&&(this.grabStartX=-1,this.grabStartY=-1),u=this.pinchingScreen,this.disableBackingStoreDuringTouch&&this.reconstituteBackingStore(),A.length){if(e.ChartEngine.resizingPanel)return}else{if(this.touchingEvent=setTimeout(function(I){return i.Q1Y(),function(){i.Q1Y(),I.touching=!1}}(this),500),e.ChartEngine.resizingPanel&&(this.releaseHandle(),this.changedTouches.length!==1||this.grabStartY!==this.changedTouches[0].clientY))return;this.pinchingScreen=null,this.pinchingCenter=null,this.goneVertical=!1,this.grabbingScreen=!1,this.grabMode="",this.highlightedDraggable&&(this.dragPlotOrAxis&&this.dragPlotOrAxis(this.cx,this.cy),this.currentPanel=this.whichPanel(this.cy)),this.grabStartYAxis=null,this.displayDragOK(),this.doDisplayCrosshairs(),this.updateChartAccessories()}i.q08(13);var L=i.C2Z(12,0,11);if(c=A.length+L,this.changedTouches.length===1){if(p=Date.now(),y=this.changedTouches[0],d=this.backOutY(y.pageY)+this.crosshairYOffset,g=this.backOutX(y.pageX)+this.crosshairXOffset,b=this.currentPanel,f=b&&b.subholder===r.target,this.repositioningDrawing){m="vect",m+="o",m+="r",this.changeOccurred(m),e.clearCanvas(this.chart.tempCanvas,this),this.activateRepositioning(null),this.draw(),l||this.findHighlights(!1,!0);return}if(this.repositioningBaseline){C="mou",C+="n",C+="tain",this.repositioningBaseline=null,this.controls.baselineHandle.classList.remove("stx-grab"),S=this.mainSeriesRenderer||{},S.params&&S.params.baseline&&S.params.type!=C,this.draw();return}if(this.repositioningAnchorSelector){this.repositioningAnchorSelector.hoverTick||(this.repositioningAnchorSelector.hoverTick=this.tickFromPixel(g-this.crosshairXOffset,this.chart)),w=this.repositioningAnchorSelector.sd,e.Studies.repositionAnchor(this,w),this.repositioningAnchorSelector=null,this.controls.anchorHandles[w.uniqueId].highlighted=!1,e.Studies.displayAnchorHandleAndLine(this,w,this.chart.dataSegment),Object.values(this.controls.anchorHandles).forEach(({handle:I})=>I.classList.remove("stx-grab"));return}if(this.openDialog===""&&(k="u",k+="p",this.registerPointerEvent({x:y.clientX,y:y.clientY,time:p},k)),this.clicks.s2MS==-1){if(this.clicks.e1MS=p,!e.Drawing||!_||!e.Drawing[_]||!new e.Drawing[_]().dragToDraw){var{up:M,down:F}=this.pointerEvents;D=1200,i.q08(140);var P=i.C2Z(63,1280,5,1280,5);i.q08(15);var E=i.o_T(19,9,30);i.q08(141);var O=i.o_T(13,14,3);v=Math.pow(F[0].x-M["0"<<P].x,E)+Math.pow(F[0].y-M[0].y,O)<=D,v&&this.clicks.e1MS-this.clicks.s1MS<750&&!this.longHoldTookEffect&&(!this.hasDragged||l)?setTimeout(this.touchSingleClick(c,this.clicks.x,this.clicks.y),this.doubleClickTime+1):this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1}}if(this.userPointerDown=!1,e.Drawing&&this.activeDrawing&&this.activeDrawing.dragToDraw&&f){this.drawingClick(b,g,d);return}this.isDoubleClick(!0)&&(f||this.overYAxis||this.overXAxis)&&this.touchDoubleClick(c,this.clicks.x,this.clicks.y)}else this.clicks.e2MS=p,this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1}}else this.displayCrosshairs&&this.grabEndPeriodicity!=-1&&!isNaN(this.grabEndPeriodicity)&&((e.ChartEngine.isDailyInterval(this.layout.interval)||this.allowIntradayNMinute)&&this.setPeriodicity({period:this.grabEndPeriodicity,interval:this.layout.interval}),this.grabEndPeriodicity=-1);this.changedTouches.length&&((!l&&!this.currentVectorParameters.vectorType&&c==1||this.twoFingerStart&&!u&&!this.touches.length)&&(this.swipeRelease&&this.swipeRelease(),this.findHighlights(!1,!0)),u&&this.continuousZoom&&(this.continuousZoom.execute(),this.continuousZoom.execute(!0))),A.length||(this.twoFingerStart=!1),this.runAppend("touchend",arguments)}}},t=!1,e.ChartEngine.prototype.mousemoveinner=e.ChartEngine.prototype.mousemoveinner||function(r,i){t||console.error("touch feature requires activating movement feature."),X.Q1Y(),t=!0}};eo=W=>{var e;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Visualization=e.Visualization||function(t){var a,r;if(a="f",a+="uncti",a+="on",!t){console.log("CIQ.Visualization() missing attributes argument.");return}if(typeof t.renderFunction!==a){r="CIQ.Visualization() missing render",r+="Function property in attributes.",console.log(r);return}this.container=null,this.attributes=t,this.data=null,this.object=null},e.extend(e.Visualization.prototype,{destroy:function(t){var a;a=this.container,e.resizeObserver(a,null,a.resizeHandle),a.autoGenerated?(a.remove(),delete this.container):a.innerHTML="",!t&&(this.attributes=null,this.container=null,X.Q1Y(),this.data=null,this.object=null,this.destroy=this.draw=this.setAttributes=function(){},this.updateData=function(){})},draw:function(t){var a=X,r,i,n,s,h,o,l,u,c;if(!this.data||typeof this.data!="object")return;r=this.attributes,i=r.document||document,n=r.container||this.container;function p(d,g){return d.index<g.index?-1:d.index>g.index?1:0}if(a.f9T(),typeof n=="string"&&(n=i.querySelector(n)),n||(n=document.createElement("div"),n.style.height=n.style.width="300px",i.body.appendChild(n),n.autoGenerated=!0),r.stx&&(s=r.stx.chart.canvasShim,r.useCanvasShim&&s&&s!==n&&s!==n.parentNode&&(n.autoGenerated||(n=n.cloneNode(),n.id="",n.autoGenerated=!0),s.appendChild(n))),this.container&&this.container!==n&&this.destroy(!0),!n.resizeHandle){h=function(d){return function(){a.Q1Y(),d.data&&d.container&&i.body.contains(d.container)&&d.draw.call(d,!0)}},o=-516286902,l=-846630739,u=2;for(var y=1;a.X30(y.toString(),y.toString().length,72416)!==o;y++)n.resizeHandle=e.resizeObserver(n,h(this),1),u+=2;a.Y5b(u.toString(),u.toString().length,56913)!==l&&(n.resizeHandle=e.resizeObserver(n,h(this),null))}this.container=n,this.attributes=r,r=e.ensureDefaults({container:this.container},this.attributes),c=r.renderFunction(Object.values(this.data).sort(p),r),c&&(r.id&&(c.id=r.id),(t||r.forceReplace)&&(this.container.innerHTML="",this.container.appendChild(c))),this.attributes=r,this.object=c},setAttributes:function(t,a){var r,i,n,s,h,o;if(r="fo",r+="rceReplace",i="useCanvasS",i+="him",n="s",n+="t",n+="x",s=["renderFunction","container",n,i,"id",r],h=!1,o=t,typeof t=="string"&&(o={},o[t]=a),X.Q1Y(),typeof o=="object")for(var l in o)this.attributes[l]!==o[l]&&s.indexOf(l)!==-1&&(h=!0),this.attributes[l]=o[l];this.draw(h)},updateData:function(t,a){var r,i,n,s,h,o,l;r="a",r+="d",r+="d",i="re",i+="place",h=Array.isArray(t)?t.reduce(function(c,p){return c[p.name]=p,X.f9T(),c},{}):e.shallowClone(t);for(n in h)s=h[n],Object.prototype.toString.call(s)!=="[object Object]"&&(h[n]={value:s}),h[n].name||(h[n].name=n),h[n].value||(h[n].value=0);switch(a||(a=i),a.toLowerCase()){case"delete":for(n in h)delete this.data[n];break;case"replace":this.data={};case"update":case r:for(n in h){this.data[n]||(this.data[n]={name:n}),s=h[n].value,Object.prototype.toString.call(s)=="[object Number]"?(o="u",o+="p",o+="da",o+="te",(!this.data[n].value||a==o)&&(this.data[n].value=0),this.data[n].value+=s):this.data[n].value=s;for(var u in h[n])u!=="value"&&(this.data[n][u]=h[n][u])}break;default:l="Invalid or ",l+="missing action.  Valid value",l+="s are 'add', 'delete', 'replace', or 'update'.",console.log(l)}return this.draw(this.attributes.forceReplace),this}}),e.ChartEngine.prototype.embedVisualization=function(t){return X.f9T(),t||(t={}),t.stx=this,t.useCanvasShim=!0,t.translator=function(a){return t.stx.translateIf(a)},t.document=this.container.ownerDocument,new e.Visualization(t)}};to=W=>{var e,t;e="un",e+="defin",e+="ed",t=typeof _CIQ!==e?_CIQ:W.CIQ,t.Studies?(t.Studies.calculateTypicalPrice=function(a,r){var i=X,n,s,h,o,l,u;if(n="Me",n+="d",n+=" Pr",n+="ice",s=r.chart.scrubbed,h=r.days,s.length<h+1){r.overlay||(r.error=!0);return}o=r.name;for(var c in r.outputs)i.q08(14),o=i.C2Z(c,o," ");l="h",l+="lc/",l+="3",r.type==n?l="hl/2":r.type=="Weighted Close"&&(l="hlcc/4"),u=0,r.startFrom<=h&&(r.startFrom=0);for(var p=r.startFrom;p<s.length;p++)p&&s[p-("1"<<64)][o]&&(u=s[p-1][o]*h),u+=s[p][l],p>=h&&(i.q08(8),u-=s[i.C2Z(p,h)][l],i.q08(9),s[p][o]=i.o_T(h,u))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Med Price":{name:"Median Price",calculateFN:t.Studies.calculateTypicalPrice,inputs:{Period:14}}})):console.error("medianPrice feature requires first activating studies feature.")};io=W=>{var e=X;e.Q1Y();var t,a,r;t=typeof _CIQ<"u"?_CIQ:W.CIQ,t.Studies?(r="Momentum Indic",r+="ator",t.Studies.calculateRateOfChange=function(i,n){e.Q1Y();var s,h,o,l,u,c,p,y,d;if(s=n.chart.scrubbed,s.length<n.days+1){n.error=!0;return}h=n.inputs.Field,(!h||h=="field")&&(h="Close"),n.parameters.isVolume&&(h="Volume"),o=n.name;for(var g in n.outputs)e.q08(14),o=e.C2Z(g,o," ");l=n.inputs["Center Line"],l?l=parseInt(l,10):l=0;for(var b=Math.max(n.startFrom,n.days);b<s.length;b++)u="Mome",u+="nt",u+="um",c="obje",c+="c",c+="t",p=s[b][h],p&&typeof p==c&&(p=p[n.subField]),y=s[b-n.days][h],y&&typeof y=="object"&&(y=y[n.subField]),n.type==u?(e.q08(13),s[b][o]=e.C2Z(l,p,y)):(d=y,d&&(e.q08(142),s[b][o]=e.o_T(l,1,d,p,"100")))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Price ROC":{name:"Price Rate of Change",calculateFN:t.Studies.calculateRateOfChange,inputs:{Period:14,Field:"field"}},Momentum:{name:r,calculateFN:t.Studies.calculateRateOfChange,inputs:{Period:14},centerline:0}})):(a="momentum feature requir",a+="es first activating studies feature.",console.error(a))};ro=W=>{var e,t,a;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Studies?(t="S",t+="P",t+="Y",a="Price R",a+="elativ",a+="e",e.Studies.initPriceRelative=function(r,i,n,s,h,o){var l,u;return l=e.Studies.initializeFN(r,i,n,s,h,o),u=[l.inputs["Comparison Symbol"].toUpperCase()],e.Studies.fetchAdditionalInstruments(r,l,u),l},e.Studies.calculatePriceRelative=function(r,i){var n,s,h,o,l,u,c;if(n="]",n+="/[",s=i.chart.scrubbed,h=i.inputs["Comparison Symbol"].toUpperCase(),h||(h=i.study.inputs["Comparison Symbol"]),o={},l=r.chart.symbol||"",l=l.replace(/[=+\-*\\%]/g,""),o[l]=s.slice(i.startFrom),!!o[l].length){l!=h&&(o[h]=null),X.B42(76),u=e.computeEquationChart(X.C2Z(l,"]",n,"[",h),o),c=0;for(var p=i.startFrom;p<s.length&&c<u.length;p++){for(;c<u.length&&s[p].DT.getTime()>u[c].DT.getTime();)c++;s[p].DT.getTime()<u[c].DT.getTime()||(s[p]["Result "+i.name]=u[c].Close,c++)}}},e.Studies.displayVsComparisonSymbol=function(r,i,n){var s,h,o,l,u;if(s=i.inputs["Comparison Symbol"].toUpperCase(),!r.getSeries({symbol:s,chart:i.chart}).length){h=":",h+=" ",r.displayErrorAsWatermark(i.panel,r.translateIf(i.study.name)+h+r.translateIf("Not Available"));return}o={skipTransform:r.panels[i.panel].name!=i.chart.name,panelName:i.panel,band:"Result "+i.name,threshold:i.study.centerline,yAxis:i.getYAxis(r),gapDisplayStyle:!0},l=o.yAxis?o.yAxis.flipped:r.panels[i.panel].yAxis.flipped,u=.3,!i.highlight&&r.highlightedDraggable&&(u*=.3);for(var c=n.length-1;c>=0;c--)if(n[c]&&n[c][s]){e.Studies.displaySeriesAsLine(r,i,n),(i.study.centerline||i.study.centerline===0)&&(i.outputs.Gain&&e.preparePeakValleyFill(r,e.extend(o,{direction:l?-1:1,color:e.Studies.determineColor(i.outputs.Gain),opacity:u})),i.outputs.Loss&&e.preparePeakValleyFill(r,e.extend(o,{direction:l?1:-1,color:e.Studies.determineColor(i.outputs.Loss),opacity:u})));return}},e.Studies.fetchAdditionalInstruments=function(r,i,n,s){var h,o,l,u,c,p,y;if(!r.quoteDriver){console.log("CIQ.Studies.fetchAdditionalInstruments: No quotefeed to fetch symbol");return}h=r.panels[i.panel].chart,i.symbols=n;function d(){X.f9T(),r.createDataSet(),r.draw()}for(o=0;o<n.length;o++)c="ob",c+="j",c+="ect",l=u=n[o],typeof u==c?l=u.symbol:u={symbol:l},p={symbol:l,symbolObject:u,bucket:"study",studyName:i.name,chartName:h.name,action:"add-study"},e.extend(p,s),y=p.loadData,r.currentlyImporting&&(p.loadData=!1),i.series||(i.series={}),i.series[l]=r.addSeries(null,p,d),i.series[l].parameters.loadData=y},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"P Rel":{name:a,initializeFN:e.Studies.initPriceRelative,seriesFN:e.Studies.displayVsComparisonSymbol,calculateFN:e.Studies.calculatePriceRelative,centerline:0,inputs:{"Comparison Symbol":t},deferUpdate:!0}})):console.error("priceRelative feature requires first activating studies feature.")};ao=W=>{var e=X,t,a,r,i,n,s,h;t=typeof _CIQ<"u"?_CIQ:W.CIQ,e.f9T(),a=typeof _timezoneJS<"u"?_timezoneJS:W.timezoneJS,t.Studies?(r="#f",r+="ff69e",i="#",i+="e",i+="1e1e1",n="V",n+="W",n+="AP",s="hh:",s+="mm",s+=":ss",h="A",h+="n",h+="chored VWA",h+="P",t.Studies.calculateVWAP=function(o,l){var u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P;if(!(l.parameters.state||{}).interactiveAdd){var{inputs:E,name:O,chart:I}=l,{market:B}=I;if(u=l.type==="AVWAP",c=I.scrubbed,!!c.length){if(!u&&t.ChartEngine.isDailyInterval(o.layout.interval)){l.error="VWAP is Intraday Only";return}if(p="hlc",p+="/",p+="3",u&&(p=E.Field,(!p||p=="field")&&(y="h",y+="l",y+="c",y+="/3",p=E.Field=y,o.changeOccurred("layout"))),d=null,g=0,e.q08(33),b=e.o_T("0",64),f=0,m=!1,l.startFrom>1&&(C="_",C+="V",C+=" ",g=c[l.startFrom-1][C+O]||0,b=c[l.startFrom-("1"<<0)]["_VxP "+O]||0,f=c[l.startFrom-1]["_VxP2 "+O]||0),u){var{market_tz:N}=B.market_def||{},[,R,q,Y]=(E["Anchor Date"]||"").match(/^(\d{4})-?(\d{2})-?(\d{2})$/)||[],[,z=0,V=0,K=0]=(E["Anchor Time"]||"").match(/^(\d{2}):?(\d{2}):?(\d{2})?$/)||[];if(![R,q,Y].every(ee=>ee||ee===0)){l.error="Invalid Anchor Date";return}e.q08(8),S=new a.Date(R,e.C2Z(q,1),Y,z,V,K,N||""),!l.startFrom&&S>=c[0].DT&&(l.startFrom=o.tickFromDate(S,o.chart,null,!0)),E["Anchor Selector"]?t.Studies.initAnchorHandle(o,l):t.Studies.removeAnchorHandle(o,l)}for(var Q=l.startFrom;Q<c.length;Q++)if(u||(d===null&&(d=t.Studies.getMarketOffset({stx:o,localQuoteDate:c[Q].DT,shiftToDateBoundary:!0})),c[Q-1]&&c[Q-1].DT&&(w=new Date(new Date(+c[Q].DT).setMilliseconds(c[Q].DT.getMilliseconds()+d)),k=new Date(new Date(+c[Q-1].DT).setMilliseconds(c[Q-1].DT.getMilliseconds()+d)),k.getDate()!==w.getDate()&&o.chart.market.isMarketDate(w)&&(d=null,g=b=f=0))),D=c[Q][p],v=c[Q].Volume,u&&!v&&(v=1),g+=v,e.q08(2),b+=e.o_T(D,v),e.q08(143),f+=e.C2Z(v,D,D),!(!u&&!g)){e.B42(0),c[Q][e.C2Z(O,"_V ")]=g,e.q08(0),c[Q][e.C2Z(O,"_VxP ")]=b,e.q08(0),c[Q][e.C2Z(O,"_VxP2 ")]=f,e.q08(0),x=c[Q][e.C2Z(O,"_SDVWAP ")]=Math.sqrt(Math.max(0,f/g-Math.pow(b/g,2))),e.B42(0),A=c[Q][e.C2Z(O,"VWAP ")]=e.C2Z(g,b,e.q08(9));for(var j=1;j<=3;j++)T="+",T+=" ",_="SD",_+="VWAP",e.B42(1),c[Q][e.o_T(j,O,_,T)]=e.o_T(A,x,j,e.B42(48)),e.q08(1),c[Q][e.o_T(j,O,"SDVWAP","- ")]=e.o_T(j,A,x,e.B42(135));m=!0}for(var Z=1;Z<=("3"|3);Z++)E["Display "+Z+" Standard Deviation ("+Z+")"]&&(L="",L+=")",M="S",M+="D",M+="VWA",M+="P",F=" Standard D",F+="e",F+="viation ",F+="(",P="+",P+=" ",e.B42(1),l.outputMap[e.C2Z(Z,O,"SDVWAP",P)]=e.o_T(F,")",Z,Z),e.q08(1),l.outputMap[e.C2Z(Z,O,M,"- ")]=e.C2Z(" Standard Deviation (",L,Z,Z));!u&&!m&&(l.error="VWAP Requires Volume")}}},t.Studies.initAnchoredVWAP=function(o,l,u,c,p,y){var d,g,b,f,m;d="A",d+="n",d+="chor",d+=" Date",e.Q1Y(),p.state||(p.state={});var{interactiveAdd:C,interactiveAddCB:S,state:w}=p;if(g=!(u[d]||u["Anchor Time"]),b="Click to select AVWAP anchor time",g&&(w.interactiveAdd||o.repositioningAnchorSelector))return"abort";if(g&&!C){for(var{dataSegment:k}=o.chart,D=0;k&&D<k.length;D++)if(k[D]){var{DT:v}=k[D];u["Anchor Date"]=t.dateToStr(v,"YYYY-MM-dd"),u["Anchor Time"]=t.dateToStr(v,"HH:mm:ss");break}}return g&&C?w.interactiveAdd=!0:(delete w.interactiveAdd,delete p.interactiveAdd,S&&setTimeout(S)),f=t.Studies.initializeFN(o,l,u,c,p,y),w.interactiveAdd?(m="noti",m+="fi",m+="cation",o.repositioningAnchorSelector={sd:f,tapToAdd:!0},o.dispatch(m,{message:b,type:"info",displayTime:0})):o.dispatch("notification",{message:b,remove:!0}),f},t.Studies.displayVWAP=function(o,l,u){var c,p,y,d,g,b,f,m,C,S,w,k,D;t.Studies.displaySeriesAsLine(o,l,u),c=l.inputs["Display 1 Standard Deviation (1)"],p=l.inputs["Display 2 Standard Deviation (2)"],y=l.inputs["Display 3 Standard Deviation (3)"],(c||p||y)&&l.inputs.Shading&&(d="VWAP",d+=" ",g=o.panels[l.panel],b={opacity:l.parameters.opacity?l.parameters.opacity:.2,skipTransform:g.name!=l.chart.name,yAxis:l.getYAxis(o)},!l.highlight&&o.highlightedDraggable&&(b.opacity*=.3),f="VWAP "+l.name,m=d+l.name,c&&(C="SDVWA",C+="P1",C+="+ ",S="SDV",S+="WAP1",S+="-",S+=" ",t.prepareChannelFill(o,t.extend({panelName:l.panel,topBand:"SDVWAP1+ "+l.name,bottomBand:f,color:t.Studies.determineColor(l.outputs[l.outputMap["SDVWAP1+ "+l.name]])},b)),t.prepareChannelFill(o,t.extend({panelName:l.panel,topBand:S+l.name,bottomBand:m,color:t.Studies.determineColor(l.outputs[l.outputMap["SDVWAP1- "+l.name]])},b)),f=C+l.name,m="SDVWAP1- "+l.name),p&&(w="S",w+="DVW",w+="AP2",w+="- ",k="SDV",k+="WAP2+",k+=" ",D="SDV",D+="WAP2+",D+=" ",t.prepareChannelFill(o,t.extend({panelName:l.panel,topBand:D+l.name,bottomBand:f,color:t.Studies.determineColor(l.outputs[l.outputMap[k+l.name]])},b)),t.prepareChannelFill(o,t.extend({panelName:l.panel,topBand:"SDVWAP2- "+l.name,bottomBand:m,color:t.Studies.determineColor(l.outputs[l.outputMap["SDVWAP2- "+l.name]])},b)),f="SDVWAP2+ "+l.name,m=w+l.name),y&&(t.prepareChannelFill(o,t.extend({panelName:l.panel,topBand:"SDVWAP3+ "+l.name,bottomBand:f,color:t.Studies.determineColor(l.outputs[l.outputMap["SDVWAP3+ "+l.name]])},b)),t.prepareChannelFill(o,t.extend({panelName:l.panel,topBand:"SDVWAP3- "+l.name,bottomBand:m,color:t.Studies.determineColor(l.outputs[l.outputMap["SDVWAP3- "+l.name]])},b)))),(l.anchorHandle||(l.parameters.state||{}).interactiveAdd)&&t.Studies.displayAnchorHandleAndLine(o,l,u)},t.Studies.removeAnchoredVWAP=function(o,l){o.dispatch("notification",{message:"Click to select AVWAP anchor time",remove:!0}),e.f9T(),t.Studies.removeAnchorHandle(o,l)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{AVWAP:{name:h,overlay:!0,calculateFN:t.Studies.calculateVWAP,seriesFN:t.Studies.displayVWAP,initializeFN:t.Studies.initAnchoredVWAP,removeFN:t.Studies.removeAnchoredVWAP,inputs:{Field:"field","Anchor Date":"","Anchor Time":"","Display 1 Standard Deviation (1)":!1,"Display 2 Standard Deviation (2)":!1,"Display 3 Standard Deviation (3)":!1,Shading:!1,"Anchor Selector":!0},outputs:{VWAP:"#FF0000","1 Standard Deviation (1)":"#e1e1e1","2 Standard Deviation (2)":"#85c99e","3 Standard Deviation (3)":"#fff69e"},parameters:{init:{opacity:.2,interactiveAdd:!0}},attributes:{"Anchor Date":{placeholder:"yyyy-mm-dd"},"Anchor Time":{placeholder:s,step:1}}},VWAP:{name:n,overlay:!0,calculateFN:t.Studies.calculateVWAP,seriesFN:t.Studies.displayVWAP,inputs:{"Display 1 Standard Deviation (1)":!1,"Display 2 Standard Deviation (2)":!1,"Display 3 Standard Deviation (3)":!1,Shading:!1},outputs:{VWAP:"#FF0000","1 Standard Deviation (1)":i,"2 Standard Deviation (2)":"#85c99e","3 Standard Deviation (3)":r},parameters:{init:{opacity:.2}}}})):console.error("vwap feature requires first activating studies feature.")};no=W=>{var e,t;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Studies?(t="Zig",t+="Z",t+="ag",e.Studies.calculateZigZag=function(a,r){var i=X,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A;n="Hi",n+="g",n+="h",s="L";function T(M,F){var P;i.Q1Y();for(var E=M+1;E<F;E++)P="ShadowR",P+="es",P+="ult ",o[E][P+r.name]=(o[F]["Result "+r.name]-o[M]["Result "+r.name])*(E-M)/(F-M)+o[M]["Result "+r.name],delete o[E]["Result "+r.name]}if(s+="o",s+="w",h="Di",h+="s",h+="tance(%",h+=")",o=r.chart.scrubbed,!(!o||!o.length)){l=r.highLowChart,u=null,c=null,p=r.inputs[h],y=0,d=0,g=0,b=null,f=null,m=0;for(var _=Math.min(o.length-1,r.startFrom);_>=0;_--)if(C="_st",C+="a",C+="te ",m=_,o[_][C+r.name]){S=o[_]["_state "+r.name],u=S[0],c=S[1],y=S[2],d=S[3],g=S[4],b=S[5],f=S[6];break}for(var L=m;L<o.length;L++){if(w=o[L][l?"High":"Close"],k=o[L][l?"Low":"Close"],c===null||c<w)if(c=w,y<0&&(u=k),i.B42(144),b=i.o_T(c,100,1,p),y>-1){if(f!==null&&c>f){o[d]["Result "+r.name]=o[d][l?"Low":"Close"],T(g,d),y=-1,u=k,g=d,d=L;continue}}else d=L;if(u===null||u>k)if(u=k,y>0&&(c=w),i.q08(145),f=i.o_T(p,u,1,100),y<1){if(b!==null&&u<b){D="H",D+="i",D+="g",D+="h",v="Resul",v+="t ",o[d][v+r.name]=o[d][l?D:"Close"],T(g,d),y=1,c=w,g=d,d=L;continue}}else d=L}for(i.Q1Y(),o[d]["Result "+r.name]=o[d][l?y=="1"*1?s:n:"Close"],o[d]["_state "+r.name]=[u,c,y,d,g,b,f],T(g,d),x=o.length-("1"-0);x>d;){if(o[x].Close||o[x].Close==="0"<<64){A="L",A+="ow",o[x]["Result "+r.name]=o[x][l?y=="1"*1?"High":A:"Close"];break}x--}T(d,x)}},e.Studies.displayZigZag=function(a,r,i){var n,s,h,o,l,u,c,p,y,d,g,b,f,m;n="S",n+="h",n+="adowResult ",s="Sha",s+="dowResul",s+="t ",h=a.chart.highLowBars,X.Q1Y(),r.highLowChart!=h&&(r.highLowChart=h,r.startFrom=0,r.study.calculateFN(a,r)),o=a.chart;for(var C=0;C<i.length;C++)l=i[C],l&&(u="Res",u+="ult",u+=" ",c="_",c+="shadowCop",c+="y",c+=" ",l[c+r.name]&&(p="_shadowCopy",p+=" ",delete l["Result "+r.name],delete l[p+r.name]),l[u+r.name]||(y="Result",y+=" ",l.transform&&delete l.transform[y+r.name]));d=i[0],X.B42(146);var S=X.C2Z(18,5,5,40);g=i[i.length-("1"<<S)],d&&d[s+r.name]&&(b="_sh",b+="adowCopy ",f="R",f+="esult ",d["Result "+r.name]=d["ShadowResult "+r.name],d.transform&&(d.transform[f+r.name]=o.transformFunc(a,o,d["ShadowResult "+r.name])),d[b+r.name]=1),g&&g[n+r.name]&&(m="Re",m+="su",m+="lt ",g["Result "+r.name]=g["ShadowResult "+r.name],g.transform&&(g.transform[m+r.name]=o.transformFunc(a,o,g["ShadowResult "+r.name])),g["_shadowCopy "+r.name]=1),e.Studies.displaySeriesAsLine(a,r,i)},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{ZigZag:{name:t,overlay:!0,seriesFN:e.Studies.displayZigZag,calculateFN:e.Studies.calculateZigZag,inputs:{"Distance(%)":10},parameters:{init:{label:!1}},attributes:{"Distance(%)":{min:.1,step:.1}}}})):console.error("zigzag feature requires first activating studies feature.")};so={CIQ:fr,SplinePlotter:Ls,timezoneJS:Ms,$$:Ps,$$$:Fs};X.f9T();(typeof __TREE_SHAKE__>"u"||!__TREE_SHAKE__)&&so.CIQ.activateImports(Es,Is,Os,Ns,Bs,Ws,Rs,qs,Ys,zs,Hs,Vs,Qs,js,Us,Zs,Xs,Js,Ks,Gs,$s,eo,to,io,ro,ao,no,null);se[50435]=function(){for(var W=2;W!==9;)switch(W){case 1:return globalThis;case 5:var e;try{for(var t=2;t!==6;)switch(t){case 4:t=typeof $cdGv>"u"?3:9;break;case 9:delete e.$cdGv;var a=Object.prototype;delete a.D$ogg,t=6;break;case 2:Object.defineProperty(Object.prototype,"D$ogg",{get:function(){for(var r=2;r!==1;)switch(r){case 2:return this}},configurable:!0}),e=D$ogg,e.$cdGv=e,t=4;break;case 3:throw""}}catch{e=window}return e;case 2:W=typeof globalThis=="object"?1:5;break}}();Bh(se[50435]);se[185837]=function(W){return{E3BrgIJ:function(){var e,t=arguments;switch(W){case 5:e=t[0]+t[2]-t[1]-t[3];break;case 170:e=t[2]/t[1]+t[0]-t[3];break;case 52:e=t[1]*t[0]*t[3]-t[2];break;case 129:e=(t[4]-t[1]-t[2])/t[0]-t[3];break;case 0:e=(t[1]-t[2]-t[3])*t[0]+t[4];break;case 20:e=t[1]-+t[2]*t[0];break;case 66:e=t[0]/t[1]+t[2];break;case 127:e=-t[3]*t[2]-t[1]+t[0];break;case 183:e=-t[1]*t[3]+t[0]-t[2];break;case 114:e=(t[0]+t[3])*t[4]*t[2]-t[1];break;case 74:e=(-t[2]+t[0])/t[3]/t[1]-t[4];break;case 160:e=(t[1]*t[0]+t[4])*t[3]-t[2];break;case 78:e=t[3]+(t[2]-t[0])/t[1];break;case 161:e=-t[1]/t[0]*t[2]/t[4]+t[3];break;case 136:e=t[4]*t[3]*t[0]+t[2]-t[1];break;case 10:e=t[0]/t[1];break;case 96:e=t[0]*t[1]/t[2];break;case 21:e=(t[3]-t[2]-t[4])/t[0]+t[1];break;case 145:e=(t[4]+t[1]-t[0])/t[3]+t[2];break;case 42:e=(t[3]-t[2])/t[1]+t[0];break;case 166:e=t[2]-t[4]/(t[5]-t[0]+t[1]/t[3]);break;case 149:e=t[1]/t[4]+t[0]-t[2]-t[3];break;case 131:e=(-t[0]+t[4])*t[2]*t[3]+t[1];break;case 50:e=t[1]-t[0]/+t[2];break;case 138:e=(t[2]/t[1]-t[4])/t[3]+t[0];break;case 157:e=t[0]>t[1];break;case 143:e=-t[3]*t[1]*t[2]*t[4]+t[0];break;case 16:e=t[3]/(t[1]/(t[0]-t[2]));break;case 89:e=(-t[3]+t[1])/t[2]-t[0];break;case 171:e=t[0]/t[1]*t[3]/t[2]-t[4];break;case 90:e=-(t[2]-t[0])*t[3]+t[1];break;case 41:e=+t[0]*t[1]-t[2]-t[3];break;case 2:e=t[0]|t[1];break;case 119:e=t[0]*t[2]+t[4]-t[1]-t[3];break;case 53:e=t[1]/t[3]/t[2]+t[0];break;case 45:e=(t[1]/t[3]+t[4])/t[2]-t[0];break;case 71:e=t[4]*t[0]*t[1]*t[2]-t[3];break;case 70:e=t[0]/t[1]-t[2]+t[3];break;case 1:e=t[1]+t[0];break;case 81:e=t[2]*(t[3]*t[0]+t[4])/+t[1];break;case 115:e=t[2]/t[1]+t[0]+t[3];break;case 111:e=-t[2]/t[4]*t[0]+t[1]+t[3];break;case 156:e=-t[2]*t[4]/t[0]+t[1]-t[3];break;case 133:e=-t[3]*t[2]*t[1]+t[0];break;case 37:e=t[2]*t[1]+t[0]-t[3];break;case 57:e=-t[0]+t[2]+t[1]-t[3];break;case 56:e=(t[2]-t[0])/(t[3]-t[1])>t[4];break;case 150:e=t[0]+t[1]-t[4]+t[2]-t[3];break;case 134:e=(t[0]-t[4])*t[1]+t[3]+t[2];break;case 103:e=(t[0]-t[1])*t[3]-t[2];break;case 147:e=(t[4]/t[1]+t[3])*t[0]-t[2];break;case 128:e=(t[2]+t[4])/t[3]+t[0]+t[1];break;case 80:e=t[0]*(t[4]+t[1])/(t[3]-t[2]);break;case 168:e=t[1]*-t[0];break;case 120:e=t[1]+(t[0]^t[2]);break;case 32:e=t[3]*t[1]/t[2]+t[4]-t[0];break;case 19:e=t[0]+t[2]*t[1];break;case 47:e=t[0]+t[1]/t[2];break;case 30:e=t[4]*t[0]/t[2]-t[3]-t[1];break;case 142:e=t[1]-t[3]/(t[0]+t[4]/t[2]);break;case 95:e=(t[4]+(t[1]|t[3])*t[2])/t[0];break;case 11:e=-t[2]+t[0]+t[1];break;case 144:e=+t[0]*(t[1]/t[3]-t[2]);break;case 105:e=t[0]-t[1]-t[2];break;case 26:e=(t[2]-t[0])/t[1];break;case 63:e=t[1]<t[0];break;case 82:e=(t[6]*t[5]-t[3]*t[4])/(t[1]*t[0]-t[2]);break;case 100:e=(-t[1]-t[0])/t[3]+t[2];break;case 122:e=t[3]*t[4]-t[0]+t[2]-t[1];break;case 108:e=-t[0]/t[1]-t[2]+t[3];break;case 75:e=(t[4]+t[2])*t[0]+t[3]-t[1];break;case 83:e=(t[3]-t[0]*t[1])/t[2];break;case 132:e=(t[0]*t[1]-t[3])/t[2]-t[4];break;case 48:e=t[0]%t[1];break;case 91:e=(t[0]+t[4])*t[2]/t[1]-t[3];break;case 117:e=-t[1]/t[2]+t[0];break;case 146:e=t[1]+t[3]*(t[2]-t[0]);break;case 6:e=t[0]-t[1];break;case 72:e=(-t[1]-t[2])*t[3]/t[0]+t[4];break;case 178:e=t[3]/t[0]-t[2]-t[4]+t[1];break;case 60:e=t[0]-t[3]-t[2]-t[1];break;case 64:e=(t[1]-t[3])/(t[0]-t[2]);break;case 102:e=t[0]+t[5]+t[2]+t[7]+t[1]+t[4]+t[6]+t[3];break;case 153:e=(t[1]+t[0])/t[3]+t[2];break;case 58:e=t[1]/t[0]-t[2];break;case 28:e=(t[0]+t[2])*t[3]-t[1];break;case 62:e=t[3]/t[1]*t[0]-t[2];break;case 88:e=t[1]+t[0]+t[4]-t[3]-t[2];break;case 182:e=t[1]+(t[4]/t[0]-t[2]/t[3]);break;case 24:e=t[0]>>t[1];break;case 15:e=t[3]-t[1]-t[2]-t[4]+t[0];break;case 18:e=t[0]*t[1];break;case 22:e=t[1]/(t[2]/t[0]);break;case 123:e=t[2]*t[3]*t[4]/t[1]+t[0];break;case 9:e=t[2]-t[3]+t[0]+t[1];break;case 137:e=t[0]*t[1]/(t[2]+t[3]);break;case 93:e=(t[2]*t[0]+t[1])/t[3];break;case 174:e=t[0]+t[2]*t[3]+t[1];break;case 34:e=(-t[1]+t[4])*t[0]*t[2]-t[3];break;case 148:e=t[1]-(t[2]^t[0]);break;case 68:e=+t[1]/t[0];break;case 69:e=(t[4]-t[1])*(t[2]-t[3])/(t[0]-t[6])+t[5];break;case 61:e=(-t[0]+t[2]-t[1])/t[4]+t[3];break;case 44:e=t[0]^t[1];break;case 109:e=(t[3]+t[0])/t[2]-t[1]+t[4];break;case 130:e=-t[2]-t[0]+t[1];break;case 116:e=t[1]/t[0]+t[2]-t[3]+t[4];break;case 3:e=(t[2]+t[0])/t[1];break;case 92:e=t[3]+(t[6]-t[0])/(t[1]-t[4])*(t[2]-t[5]);break;case 33:e=(t[2]*t[3]+t[0])/t[4]-t[1];break;case 67:e=(t[3]-t[4]+t[2])*t[0]-t[1];break;case 86:e=t[2]-(t[1]|t[0]);break;case 124:e=t[2]*t[4]*t[1]+(t[5]-t[3]*t[6])*t[0];break;case 17:e=-t[2]*t[3]/t[0]/t[4]+t[1];break;case 151:e=t[3]*t[0]/t[1]+t[2];break;case 25:e=t[2]-(t[1]-t[0]);break;case 139:e=t[0]*t[2]*t[1];break;case 73:e=(t[0]+t[2]+t[4])/t[3]-t[1];break;case 23:e=-t[1]*t[2]+t[0];break;case 181:e=-t[3]*t[1]/t[2]+t[0];break;case 35:e=(-t[1]/t[0]+t[2])*t[3]-t[4];break;case 179:e=t[1]-t[2]*t[0];break;case 59:e=t[3]+t[2]+t[0]-t[1];break;case 43:e=t[1]*t[2]/t[0]/t[4]-t[3];break;case 152:e=t[2]*t[3]-t[0]+t[1];break;case 8:e=t[2]-t[1]+t[0];break;case 172:e=(t[1]+t[0])/t[4]-t[3]-t[2];break;case 36:e=(t[0]-t[1])*t[3]+t[2];break;case 169:e=t[1]*(t[0]/t[2]-t[3]);break;case 155:e=t[1]/(t[2]*t[0])<=t[3];break;case 27:e=-t[1]+t[0];break;case 7:e=(t[2]+t[1])/+t[0];break;case 94:e=(t[0]+t[2]*t[1])/t[3];break;case 175:e=t[0]==t[1];break;case 163:e=-t[0]*t[4]/t[3]+t[1]+t[2];break;case 154:e=(t[2]%t[3]+t[0])*t[1];break;case 112:e=(-t[2]+t[0])*t[3]-t[1];break;case 106:e=(t[1]-(t[2]+t[0]))/t[3];break;case 110:e=(t[0]-t[3]+t[4])/t[2]+t[1];break;case 173:e=t[1]-t[3]*t[2]-t[0];break;case 31:e=t[0]<<t[1];break;case 167:e=t[1]*-+t[0];break;case 14:e=t[0]-+t[1];break;case 159:e=-t[1]/t[3]/t[2]-t[0];break;case 46:e=t[1]-t[2]/t[0];break;case 97:e=t[0]!==t[1];break;case 4:e=t[2]+t[0]-t[1];break;case 38:e=t[2]*t[1]<t[0];break;case 113:e=-t[2]/t[1]+t[3]-t[0];break;case 176:e=t[0]+t[3]/t[2]+t[1];break;case 85:e=t[1]+ +t[0];break;case 135:e=t[4]/t[0]-t[2]+t[3]-t[1];break;case 165:e=t[0]*t[4]*t[1]-t[3]-t[2];break;case 140:e=t[0]+t[1]+t[2]+t[4]-t[3];break;case 40:e=t[1]*t[2]-t[0]-t[3];break;case 118:e=(t[3]-t[1])/t[0]-t[4]+t[2];break;case 79:e=t[2]-t[1]*(t[3]-t[0]);break;case 164:e=(t[2]-t[4])*t[0]/t[3]+t[1];break;case 104:e=-t[4]-t[3]+t[2]-t[1]+t[0];break;case 98:e=t[0]+t[1]-t[2]-t[3]+t[4];break;case 101:e=-t[2]+t[3]-t[0]+t[1];break;case 141:e=t[2]-(t[0]<<t[1]);break;case 39:e=t[1]+(t[2]-t[0]);break;case 49:e=t[2]*t[0]-t[1];break;case 54:e=(t[2]+t[3])/t[0]-t[1];break;case 12:e=(t[3]*t[2]+t[1])/t[4]+t[0];break;case 158:e=t[1]*(t[2]+t[0]);break;case 107:e=t[2]+t[0]+t[3]+t[1];break;case 65:e=(-t[3]+t[2])/t[0]+t[1];break;case 84:e=t[2]*t[1]+t[0];break;case 126:e=t[0]*t[4]/t[3]-t[2]+t[1];break;case 125:e=t[0]/t[2]*t[3]+t[1]+t[4];break;case 76:e=t[2]-t[1]-t[0]+t[3];break;case 87:e=t[2]+t[1]+t[0];break;case 177:e=t[4]/t[0]*t[1]-t[2]-t[3];break;case 162:e=t[2]-t[1]/(t[3]+t[0]);break;case 121:e=(t[1]+ +t[0])*t[2];break;case 77:e=t[0]/+t[1];break;case 55:e=t[2]-t[0]+t[1]-t[3];break;case 180:e=t[0]*t[1]*t[2]*t[3];break;case 99:e=(-t[2]*t[4]-t[3])/t[1]+t[0];break;case 13:e=(t[3]+t[2]+t[0]+t[1])/+t[4];break;case 51:e=t[0]-t[2]+t[3]-t[4]+t[1];break;case 29:e=t[1]*t[0]/t[2]-t[3];break}return e},P1IEEU7:function(e){W=e}}}();se[595602]=!1;se[245730]=!0;se.A1W=function(){return typeof se[185837].E3BrgIJ=="function"?se[185837].E3BrgIJ.apply(se[185837],arguments):se[185837].E3BrgIJ};se[481611]=se[185837];function se(){}se.h8L=function(){return typeof se[185837].P1IEEU7=="function"?se[185837].P1IEEU7.apply(se[185837],arguments):se[185837].P1IEEU7};se.q8H=function(){return typeof se[227856].K9GamRN=="function"?se[227856].K9GamRN.apply(se[227856],arguments):se[227856].K9GamRN};se.b00=function(){return typeof se[185837].E3BrgIJ=="function"?se[185837].E3BrgIJ.apply(se[185837],arguments):se[185837].E3BrgIJ};se.r8j=function(){return typeof se[227856].K9GamRN=="function"?se[227856].K9GamRN.apply(se[227856],arguments):se[227856].K9GamRN};se[131553]=546;se[227856]=function(){for(var W=2;W!==9;)switch(W){case 2:var e=[arguments];e[1]=void 0,W=5;break;case 5:e[2]={},e[2].K9GamRN=function(){for(var t=2;t!==90;)switch(t){case 39:a[39]={},a[39].x2X=["W7L"],a[39].a6F=function(){var r=function(){return btoa("=")},i=!/\u0062\u0074\u006f\u0061/.B11gz(r+[]);return i},a[68]=a[39],t=54;break;case 42:a[96].x2X=["G7J"],a[96].a6F=function(){var r=typeof t4BHM$=="function";return r},a[62]=a[96],t=39;break;case 24:a[30]=a[13],a[32]={},a[32].x2X=["W7L"],t=21;break;case 75:a[81]={},a[81][a[71]]=a[85][a[75]][a[38]],a[81][a[36]]=a[34],a[10].E6Gr_(a[81]),t=71;break;case 13:a[9].a6F=function(){var r=typeof B2T8_=="function";return r},a[4]=a[9],a[2]={},a[2].x2X=["W7L"],a[2].a6F=function(){var r=function(){return"xy".substring(0,1)},i=!/\u0079/.B11gz(r+[]);return i},a[8]=a[2],t=18;break;case 57:t=a[56]<a[3].length?56:69;break;case 71:a[38]++,t=76;break;case 5:return 23;case 64:a[89]="d5k",a[66]="l3C",a[75]="x2X",a[36]="V0F",a[12]="a6F",a[71]="j8Q",t=58;break;case 56:a[85]=a[3][a[56]];try{a[34]=a[85][a[12]]()?a[89]:a[66]}catch{a[34]=a[66]}t=77;break;case 29:a[51].x2X=["W7L"],a[51].a6F=function(){var r=function(){return"aaaa|a".substr(0,3)},i=!/\x7c/.B11gz(r+[]);return i},a[44]=a[51],a[96]={},t=42;break;case 68:t=68;break;case 21:a[32].a6F=function(){var r=function(){return"aa".lastIndexOf("a")},i=/\u0031/.B11gz(r+[]);return i},a[69]=a[32],a[29]={},a[29].x2X=["W7L"],a[29].a6F=function(){var r=function(){return decodeURIComponent("%25")},i=!/\x32\x35/.B11gz(r+[]);return i},a[83]=a[29],a[51]={},t=29;break;case 70:a[56]++,t=57;break;case 4:a[3]=[],a[1]={},a[1].x2X=["G7J"],a[1].a6F=function(){var r=!1,i=[];try{for(var n in console)i.E6Gr_(n);r=i.length===0}catch{}var s=r;return s},t=7;break;case 18:a[5]={},a[5].x2X=["G7J"],a[5].a6F=function(){var r=typeof t0IVed=="function";return r},t=15;break;case 58:a[56]=0,t=57;break;case 54:a[3].E6Gr_(a[44]),a[3].E6Gr_(a[30]),a[3].E6Gr_(a[4]),a[3].E6Gr_(a[6]),t=50;break;case 1:t=e[1]?5:4;break;case 15:a[6]=a[5],a[13]={},a[13].x2X=["W7L"],a[13].a6F=function(){var r=function(){return"x".startsWith("x")},i=/\u0074\u0072\x75\u0065/.B11gz(r+[]);return i},t=24;break;case 69:t=function(r){for(var i=2;i!==22;)switch(i){case 4:n[8]={},n[1]=[],i=9;break;case 18:n[9]=!1,i=17;break;case 7:i=n[3]<n[0][0].length?6:18;break;case 17:n[3]=0,i=16;break;case 16:i=n[3]<n[1].length?15:23;break;case 12:n[1].E6Gr_(n[6][a[71]]),i=11;break;case 10:i=n[6][a[36]]===a[89]?20:19;break;case 19:n[3]++,i=7;break;case 15:n[7]=n[1][n[3]],n[4]=n[8][n[7]].h/n[8][n[7]].t,i=26;break;case 13:n[8][n[6][a[71]]]=(function(){for(var s=2;s!==9;)switch(s){case 2:var h=[arguments];return h[5]={},h[5].h=0,h[5].t=0,h[5]}}).Y_BaYB(this,arguments),i=12;break;case 11:n[8][n[6][a[71]]].t+=!0,i=10;break;case 20:n[8][n[6][a[71]]].h+=!0,i=19;break;case 2:var n=[arguments];i=1;break;case 26:i=n[4]>=.5?25:24;break;case 8:n[3]=0,i=7;break;case 9:n[3]=0,i=8;break;case 14:i=typeof n[8][n[6][a[71]]]>"u"?13:11;break;case 1:i=n[0][0].length===0?5:4;break;case 23:return n[9];case 6:n[6]=n[0][0][n[3]],i=14;break;case 25:n[9]=!0,i=24;break;case 5:return;case 24:n[3]++,i=16;break}}(a[10])?68:67;break;case 77:a[38]=0,t=76;break;case 2:var a=[arguments];t=1;break;case 7:a[7]=a[1],a[9]={},a[9].x2X=["G7J"],t=13;break;case 50:a[3].E6Gr_(a[7]),a[3].E6Gr_(a[62]),a[3].E6Gr_(a[69]),a[3].E6Gr_(a[68]),a[3].E6Gr_(a[8]),a[3].E6Gr_(a[83]),a[10]=[],t=64;break;case 67:return e[1]=86,38;case 76:t=a[38]<a[85][a[75]].length?75:70;break}},W=3;break;case 3:return e[2]}}();se.L_A=function(){return typeof se[185837].P1IEEU7=="function"?se[185837].P1IEEU7.apply(se[185837],arguments):se[185837].P1IEEU7};se[50435].I355=se;se[633704]=se[198498];se[198498]=function(){var W=function(t,a){var r=a&65535,i=a-r;return(i*t|0)+(r*t|0)|0},e=function(t,a,r){for(var i=3432918353,n=461845907,s=r,h=a&-4,o=0;o<h;o+=4){var l=t.D5AX$(o)&255|(t.D5AX$(o+1)&255)<<8|(t.D5AX$(o+2)&255)<<16|(t.D5AX$(o+3)&255)<<24;l=W(l,i),l=(l&131071)<<15|l>>>17,l=W(l,n),s^=l,s=(s&524287)<<13|s>>>19,s=s*5+3864292196|0}switch(l=0,a%4){case 3:l=(t.D5AX$(h+2)&255)<<16;case 2:l|=(t.D5AX$(h+1)&255)<<8;case 1:l|=t.D5AX$(h)&255,l=W(l,i),l=(l&131071)<<15|l>>>17,l=W(l,n),s^=l}return s^=a,s^=s>>>16,s=W(s,2246822507),s^=s>>>13,s=W(s,3266489909),s^=s>>>16,s};return{N$mYWS6:e}}();function Bh(W){function e(l){for(var u=2;u!==5;)switch(u){case 2:var c=[arguments];return c[0][0]}}function t(l){for(var u=2;u!==5;)switch(u){case 2:var c=[arguments];return c[0][0].RegExp}}for(var a=2;a!==101;)switch(a){case 57:i[48]+=i[29],i[48]+=i[44],i[19]=i[66],i[19]+=i[77],i[19]+=i[34],a=75;break;case 78:r(t,"test",i[39],i[22]),a=104;break;case 51:i[80]="",i[31]="M$",i[80]="aYB",i[65]="",i[65]="_B",i[39]=1,i[11]="Y",a=65;break;case 65:i[88]=0,i[60]=i[11],i[60]+=i[65],i[60]+=i[80],a=61;break;case 31:i[34]="",i[34]="Ved",i[77]="",i[77]="",a=44;break;case 67:i[25]+=i[23],i[40]=i[9],i[40]+=i[17],i[40]+=i[4],a=88;break;case 102:r(n,"apply",i[39],i[60]),a=101;break;case 36:i[28]="H",i[29]="pti",i[71]="",i[71]="t4B",a=51;break;case 11:i[7]="AX$",i[1]="",i[1]="2T",i[17]="b",a=18;break;case 88:i[96]=i[6],i[96]+=i[8],i[96]+=i[3],i[68]=i[5],i[68]+=i[2],i[68]+=i[7],a=82;break;case 23:i[51]="",i[51]="al",i[78]="",i[78]="idu",i[91]="",i[91]="__res",i[34]="",a=31;break;case 82:var r=function(l,u,c,p){for(var y=2;y!==5;)switch(y){case 2:var d=[arguments];s(i[0][0],d[0][0],d[0][1],d[0][2],d[0][3]),y=5;break}};a=81;break;case 61:i[92]=i[71],i[92]+=i[28],i[92]+=i[31],i[48]=i[49],a=57;break;case 103:r(e,i[48],i[88],i[92]),a=102;break;case 18:i[14]="",i[14]="",i[14]="gz",i[23]="8_",a=27;break;case 71:i[22]+=i[13],i[22]+=i[14],i[25]=i[37],i[25]+=i[1],a=67;break;case 44:i[77]="0I",i[66]="",i[66]="t",i[44]="",a=40;break;case 104:r(e,i[93],i[88],i[19]),a=103;break;case 79:r(e,i[40],i[88],i[25]),a=78;break;case 81:r(h,"charCodeAt",i[39],i[68]),a=80;break;case 27:i[13]="",i[13]="11",i[37]="",i[37]="B",a=23;break;case 3:i[6]="",i[6]="E6G",i[9]="",i[9]="",a=6;break;case 2:var i=[arguments];i[2]="5",i[3]="",i[3]="_",a=3;break;case 80:r(o,"push",i[39],i[96]),a=79;break;case 6:i[8]="r",i[5]="D",i[4]="stract",i[9]="__a",a=11;break;case 75:i[93]=i[91],i[93]+=i[78],i[93]+=i[51],i[22]=i[37],a=71;break;case 40:i[44]="",i[44]="mize",i[49]="",i[49]="__o",a=36;break}function n(l){for(var u=2;u!==5;)switch(u){case 2:var c=[arguments];return c[0][0].Function}}function s(l,u,c,p,y){for(var d=2;d!==14;)switch(d){case 8:f[5]=!1,f[1]="d";try{for(var g=2;g!==13;)switch(g){case 2:f[9]={},f[2]=(0,f[0][1])(f[0][0]),g=5;break;case 5:f[8]=[f[2],f[2].prototype][f[0][3]],g=4;break;case 3:return;case 4:g=f[8].hasOwnProperty(f[0][4])&&f[8][f[0][4]]===f[8][f[0][2]]?3:9;break;case 9:f[8][f[0][4]]=f[8][f[0][2]],f[9].set=function(m){for(var C=2;C!==5;)switch(C){case 2:var S=[arguments];f[8][f[0][2]]=S[0][0],C=5;break}},f[9].get=function(){for(var m=2;m!==14;)switch(m){case 6:return typeof f[8][f[0][2]]==C[8]?void 0:f[8][f[0][2]];case 2:var C=[arguments];C[4]="ined",C[3]="f",C[5]="",m=3;break;case 3:C[5]="unde",C[8]=C[5],C[8]+=C[3],C[8]+=C[4],m=6;break}},f[9].enumerable=f[5];try{for(var b=2;b!==3;)switch(b){case 2:f[4]=f[1],f[4]+=f[6],f[4]+=f[3],f[0][0].Object[f[4]](f[8],f[0][4],f[9]),b=3;break}}catch{}g=13;break}}catch{}d=14;break;case 2:var f=[arguments];f[3]="",f[3]="",f[3]="Property",f[6]="",f[6]="efine",d=8;break}}function h(l){for(var u=2;u!==5;)switch(u){case 2:var c=[arguments];return c[0][0].String}}function o(l){for(var u=2;u!==5;)switch(u){case 2:var c=[arguments];return c[0][0].Array}}}se.i7q=function(){return typeof se[198498].N$mYWS6=="function"?se[198498].N$mYWS6.apply(se[198498],arguments):se[198498].N$mYWS6};se.E3k=function(){return typeof se[198498].N$mYWS6=="function"?se[198498].N$mYWS6.apply(se[198498],arguments):se[198498].N$mYWS6};var oo,lo,ho,uo,co,fo,po,go,mo,yo,vo,bo,Co,xo,So,ko,Ao,wo,To,_o,Do,Lo,Mo,Po,Fo,Eo,Io,Oo,No,Bo,Wo,Ro,qo,Yo,zo,Ho,Vo,Qo,jo,Uo,Zo,Xo,Jo,Ko,Go,$o,el,tl,il,rl,al,nl,sl,ol,ll,hl,ul,cl,fl,dl,pl,gl,ml,yl,vl,bl,Cl,xl,Sl;oo=W=>{var e=se,t;t=typeof _CIQ<"u"?_CIQ:W.CIQ,t.Renderer.Aggregations=function(r){var i;this.construct(r),e.q8H(),i=this.params,this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,this.isAggregation=!0,i.highlightable=!1,i.name!="_main_series"&&(console.warn("Aggregations are only allowed on main series."),i.invalid=!0)},t.inheritsFrom(t.Renderer.Aggregations,t.Renderer.OHLC,!1),t.Renderer.Aggregations.requestNew=function(r,i){var n,s,h,o;n=null;for(var l=0;l<r.length;l++)switch(s="k",s+="ag",s+="i",h=r[l],h){case s:case"pandf":n=h;break;case"heikinashi":case"linebreak":case"rangebars":case"renko":n="candle";break;default:return null}return n===null?null:(e.r8j(),o=new t.Renderer[n=="candle"?"OHLC":"Aggregations"]({params:t.extend(i,{type:n})}),o.isAggregation=!0,o)},e.r8j(),t.Renderer.Aggregations.prototype.drawIndividualSeries=function(r,i){var n,s,h,o;if(!i.invalid)return n=this.stx,e.r8j(),s={colors:[]},i.type=="kagi"?(h="stx_k",h+="ag",h+="i_down",n.drawKagiSquareWave(r.panel,"stx_kagi_up","stx_kagi_down",i),s.colors.push(n.getCanvasColor("stx_kagi_up")),s.colors.push(n.getCanvasColor(h))):i.type=="pandf"&&(o="stx",o+="_pandf_do",o+="wn",n.drawPointFigureChart(r.panel,"stx_pandf_up","X",i),s.colors.push(n.getCanvasColor("stx_pandf_up")),n.drawPointFigureChart(r.panel,"stx_pandf_down","O",i),s.colors.push(n.getCanvasColor(o))),s},t.ChartEngine.prototype.setAggregationType=function(r){var i,n;i="lay",i+="out",this.layout.chartType="candle",n=this.chart,n.baseline.userLevel!==!1&&(n.baseline.userLevel=n.baseline.defaultLevel,n.panel.yAxis.scroll=t.ChartEngine.YAxis.prototype.scroll),this.layout.aggregationType=r,this.setMainSeriesRenderer(),e.q8H(),n.canvas&&(this.createDataSet(),this.draw()),this.changeOccurred(i)},t.ChartEngine.prototype.drawKagiSquareWave=function(r,i,n,s){var h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A;e.r8j(),h=r.chart,this.startClip(r.name),o=h.dataSegment,l=h.context,u=r.yAxis,u.flipped&&(c=i,i=n,n=c),p=this.canvasStyle(i),y=this.canvasStyle(n),this.canvasColor(i),s.border_color_up&&(l.strokeStyle=s.border_color_up),d=l.strokeStyle,this.canvasColor(n),s.border_color_down&&(l.strokeStyle=s.border_color_down),g=l.strokeStyle,b=1,p.width&&parseInt(p.width,10)<=25&&(b=Math.max(1,t.stripPX(p.width))),f=1,y.width&&parseInt(y.width,"10"*1)<=25&&(f=Math.max(1,t.stripPX(y.width))),this.highlightedDraggable&&(l.globalAlpha*=.3),l.beginPath(),m=h.dataSet.length-h.scroll-1,C=!0,S=null,w=null,e.h8L(0);var T=e.b00(15,10,5,13,121);k=r.left-.5*this.layout.candleWidth+this.micropixels-T;for(var _="0"*1;_<=o.length;_++)if(k+=this.layout.candleWidth,D=o[_],!!D){if((!D.cache||h.pixelCacheExpired)&&(D.cache={}),D.projection)break;w=D.kagiTrend,u.flipped&&(w*=-1),D.transform&&h.transformFunc&&(v=D.kagiPrevOpen,D=D.transform,D.kagiPrevOpen=h.transformFunc(this,h,v)),x=D.cache,e.h8L(1),A=e.A1W(_,m),(A<r.cacheLeft||A>r.cacheRight||!x.kagiOpen)&&(x.kagiOpen=u.semiLog?u.height*(1-(Math.log(Math.max(D.Open,0))/Math.LN10-u.logLow)/u.logShadow):(u.high-D.Open)*u.multiplier,x.kagiClose=u.semiLog?u.height*(1-(Math.log(Math.max(D.Close,0))/Math.LN10-u.logLow)/u.logShadow):(u.high-D.Close)*u.multiplier,u.flipped?(x.kagiOpen=u.bottom-x.kagiOpen,x.kagiClose=u.bottom-x.kagiClose):(x.kagiOpen+=u.top,x.kagiClose+=u.top)),x.kagiClose,S=u.semiLog?u.height*(1-(Math.log(Math.max(D.kagiPrevOpen,0))/Math.LN10-u.logLow)/u.logShadow):(u.high-D.kagiPrevOpen)*u.multiplier,u.flipped?S=u.bottom-S:S+=u.top,C?(l.moveTo(m>=0?r.left:Math.floor(k),x.kagiOpen),l.lineTo(Math.floor(k),x.kagiOpen),x.kagiClose<x.kagiOpen?(l.strokeStyle=d,l.lineWidth=b):(l.strokeStyle=g,l.lineWidth=f)):w!=-1&&x.kagiClose<S&&S<x.kagiOpen?(l.lineTo(Math.floor(k),S),l.stroke(),l.beginPath(),l.moveTo(Math.floor(k),S),l.strokeStyle=d,l.lineWidth=b):w!=1&&x.kagiClose>S&&S>x.kagiOpen&&(l.lineTo(Math.floor(k),S),l.stroke(),l.beginPath(),l.moveTo(Math.floor(k),S),l.strokeStyle=g,l.lineWidth=f),l.lineTo(Math.floor(k),x.kagiClose),_+1<o.length&&l.lineTo(Math.floor(k+this.layout.candleWidth),x.kagiClose),C=!1}l.stroke(),this.endClip(),e.h8L(2),l.lineWidth=e.A1W("1",0),h.pixelCacheExpired=!1},t.ChartEngine.prototype.drawPointFigureChart=function(r,i,n,s){var h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P;h=r.chart,this.startClip(r.name),o=h.dataSegment,l=h.context,this.canvasColor(i),n=="X"&&s.border_color_up?l.strokeStyle=s.border_color_up:n=="O"&&s.border_color_down&&(l.strokeStyle=s.border_color_down),u=this.canvasStyle(i);function E(R,q,Y){e.h8L(3),l.moveTo(e.A1W(q,2,R),e.A1W(c,w,Y,e.h8L(4))),e.h8L(1),l.bezierCurveTo(e.A1W(d,q),e.b00(c,w,Y,e.L_A(4)),e.b00(d,q,e.L_A(1)),e.A1W(Y,p,S,w,e.h8L(5)),e.A1W(q,2,R,e.h8L(3)),e.b00(Y,p,S,w,e.h8L(5))),e.h8L(6),l.bezierCurveTo(e.A1W(R,y),e.A1W(Y,p,S,w,e.h8L(5)),e.A1W(R,y,e.h8L(6)),e.b00(c,w,Y,e.L_A(4)),e.b00("2",q,R,e.h8L(7)),e.A1W(c,w,Y,e.L_A(4)))}c=parseInt(u.paddingTop,10),e.r8j(),p=parseInt(u.paddingBottom,10),y=parseInt(u.paddingLeft,10),d=parseInt(u.paddingRight,"10"-0),u.width&&parseInt(u.width,10)<=25?l.lineWidth=Math.max(1,t.stripPX(u.width)):l.lineWidth=2,this.highlightedDraggable&&(l.globalAlpha*=.3),l.beginPath();function O(R,q,Y){e.h8L(1),l.moveTo(e.b00(y,R),e.b00(w,p,Y,e.L_A(8))),e.L_A(6),l.lineTo(e.b00(q,d),e.A1W(c,w,Y,S,e.L_A(9))),e.L_A(1),l.moveTo(e.b00(y,R),e.A1W(c,w,Y,S,e.L_A(9))),e.h8L(6),l.lineTo(e.b00(q,d),e.A1W(w,p,Y,e.L_A(8)))}g=this.chart.state.aggregation.box,e.L_A(6);var I=e.A1W(14,13);b=h.dataSet.length-h.scroll-I,f=r.yAxis,S=g*f.multiplier,e.h8L(10),w=e.A1W(S,2),k=this.layout.candleWidth,e.h8L(8);var B=e.A1W(16,15,0);D=r.left-k+this.micropixels-B;for(var N=0;N<o.length;N++)if(D+=k,v=o[N],!!v){if((!v.cache||h.pixelCacheExpired)&&(v.cache={}),v.projection)break;if(x=v.pfOpen,A=v.pfClose,T=v.pfTrend,_=v.pfStepBack,v.transform&&h.transformFunc&&(v=v.transform,x=h.transformFunc(this,h,x),A=h.transformFunc(this,h,A)),L=v.cache,e.L_A(1),M=e.A1W(N,b),(M<r.cacheLeft||M>r.cacheRight||!L.pfOpen)&&(f.flipped?(L.pfOpen=f.bottom-(f.high-x)*f.multiplier,L.pfClose=f.bottom-(f.high-A)*f.multiplier):(L.pfOpen=(f.high-x)*f.multiplier+f.top,L.pfClose=(f.high-A)*f.multiplier+f.top)),F=Math.round(D),e.h8L(1),P=Math.round(e.A1W(k,D)),m=Math.abs(Math.round((A-x)/g)),C=L.pfOpen,n==_&&(_=="X"?(e.h8L(6),O(F,P,e.A1W(C,S))):_=="O"&&(e.h8L(1),E(F,P,e.b00(S,C)))),n==T)for(;m>=0;m--)n=="X"?(O(F,P,C),C-=f.flipped?-S:S):n=="O"&&(E(F,P,C),C+=f.flipped?-S:S)}l.stroke(),this.endClip(),l.lineWidth=1,h.pixelCacheExpired=!1},t.ChartEngine.calculateAggregation=function(r,i,n,s){var h,o,l,u,c,p,y,d;if(h="re",h+="n",h+="k",h+="o",o="lin",o+="e",o+="br",o+="eak",l="k",l+="ag",l+="i",c=r.layout,e.r8j(),["heikinashi","heikenashi"].indexOf(i)>-1){p=1124594907,y=-1615468937,d=2;for(var g=1;e.E3k(g.toString(),g.toString().length,56721)!==p;g++)u=t.calculateHeikinAshi(r,n,s),d+=2;e.E3k(d.toString(),d.toString().length,"33592"-0)!==y&&(u=t.calculateHeikinAshi(r,n,s))}else i=="rangebars"?u=t.calculateRangeBars(r,n,c.rangebars,s):i==l?u=t.calculateKagi(r,n,c.kagi,s):i==o?u=t.calculateLineBreak(r,n,c.priceLines,s):i==h?u=t.calculateRenkoBars(r,n,c.renko,s):i=="pandf"&&(u=t.calculatePointFigure(r,n,c.pandf,s));return u};function a(r){return e.q8H(),r>.001?Number(r.toFixed("4"|0)):r}t.calculateHeikinAshi=function(r,i,n){var s,h,o,l,u,c,p,y,d,g,b;if(!i.length)return i;n||(n=[]),s=[];for(var f=0;f<i.length;f++)if(h=i[f],!!h){if(o=s[s.length-1],!o&&!f){e.h8L(11);var m=e.A1W(7,2,8);o=n[n.length-m]}o||(o=h),l=h.Close,u=h.Open,c=h.High,p=h.Low,y=o.Open,u=u||u===0?u:l,c=c||c===0?c:l,p=p||p==="0">>0?p:l,y=y||y===0?y:o.Close,e.h8L(12);var C=e.A1W(1,19,5,30,169);d=(y+o.Close)/C,e.L_A(13),g=e.b00(p,l,c,u,"4"),b={DT:h.DT,displayDate:h.displayDate,Date:h.Date,Open:d,Close:g,High:Math.max(c,Math.max(d,g)),Low:Math.min(p,Math.min(d,g)),Volume:h.Volume,iqPrevClose:o.Close};for(var S in h)!b[S]&&b[S]!==0&&(b[S]=h[S]);s.push(b)}return s},t.calculateKagi=function(r,i,n,s){var h,o,l,u,c,p,y,d;if(!i.length)return i;s||(s=[]),h=r.layout,o=r.chart,n=parseFloat(n),o.defaultChartStyleConfig.kagi=t.ChartEngine.isDailyInterval(h.interval)?4:.4,(isNaN(n)||n<=("0"|0))&&(n=o.defaultChartStyleConfig.kagi,t.Market.Symbology.isForexSymbol(o.symbol)&&(n/=4),h.kagi!==null&&(h.kagi=null,r.changeOccurred("layout"))),e.h8L(2),n/=e.A1W("100",96),l=[],e.L_A(8);var g=e.A1W(17,16,0);u=s[s.length-g],c=u?u.DT:0;for(var b=0;b<i.length;b++)if(p=i[b],!!p&&(u||(e.h8L(14),u=i[e.b00(b,"1")]),!!u)){if(y=u.Open||u.Open===0?u.Open:u.Close,y>u.Close){if(p.Close>u.Close*(1+n))p.Open=u.Close;else if(u.Close>p.Close&&(u.Close=p.Close),u.Volume+=p.Volume,b<i.length-1)continue}else if(y<u.Close){if(p.Close<u.Close*(1-n))p.Open=u.Close;else if(u.Close<p.Close&&(u.Close=p.Close),u.Volume+=p.Volume,b<i.length-1)continue}else if(u.Close=p.Close,u.Volume+=p.Volume,b<i.length-1)continue;d={DT:u.DT,displayDate:u.displayDate,Date:u.Date,Open:u.Open,Close:u.Close,High:Math.max(u.Open,u.Close),Low:Math.min(u.Open,u.Close),Volume:u.Volume,iqPrevClose:u.iqPrevClose};for(var f in u)!d[f]&&d[f]!==0&&(d[f]=u[f]);l.length?d.kagiPrevOpen=l[l.length-1].Open:d.kagiPrevOpen=d.Open,d.Close>d.kagiPrevOpen&&d.kagiPrevOpen>d.Open?d.kagiTrend=1:d.Close<d.kagiPrevOpen&&d.kagiPrevOpen<d.Open&&(d.kagiTrend=-1),c<d.DT&&l.push(d),u=p,o.currentQuote={Close:p.Close}}return l},t.calculateLineBreak=function(r,i,n,s){var h,o,l,u,c,p,y,d,g,b,f,m,C,S;if(!i.length)return i;s||(s=[]),h=r.layout,o=r.chart,o.defaultChartStyleConfig.priceLines=3,n=parseInt(n,10),e.q8H(),isNaN(n)||n<=0?(n=o.defaultChartStyleConfig.priceLines,h.priceLines!==null&&(h.priceLines=null,r.changeOccurred("layout"))):n>10&&(h.priceLines=n=10),l=s.slice(-n),u=l.length,c=0;e:for(var w=0;w<i.length;w++)if(p=i[w],!!p){if(c+=p.Volume,y=l[l.length-("1"<<0)],y||(y={Open:p.Open,Close:p.Open,High:p.Open,Low:p.Open}),d=y.Close,g=y.High,b=y.Low,f=y.Open,g=g||g===0?g:d,b=b||b===0?b:d,f=f||f===0?f:d,m={DT:p.DT,displayDate:p.displayDate,Date:p.Date,Close:p.Close,Volume:c,iqPrevClose:d},o.currentQuote={Close:p.Close},!(p.Close>d&&y.Close>f)){if(!(p.Close<d&&y.Close<f))if(p.Close>g){for(C=2;C<=n;C++)if(S=l[l.length-C],S&&p.Close<=S.High)continue e}else if(p.Close<b){for(C=2;C<=n;C++)if(S=l[l.length-C],S&&p.Close>=S.Low)continue e}else continue}p.Close<y.Close?m.Open=Math.min(f,d):m.Open=Math.max(f,d),m.Low=Math.min(m.Open,m.Close),m.High=Math.max(m.Open,m.Close);for(var k in p)!m[k]&&m[k]!==0&&(m[k]=p[k]);l.push(m),c=0}return l.slice(u)},t.getMaxRenkoBarsPerRecord=function(r){return 200},t.calculateRenkoBars=function(r,i,n,s,h){var o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O;function I(q,Y){e.r8j();var z;q=Number(q.toFixed(8)),Y=Number(Y.toFixed(8)),z={DT:D.DT,displayDate:D.displayDate,Date:D.Date,Open:q,Close:Y,High:Math.max(q,Y),Low:Math.min(q,Y),Volume:0,iqPrevClose:q!=Y?q:null};for(var V in D)!z[V]&&z[V]!==0&&(z[V]=D[V]);S.push(z)}if(!i.length)return[];s||(s=[]),o=r.layout,l=r.chart,u=n,c=l.state.aggregation,c||(c=l.state.aggregation={}),p=Math.min(300,i.length),c.minMax||(y="Cl",y+="o",y+="se",c.minMax=r.determineMinMax(i.slice(i.length-p),[y,"High","Low"])),e.h8L(15);var B=e.b00(19,12,3,0,3);if(d=c.minMax[B]-c.minMax[0],g=r.panels[l.name].height,!g)return[];if(b=s.length>0,e.h8L(16),f=a(e.b00("30",g,0,d)),m=t.getMaxRenkoBarsPerRecord(l.symbolObject),h&&(C=i.reduce((q,Y)=>{var z;return z=Math.abs(Y.Close-Y.iqPrevClose),e.r8j(),z>q?z:q},0),e.L_A(10),c.minAutoRenko=a(e.A1W(C,m))),l.defaultChartStyleConfig.renko=c.minAutoRenko||f,n===null||isNaN(n)||n<=0?(n=l.defaultChartStyleConfig.renko,o.renko!==null&&(o.renko=null,r.changeOccurred("layout"))):(e.h8L(10),n=Math.max(n,e.A1W(d,g)),o.renko!==n&&(o.renko=n,r.changeOccurred("layout"))),S=[],w=null,k=null,e.q8H(),D=null,s.length){e.h8L(17);var N=e.A1W(289,2,17,17,1);v=s[s.length-N],w=v.Low-n,k=v.High+n}for(var R=0;R<i.length;R++)if(x=i[R],!!x){if(!w&&!k&&(A=x.Open||x.Open===0?x.Open:x.Close,T=Math.floor(A/n)*n,_=isNaN(T)?A:T,e.h8L(6),w=e.A1W(_,n),e.h8L(1),k=e.b00(n,_)),e.h8L(18),L=e.A1W(n,m),M=!o.renko,F=w-x.Close,P=x.Close-k,E=F>L||P>L,O=M&&E&&!h&&!b,O)return t.calculateRenkoBars(r,i,u,s,!0);for(;;)if(D||(D=x),x.Close<=w)e.L_A(1),I(e.b00(n,w),w),e.L_A(19),k=e.b00(w,n,2),w-=n,D=null;else if(x.Close>=k)e.L_A(6),I(e.A1W(k,n),k),e.L_A(20),w=e.A1W(n,k,"2"),k+=n,D=null;else break;l.currentQuote=x}return w<i[i.length-1].Close&&w+n>i[i.length-1].Close?(e.h8L(1),I(e.A1W(n,w),i[i.length-1].Close)):k>i[i.length-1].Close&&k-n<i[i.length-1].Close&&(e.L_A(6),I(e.b00(k,n),i[i.length-1].Close)),S},t.calculateRangeBars=function(r,i,n,s){var h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T;h="L",h+="o";function _(){e.L_A(1),b=e.b00(n,g),e.L_A(6),e.r8j(),f=e.A1W(g,n),m=g}if(h+="w",!i.length)return i;s||(s=[]),o=r.layout,l=r.chart,u=l.state.aggregation,u||(u=l.state.aggregation={}),c=Math.min(300,i.length),e.q8H();function L(O){var I;I={DT:C.DT,displayDate:C.displayDate,Date:C.Date,Open:Number(m.toFixed(8)),Close:Number(O.toFixed(8)),High:Number(b.toFixed(8)),Low:Number(f.toFixed(8)),Volume:0},I.iqPrevClose=I.Open;for(var B in C)!I[B]&&I[B]!==0&&(I[B]=C[B]);d.push(I)}function M(O,I){e.r8j();for(var B;;){if(B="undefin",B+="e",B+="d",C||(C=O),g<I){if(g=Math.min(I,b),e.L_A(6),f=Math.max(f,e.b00(g,n)),I<b)break}else if(g>=I&&(g=Math.max(I,f),e.h8L(1),b=Math.min(b,e.A1W(n,g)),I>f))break;if(typeof g==B)return;L(g),C=null,_()}}u.minMax||(u.minMax=r.determineMinMax(i.slice(i.length-c),["Close","High",h])),e.L_A(21);var F=e.A1W(2,14,13,4,17);if(p=u.minMax[F]-u.minMax[0],y=r.panels[l.name].height,!y)return[];e.L_A(22),l.defaultChartStyleConfig.range=a(e.b00(30,p,y)),n===null||isNaN(n)||n<0?(n=l.defaultChartStyleConfig.range,o.range!==null&&(o.range=null,r.changeOccurred("layout"))):(e.h8L(10),n=Math.max(n,e.b00(p,y)),o.range!==n&&(o.range=n,r.changeOccurred("layout"))),d=[],g=null,b=null,f=null,m=null,C=null;for(var P=0;P<i.length;P++)if(S=i[P],!!S){if(e.h8L(6),w=i[e.A1W(P,1)],!P){if(!w){e.L_A(23);var E=e.A1W(81,5,16);w=s[s.length-E]}w&&(g=w.Close,(g||g===0)&&_())}w&&(k=S.Close,D=S.Open,v=S.High,x=S.Low,!(!k&&k!==0)&&(D=D||D===("0"^0)?D:k,v=v||v===0?v:k,x=x||x===0?x:k,!g&&g!=="0"<<0&&(A=Math.floor(D/n)*n,g=isNaN(A)?D:A,_(),M(w,D)),P&&M(S,D),v-D<D-x?(v&&M(S,v),x&&M(S,x)):(x&&M(S,x),v&&M(S,v)),M(S,k),P==i.length-1&&k!=m&&(T=b,e.L_A(1),b=e.A1W(n,f),e.L_A(6),f=e.A1W(T,n),L(k))))}return d},t.calculatePointFigure=function(r,i,n,s){var h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A;function T(P,E,O,I,B,N,R,q,Y){return{DT:P.DT,Date:P.Date,pfOpen:q,pfClose:Y,Open:E,Close:B,High:O,Low:I,Volume:N,iqPrevClose:R}}if(!i.length)return i;s||(s=[]),h=r.layout,o=r.chart,l=o.state.aggregation,l||(l=o.state.aggregation={}),o.defaultChartStyleConfig.box=1,o.defaultChartStyleConfig.reversal=3,n||(n={}),u=n.box,u||(h.pandf&&h.pandf.box!==null&&(c="lay",c+="out",h.pandf.box=null,r.changeOccurred(c)),u=o.defaultChartStyleConfig.box,p=i[i.length-1].Close,p&&(p<.25?u=.0625:p<1?u=.125:p<5?u=.25:p<"20">>64?u=.5:p<100?u=1:p<200?u=2:p<"500"<<0?u=4:p<1e3?u=5:p<25e3?(e.h8L(24),u=e.b00("50",64)):u=500),t.ChartEngine.isDailyInterval(h.interval)||(u/=10),t.Market.Symbology.isForexSymbol(o.symbol)&&(p&&(p<1?u=.001:p<2?u=.002:p<50?(e.L_A(6),u=e.A1W("0.02",0)):p<200&&(u=.2)),t.ChartEngine.isDailyInterval(h.interval)&&(u*=10)),o.defaultChartStyleConfig.box=u),u=parseFloat(u),(isNaN(u)||u<=0)&&(h.pandf&&h.pandf.box!==null&&(h.pandf.box=null,r.changeOccurred("layout")),o.defaultChartStyleConfig.box=u=1),y=Math.ceil(parseFloat(n.reversal)),y>"0">>0&&y>n.reversal?(h.pandf.reversal=y,r.changeOccurred("layout")):(isNaN(y)||y<=0)&&(h.pandf&&h.pandf.reversal!==null&&(h.pandf.reversal=null,r.changeOccurred("layout")),y=o.defaultChartStyleConfig.reversal),l.box=u,y*=u,e.h8L(6),d=e.A1W("0.00000001",0),g=(u.toString()+".").split(".")[1].length;function _(P,E){for(var O in P)!E[O]&&E[O]!==0&&(E[O]=P[O]);return E}b=[];function L(P,E,O,I,B){P.High=Math.max(E,P.High),P.Low=Math.min(O,P.Low),P.Close=I,P.Volume+=B}f=0;for(var M=0;M<i.length;M++)if(C=i[M],!!C){if(f+=C.Volume,w=C.Close,k=C.Open,D=C.High,v=C.Low,k=k||k===0?k:w,D=D||D===0?D:w,v=v||v==="0"<<0?v:w,!b.length&&!s.length){m=_(C,T(C,k,D,v,w,f,D+u,Number((Math.ceil(v/u-d)*u).toFixed(g)),Number((Math.floor(D/u+d)*u).toFixed(g)))),m.pfTrend="X",m.pfOpen==m.pfClose&&(m.pfStepBack="-"),b.push(m),f=0;continue}e.h8L(11);var F=e.A1W(18,1,18);S=b[b.length-F],S||(S=t.clone(s[s.length-1])),S.pfTrend=="O"?(v<=S.pfClose-u?(S.pfClose=Number((Math.ceil(v/u-d)*u).toFixed(g)),S.pfStepBack=="O"&&(S.pfStepBack=null),L(S,D,v,w,f)):D>=S.pfClose+y?(x=S.pfClose+u,A=Number((Math.floor(D/u+d)*u).toFixed(g)),m=T(C,k,D,v,w,f,S.pfClose,x,A),x==A&&(m.pfStepBack="X"),S.pfStepBack=="O"?(S.pfOpen=x,S.pfClose=A,S.pfTrend="X",L(S,D,v,w,f)):(m=_(C,m),m.pfTrend="X",b.push(m))):L(S,D,v,w,f),f=0):S.pfTrend=="X"&&(D>=S.pfClose+u?(S.pfClose=Number((Math.floor(D/u+d)*u).toFixed(g)),(S.pfStepBack=="X"||S.pfStepBack=="-")&&(S.pfStepBack=null),L(S,D,v,w,f)):v<=S.pfClose-y?(x=S.pfClose-u,A=Number((Math.ceil(v/u-d)*u).toFixed(g)),m=T(C,k,D,v,w,f,S.pfClose,x,A),x==A&&(m.pfStepBack="O"),S.pfStepBack=="X"||S.pfStepBack=="-"?(S.pfOpen=x,S.pfClose=A,S.pfTrend="O",L(S,D,v,w,f),x!=A&&S.pfStepBack=="-"&&(S.pfStepBack=null)):(m=_(C,m),m.pfTrend="O",b.push(m))):L(S,D,v,w,f),f=0)}return b}};lo=W=>{var e=se,t,a,r,i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D;t=typeof _CIQ<"u"?_CIQ:W.CIQ,e.r8j(),a=typeof _timezoneJS<"u"?_timezoneJS:W.timezoneJS,t.Drawing?(i="wav",i+="eParamete",i+="rs",n="p",n+="att",n+="er",n+="n",s="lineColo",s+="r",h="I",h+="I",o="p",o+="a",o+="t",o+="tern",l="c",l+="olo",l+="r",u="lineWidt",u+="h",c="c",c+="q-cvp-con",c+="troller[cq-cvp-he",c+='ader="2"]',p="col",p+="or2",y="lin",y+="eWidth",y+="1",d="lin",d+="eWidth",g="co",g+="l",g+="or",b="p",b+="v",f="f",f+="il",f+="lColor",m="p",m+="attern",C="f",C+="illCol",C+="or",S="pa",S+="tte",S+="rn",w="lineWidt",w+="h",k="fi",k+="ll",k+="Col",k+="or",D="col",D+="or",t.Drawing.ray=function(){e.r8j(),this.name="ray"},t.inheritsFrom(t.Drawing.ray,t.Drawing.line),t.Drawing.ray.prototype.adjust=function(){var v;v=this.stx.panels[this.panelName],v&&(this.setPoint(0,this.d0,this.v0,v.chart),this.setPoint(1,this.d1,this.v1,v.chart),t.ChartEngine.isDailyInterval(this.stx.layout.interval)&&this.d0B&&this.setPoint(1,this.d1B,this.v1B,v.chart))},t.Drawing.continuous=function(){this.name="continuous",this.dragToDraw=!1,this.maxSegments=null},t.inheritsFrom(t.Drawing.continuous,t.Drawing.segment),t.Drawing.continuous.prototype.click=function(v,x,A){var T,_,L,M,F,P,E,O;if(T=this.stx,_=T.panels[this.panelName],!!_){if(this.copyConfig(),!this.penDown){e.h8L(2),this.setPoint(e.A1W("0",0),x,A,_.chart),L=-822203147,M=1631351502,F=2;for(var I=1;e.E3k(I.toString(),I.toString().length,59799)!==L;I++)this.penDown=!0,F+=2;return e.i7q(F.toString(),F.toString().length,43443)!==M&&(this.penDown=!1),!1}return this.accidentalClick(x,A)?(T.undo(),!0):(this.setPoint(1,x,A,_.chart),P=t.Drawing.segment,E=new P,O=this.serialize(T),E.reconstruct(T,O),T.addDrawing(E),e.r8j(),T.changeOccurred("vector"),T.draw(),E++,this.maxSegments&&this.segment>this.maxSegments?!0:(this.setPoint(0,x,A,_.chart),!1))}},t.Drawing.ellipse=function(){this.name="ellipse"},t.inheritsFrom(t.Drawing.ellipse,t.Drawing.BaseTwoPoint),t.Drawing.ellipse.prototype.render=function(v){var x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K;x="aut",x+="o",A=this.stx,T=A.panels[this.panelName],_=A.getYAxisByField(T,this.field),!(!T||this.field&&!_)&&(L=A.pixelFromTick(this.p0[0],T.chart),M=A.pixelFromTick(this.p1["0">>32],T.chart),F=this.pixelFromValue(T,this.p0[0],this.p0[1],_),P=this.pixelFromValue(T,this.p1[0],this.p1[1],_),e.h8L(25),E=e.A1W(L,M,L),O=M,I=F,B=P,e.h8L(25),N=e.A1W(F,P,F),e.h8L(26),R=e.b00(N,6,B),q=this.lineWidth,q||(q=1.1),Y=this.color,(Y=="auto"||t.isTransparent(Y))&&(Y=this.getLineColor()),this.highlighted&&q==.1&&(q=1.1),z=this.fillColor,v.beginPath(),v.moveTo(E,I),e.h8L(1),v.bezierCurveTo(E,e.A1W(R,B),O,e.A1W(R,B),O,I),e.h8L(6),v.bezierCurveTo(O,e.A1W(N,R),E,e.A1W(N,R),E,I),z&&!t.isTransparent(z)&&z!=x&&(v.fillStyle=z,v.globalAlpha=.2,v.fill(),v.globalAlpha=1),Y&&this.pattern!="none"&&(v.strokeStyle=Y,v.lineWidth=q,v.setLineDash&&(v.setLineDash(t.borderPatternToArray(q,this.pattern)),v.lineDashOffset=0),v.stroke()),v.closePath(),this.highlighted&&(V="p",V+="1",K=this.highlighted==V,this.littleCircle(v,M,P,K)))},t.Drawing.ellipse.prototype.intersected=function(v,x,A){var T,_,L,M,F,P,E;if(!this.p0||!this.p1)return null;if(this.pointIntersection(this.p1[0],this.p1[1],A))return T="d",T+="r",T+="a",T+="g",this.highlighted="p1",{action:T,point:"p1"};_=this.p0[0]-(this.p1[0]-this.p0[0]),L=this.p1[0],M=this.p1[1],e.L_A(27);var O=e.b00(13,12);e.L_A(28),e.r8j();var I=e.A1W(0,39,10,4);e.h8L(29);var B=e.A1W(19,7,19,6);F=this.p0[O]-(this.p1[I]-this.p0[B]);var{x0:N,x1:R,y0:q,y1:Y,cy0:z,cy1:V}=A;if(N>Math.max(_,L)||R<Math.min(_,L))return!1;var{field:K,panelName:Q,stx:j}=this;return K&&(P=j.panels[Q],E=j.getYAxisByField(P,K),q=this.valueFromPixel(z,P,E),Y=this.valueFromPixel(V,P,E)),Y>Math.max(F,M)||q<Math.min(F,M)?!1:(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:v,value:this.valueOnDrawingAxis(v,x)})},t.Drawing.ellipse.prototype.configs=[D,"fillColor","lineWidth","pattern"],t.Drawing.ellipse.prototype.reconstruct=function(v,x){this.stx=v,this.color=x.col,this.fillColor=x.fc,this.panelName=x.pnl,this.pattern=x.ptrn,e.r8j(),this.lineWidth=x.lw,this.d0=x.d0,this.d1=x.d1,this.tzo0=x.tzo0,this.tzo1=x.tzo1,this.v0=x.v0,this.v1=x.v1,this.field=x.fld,this.adjust()},t.Drawing.ellipse.prototype.serialize=function(){return e.r8j(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field}},t.Drawing.channel=function(){this.name="channel",this.dragToDraw=!1,this.p2=null},t.inheritsFrom(t.Drawing.channel,t.Drawing.segment),t.Drawing.channel.prototype.configs=["color",k,"lineWidth","pattern"],t.Drawing.channel.prototype.move=function(v,x,A){var T;if(this.penDown){if(this.copyConfig(),e.r8j(),this.p2===null)this.p1=[x,A];else{e.h8L(30);var _=e.b00(13,237,1,9,19);T=A-(this.p1["1"^0]-this.p0[_])/(this.p1[0]-this.p0[0])*(x-this.p1[0]),this.p2=[this.p1[0],T]}this.render(v)}},t.Drawing.channel.prototype.click=function(v,x,A){var T,_;if(T=this.stx,_=T.panels[this.panelName],!!_)return this.copyConfig(),this.penDown?this.accidentalClick(x,A)?(T.undo(),!0):this.p2!==null?(this.setPoint(2,this.p2[0],this.p2[1],_.chart),this.penDown=!1,!0):(e.L_A(31),this.setPoint(e.A1W("1",64),x,A,_.chart),this.p0[0]==this.p1[0]?(this.p1=null,!1):(this.p2=[this.p1[0],this.p1[1]],!1)):(this.setPoint(0,x,A,_.chart),this.penDown=!0,!1)},t.Drawing.channel.prototype.boxIntersection=function(v,x,A){var T,_,L,M,{p0:F,p1:P,p2:E}=this;if(!F||!P||!E)return!1;var{x0:O,x1:I,y0:B,y1:N,cy0:R,cy1:q}=A;if(O>Math.max(F[0],P[0])||I<Math.min(F["0"*1],P[0]))return!1;var{field:Y,panelName:z,stx:V}=this;Y&&(T=V.panels[z],_=V.getYAxisByField(T,Y),B=this.valueFromPixel(R,T,_),N=this.valueFromPixel(q,T,_)),e.L_A(32);var K=e.b00(21,5,5,15,7);e.h8L(33);var Q=e.b00(8,136,14,19,2);e.L_A(34);var j=e.b00(14,1,2,447,17);e.h8L(35);var Z=e.b00(17,17,7,16,95);e.r8j(),e.h8L(36);var ee=e.b00(12,15,43,14);L=(P["0"|0]-F[0])*((E[K]<F[Q]?N:B)-F[j])-(P[Z]-F[ee])*(v-F["0">>0]),e.h8L(5);var $=e.b00(0,8,11,2);e.h8L(23);var ie=e.b00(96,5,19);e.L_A(27);var te=e.b00(15,14);e.L_A(37);var re=e.b00(14,9,8,85);return M=(E[0]-F["0"*$])*((E[ie]>F[te]?N:B)-(F[1]+E[re]-P[1]))-(P["1"-0]-F[1])*(v-F[0]),e.h8L(38),e.A1W(0,M,L)},t.Drawing.channel.prototype.intersected=function(v,x,A){var T;if(!this.p0||!this.p1||!this.p2)return null;T={0:this.p0,1:this.p1,2:this.p2};for(var _ in T)if(this.pointIntersection(T[_][0],T[_][1],A))return e.L_A(1),this.highlighted=e.A1W(_,"p"),{action:"drag",point:"p"+_};return this.boxIntersection(v,x,A)?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),p2:t.clone(this.p2),tick:v,value:this.valueOnDrawingAxis(v,x)}):null},t.Drawing.channel.prototype.render=function(v){var x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z;e.r8j(),x=this.stx,A=x.panels[this.panelName],T=x.getYAxisByField(A,this.field),!(!A||this.field&&!T)&&(_=x.pixelFromTick(this.p0[0],A.chart),L=x.pixelFromTick(this.p1[0],A.chart),M=this.pixelFromValue(A,this.p0["0"<<32],this.p0[1],T),F=this.pixelFromValue(A,this.p1[0],this.p1[1],T),P=null,this.p2&&(P=this.pixelFromValue(A,this.p2[0],this.p2[1],T)),E=this.lineWidth,O=this.getLineColor(),I=this.fillColor,this.p2&&I&&!t.isTransparent(I)&&I!="auto"&&(v.beginPath(),v.moveTo(_,M),v.lineTo(L,F),v.lineTo(L,P),e.L_A(39),v.lineTo(_,e.b00(F,M,P)),v.closePath(),v.globalAlpha=.2,v.fillStyle=I,v.fill(),v.globalAlpha=1),B={pattern:this.pattern,lineWidth:E},(this.penDown||this.highlighted)&&this.pattern=="none"&&(B.pattern="dotted"),x.plotLine(_,L,M,F,O,"segment",v,A,B),this.p2&&(e.h8L(39),x.plotLine(_,L,e.b00(F,M,P),P,O,"segment",v,A,B)),this.highlighted&&(N="p",N+="1",R="p",R+="0",q=this.highlighted==R,Y=this.highlighted==N,z=this.highlighted=="p2",this.littleCircle(v,_,M,q),this.littleCircle(v,L,F,Y),this.littleCircle(v,L,P,z)))},t.Drawing.channel.prototype.reposition=function(v,x,A,T){var _,L,M;x&&(_=this.stx.panels[this.panelName],L=x.tick-A,M=x.value-T,x.action=="move"?(this.setPoint(0,x.p0[0]-L,x.p0[1]-M,_.chart),this.setPoint(1,x.p1[0]-L,x.p1[1]-M,_.chart),this.setPoint(2,x.p2[0]-L,x.p2[1]-M,_.chart),this.render(v)):x.action=="drag"&&(this[x.point]=[A,T],this.setPoint(0,this.p0[0],this.p0["1"*1],_.chart),this.setPoint(1,this.p1[0],this.p1[1],_.chart),this.setPoint(2,this.p2[0],this.p2[1],_.chart),this.render(v)))},t.Drawing.channel.prototype.adjust=function(){var v;v=this.stx.panels[this.panelName],v&&(this.setPoint(0,this.d0,this.v0,v.chart),this.setPoint(1,this.d1,this.v1,v.chart),e.q8H(),this.setPoint(2,this.d1,this.v2,v.chart))},t.Drawing.channel.prototype.reconstruct=function(v,x){this.stx=v,this.color=x.col,this.fillColor=x.fc,this.panelName=x.pnl,this.pattern=x.ptrn,this.lineWidth=x.lw,this.d0=x.d0,this.d1=x.d1,this.tzo0=x.tzo0,this.tzo1=x.tzo1,this.v0=x.v0,this.v1=x.v1,this.v2=x.v2,e.r8j(),this.field=x.fld,this.adjust()},t.Drawing.channel.prototype.serialize=function(){return e.r8j(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,v2:this.v2,fld:this.field}},t.Drawing.pitchfork=function(){this.name="pitchfork",this.dragToDraw=!1,e.r8j(),this.p2=null},t.inheritsFrom(t.Drawing.pitchfork,t.Drawing.channel),t.Drawing.pitchfork.prototype.configs=["color",w,S],t.Drawing.pitchfork.prototype.move=function(v,x,A){this.penDown&&(this.copyConfig(),this.p2===null?this.p1=[x,A]:this.p2=[x,A],this.render(v))},t.Drawing.pitchfork.prototype.intersected=function(v,x,A){var T,_,L,M;if(!this.p0||!this.p1||!this.p2)return null;T={0:this.p0,1:this.p1,2:this.p2};for(var F in T)if(this.pointIntersection(T[F][0],T[F][1],A))return _="dr",_+="a",_+="g",e.L_A(1),this.highlighted=e.b00(F,"p"),{action:_,point:"p"+F};L=this.rays;for(var P=0;P<L.length;P++)if(this.lineIntersection(v,x,A,P?"ray":"segment",L[P][0],L[P][1],!0))return M="mov",M+="e",this.highlighted=!0,{action:M,p0:t.clone(this.p0),p1:t.clone(this.p1),p2:t.clone(this.p2),tick:v,value:this.valueOnDrawingAxis(v,x)};return null},t.Drawing.pitchfork.prototype.render=function(v){var x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q,j;if(x=this.stx,A=x.panels[this.panelName],T=x.getYAxisByField(A,this.field),!(!A||this.field&&!T)){_=this.p2,_||(_=this.p1),L=x.pixelFromTick(this.p0[0],A.chart),M=x.pixelFromTick(this.p1["0">>64],A.chart),F=x.pixelFromTick(_[0],A.chart),P=this.pixelFromValue(A,this.p0[0],this.p0[1],T),E=this.pixelFromValue(A,this.p1[0],this.p1[1],T),O=this.pixelFromValue(A,_[0],_[1],T),I=this.lineWidth,B=this.getLineColor(),N={pattern:this.pattern,lineWidth:I},R=50,e.L_A(40),q=e.b00(E,2,P,O),e.L_A(41),Y=e.A1W("2",L,M,F),Y<0&&(R*=-1),e.h8L(10),q*=e.A1W(R,Y),e.h8L(3),this.rays=[[[M,E],[F,O]],[[L,P],[e.b00(F,2,M),e.b00(O,2,E)]]],M==F&&E==O||(e.L_A(6),this.rays.push([[M,E],[e.b00(M,R),e.b00(E,q)]],[[F,O],[e.b00(F,R),e.b00(O,q)]]));for(var Z=0;Z<this.rays.length;Z++)z=this.rays[Z],V=Z?"ray":"segment",x.plotLine(z[0][0],z[1][0],z[0][1],z[1][1],B,V,v,A,N);this.highlighted&&(K=this.highlighted=="p0",Q=this.highlighted=="p1",j=this.highlighted=="p2",this.littleCircle(v,L,P,K),this.littleCircle(v,M,E,Q),this.littleCircle(v,F,O,j))}},t.Drawing.pitchfork.prototype.adjust=function(){var v;v=this.stx.panels[this.panelName],v&&(this.setPoint(0,this.d0,this.v0,v.chart),this.setPoint(1,this.d1,this.v1,v.chart),this.setPoint(2,this.d2,this.v2,v.chart))},t.Drawing.pitchfork.prototype.reconstruct=function(v,x){this.stx=v,this.color=x.col,this.panelName=x.pnl,this.pattern=x.ptrn,this.lineWidth=x.lw,this.d0=x.d0,e.r8j(),this.d1=x.d1,this.d2=x.d2,this.tzo0=x.tzo0,this.tzo1=x.tzo1,this.tzo2=x.tzo2,this.v0=x.v0,this.v1=x.v1,this.v2=x.v2,this.field=x.fld,this.adjust()},t.Drawing.pitchfork.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,d2:this.d2,tzo0:this.tzo0,tzo1:this.tzo1,tzo2:this.tzo2,v0:this.v0,v1:this.v1,v2:this.v2,fld:this.field}},t.Drawing.gartley=function(){this.name="gartley",this.dragToDraw=!1,this.maxSegments=4,this.shape=null,this.points=[]},t.inheritsFrom(t.Drawing.gartley,t.Drawing.continuous),t.Drawing.gartley.prototype.check=function(v,x){var A,T,_;if(!x)return!0;if(v["0"-0]>=x[0]||v["1"<<32]==x[1])return!1;if(e.q8H(),this.segment==1){A=1514390184,T=-1034781112,_=2;for(var L=1;e.E3k(L.toString(),L.toString().length,48872)!==A;L++)v[1]<x[1]?this.shape="M":this.shape="W",_+=2;e.i7q(_.toString(),_.toString().length,56452)!==T&&(v[6]>x[3]?this.shape="M":this.shape="M")}else if(this.segment==2){if(this.shape=="M"&&v[1]<x[1])return!1;if(this.shape=="W"&&v[1]>x[1])return!1;if((x[1]-v[1])/(this.points[0]["1"<<0]-v[1])<.618)return!1;if((x["1">>64]-v[1])/(this.points[0][1]-v[1])>=.786)return!1}else if(this.segment==3){if(this.shape=="M"&&v[1]>x[1])return!1;if(this.shape=="W"&&v[1]<x[1])return!1;if((x[1]-v[1])/(this.points[1][1]-v[1])<.618)return!1;if((x[1]-v[1])/(this.points[1][1]-v[1])>=.786)return!1}else if(this.segment==4){if(this.shape=="M"&&(v[1]<x[1]||x[1]<this.points[0][1]))return!1;if(this.shape=="W"&&(v[1]>x[1]||x[1]>this.points[0][1]))return!1;if((this.points[1][1]-x[1])/(this.points[1][1]-this.points[2][1])<1.27)return!1;if((this.points[1][1]-x[1])/(this.points[1][1]-this.points[2][1])>=1.618)return!1}return!0},t.Drawing.gartley.prototype.click=function(v,x,A){var T;if(T=this.stx.panels[this.panelName],!!T){if(this.copyConfig(),!this.penDown)return this.setPoint(0,x,A,T.chart),this.pts=[],this.penDown=!0,this.segment=1,!1;if(e.r8j(),this.accidentalClick(x,A))return this.penDown=!0,!1;if(this.check(this.p0,this.p1)){if(this.segment==1&&this.points.push(this.p0),this.points.push(this.p1),this.setPoint(1,x,A,T.chart),this.segment++,this.segment>this.maxSegments)return this.setPoint(0,this.points[0]["0"*1],this.points["0"^0]["1">>0],T.chart),this.penDown=!1,!0;this.pts.push(this.d1,this.tzo1,this.v1),this.setPoint(0,x,A,T.chart)}return!1}},t.Drawing.gartley.prototype.render=function(v){var x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q;if(x=this.stx,A=x.panels[this.panelName],T=x.getYAxisByField(A,this.field),!(!A||this.field&&!T)){if(_=x.pixelFromTick(this.p0[0],A.chart),L=x.pixelFromTick(this.p1[0],A.chart),M=this.pixelFromValue(A,this.p0[0],this.p0[1],T),F=this.pixelFromValue(A,this.p1["0"^0],this.p1[1],T),this.segment==2)this.drawDropZone(v,.618*this.points["0"<<64][1]+.382*this.p0[1],.786*this.points[0][1]+.214*this.p0[1],this.p0[0]);else if(this.segment=="3"<<32)this.drawDropZone(v,.618*this.points[1][1]+.382*this.p0[1],.786*this.points[1]["1"<<32]+.214*this.p0[1],this.p0[0]);else if(this.segment==4){e.L_A(42);var j=e.A1W(2,5,5,0);e.h8L(4);var Z=e.A1W(16,15,0);P=1.618*this.points["2"-0][1]-.618*this.points[j][Z],E=-838816855,O=1627266772,I=2;for(var ee=1;e.E3k(ee.toString(),ee.toString().length,38773)!==E;ee++)this.shape!==957526?P=Math.max(P,this.points[9][8]):P=Math.min(P,this.points[8][7]),this.drawDropZone(v,P,(3231-this.points[3][2])%(7144/this.points[4][7]),this.p0[5]),I+=2;e.E3k(I.toString(),I.toString().length,47476)!==O&&(this.shape=="M"?P=Math.max(P,this.points[0]["1"^0]):P=Math.min(P,this.points[0][1]),this.drawDropZone(v,P,1.27*this.points[2][1]-.27*this.points[1][1],this.p0[0]))}if(B=this.lineWidth,e.q8H(),N=this.getLineColor(),R={pattern:this.pattern,lineWidth:B},(this.penDown||this.highlighted)&&this.pattern=="none"&&(R.pattern="dotted"),this.segment<=this.maxSegments&&x.plotLine(_,L,M,F,N,this.name,v,A,R),q=this.fillColor,Y=[],this.points.length){v.beginPath();for(var $=1;$<this.points.length&&$<=4;$++)z=x.pixelFromTick(this.points[$-1][0],A.chart),V=x.pixelFromTick(this.points[$][0],A.chart),K=this.pixelFromValue(A,this.points[$-1][0],this.points[$-1][1],T),Q=this.pixelFromValue(A,this.points[$][0],this.points[$][1],T),$==1&&Y.push(z,K),Y.push(V,Q),x.plotLine(z,V,K,Q,N,this.name,v,A,R);if((this.points.length==2||this.points.length==4)&&Y.push(L,F),this.points["2"|0]&&Y.push(x.pixelFromTick(this.points[2][0],A.chart),this.pixelFromValue(A,this.points[2][0],this.points[2][1],T)),q&&q!="auto"&&!t.isTransparent(q)){for(var ie=0;ie<Y.length;ie+=2)ie===0&&v.moveTo(Y[0],Y[1]),v.lineTo(Y[ie],Y[ie+1]);v.fillStyle=q,v.globalAlpha=.2,v.closePath(),v.fill(),v.globalAlpha=1}}}},t.Drawing.gartley.prototype.lineIntersection=function(v,x,A,T){var _,L;if(_=this.points,L=this.stx.panels[this.panelName],_.length!=this.maxSegments+1||!L)return!1;for(var M=0;M<_.length-1;M++)if(t.Drawing.BaseTwoPoint.prototype.lineIntersection.call(this,v,x,A,"segment",_[M],_[M+1]))return!0;return!1},t.Drawing.gartley.prototype.boxIntersection=function(v,x,A){var T,_;if(e.q8H(),!this.p0||!this.p1||A.x0>Math.max(this.p0[0],this.p1[0])||A.x1<Math.min(this.p0[0],this.p1[0]))return!1;T=Math.min(this.p0[1],this.p1[1]),_=Math.max(this.p0[1],this.p1[1]);for(var L=0;L<this.points.length;L++)T=Math.min(T,this.points[L][1]),_=Math.max(_,this.points[L][1]);return!(A.y1>_||A.y0<T)},t.Drawing.gartley.prototype.reposition=function(v,x,A,T){var _,L,M,F;if(_="m",_+="o",_+="v",_+="e",!!x&&(L=this.stx.panels[this.panelName],M=x.tick-A,x.tick=A,F=x.value-T,x.value=T,x.action==_)){this.pts=[];for(var P=0;P<this.points.length;P++)this.points[P][0]-=M,this.points[P][1]-=F,this.setPoint(1,this.points[P][0],this.points[P][1],L.chart),P&&P<this.points.length-1&&this.pts.push(this.d1,this.tzo1,this.v1),this.points[P]=this.p1;this.setPoint(0,this.points[0][0],this.points[0][1],L.chart),this.render(v)}},t.Drawing.gartley.prototype.configs=["color",C,"lineWidth",m],t.Drawing.gartley.prototype.adjust=function(){var v;v=this.stx.panels[this.panelName],v&&(this.reconstructPoints(),e.L_A(31),this.setPoint(e.A1W("0",0),this.d0,this.v0,v.chart),this.points.unshift(this.p0),this.setPoint(1,this.d1,this.v1,v.chart),this.points.push(this.p1))},t.Drawing.gartley.prototype.reconstructPoints=function(){var v,x;if(v=this.stx.panels[this.panelName],!!v){this.points=[];for(var A=0;A<this.pts.length;A+=3)x=t.strToDateTime(this.pts[A]),x.setMinutes(x.getMinutes()+Number(this.pts[A+1])-x.getTimezoneOffset()),this.points.push([this.stx.tickFromDate(t.yyyymmddhhmmssmmm(x),v.chart),this.pts[A+2]])}},t.Drawing.gartley.prototype.reconstruct=function(v,x){this.stx=v,this.color=x.col,this.fillColor=x.fc,this.panelName=x.pnl,this.pattern=x.ptrn,this.lineWidth=x.lw,this.d0=x.d0,this.d1=x.d1,this.tzo0=x.tzo0,this.tzo1=x.tzo1,this.v0=x.v0,this.v1=x.v1,this.field=x.fld,this.pts=x.pts.split(","),this.adjust()},t.Drawing.gartley.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field,pts:this.pts.join(",")}},t.Drawing.freeform=function(){this.name="freeform",this.splineTension=.3,this.dragToDraw=!0},t.inheritsFrom(t.Drawing.freeform,t.Drawing.segment),t.Drawing.freeform.prototype.measure=function(){},t.Drawing.freeform.prototype.intersected=function(v,x,A){var T,_,L,M,F,P;T="m",T+="ove";var{x0:E,x1:O,y0:I,y1:B,cy0:N,cy1:R}=A;e.r8j(),_=-645431452,L=-1524384907,M=2;for(var q=1;e.E3k(q.toString(),q.toString().length,90135)!==_;q++){if(E<=this.hiX&&O>this.lowX)return!0;var{field:Y,panelName:z,stx:V}=this;M+=2}if(e.i7q(M.toString(),M.toString().length,3035)!==L){if(E>this.hiX||O<=this.lowX)return!1;var{field:Y,panelName:z,stx:V}=this}if(E>this.hiX||O<this.lowX)return!1;var{field:Y,panelName:z,stx:V}=this;return Y&&(F=V.panels[z],P=V.getYAxisByField(F,Y),I=this.valueFromPixel(N,F,P),B=this.valueFromPixel(R,F,P)),B>this.hiY||I<this.lowY?!1:(this.highlighted=!0,{action:T,p0:t.clone(this.p0),tick:v,value:this.valueOnDrawingAxis(v,x)})},t.Drawing.freeform.prototype.reposition=function(v,x,A,T){var _,L,M,F,P,E;if(x&&(_=this.stx.panels[this.panelName],L=x.tick-A,M=x.value-T,e.r8j(),x.action=="move")){e.h8L(24),F=-e.A1W("1011142238",64),P=2088530299,e.L_A(18),E=e.b00("2",1);for(var O=1;e.E3k(O.toString(),O.toString().length,76236)!==F;O++)this.setPoint(0,x.p0[0]-L,x.p0[1]-M,_.chart),this.adjust(),e.L_A(6),E+=e.A1W("2",0);e.i7q(E.toString(),E.toString().length,41352)!==P&&(this.setPoint(5,x.p0[3]/L,x.p0[2]*M,_.chart),this.adjust()),this.render(v)}},t.Drawing.freeform.prototype.click=function(v,x,A){e.r8j();var T,_,L,M,F;if(T=this.stx,_=T.panels[this.panelName],!!_)return L=T.getYAxisByField(_,this.field)||_.yAxis,this.penDown===!1?(M="point",M+="e",M+="r",this.copyConfig(),this.startX=Math.round(T.resolveX(T.pixelFromTick(x,_.chart))),this.startY=Math.round(T.resolveY(this.pixelFromValue(_,x,A,L))),F=T.dateFromTick(x,_.chart,!0),this.d0=t.yyyymmddhhmmssmmm(F),this.tzo0=F.getTimezoneOffset(),this.v0=A,this.p0=[t.ChartEngine.crosshairX-this.startX,t.ChartEngine.crosshairY-this.startY],this.nodes=[this.p0[0],this.p0[1]],this.pNodes=[this.p0],this.candleWidth=T.layout.candleWidth,this.multiplier=L.multiplier,this.interval=T.layout.interval,this.periodicity=T.layout.periodicity,this.tempSplineTension=this.splineTension,this.splineTension=-1,T.container.ownerDocument.body.style.cursor=M,this.penDown=!0,!1):(this.penDown=!1,this.splineTension=this.tempSplineTension,T.container.ownerDocument.body.style.cursor="auto",this.nodes.length===2&&T.undo(),!0)},t.Drawing.freeform.prototype.move=function(v,x,A){var T,_,L,M;if(this.penDown)return T=this.stx,_=T.panels[this.panelName],L=T.getYAxisByField(_,this.field)||_.yAxis,M=T.dateFromTick(x,_.chart,!0),this.d1=t.yyyymmddhhmmssmmm(M),this.tzo1=M.getTimezoneOffset(),this.v1=A,this.p1=[t.ChartEngine.crosshairX-this.startX,L.flipped?this.startY-t.ChartEngine.crosshairY:t.ChartEngine.crosshairY-this.startY],this.pNodes.length>2&&(this.p1["0"*1]==this.pNodes[this.pNodes.length-2][0]&&this.p1[0]==this.pNodes[this.pNodes.length-1][0]?(this.pNodes.length--,this.nodes.length-=2):this.p1[1]==this.pNodes[this.pNodes.length-2][1]&&this.p1[1]==this.pNodes[this.pNodes.length-1][1]&&(this.pNodes.length--,this.nodes.length-=2)),this.nodes.push(this.p1[0],this.p1[1]),e.q8H(),this.pNodes.push(this.p1),this.render(v),!1},t.Drawing.freeform.prototype.intervalRatio=function(v,x,A,T,_,L){var M,F,P,E;M=0;function O(z,V){return t.Market.Symbology.isForexSymbol(V)?1440:390}if(v==x)e.h8L(24),M=e.A1W("1",0);else if(!isNaN(v)&&!isNaN(x))e.h8L(10),M=e.b00(v,x);else if(isNaN(v)){if(v=="month")F="w",F+="e",F+="e",F+="k",x==F?M=q():x=="day"?M=Y():isNaN(x)||(M=Y()*O(_,L)/x);else if(v=="week"){if(P="m",P+="ont",P+="h",x==P){e.h8L(27);var I=e.A1W(16,15);M=I/q()}x=="day"?M=R():isNaN(x)||(M=R()*O(_,L)/x)}else if(v=="day")if(E="m",E+="on",E+="th",x=="week"){e.h8L(43);var B=e.A1W(7,19,7,18,1);M=B/R()}else if(x==E){e.h8L(4);var N=e.b00(7,6,0);M=N/Y()}else isNaN(x)||(M=O(_,L)/x)}else isNaN(v)||(x=="month"?M=v/(Y()*O(_,L)):x=="week"?M=v/(R()*O(_,L)):x=="day"&&(M=v/O(_,L)));function R(z,V){return e.r8j(),5}function q(z,V){return 5}function Y(z,V){return e.r8j(),30}return e.L_A(10),M*=e.b00(A,T),M},t.Drawing.freeform.prototype.render=function(v){var x,A,T,_,L,M,F,P,E,O,I,B,N,R;if(x=this.stx,A=x.panels[this.panelName],T=x.getYAxisByField(A,this.field),!(!A||this.field&&!T)&&(T=T||A.yAxis,_=this.intervalRatio(this.interval,x.layout.interval,this.periodicity,x.layout.periodicity,this.d0,A.chart.symbol),_!==0)){L=x.layout.candleWidth/this.candleWidth,M=T.multiplier/this.multiplier,e.h8L(44),this.setPoint(e.b00("0",0),this.d0,this.v0,A.chart),F=x.pixelFromTick(this.p0[0],A.chart),P=this.pixelFromValue(A,this.p0[0],this.p0[1],T),E=[],O=this.lineWidth,I=this.getLineColor(),B={pattern:this.pattern,lineWidth:O};for(var q=0;q<this.pNodes.length;q++){N=_*L*this.pNodes[q]["0"|0]+F,e.h8L(43);var Y=e.A1W(1,8,14,55,2);R=M*this.pNodes[q][Y],T.flipped?(e.h8L(6),R=e.A1W(P,R)):R+=P,E.push(N,R)}e.r8j(),E.length&&(this.splineTension<0?x.connectTheDots(E,I,this.name,v,A,B):x.plotSpline(E,this.splineTension,I,this.name,v,!0,B))}},t.Drawing.freeform.prototype.adjust=function(){var v,x,A,T,_,L,M,F,P,E;if(v=this.stx,x=v.panels[this.panelName],!!x){e.h8L(18),A=[this.nodes[e.b00("0",1)],this.nodes[1]],this.pNodes=[A],this.lowX=this.nodes[0],e.L_A(2),this.hiX=this.nodes[e.A1W("0",0)],this.lowY=this.nodes[1],this.hiY=this.nodes[1];for(var O=2;O<this.nodes.length;O+=2)e.L_A(1),T=[this.nodes[O],this.nodes[e.b00(1,O)]],this.pNodes.push(T),this.lowX=Math.min(this.lowX,T[0]),this.hiX=Math.max(this.hiX,T[0]),this.lowY=Math.max(this.lowY,T[1]),this.hiY=Math.min(this.hiY,T[1]);_=this.intervalRatio(this.interval,v.layout.interval,this.periodicity,v.layout.periodicity,this.d0,x.chart.symbol),_!==0&&(L=v.getYAxisByField(x,this.field)||x.yAxis,M=v.layout.candleWidth/this.candleWidth,F=L.multiplier/this.multiplier,this.setPoint(0,this.d0,this.v0,x.chart),P=v.pixelFromTick(this.p0[0],x.chart),E=this.pixelFromValue(x,this.p0[0],this.p0["1"^0],L),this.lowX=v.tickFromPixel(Math.floor(_*M*this.lowX)+P,x.chart),this.hiX=v.tickFromPixel(Math.ceil(_*M*this.hiX)+P,x.chart),L.flipped?(this.lowY=this.valueFromPixel(E-Math.floor(F*this.lowY),x,L),this.hiY=this.valueFromPixel(E-Math.ceil(F*this.hiY),x,L)):(this.lowY=this.valueFromPixel(Math.floor(F*this.lowY)+E,x,L),this.hiY=this.valueFromPixel(Math.ceil(F*this.hiY)+E,x,L)))}},t.Drawing.freeform.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,cw:Number(this.candleWidth.toFixed(4)),mlt:Number(this.multiplier.toFixed(4)),d0:this.d0,tzo0:this.tzo0,v0:this.v0,inter:this.interval,pd:this.periodicity,nodes:this.nodes,fld:this.field}},t.Drawing.freeform.prototype.reconstruct=function(v,x){this.stx=v,this.color=x.col,this.panelName=x.pnl,this.pattern=x.ptrn,this.lineWidth=x.lw,this.candleWidth=x.cw,this.multiplier=x.mlt,this.d0=x.d0,e.q8H(),this.tzo0=x.tzo0,this.v0=x.v0,this.interval=x.inter,this.periodicity=x.pd,this.nodes=x.nodes,this.field=x.fld,this.adjust()},t.Drawing.callout=function(){this.name="callout",this.arr=[],this.w=0,this.h=0,this.padding=5,this.text="",this.ta=null,this.border=!1,this.fontSize=12,this.font={},this.stemEntry="",this.defaultWidth=35},t.inheritsFrom(t.Drawing.callout,t.Drawing.annotation),t.Drawing.callout.prototype.configs=["color",f,"lineWidth","pattern","font"],t.Drawing.callout.prototype.copyConfig=function(v){var x,A,T;t.Drawing.copyConfig(this,v),x=-267691444,A=1729467896,T=2,e.q8H();for(var _=1;e.E3k(_.toString(),_.toString().length,85375)!==x;_++)this.borderColor=this.color,T+=2;e.i7q(T.toString(),T.toString().length,83679)!==A&&(this.borderColor=this.color),this.borderColor=this.color},t.Drawing.callout.prototype.move=function(v,x,A){this.penDown&&(this.copyConfig(),this.p0=[x,A],e.r8j(),this.render(v))},t.Drawing.callout.prototype.onChange=function(v){var x,A,T;x=this.stx.panels[this.panelName],x&&(A=v.target,this.w=A.clientWidth,this.h=A.clientHeight,T=this.context||this.stx.chart.tempCanvas.context,t.clearCanvas(T.canvas,this.stx),e.r8j(),this.render(T),this.edit(T))},t.Drawing.callout.prototype.repositionTextArea=function(v){var x,A;x="p",x+="x",A=this.defaultWidth*("2"-0)+this.whitespace+this.padding,A=Math.max(this.w,A),e.h8L(27);var T=e.A1W(12,10);e.L_A(45),e.q8H();var _=e.A1W(1,7,5,7,14);v.style.left=t.stripPX(v.style.left)-(isNaN(A)?this.defaultWidth*_:A/T)+x,this.ta=v},t.Drawing.callout.prototype.render=function(v){var x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q,j,Z,ee,$,ie,te,re,H,U,G,ae;if(x=this.stx,A=x.panels[this.panelName],T=x.getYAxisByField(A,this.field),!(!A||this.field&&!T)&&(this.context=v,_=x.pixelFromTick(this.p0[0],A.chart),L=this.pixelFromValue(A,this.p0[0],this.p0[1],T),!isNaN(L))){v.font=this.fontString,v.textBaseline="top",M=_,F=L,P=this.w/2,e.h8L(4);var ne=e.b00(14,12,0);if(E=this.h/ne,this.penDown){e.h8L(9);var oe=e.b00(8,1,0,7);P=this.defaultWidth+this.whitespace/oe+this.padding/2,E=this.fontSize+this.fontModifier}if(O=this.lineWidth,O||(O=1.1),I=this.getLineColor(),B=this.getLineColor(this.borderColor),q=Math.min(Math.min(P,E)/2,8),this.stem&&(Y="c",Y+="m",this.stem.t?(N=x.pixelFromTick(this.stem.t),R=this.pixelFromValue(A,this.stem.t,this.stem.v,T)):this.stem.x&&(N=M,R=F,M+=this.stem.x,F+=this.stem.y),z="",N>=M+P?(e.L_A(1),e.b00(P,M),z="r"):N>M-P&&N<M+P?z="c":N<=M-P&&(e.h8L(6),e.A1W(M,P),z="l"),R>=F+E?(e.L_A(1),e.b00(E,F),z+="b"):R>F-E&&R<F+E?z+="m":R<=F-E&&(e.L_A(6),e.b00(F,E),z+="t"),this.stemEntry=z,z!=Y&&(N=Math.round(N),R=Math.round(R))),this.highlighted?x.canvasColor("stx_annotation_highlight_bg",v):this.fillColor?(v.fillStyle=this.fillColor,v.globalAlpha=.4):this.stem&&(v.fillStyle=x.containerColor),v.strokeStyle=B,v.setLineDash&&(v.setLineDash(t.borderPatternToArray(O,this.pattern)),e.h8L(44),v.lineDashOffset=e.A1W("0",0)),B){V="c",V+="t",K="l",K+="m",Q="c",Q+="b",v.beginPath(),v.lineWidth=O,e.L_A(4),v.moveTo(e.b00(P,q,M),e.b00(F,E,e.L_A(6))),this.stemEntry!="rt"?(e.h8L(1),v.quadraticCurveTo(e.b00(P,M),e.b00(F,E,e.h8L(6)),e.A1W(P,M,e.h8L(1)),e.A1W(q,E,F,e.L_A(8)))):(v.lineTo(N,R),e.h8L(1),v.lineTo(e.b00(P,M),e.b00(q,E,F,e.h8L(8)))),e.h8L(1),v.lineTo(e.A1W(P,M),e.b00(2,F,q,e.h8L(46))),this.stemEntry=="rm"&&v.lineTo(N,R),e.h8L(1),v.lineTo(e.A1W(P,M),e.b00(F,q,2,e.L_A(47))),e.L_A(1),v.lineTo(e.b00(P,M),e.b00(E,q,F,e.L_A(4))),this.stemEntry!="rb"?(e.L_A(1),v.quadraticCurveTo(e.A1W(P,M),e.b00(E,F,e.h8L(1)),e.b00(P,q,M,e.L_A(4)),e.A1W(E,F,e.L_A(1)))):(v.lineTo(N,R),e.L_A(4),v.lineTo(e.b00(P,q,M),e.A1W(E,F,e.L_A(1)))),e.L_A(47),v.lineTo(e.b00(M,q,2),e.b00(E,F,e.L_A(1))),this.stemEntry==Q&&v.lineTo(N,R),e.L_A(46),v.lineTo(e.b00(2,M,q),e.b00(E,F,e.L_A(1))),e.h8L(8),v.lineTo(e.A1W(q,P,M),e.A1W(E,F,e.h8L(1))),this.stemEntry!="lb"?(e.L_A(6),v.quadraticCurveTo(e.A1W(M,P),e.b00(E,F,e.L_A(1)),e.b00(M,P,e.L_A(6)),e.b00(E,q,F,e.h8L(4)))):(v.lineTo(N,R),e.L_A(6),v.lineTo(e.b00(M,P),e.b00(E,q,F,e.h8L(4)))),e.L_A(6),v.lineTo(e.b00(M,P),e.b00(F,q,2,e.h8L(47))),this.stemEntry==K&&v.lineTo(N,R),e.h8L(6),v.lineTo(e.A1W(M,P),e.A1W(2,F,q,e.h8L(46))),j=-902115771,Z=1350313710,e.L_A(31),ee=e.b00("2",0);for(var le=1;e.E3k(le.toString(),le.toString().length,8725)!==j;le++)e.h8L(48),v.lineTo(e.A1W(M,P),e.b00(E,q,F,e.h8L(49))),ee+=2;if(e.i7q(ee.toString(),ee.toString().length,95171)!==Z&&(e.h8L(6),v.lineTo(e.b00(M,P),e.A1W(q,E,F,e.h8L(8)))),this.stemEntry!="lt"){e.L_A(6),v.quadraticCurveTo(e.A1W(M,P),e.b00(F,E,e.h8L(6)),e.A1W(q,P,M,e.h8L(8)),e.A1W(F,E,e.h8L(6))),$=-139818045,ie=1022127636,e.h8L(44),te=e.A1W("2",0);for(var he=1;e.i7q(he.toString(),he.toString().length,83544)!==$;he++)te+=2;e.E3k(te.toString(),te.toString().length,40346)}else v.lineTo(N,R),e.L_A(8),v.lineTo(e.b00(q,P,M),e.b00(F,E,e.h8L(6)));e.L_A(50),v.lineTo(e.A1W(q,M,"2"),e.b00(F,E,e.h8L(6))),this.stemEntry==V&&v.lineTo(N,R),e.h8L(47),v.lineTo(e.b00(M,q,2),e.A1W(F,E,e.L_A(6))),e.L_A(4),v.lineTo(e.A1W(P,q,M),e.b00(F,E,e.L_A(6))),v.fill(),v.globalAlpha=1,this.pattern!="none"&&v.stroke()}if(this.highlighted)re="stx_",re+="annotation_highlight",x.canvasColor(re,v);else{H=-833445001,U=117891491,G=2;for(var ue=1;e.i7q(ue.toString(),ue.toString().length,36720)!==H;ue++)v.fillStyle=I,G+=2;e.E3k(G.toString(),G.toString().length,83892)!==U&&(v.fillStyle=I)}if(F+=this.padding,!this.ta)for(var ce=0;ce<this.arr.length;ce++)v.fillText(this.arr[ce],M-P+this.padding,F-E),F+=this.fontSize;v.textBaseline="alphabetic",this.highlighted&&!this.noHandles&&(ae=this.highlighted=="p0",this.littleCircle(v,N,R,ae))}},t.Drawing.callout.prototype.click=function(v,x,A){var T;if(!(this.stx.overXAxis||this.stx.overYAxis))return T=this.stx.panels[this.panelName],this.copyConfig(),this.setPoint(0,x,A,T.chart),this.penDown?(this.adjust(),this.edit(v),this.penDown=!1,!1):(this.stem={d:this.d0,v:this.v0},this.penDown=!0,this.adjust(),!1)},t.Drawing.callout.prototype.reposition=function(v,x,A,T){var _,L,M;x&&(_=this.stx.panels[this.panelName],L=x.tick-A,M=x.value-T,x.stem?(x.action=="drag"?this.stem={d:this.stx.dateFromTick(A,_.chart,!0),v:T}:x.action=="move"&&(this.setPoint(0,x.p0[0]-L,x.p0[1]-M,_.chart),this.stem={d:this.stx.dateFromTick(this.stx.tickFromDate(x.stem.d,_.chart)-L),v:x.stem.v-M}),this.adjust()):this.setPoint(0,x.p0[0]-L,x.p0[1]-M,_.chart),this.render(v))},t.Drawing.callout.prototype.lineIntersection=function(v,x,A,T){var _,L,M,F,P,E,O,I,B,N,R;if(_=this.stem,L=this.p0,M=this.stx,F=M.panels[this.panelName],e.q8H(),!L||!_||!F)return!1;if(P=_.t||M.tickFromDate(_.d,F.chart),E={x0:L[0],x1:P,y0:L[1],y1:_.v},O=this.boxToPixels(M,this.panelName,E,M.getYAxisByField(F,this.field)),I=O.x0,B=O.y0,N=O.x1,R=O.y1,typeof this.stemEntry=="string"){if(this.stemEntry.indexOf("l")>-1){e.h8L(6);var q=e.A1W(7,5);I-=this.w/q}else if(this.stemEntry.indexOf("r")>-1){e.h8L(51);var Y=e.b00(82,2,10,3,13);I+=this.w/("2">>Y)}if(this.stemEntry.indexOf("t")>-1){e.L_A(52);var z=e.A1W(17,8,2446,18);B-=this.h/z}else if(this.stemEntry.indexOf("b")>-1){e.L_A(53);var V=e.b00(1,5,1,5);B+=this.h/V}}return t.boxIntersects(A.cx0,A.cy0,A.cx1,A.cy1,I,B,N,R,T)},t.Drawing.callout.prototype.intersected=function(v,x,A){var T,_,L,M,F,P,E,O,I,B,N,R;if(T=this.stx,_=T.panels[this.panelName],!this.p0)return null;if(this.pointIntersection(this.stem.t,this.stem.v,A))return L="d",L+="ra",L+="g",M="p",M+="0",this.highlighted=M,{action:L,stem:!0};e.L_A(54);var q=e.A1W(1,22,14,10);F=T.pixelFromTick(this.p0[0],_.chart)-this.w/q,P=T.getYAxisByField(_,this.field),e.h8L(55);var Y=e.b00(8,12,20,23);e.L_A(1);var z=e.b00(2,0);return E=this.pixelFromValue(_,this.p0[0],this.p0[Y],P)-this.h/z,O=F+this.w,I=E+this.h,this.stem&&this.stem.x&&(F+=this.stem.x,O+=this.stem.x,E+=this.stem.y,I+=this.stem.y),B=T.pixelFromTick(v,_.chart),N=T.pixelFromValueAdjusted(_,v,x),B+A.r>=F&&B-A.r<=O&&N+A.r>=E&&N-A.r<=I?(this.highlighted=!0,{p0:t.clone(this.p0),tick:v,value:this.valueOnDrawingAxis(v,x)}):(R=this.lineIntersection(v,x,A,"segment"),R?(this.highlighted=!0,{action:"move",stem:t.clone(this.stem),p0:t.clone(this.p0),tick:v,value:this.valueOnDrawingAxis(v,x)}):null)},t.Drawing.fibonacci=function(){var v;v="fibona",e.r8j(),v+="cci",this.name=v,this.configurator="fibonacci"},t.inheritsFrom(t.Drawing.fibonacci,t.Drawing.BaseTwoPoint),t.Drawing.fibonacci.mapping={trend:"t",color:"c",parameters:"p",pattern:"pt",opacity:"o",lineWidth:"lw",level:"l",extendLeft:"e",printLevels:"pl",printValues:b,timezone:"tz",display:"d"},t.Drawing.fibonacci.prototype.recommendedLevels=[-.618,-.382,0,.382,.5,.618,1,1.382,1.618],t.Drawing.fibonacci.prototype.configs=[g,"fillColor","lineWidth","pattern","parameters"],t.Drawing.fibonacci.prototype.initializeSettings=function(v){var x,A;if(e.r8j(),x=this.recommendedLevels,x&&!v.currentVectorParameters.fibonacci.fibsAlreadySet){A=v.currentVectorParameters.fibonacci.fibs;for(var T=0;T<A.length;T++){delete A[T].display;for(var _=0;_<x.length;_++)A[T].level==x[_]&&(A[T].display=!0)}}},t.Drawing.fibonacci.prototype.setOuter=function(){var v,x,A,T,_,L,M,F,P,E,O,I,B,N,R;if(v=this.stx,x=v.panels[this.panelName],!!x){A=Math.max(this.p0[1],this.p1[1]),T=Math.min(this.p0["1"-0],this.p1["1"<<0]),e.h8L(6),_=e.b00(A,T),this.outer={p0:t.clone(this.p0),p1:t.clone(this.p1)},L=v.pixelFromTick(this.p0[0],x.chart),M=v.pixelFromTick(this.p1[0],x.chart),F=v.getYAxisByField(x,this.field),P=this.pixelFromValue(x,this.p0[0],this.p0[1],F),E=this.pixelFromValue(x,this.p1[0],this.p1[1],F),O=0,I=1;for(var q="0"-0;q<this.parameters.fibs.length;q++)B=this.parameters.fibs[q],!(B.level>=O&&B.level<=I||!B.display)&&(N=this.pixelFromValue(x,this.p0["0"-0],E<P?A-_*B.level:T+_*B.level,F),R=t.xIntersection({x0:L,x1:M,y0:P,y1:E},N),B.level<O?(O=B.level,this.outer.p1[1]=this.valueFromPixel(N,x,F),this.outer.p1[0]=v.tickFromPixel(R,x.chart)):B.level>I&&(I=B.level,this.outer.p0[1]=this.valueFromPixel(N,x,F),this.outer.p0[0]=v.tickFromPixel(R,x.chart)))}},t.Drawing.fibonacci.prototype.click=function(v,x,A){var T;if(T=this.stx.panels[this.panelName],!!T)return this.copyConfig(),this.penDown?(this.accidentalClick(x,A)||(this.setPoint(1,x,A,T.chart),this.setOuter(),this.parameters=t.clone(this.parameters),this.penDown=!1),!0):(this.setPoint(0,x,A,T.chart),this.penDown=!0,!1)},t.Drawing.fibonacci.prototype.render=function(v){var x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q,j,Z,ee,$,ie,te,re,H,U,G,ae,ne,oe,le,he,ue,ce,de,Ce;if(x="a",x+="ut",x+="o",A=this.stx,T=A.panels[this.panelName],_=A.getYAxisByField(T,this.field),!(!T||this.field&&!_)&&(_=_||T.yAxis,!!this.p1)){L=Math.max(this.p0[1],this.p1[1]),M=Math.min(this.p0[1],this.p1[1]),F=_.flipped?M-L:L-M,P=A.pixelFromTick(this.p0[0],T.chart),E=A.pixelFromTick(this.p1[0],T.chart),O=this.pixelFromValue(T,this.p0[0],this.p0[1],_),I=this.pixelFromValue(T,this.p1[0],this.p1[1],_),B=Math.min(I,O),N=Math.max(I,O),e.L_A(6),R=e.b00(N,B),e.L_A(56),q=e.b00(O,P,I,E,0),Y={color:x,parameters:{pattern:"solid",opacity:.25,lineWidth:1}},this.parameters.trend||(this.parameters.trend=Y),z=this.getLineColor(this.parameters.trend.color),v.textBaseline="middle",A.canvasFont("stx_yaxis",v),e.L_A(57);var pe=e.A1W(3,2,4,1);V=v.measureText("161.8%").width+("10"|pe),K=Number.MAX_VALUE,Q=Number.MAX_VALUE,e.L_A(58);var xe=e.A1W(3,9,4);j=Number.MAX_VALUE*xe,Z=Number.MAX_VALUE*-1,ee=this.getLineColor(),this.rays=[];for(var Te=0;Te<this.parameters.fibs.length;Te++)if($="l",$+="e",$+="f",$+="t",v.textAlign=$,v.fillStyle=ee,ie=this.parameters.fibs[Te],!!ie.display){if(te=this.pixelFromValue(T,this.p0[0],I<O?L-F*ie.level:M+F*ie.level,_),re=t.xIntersection({x0:P,x1:E,y0:O,y1:I},te),H=this.parameters.extendLeft?0:re,U=T.left+T.width,this.parameters.printLevels){G="r",G+="igh",G+="t",e.L_A(59);var be=e.b00(11,39,14,24);e.L_A(54),e.A1W(1,5888,11770,3),e.h8L(4),e.A1W(20,2179,2286),e.h8L(60),e.b00(32450,25951,3,6),e.h8L(55),e.A1W(20,13,4976,4347),ae=Math.round(ie.level*("1000"-0))/be+"%",U-=V,this.parameters.printValues&&(v.fillStyle=ee,A.canvasFont("stx_yaxis",v)),U<H&&(v.textAlign=G),v.fillText(ae,U,te),U<H?U+=5:U-=5}this.parameters.printValues&&re<T.width&&(ne=this.valueFromPixel(te,T,_),_.priceFormatter?ne=_.priceFormatter(A,T,ne):ne=A.formatYAxisPrice(ne,T,null,_),v==A.chart.context&&A.endClip(),A.createYAxisLabel(T,ne,te,this.getLineColor(null,!0),null,v,_),v==A.chart.context&&A.startClip(T.name)),oe=ie.color,(oe=="auto"||t.isTransparent(oe))&&(oe=this.getLineColor()),le=ie.color,(le=="auto"||t.isTransparent(le))&&(le=this.fillColor),(le=="auto"||t.isTransparent(le))&&(le=A.defaultColor),v.fillStyle=le,he=t.clone(ie.parameters),this.highlighted&&(e.h8L(31),he.opacity=e.A1W("1",64)),A.plotLine(H,U,te,te,oe,"segment",v,T,he),this.rays.push([[H,te],[U,te]]),v.globalAlpha=.05,v.beginPath(),v.moveTo(U,te),v.lineTo(H,te),H?v.lineTo(E,I):v.lineTo(H,I),v.lineTo(U,I),typeof le<"u"&&v.fill(),v.globalAlpha=1,te<Q&&(K=re,Q=te),te>Z&&(j=re,Z=te)}for(var _e=0;_e<=1;_e++)ue=q?N-R*_e:B+R*_e,ue=Math.round(ue),ue<Q&&(K=t.xIntersection({x0:P,x1:E,y0:O,y1:I},ue),Q=ue),ue>Z&&(j=t.xIntersection({x0:P,x1:E,y0:O,y1:I},ue),Z=ue);ce=t.clone(this.parameters.trend.parameters),this.highlighted&&(ce.opacity=1),A.plotLine(K,j,Q,Z,z,"segment",v,T,ce),this.highlighted&&(de=this.highlighted=="p0",Ce=this.highlighted=="p1",this.littleCircle(v,P,O,de),this.littleCircle(v,E,I,Ce))}},t.Drawing.fibonacci.prototype.reposition=function(v,x,A,T){x&&(t.Drawing.BaseTwoPoint.prototype.reposition.apply(this,arguments),this.adjust())},t.Drawing.fibonacci.prototype.intersected=function(v,x,A){var T,_,L,M,F,P,E,O;if(T=this.p0,_=this.p1,!T||!_)return null;L={0:T,1:_};for(var I in L)if(this.pointIntersection(L[I][0],L[I][1],A))return M="d",M+="rag",e.h8L(1),this.highlighted=e.A1W(I,"p"),{action:M,point:"p"+I};if(F=this.outer,P=this.rays,E=F&&this.lineIntersection(v,x,A,"segment",F.p0,F.p1),!E){for(var B=0;B<P.length;B++)if(O="r",O+="ay",this.lineIntersection(v,x,A,O,P[B][0],P[B][1],!0)){E=!0;break}}return E?(this.highlighted=!0,{action:"move",p0:t.clone(T),p1:t.clone(_),tick:v,value:this.valueOnDrawingAxis(v,x)}):null},t.Drawing.fibonacci.prototype.reconstruct=function(v,x){var A,T,_;x=t.replaceFields(x,t.reverseObject(t.Drawing.fibonacci.mapping)),this.stx=v,this.parameters=x.parameters,this.parameters||(this.parameters=t.clone(this.stx.currentVectorParameters.fibonacci)),this.color=x.col,this.fillColor=x.fc,this.panelName=x.pnl,A=1028703783,e.L_A(44),T=-e.b00("1262890972",0),_=2;for(var L=1;e.E3k(L.toString(),L.toString().length,65471)!==A;L++)this.d0=x.d0,this.d1=x.d1,this.d2=x.d2,_+=2;e.r8j(),e.E3k(_.toString(),_.toString().length,10283)!==T&&(this.d0=x.d0,this.d1=x.d1,this.d2=x.d2),this.tzo0=x.tzo0,this.tzo1=x.tzo1,this.tzo2=x.tzo2,this.v0=x.v0,this.v1=x.v1,this.v2=x.v2,this.field=x.fld,this.adjust()},t.Drawing.fibonacci.prototype.adjust=function(){var v,x,A,T;v=-938095734,x=-2117018937,A=2;for(var _="1"-0;e.i7q(_.toString(),_.toString().length,52563)!==v;_++)T=this.stx.panels[this.panelName],A+=2;e.i7q(A.toString(),A.toString().length,52737)!==x&&(T=this.stx.panels[this.panelName]),T&&(e.L_A(24),this.setPoint(e.A1W("0",32),this.d0,this.v0,T.chart),e.L_A(2),this.setPoint(e.A1W("1",1),this.d1,this.v1,T.chart),e.r8j(),this.setOuter())},t.Drawing.fibonacci.prototype.serialize=function(){var v;return e.r8j(),v={name:this.name,parameters:this.parameters,pnl:this.panelName,col:this.color,fc:this.fillColor,d0:this.d0,d1:this.d1,d2:this.d2,tzo0:this.tzo0,tzo1:this.tzo1,tzo2:this.tzo2,v0:this.v0,v1:this.v1,v2:this.v2,fld:this.field},t.replaceFields(v,t.Drawing.fibonacci.mapping)},t.Drawing.retracement=function(){var v;e.r8j(),v="retraceme",v+="nt",this.name=v},t.inheritsFrom(t.Drawing.retracement,t.Drawing.fibonacci),t.Drawing.fibprojection=function(){e.r8j(),this.name="fibprojection",this.dragToDraw=!1,this.p2=null},t.inheritsFrom(t.Drawing.fibprojection,t.Drawing.fibonacci),e.h8L(18),t.Drawing.fibprojection.prototype.recommendedLevels=[0,.618,1,1.272,1.618,e.A1W("2.618",1),4.236],t.Drawing.fibprojection.prototype.click=function(v,x,A){var T,_;if(T=this.stx,_=T.panels[this.panelName],!!_)return this.copyConfig(),this.penDown?this.accidentalClick(x,A)?(T.undo(),!0):this.p2!==null?(this.setPoint(2,this.p2[0],this.p2[1],_.chart),this.parameters=t.clone(this.parameters),!0):(this.setPoint(1,x,A,_.chart),e.L_A(44),this.p2=[this.p1[e.A1W("0",0)],this.p1[1]],!1):(e.L_A(31),this.setPoint(e.A1W("0",0),x,A,_.chart),this.penDown=!0,!1)},t.Drawing.fibprojection.prototype.render=function(v){var x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q,j,Z,ee,$,ie,te,re,H,U,G,ae,ne,oe,le,he;if(x="1",x+="6",x+="1.8%",A="stx_ya",A+="xis",T="sol",T+="i",T+="d",_="a",_+="u",_+="t",_+="o",L=this.stx,M=L.panels[this.panelName],F=L.getYAxisByField(M,this.field),!(!M||this.field&&!F)&&(F=F||M.yAxis,!!this.p1)){e.L_A(6);var ue=e.b00(11,10);e.h8L(61);var ce=e.b00(18,5,9,2,14);P=this.p1[ue]-this.p0[ce],E=L.pixelFromTick(this.p0[0],M.chart),O=L.pixelFromTick(this.p1[0],M.chart),I=this.pixelFromValue(M,this.p0[0],this.p0[1],F),B=this.pixelFromValue(M,this.p1[0],this.p1[1],F),N=null,R=null,this.p2&&(N=L.pixelFromTick(this.p2[0],M.chart),R=this.pixelFromValue(M,this.p2[0],this.p2[1],F)),q={color:_,parameters:{pattern:T,opacity:.25,lineWidth:1}},this.parameters.trend||(this.parameters.trend=q),Y=this.getLineColor(this.parameters.trend.color),v.textBaseline="middle",L.canvasFont(A,v),e.L_A(62);var de=e.b00(19,3,66,12);if(e.r8j(),z=v.measureText(x).width+de,V=this.getLineColor(),this.p2){this.rays=[];for(var Ce=0;Ce<this.parameters.fibs.length;Ce++)if(K="segm",K+="ent",Q="a",Q+="uto",j="a",j+="u",j+="to",v.textAlign="left",v.fillStyle=V,Z=this.parameters.fibs[Ce],!!Z.display){if(ee=this.pixelFromValue(M,this.p2[0],this.p2[1]+P*Z.level,F),$=t.xIntersection({x0:E,x1:O,y0:I,y1:B},ee),ie=this.parameters.extendLeft?0:E,te=M.left+M.width,this.parameters.printLevels){e.L_A(55);var pe=e.A1W(13,14,18e3,17001);e.h8L(1);var xe=e.b00(9,1);re=Math.round(Z.level*pe)/xe+"%",te-=z,this.parameters.printValues&&(v.fillStyle=V,L.canvasFont("stx_yaxis",v)),te<ie&&(v.textAlign="right"),v.fillText(re,te,ee),te<ie?te+=5:te-=5}this.parameters.printValues&&$<M.width&&(H=this.valueFromPixel(ee,M,F),F.priceFormatter?H=F.priceFormatter(L,M,H):H=L.formatYAxisPrice(H,M,null,F),v==L.chart.context&&L.endClip(),L.createYAxisLabel(M,H,ee,this.getLineColor(null,!0),null,v,F),v==L.chart.context&&L.startClip(M.name)),U=Z.color,(U=="auto"||t.isTransparent(U))&&(U=this.getLineColor()),G=Z.color,(G==j||t.isTransparent(G))&&(G=this.fillColor),(G==Q||t.isTransparent(G))&&(G=L.defaultColor),v.fillStyle=G,ae=t.clone(Z.parameters),this.highlighted&&(ae.opacity=1),L.plotLine(ie,te,ee,ee,U,K,v,M,ae),this.rays.push([[ie,ee],[te,ee]]),v.globalAlpha=.05,v.beginPath(),v.moveTo(te,ee),v.lineTo(ie,ee),ie?v.lineTo(E,R):v.lineTo(ie,R),v.lineTo(te,R),typeof G<"u"&&v.fill(),v.globalAlpha=1}}ne=t.clone(this.parameters.trend.parameters),this.highlighted&&(ne.opacity=1),L.plotLine(E,O,I,B,Y,"segment",v,M,ne),this.p2&&L.plotLine(O,N,B,R,Y,"segment",v,M,ne),this.highlighted&&(oe=this.highlighted=="p0",le=this.highlighted=="p1",he=this.highlighted=="p2",this.littleCircle(v,E,I,oe),this.littleCircle(v,O,B,le),this.littleCircle(v,N,R,he))}},t.Drawing.fibprojection.prototype.move=function(v,x,A){this.penDown&&(this.copyConfig(),this.p2===null?this.p1=[x,A]:this.p2=[x,A],this.render(v))},t.Drawing.fibprojection.prototype.reposition=function(v,x,A,T){e.q8H();var _,L,M;x&&(_=this.stx.panels[this.panelName],L=x.tick-A,M=x.value-T,x.action=="move"?(e.h8L(31),this.setPoint(e.A1W("0",0),x.p0[0]-L,x.p0[1]-M,_.chart),e.L_A(31),this.setPoint(e.A1W("1",64),x.p1[0]-L,x.p1[1]-M,_.chart),this.setPoint(2,x.p2[0]-L,x.p2[1]-M,_.chart),this.render(v)):x.action=="drag"&&(this[x.point]=[A,T],e.L_A(44),this.setPoint(e.b00("0",0),this.p0[0],this.p0[1],_.chart),this.setPoint(1,this.p1["0">>32],this.p1[1],_.chart),this.setPoint(2,this.p2[0],this.p2[1],_.chart),this.render(v)))},t.Drawing.fibprojection.prototype.intersected=function(v,x,A){var T,_,L,M,F,P,E,O;if(T="seg",T+="m",T+="ent",e.r8j(),_=this.p0,L=this.p1,M=this.p2,!_||!L||!M)return null;F={0:_,1:L,2:M};for(var I in F)if(this.pointIntersection(F[I][0],F[I][1],A))return e.h8L(1),this.highlighted=e.A1W(I,"p"),{action:"drag",point:"p"+I};if(P=this.rays,E=this.lineIntersection(v,x,A,T,_,L)||this.lineIntersection(v,x,A,"segment",L,M),!E){for(var B=0;B<P.length;B++)if(this.lineIntersection(v,x,A,"ray",P[B][0],P[B][1],!0)){E=!0;break}}return E?(O="m",O+="o",O+="ve",this.highlighted=!0,{action:O,p0:t.clone(_),p1:t.clone(L),p2:t.clone(M),tick:v,value:this.valueOnDrawingAxis(v,x)}):null},t.Drawing.fibprojection.prototype.adjust=function(){var v;v=this.stx.panels[this.panelName],v&&(this.setPoint(0,this.d0,this.v0,v.chart),this.setPoint(1,this.d1,this.v1,v.chart),this.setPoint(2,this.d2,this.v2,v.chart))},t.Drawing.fibarc=function(){this.name="fibarc"},t.inheritsFrom(t.Drawing.fibarc,t.Drawing.fibonacci),e.h8L(6),t.Drawing.fibarc.prototype.recommendedLevels=[e.b00("0.382",0),.5,.618,1],t.Drawing.fibarc.prototype.setOuter=function(){var v,x,A,T,_,L,M,F,P;v=this.stx,x=v.panels[this.panelName],x&&(this.outer={p0:t.clone(this.p0),p1:t.clone(this.p1)},A=v.getYAxisByField(x,this.field),T=this.pixelFromValue(x,this.p0[0],this.p0[1],A),_=this.pixelFromValue(x,this.p1[0],this.p1[1],A),L=v.pixelFromTick(this.p0[0],x.chart),M=v.pixelFromTick(this.p1[0],x.chart),e.h8L(49),F=e.A1W(T,_,2),P=t.xIntersection({x0:L,x1:M,y0:T,y1:_},F),this.outer.p0[1]=this.valueFromPixel(F,x,A),this.outer.p0[0]=v.tickFromPixel(P,x.chart))},t.Drawing.fibarc.prototype.intersected=function(v,x,A){var T,_,L,M,F,P,E,O,I,B,N,R,q;if(T=this.stx,_=T.panels[this.panelName],!!_){if(L=this.p0,M=this.p1,F=this.outer,!L||!M)return null;P={0:L,1:M};for(var Y in P)if(this.pointIntersection(P[Y][0],P[Y][1],A))return e.h8L(1),this.highlighted=e.b00(Y,"p"),{action:"drag",point:"p"+Y};return E=this.valueOnDrawingAxis(v,x),this.lineIntersection(v,E,A,"segment",F.p0,F.p1)?(this.highlighted=!0,{action:"move",p0:t.clone(L),p1:t.clone(M),tick:v,value:E}):(O=T.getYAxisByField(_,this.field),I={x0:L[0],x1:M[0],y0:L[1],y1:M[1]},B=this.boxToPixels(T,this.panelName,I,O),e.r8j(),N={x:Math.abs(Math.sqrt(2)*(B.x1-B.x0)),y:Math.abs(Math.sqrt(2)*(B.y1-B.y0))},R=T.pixelFromTick(v,_.chart),q=T.pixelFromValueAdjusted(_,v,x),R+A.r<B.x1-N.x||R-A.r>B.x1+N.x||q+A.r<B.y1-N.y||q-A.r>B.y1+N.y||B.y0<B.y1&&q-A.r>B.y1||B.y0>B.y1&&q+A.r<B.y1?null:(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:v,value:E}))}},t.Drawing.fibarc.prototype.render=function(v){var x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q,j,Z,ee,$,ie,te,re,H,U;if(x="le",x+="f",x+="t",A="stx_",A+="yax",A+="i",A+="s",T="m",T+="i",T+="dd",T+="le",_=this.stx,L=_.panels[this.panelName],M=_.getYAxisByField(L,this.field),!(!L||this.field&&!M)&&(M=M||L.yAxis,!!this.p1)){F=_.pixelFromTick(this.p0[0],L.chart),P=_.pixelFromTick(this.p1[0],L.chart),E=this.pixelFromValue(L,this.p0[0],this.p0[1],M),O=this.pixelFromValue(L,this.p1[0],this.p1[1],M),e.L_A(63),I=e.b00(E,O),e.h8L(64),B=Math.abs(e.A1W(P,O,F,E)),N=this.getLineColor(this.parameters.trend.color),v.textBaseline=T,_.canvasFont(A,v),R=this.getLineColor();for(var G=0;G<this.parameters.fibs.length;G++)if(q="aut",q+="o",v.fillStyle=R,Y=this.parameters.fibs[G],!(Y.level<"0">>0||!Y.display)){e.L_A(1);var ae=e.A1W(1,0);e.L_A(52);var ne=e.b00(9,17,1376,9);e.L_A(59);var oe=e.b00(20,34,16,0);z=Math.abs(this.p1[ae]-this.p0[ne])*Math.sqrt(oe)*Y.level,e.h8L(6);var le=e.A1W(8,7);e.L_A(49);var he=e.b00(3,4,1);e.h8L(28);var ue=e.b00(13,125,5,7);e.L_A(65);var ce=e.A1W(1,6,5,12);e.h8L(42);var de=e.b00(2,16,16,0);if(V=this.p1[le]+z*(I?he:ue)*(M.flipped?ce:de),K=this.pixelFromValue(L,this.p0["0"<<0],V,M),Q=t.xIntersection({x0:F,x1:P,y0:E,y1:O},K),this.parameters.printLevels){j="c",j+="e",j+="nt",j+="er",v.textAlign=j,e.L_A(66);var Ce=e.b00(981,9,891);e.L_A(67);var pe=e.A1W(16,630,16,30,6);e.L_A(4),e.A1W(18,5,259),Z=Math.round(Y.level*Ce)/pe+"%",this.parameters.printValues&&(v.fillStyle=R,_.canvasFont("stx_yaxis",v)),v.fillText(Z,P,Math.round(K-5))}v.textAlign="left",this.parameters.printValues&&Q<L.width&&(ee=V,M.priceFormatter?ee=M.priceFormatter(_,L,ee):ee=_.formatYAxisPrice(ee,L,null,M),v==_.chart.context&&_.endClip(),_.createYAxisLabel(L,ee,K,this.getLineColor(null,!0),null,v,M),v==_.chart.context&&_.startClip(L.name)),$=Y.color,($=="auto"||t.isTransparent($))&&($=this.getLineColor()),v.strokeStyle=$,ie=Y.color,(ie==q||t.isTransparent(ie))&&(ie=this.fillColor),(ie=="auto"||t.isTransparent(ie))&&(ie=_.defaultColor),v.fillStyle=ie,v.globalAlpha=this.highlighted?1:Y.parameters.opacity,v.lineWidth=Y.parameters.lineWidth,v.setLineDash&&(v.setLineDash(t.borderPatternToArray(v.lineWidth,Y.parameters.pattern)),v.lineDashOffset=0),v.save(),v.beginPath(),e.L_A(68),v.scale(e.b00(B,"1"),1),e.L_A(18),v.arc(e.b00(P,B),O,Math.abs(K-O),0,Math.PI,!I),this.pattern!="none"&&v.stroke(),v.globalAlpha=.05,v.fill(),v.restore(),v.setLineDash&&v.setLineDash([]),v.globalAlpha=1}v.textAlign=x,te=t.clone(this.parameters.trend.parameters),this.highlighted&&(e.h8L(24),te.opacity=e.b00("1",96)),e.h8L(49),_.plotLine(P,e.A1W(F,P,2),O,e.A1W(E,O,2),N,"segment",v,L,te),this.highlighted&&(re="p",re+="0",H=this.highlighted==re,U=this.highlighted=="p1",this.littleCircle(v,F,E,H),this.littleCircle(v,P,O,U))}},t.Drawing.fibfan=function(){e.r8j(),this.name="fibfan"},t.inheritsFrom(t.Drawing.fibfan,t.Drawing.fibonacci),t.Drawing.fibfan.prototype.recommendedLevels=[0,.382,.5,.618,1],t.Drawing.fibfan.prototype.setOuter=function(){},t.Drawing.fibfan.prototype.render=function(v){var x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q,j,Z,ee,$,ie,te;if(x=this.stx,A=x.panels[this.panelName],T=x.getYAxisByField(A,this.field),!(!A||this.field&&!T)&&(T=T||A.yAxis,!!this.p1)){_=x.pixelFromTick(this.p0[0],A.chart),L=x.pixelFromTick(this.p1["0"<<0],A.chart),M=this.pixelFromValue(A,this.p0[0],this.p0[1],T),F=this.pixelFromValue(A,this.p1["0">>0],this.p1[1],T),P=Math.min(F,M),E=Math.max(F,M),e.L_A(6),e.A1W(E,P),e.h8L(56),e.A1W(M,_,F,L,0),this.getLineColor(this.parameters.trend.color),v.textBaseline="middle",x.canvasFont("stx_yaxis",v),e.h8L(27);var re=e.A1W(20,10);O=v.measureText("161.8%").width+re,e.L_A(27),e.A1W(17,18),I=this.getLineColor(),this.rays=[];for(var H=0;H<this.parameters.fibs.length;H++)if(B="se",B+="g",B+="ment",v.fillStyle=I,N=this.parameters.fibs[H],!!N.display&&(R=this.pixelFromValue(A,this.p0[0],(this.p0[1]-this.p1[1])*N.level+this.p1[1],T),q=t.xIntersection({x0:L,x1:L,y0:M,y1:F},R),Y=A.left,L>_&&(Y+=A.width),e.h8L(69),z=e.A1W(q,_,R,M,Y,M,_),!(_>Y-(this.parameters.printLevels?O+5:0)&&L>_)&&!(_<Y+(this.parameters.printLevels?O+5:0)&&L<_))){if(this.parameters.printLevels){e.h8L(70);var U=e.A1W(1,1,5,14);e.h8L(71);var G=e.A1W(10,11,14,6708490,4359);V=Math.round(N.level*1e3)/U+(G===454.94?607.74:"%"),L>_?(K="l",K+="eft",Y-=O,v.textAlign=K):(Y+=O,v.textAlign="right"),this.parameters.printValues&&(v.fillStyle=I,x.canvasFont("stx_yaxis",v)),e.L_A(69),z=e.A1W(q,_,R,M,Y,M,_),v.fillText(V,Y,z),L>_?Y-=5:Y+=5}v.textAlign="left",this.parameters.printValues&&q<A.width&&(Q=this.valueFromPixel(R,A,T),T.priceFormatter?Q=T.priceFormatter(x,A,Q):Q=x.formatYAxisPrice(Q,A,null,T),v==x.chart.context&&x.endClip(),x.createYAxisLabel(A,Q,R,this.getLineColor(null,!0),null,v,T),v==x.chart.context&&x.startClip(A.name)),j=N.color,(j=="auto"||t.isTransparent(j))&&(j=this.getLineColor()),Z=N.color,(Z=="auto"||t.isTransparent(Z))&&(Z=this.fillColor),(Z=="auto"||t.isTransparent(Z))&&(Z=x.defaultColor),v.fillStyle=Z,this.parameters.printLevels&&(e.L_A(69),z=e.b00(q,_,R,M,Y,M,_)),ee=t.clone(N.parameters),this.highlighted&&(ee.opacity=1),x.plotLine(_,Y,M,z,j,B,v,A,ee),this.rays.push([[_,M],[Y,z]]),v.globalAlpha=.05,v.beginPath(),v.moveTo(Y,z),v.lineTo(_,M),v.lineTo(Y,M),v.fill(),v.globalAlpha=1}this.highlighted&&($="p",$+="0",ie=this.highlighted==$,te=this.highlighted=="p1",this.littleCircle(v,_,M,ie),this.littleCircle(v,L,F,te))}},t.Drawing.fibtimezone=function(){this.name="fibtimezone"},t.inheritsFrom(t.Drawing.fibtimezone,t.Drawing.fibonacci),t.Drawing.fibtimezone.prototype.render=function(v){var x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q,j,Z,ee,$,ie;if(x=this.stx,A=x.panels[this.panelName],T=x.getYAxisByField(A,this.field),!(!A||this.field&&!T)&&(T=T||A.yAxis,!!this.p1)){_=x.pixelFromTick(this.p0[0],A.chart),L=x.pixelFromTick(this.p1[0],A.chart),M=this.pixelFromValue(A,this.p0[0],this.p0[1],T),F=this.pixelFromValue(A,this.p1[0],this.p1[1],T),P=[1,0],E=this.getLineColor(this.parameters.trend.color),v.textBaseline="middle",x.canvasFont("stx_yaxis",v),e.L_A(44),O=e.A1W("20",0),I=this.p1[0]-this.p0[0],B=this.getLineColor(),v.textAlign="center",N=_,R=T.top,q=T.bottom,Y=0,z=this.parameters.timezone.color,(z=="auto"||t.isTransparent(z))&&(z=this.getLineColor()),V=this.parameters.timezone.color,(V=="auto"||t.isTransparent(V))&&(V=this.fillColor),(V=="auto"||t.isTransparent(V))&&(V=x.defaultColor),this.parameters.printLevels&&(e.h8L(6),q-=e.b00(O,7)),K=t.clone(this.parameters.timezone.parameters),this.highlighted&&(K.opacity=1);do{if(N=x.pixelFromTick(this.p0[0]+Y*I,A.chart),_<L&&N>A.left+A.width)break;if(_>L&&N<A.left)break;this.parameters.printLevels&&(v.fillStyle=B,v.fillText(L>_?Y:Y*-1,N,q+7)),v.fillStyle=V,x.plotLine(N,N,0,q,z,"segment",v,A,K),v.globalAlpha=.05,v.beginPath(),v.moveTo(_,R),v.lineTo(N,R),v.lineTo(N,q),v.lineTo(_,q),v.fill(),v.globalAlpha=1,e.h8L(8);var te=e.A1W(15,14,0);e.L_A(27);var re=e.A1W(6,5);Y=P["0"*te]+P[re],P.unshift(Y)}while(I);if(v.textAlign="left",x.plotLine(_,L,M,F,E,"segment",v,A,K),this.highlighted){Q=this.highlighted=="p0",j=this.highlighted=="p1",this.littleCircle(v,_,M,Q),Z=1959957924,ee=-1937569469,$=2;for(var H=1;e.i7q(H.toString(),H.toString().length,13931)!==Z;H++)this.littleCircle(v,L,F,j),$+=2;e.E3k($.toString(),$.toString().length,26413)!==ee&&this.littleCircle(v,L,F,j),this.littleCircle(v,L,F,j)}else ie=this.valueFromPixel(A.height/2,A,T),this.setPoint(0,this.p0[0],ie,A.chart),this.setPoint(1,this.p1[0],ie,A.chart)}},t.Drawing.fibtimezone.prototype.intersected=function(v,x,A){var T,_,L,M,F,P;if(e.q8H(),T=this.p0,_=this.p1,L=this.stx.panels[this.panelName],!T||!_||!L)return null;M={0:T,1:_};for(var E in M)if(this.pointIntersection(M[E][0],M[E]["1"^0],A))return e.h8L(1),this.highlighted=e.b00(E,"p"),{action:"drag",point:"p"+E};return F=this.lineIntersection(v,x,A,"segment"),F||A.x0<=this.p0[0]&&A.x1>=T[0]?(P="m",P+="o",P+="ve",this.highlighted=!0,{action:P,p0:t.clone(T),p1:t.clone(_),tick:v,value:this.valueOnDrawingAxis(v,x)}):null},t.Drawing.arrow_v0=function(){e.r8j(),this.name="arrow",this.dimension=[11,11],e.h8L(24),this.points=[["M",3,0,"L",7,e.A1W("0",64),"L",7,5,"L",10,5,"L",5,10,"L",0,e.A1W("5",0,e.h8L(44)),"L",3,5,"L",3,0]]},t.inheritsFrom(t.Drawing.arrow_v0,t.Drawing.shape),t.Drawing.xcross=function(){this.name="xcross",this.dimension=[7,7],e.r8j(),e.h8L(24),this.points=[["M",1,0,"L",3,2,"L",5,e.b00("0",64),"L",6,1,"L",4,3,"L",6,5,"L",5,6,"L",3,4,"L",1,6,"L",0,5,"L",2,3,"L",0,1,"L",1,0]]},t.inheritsFrom(t.Drawing.xcross,t.Drawing.shape),t.Drawing.check=function(){this.name="check",e.h8L(6),this.dimension=[e.b00("8",0),9],e.L_A(6),this.points=[["M",1,5,"L",0,6,"L",2,8,"L",7,1,"L",6,0,"L",e.b00("2",0),6,"L",1,e.b00("5",1,e.L_A(18))]],e.q8H()},t.inheritsFrom(t.Drawing.check,t.Drawing.shape),t.Drawing.star=function(){this.name="star",this.dimension=[12,12],e.L_A(2),this.points=[["M",0,4,"L",4,4,"L",5.5,0,"L",7,4,"L",11,4,"L",8,e.b00("7",2),"L",9,11,"L",5.5,9,"L",2,e.b00("11",2),"L",3,7,"L",0,4]],e.r8j()},t.inheritsFrom(t.Drawing.star,t.Drawing.shape),t.Drawing.heart=function(){this.name="heart",this.dimension=[23,20],e.h8L(6),this.points=[["M",11,3,"B",11,2.4,10,0,6,0,"B",0,0,0,7.5,0,7.5,"B",0,11,4,15.4,11,19,"B",18,e.b00("15.4",0),22,e.A1W("11",9,e.h8L(2)),22,7.5,"B",22,7.5,22,0,e.A1W("16",64,e.h8L(31)),0,"B",13,0,11,2.4,11,3]]},t.inheritsFrom(t.Drawing.heart,t.Drawing.shape),t.Drawing.focusarrow=function(){var v;v="f",v+="ocu",e.r8j(),v+="sarrow",this.name=v,this.dimension=[7,5],e.h8L(24),this.points=[["M",0,0,"L",2,2,"L",0,4,"L",0,0],["M",e.A1W("6",96),0,"L",4,2,"L",6,4,"L",e.A1W("6",2,e.L_A(2)),0]]},t.inheritsFrom(t.Drawing.focusarrow,t.Drawing.shape),t.Drawing.crossline=function(){e.q8H(),this.name="crossline"},t.inheritsFrom(t.Drawing.crossline,t.Drawing.horizontal),t.extend(t.Drawing.crossline.prototype,{measure:function(){},accidentalClick:function(v,x){return!1},adjust:function(){var v;e.q8H(),v=this.stx.panels[this.panelName],v&&(this.setPoint(0,this.d0,this.v0,v.chart),this.p1=t.clone(this.p0))},intersected:function(v,x,A){var T,_;return T="m",T+="o",T+="v",T+="e",!this.p0||!this.p1||(this.p1[0]+=1,_=this.lineIntersection(v,x,A,"line"),this.p1=t.clone(this.p0),!_&&(this.p1[1]+=1,_=this.lineIntersection(v,x,A,"line"),this.p1=t.clone(this.p0),!_))?null:(this.highlighted=!0,this.pointIntersection(this.p0[0],this.p0[1],A)&&(this.highlighted="p0"),{action:T,p0:t.clone(this.p0),p1:t.clone(this.p1),tick:v,value:this.valueOnDrawingAxis(v,x)})},render:function(v){e.q8H();var x,A,T,_,L,M,F,P,E,O,I,B,N,R;if(x="verti",x+="cal",A=this.stx,T=A.panels[this.panelName],_=A.getYAxisByField(T,this.field),!(!T||this.field&&!_)){if(_=_||T.yAxis,L=A.pixelFromTick(this.p0["0"-0],T.chart),M=this.pixelFromValue(T,this.p0[0],this.p0[1],_),F=this.getLineColor(),P={pattern:this.pattern,lineWidth:this.lineWidth},e.L_A(1),A.plotLine(L,e.A1W(100,L),M,M,F,"horizontal",v,T,P),e.h8L(1),A.plotLine(L,L,M,e.A1W(100,M),F,x,v,T,P),this.axisLabel&&!this.repositioner&&(A.endClip(),e.h8L(2),E=this.p0[e.A1W("1",0)],T.chart.transformFunc&&(E=T.chart.transformFunc(A,T.chart,E)),_.priceFormatter?E=_.priceFormatter(A,T,E):E=A.formatYAxisPrice(E,T,null,_),A.createYAxisLabel(T,E,M,F,null,null,_),A.startClip(T.name),this.p0[0]>=0&&!A.chart.xAxis.noDraw)){if(O=A.dateFromTick(this.p0[0],T.chart,!0),t.ChartEngine.isDailyInterval(A.layout.interval))e.L_A(2),O.setHours(0,0,0,e.b00("0",0));else{e.L_A(54);var q=e.b00(1,33,1018,15);B=O.getSeconds()*q+O.getMilliseconds(),a.Date&&A.displayZone&&(I=new a.Date(O.getTime(),A.displayZone),O=new Date(I.getFullYear(),I.getMonth(),I.getDate(),I.getHours(),I.getMinutes()),O=new Date(O.getTime()+B))}N=t.mmddhhmm(t.yyyymmddhhmm(O)),T.chart.xAxis.formatter?N=T.chart.xAxis.formatter(O,this.name,null,null,N):this.stx.internationalizer&&(N=t.displayableDate(A,A.chart,O)),A.endClip(),A.createXAxisLabel({panel:T,txt:N,x:L,backgroundColor:F,color:null,pointed:!0,padding:2}),A.startClip(T.name)}this.highlighted&&(R=this.highlighted=="p0",this.littleCircle(v,L,M,R))}}},!0),t.Drawing.speedarc=function(){this.name="speedarc",this.printLevels=!0},t.inheritsFrom(t.Drawing.speedarc,t.Drawing.segment),t.extend(t.Drawing.speedarc.prototype,{defaultOpacity:.25,configs:["color","fillColor",d,"pattern"],copyConfig:function(){var v;v=this.stx.currentVectorParameters,this.color=v.currentColor,this.fillColor=v.fillColor,this.lineWidth=v.lineWidth,this.pattern=v.pattern},intersected:function(v,x,A){var T,_,L,M,F,P,E,O,I;if(T="m",T+="o",T+="v",T+="e",!this.p0||!this.p1)return null;_={0:this.p0,1:this.p1};for(var B in _)if(this.pointIntersection(_[B][0],_[B][1],A))return e.L_A(1),this.highlighted=e.b00(B,"p"),{action:"drag",point:"p"+B};return L=this.valueOnDrawingAxis(v,x),M=this.lineIntersection(v,x,A,this.name),M?(F="m",F+="o",F+="ve",this.highlighted=!0,{action:F,p0:t.clone(this.p0),p1:t.clone(this.p1),tick:v,value:L}):(P=this.p1[0]-(this.p0[0]-this.p1[0]),E=this.p0[0],O=this.p1[1],I=this.p0[1],v>Math.max(P,E)||v<Math.min(P,E)||L>Math.max(I,O)||L<Math.min(I,O)?null:(this.highlighted=!0,{action:T,p0:t.clone(this.p0),p1:t.clone(this.p1),tick:v,value:L}))},render:function(v){var x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q;if(x=this.stx,A=x.panels[this.panelName],T=x.getYAxisByField(A,this.field),!(!A||this.field&&!T)&&(T=T||A.yAxis,!!this.p1)){_=x.pixelFromTick(this.p0[0],A.chart),L=x.pixelFromTick(this.p1["0"*1],A.chart),M=this.pixelFromValue(A,this.p0[0],this.p0[1],T),F=this.pixelFromValue(A,this.p1[0],this.p1[1],T),e.L_A(63),P=e.A1W(M,F),e.L_A(64),E=Math.abs(e.b00(L,F,_,M)),e.r8j(),O=this.getLineColor(),v.strokeStyle=O,I=this.fillColor,(I=="auto"||t.isTransparent(I))&&(I=x.defaultColor),v.fillStyle=I,v.setLineDash&&(v.setLineDash(t.borderPatternToArray(this.lineWidth,this.pattern)),e.L_A(24),v.lineDashOffset=e.b00("0",64)),x.canvasFont("stx_yaxis",v);for(var j=1;j<("3"|2);j++){e.L_A(5);var Z=e.A1W(0,7,12,4);e.L_A(1);var ee=e.b00(7,25);e.h8L(27);var $=e.b00(20,18);e.h8L(1);var ie=e.A1W(3,0);B=Math.abs(this.p1[Z]-this.p0["1">>ee])*Math.sqrt($)*j/ie,e.L_A(72);var te=e.A1W(1,9,4,8,105);e.L_A(73);var re=e.b00(0,17,12,1,4);e.h8L(74);var H=e.b00(6,1,3,3,0);e.h8L(75);var U=e.b00(9,187,20,6,0);e.L_A(76);var G=e.A1W(17,15,14,19);N=this.p1[te]+B*(P?re:H)*(T.flipped?U:G),R=this.pixelFromValue(A,this.p0["0"-0],N,T),v.save(),v.beginPath(),e.h8L(10),v.scale(e.A1W(1,E),1),e.L_A(18),v.arc(e.b00(L,E),F,Math.abs(R-F),0,Math.PI,!P),v.globalAlpha=this.highlighted?1:this.defaultOpacity,this.pattern!="none"&&v.stroke(),v.globalAlpha=.1,v.fill(),v.restore(),v.globalAlpha=1,this.printLevels&&(q="c",q+="ente",q+="r",v.fillStyle=O,v.textAlign=q,e.L_A(1),Y=e.b00("/3",j),v.fillText(Y,L,Math.round(R-5)),v.fillStyle=I)}v.textAlign="left",z={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},x.plotLine(_,L,M,F,O,"segment",v,A,z),v.setLineDash&&v.setLineDash([]),this.highlighted&&(V="p",V+="0",K=this.highlighted==V,Q=this.highlighted=="p1",this.littleCircle(v,_,M,K),this.littleCircle(v,L,F,Q))}},reconstruct:function(v,x){this.stx=v,this.color=x.col,this.fillColor=x.fc,this.panelName=x.pnl,this.pattern=x.ptrn,this.lineWidth=x.lw,this.d0=x.d0,this.d1=x.d1,this.tzo0=x.tzo0,this.tzo1=x.tzo1,this.v0=x.v0,this.v1=x.v1,this.field=x.fld,this.adjust()},serialize:function(){return e.r8j(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field}}},!0),t.Drawing.speedline=function(){this.name="speedline",e.r8j(),this.printLevels=!0},t.inheritsFrom(t.Drawing.speedline,t.Drawing.speedarc),t.extend(t.Drawing.speedline.prototype,{intersected:function(v,x,A){var T,_,L,M;if(T=this.p0,_=this.p1,!T||!_)return null;L={0:T,1:_};for(var F in L)if(this.pointIntersection(L[F][0],L[F]["1">>64],A))return e.L_A(1),this.highlighted=e.A1W(F,"p"),{action:"drag",point:"p"+F};M=this.rays;for(var P=0;P<M.length;P++)if(this.lineIntersection(v,x,A,"ray",M[P][0],M[P][1],!0))return this.highlighted=!0,{action:"move",p0:t.clone(T),p1:t.clone(_),tick:v,value:this.valueOnDrawingAxis(v,x)};return null},render:function(v){var x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q,j,Z,ee,$,ie,te,re,H,U;if(x="l",x+="ef",x+="t",A="3",A+="/",A+="2",T=this.stx,_=T.panels[this.panelName],L=T.getYAxisByField(_,this.field),!(!_||this.field&&!L)&&this.p1){M=T.pixelFromTick(this.p0[0],_.chart),F=T.pixelFromTick(this.p1[0],_.chart),P=this.pixelFromValue(_,this.p0[0],this.p0[1],L),E=this.pixelFromValue(_,this.p1[0],this.p1[1],L),T.canvasFont("stx_yaxis",v),O=this.getLineColor(),v.strokeStyle=O,I=this.fillColor,(I=="auto"||t.isTransparent(I))&&(I=T.defaultColor),v.fillStyle=I,B={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},q=["1","2/3","1/3",A,"3"],e.h8L(10),Y=[1,e.b00(2,3),e.b00(1,"3",e.L_A(77)),e.b00(3,2,e.L_A(10)),3],z=[],this.rays=[];for(var G=0;G<Y.length;G++)V=Y[G],!(V>1&&!this.extension)&&(K=this.pixelFromValue(_,this.p0[0],this.p0[1]-(this.p0[1]-this.p1[1])*V,L),V>"1">>32?(Q=t.xIntersection({x0:M,x1:F,y0:P,y1:K},E),z.push(Q)):(Q=t.xIntersection({x0:F,x1:F,y0:P,y1:E},K),z.push(K)),j=V>1?Q:F,Z=V>"1"-0?E:K,this.confineToGrid||(j=_.left,F>M&&(j+=_.width),e.h8L(69),Z=e.b00(F,M,K,P,j,P,M)),this.printLevels&&(V!=1||this.extension)&&(v.fillStyle=O,ee=0,$=0,P>E?($=-5,v.textBaseline="bottom"):(ie="to",ie+="p",$=5,v.textBaseline=ie),M>F?(te="r",te+="ight",ee=5,v.textAlign=te):(e.L_A(2),ee=-e.b00("5",5),v.textAlign="left"),V>1?v.fillText(q[G],Q+(this.confineToGrid?0:ee),E):v.fillText(q[G],F,K+(this.confineToGrid?0:$)),v.fillStyle=I),T.plotLine(M,j,P,Z,O,"segment",v,_,B),V==1&&(N=j,R=Z),this.rays.push([[M,P],[j,Z]]),v.globalAlpha=.1,v.beginPath(),v.moveTo(j,Z),v.lineTo(M,P),v.lineTo(N,R),v.fill(),v.globalAlpha=1);e.r8j(),v.textAlign=x,v.textBaseline="middle",this.confineToGrid&&(e.h8L(6),v.globalAlpha=e.A1W("0.3",0),v.beginPath(),e.L_A(6),v.strokeRect(M,P,e.b00(F,M),e.b00(E,P)),v.moveTo(M,z[1]),v.lineTo(F,z[1]),v.moveTo(M,z["2">>0]),v.lineTo(F,z[2]),this.extension&&(v.moveTo(z[3],P),v.lineTo(z[3],E),v.moveTo(z[4],P),v.lineTo(z[4],E)),v.stroke(),v.globalAlpha=1),this.highlighted&&(re="p",re+="0",H=this.highlighted==re,U=this.highlighted=="p1",this.littleCircle(v,M,P,H),this.littleCircle(v,F,E,U))}}},!0),t.Drawing.gannfan=function(){e.q8H();var v;v="ga",v+="n",v+="nfa",v+="n",this.name=v,this.printLevels=!0},t.inheritsFrom(t.Drawing.gannfan,t.Drawing.speedline),t.extend(t.Drawing.gannfan.prototype,{render:function(v){var x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q,j,Z,ee,$,ie,te,re,H;if(x="mi",x+="ddl",x+="e",A="l",A+="e",A+="ft",T="a",e.r8j(),T+="u",T+="t",T+="o",_=this.stx,L=_.panels[this.panelName],M=_.getYAxisByField(L,this.field),!(!L||this.field&&!M)&&this.p1){F=_.pixelFromTick(this.p0[0],L.chart),P=_.pixelFromTick(this.p1["0"<<32],L.chart),E=this.pixelFromValue(L,this.p0[0],this.p0[1],M),O=this.pixelFromValue(L,this.p1["0"|0],this.p1["1"-0],M),_.canvasFont("stx_yaxis",v),I=this.getLineColor(),v.strokeStyle=I,B=this.fillColor,(B==T||t.isTransparent(B))&&(B=_.defaultColor),v.fillStyle=B,N={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},e.h8L(10),Y=[1,2,3,4,8,e.A1W(1,2),e.b00(1,3),e.b00(1,4),e.A1W(1,8)],this.rays=[];for(var U=0;U<Y.length;U++)z=Y[U],e.h8L(78),V=e.b00(F,z,P,F),e.L_A(79),K=e.b00(O,z,E,E),Q=L.left,P>F&&(Q+=L.width),e.L_A(69),j=e.b00(P,F,K,E,Q,E,F),this.printLevels&&(v.fillStyle=I,Z=0,ee=0,E>O?(ee=5,v.textBaseline="top"):(ee=-5,v.textBaseline="bottom"),F>P?(Z=5,v.textAlign="left"):($="r",$+="ig",$+="h",$+="t",Z=-5,v.textAlign=$),z>1?(ie="x",ie+="1",e.L_A(1),v.fillText(e.b00(ie,z),e.b00(Z,V),O)):(e.L_A(47),v.fillText(e.b00("1x",1,z),P,e.b00(ee,K,e.L_A(1)))),v.fillStyle=B),_.plotLine(F,Q,E,j,I,"segment",v,L,N),this.rays.push([[F,E],[Q,j]]),z==1&&(R=Q,q=j),v.globalAlpha=.1,v.beginPath(),v.moveTo(Q,j),v.lineTo(F,E),v.lineTo(R,q),v.fill(),v.globalAlpha=1;v.textAlign=A,v.textBaseline=x,this.highlighted&&(te="p",te+="0",re=this.highlighted==te,H=this.highlighted=="p1",this.littleCircle(v,F,E,re),this.littleCircle(v,P,O,H))}}},!0),t.Drawing.timecycle=function(){var v;v="time",v+="cy",v+="cle",e.r8j(),this.name=v,this.printLevels=!0},t.inheritsFrom(t.Drawing.timecycle,t.Drawing.speedarc),t.extend(t.Drawing.timecycle.prototype,{intersected:function(v,x,A){var T,_,L,M,F,P;if(T="se",T+="gmen",T+="t",_=this.p0,L=this.p1,M=this.stx.panels[this.panelName],!_||!L||!M)return null;F={0:_,1:L};for(var E in F)if(this.pointIntersection(F[E][0],F[E][1],A))return e.L_A(1),this.highlighted=e.A1W(E,"p"),{action:"drag",point:"p"+E};return P=this.lineIntersection(v,x,A,T),P||A.x0<=this.p0[0]&&A.x1>=_[0]?(this.highlighted=!0,{action:"move",p0:t.clone(_),p1:t.clone(L),tick:v,value:this.valueOnDrawingAxis(v,x)}):null},render:function(v){var x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q,j,Z,ee,$,ie;if(x="s",x+="egme",x+="nt",A="stx",A+="_",A+="yax",A+="is",T=this.stx,_=T.panels[this.panelName],L=T.getYAxisByField(_,this.field),!(!_||this.field&&!L)&&(L=L||_.yAxis,!!this.p1)){e.r8j(),M=T.pixelFromTick(this.p0[0],_.chart),F=T.pixelFromTick(this.p1[0],_.chart),P=this.pixelFromValue(_,this.p0[0],this.p0["1"<<64],L),E=this.pixelFromValue(_,this.p1[0],this.p1["1"^0],L),O=0,v.textBaseline="middle",T.canvasFont(A,v),I=20,B=this.p1[0]-this.p0[0],v.textAlign="center",N=M,R=L.top,q=L.bottom,Y=this.getLineColor(),z=this.fillColor,(z=="auto"||t.isTransparent(z))&&(z=T.defaultColor),this.printLevels&&(e.L_A(6),q-=e.A1W(I,7)),V={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},K=[],v.save(),v.fillStyle=z,v.globalAlpha=.05;do{if(N=T.pixelFromTick(this.p0[0]+O*B,_.chart),O++,M<F&&N>_.left+_.width)break;if(M>F&&N<_.left)break;if(N<_.left||N>_.left+_.width)continue;v.beginPath(),v.moveTo(M,R),v.lineTo(N,R),v.lineTo(N,q),v.lineTo(M,q),v.fill(),K.push({c:O,x:N})}while(B);v.globalAlpha=1,Q=0;for(var te="0"|0;te<K.length;te++)if(T.plotLine(K[te].x,K[te].x,0,q,Y,"segment",v,_,V),this.printLevels){v.fillStyle=Y,e.h8L(8);var re=e.A1W(7,14,10);j=T.chart.context.measureText(K[te].c).width+re,j<T.layout.candleWidth+Q?(v.fillText(K[te].c,K[te].x,q+7),e.L_A(24),Q=e.b00("0",0)):Q+=T.layout.candleWidth}v.restore(),v.textAlign="left",T.plotLine(M,F,P,E,Y,x,v,_,V),this.highlighted?(Z="p",Z+="1",ee=this.highlighted=="p0",$=this.highlighted==Z,this.littleCircle(v,M,P,ee),this.littleCircle(v,F,E,$)):(ie=this.valueFromPixel(_.height/2,_,L),this.setPoint(0,this.p0[0],ie,_.chart),this.setPoint(1,this.p1[0],ie,_.chart))}}},!0),t.Drawing.regression=function(){var v;v="r",v+="egr",v+="essi",v+="on",this.name=v},t.inheritsFrom(t.Drawing.regression,t.Drawing.segment),t.extend(t.Drawing.regression.prototype,{configs:["color","lineWidth","pattern","active1","color1",y,"pattern1","active2",p,"lineWidth2","pattern2","active3","color3","lineWidth3","pattern3"],copyConfig:function(v){var x;t.Drawing.copyConfig(this,v),x=this.stx.currentVectorParameters,this.active1=!!x.active1,this.active2=!!x.active2,this.active3=!!x.active3,this.color1=x.color1||"auto",this.color2=x.color2||"auto",this.color3=x.color3||"auto",this.lineWidth1=x.lineWidth1,this.lineWidth2=x.lineWidth2,this.lineWidth3=x.lineWidth3,this.pattern1=x.pattern1,this.pattern2=x.pattern2,this.pattern3=x.pattern3},$controls:['cq-cvp-controller[cq-cvp-header="1"]',c,'cq-cvp-controller[cq-cvp-header="3"]'],click:function(v,x,A){var T,_;if(!(x<0))return this.copyConfig(),T=this.stx,_=T.panels[this.panelName],this.penDown?(this.accidentalClick(x,A)||(this.setPoint(1,x,A,_.chart),this.penDown=!1),!0):(this.setPoint(0,x,A,_.chart),this.isAllowed(T,this.field)?(this.penDown=!0,!1):(T.undo(),!0))},getYValue:function(v){var x,A,T,_,L,M,F,P,E,O;if(x="Clo",x+="s",x+="e",A=this.stx,T=A.chart.dataSet[v],_=A.chart.dataSet[v],!T||(L=A.panels[this.panelName],M=A.getYAxisByField(L,this.field)||L.yAxis,A.charts[L.name]&&L.chart.transformFunc&&M==L.yAxis&&(_=T.transform),!_))return null;if(F=null,P=null,E=A.defaultPlotField||x,this.field){if(O="o",O+="b",O+="jec",O+="t",P=t.existsInObjectChain(_,this.field),!P)return null;F=P=P.obj[P.member],T!=_&&(F=t.existsInObjectChain(T,this.field),F=F.obj[F.member]),typeof P==O&&(P=P[E],F=F[E])}else P=_[E],F=T[E];return{transformed:P,untransformed:F}},render:function(v){var x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q,j,Z,ee,$,ie,te,re,H,U,G,ae,ne,oe,le,he,ue,ce,de,Ce,pe,xe;if(x="s",x+="egme",x+="n",x+="t",A="s",A+="egment",T="se",T+="gm",T+="ent",_=this.stx,L=_.panels[this.panelName],M=_.getYAxisByField(L,this.field),!(!L||this.field&&!M)&&this.p1&&!(this.p0[0]<0||this.p1[0]<0)&&(F=_.pixelFromTick(this.p0[0],L.chart),P=_.pixelFromTick(this.p1["0"^0],L.chart),!(F<L.left&&P<L.left)&&!(F>L.right&&P>L.right))){E=[],O=[],I=0,B=0,N=0,R=0,q=Math.min(this.p1[0],this.p0[0]),e.L_A(23);var Te=e.A1W(51,5,10);Y=Math.max(this.p1[0],this.p0[0])+Te,e.h8L(6),z=e.b00(Y,q);for(var be=q;be<Y;be++)V=this.getYValue(be),V&&(E.push(V.transformed),O.push(V.untransformed));for(K=E.length,e.h8L(80),Q=e.A1W(K,1,0,"2",K),j=Math.pow(Q,2),e.h8L(81),Z=e.b00(K,"3",Q,2,1),be="0"*1;be<K;be++)N+=K*E[be]-I,I+=E[be],R+=K*O[be]-B,B+=O[be];if(e.L_A(82),ee=e.A1W(Z,K,j,Q,I,N,K),e.L_A(83),$=e.b00(ee,Q,K,I),e.h8L(82),ie=e.b00(Z,K,j,Q,B,R,K),e.L_A(83),te=e.A1W(ee,Q,K,B),this.p0[0]<this.p1[0]?(re=$,e.h8L(84),H=e.A1W($,z,ee),this.p0[1]=te,e.h8L(84),this.p1[1]=e.b00(te,z,ie)):(e.h8L(84),re=e.A1W($,z,ee),H=$,e.L_A(84),this.p0[1]=e.A1W(te,z,ie),this.p1[1]=te),U=_.pixelFromTransformedValue(re,L,M),G=_.pixelFromTransformedValue(H,L,M),ae=this.getLineColor(),ne={pattern:this.pattern,lineWidth:this.lineWidth},_.plotLine(F,P,U,G,ae,T,v,L,ne),e.L_A(6),_.plotLine(F,F,e.A1W(U,20),e.b00("20",U,e.h8L(85)),ae,A,v,L,ne),e.L_A(86),_.plotLine(P,P,e.b00(0,"20",G),e.b00(20,G,e.L_A(1)),ae,x,v,L,ne),this.active1||this.active2||this.active3){for(e.h8L(10),oe=e.b00(I,K),le=0,be=0;be<K;be++)le+=Math.pow(E[be]-oe,"2">>32);e.L_A(10),he=Math.sqrt(e.b00(le,K)),ue={context:v,panel:L,points:{0:{x:F,v:re},1:{x:P,v:H}},stddev:he,yAxis:M},this.lines={},this.active1&&(this.renderStddev("1","p",ue),this.renderStddev("1","n",ue)),this.active2&&(this.renderStddev("2","p",ue),this.renderStddev("2","n",ue)),this.active3&&(this.renderStddev("3","p",ue),this.renderStddev("3","n",ue))}if(!this.highlighted)this.pixelX=[F,P],this.pixelY=[U,G];else{ce=this.highlighted=="p0",de=this.highlighted=="p1",Ce=136016195,pe=-278688641,xe=2;for(var _e=1;e.i7q(_e.toString(),_e.toString().length,82418)!==Ce;_e++)this.littleCircle(v,F,U,ce),xe+=2;e.i7q(xe.toString(),xe.toString().length,5316)!==pe&&this.littleCircle(v,F,U,ce),this.littleCircle(v,F,U,ce),this.littleCircle(v,P,G,de)}}},renderStddev:function(v,x,A){var T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q,j,Z,ee;T="co",T+="lor",e.L_A(87),_=e.A1W(x,v,"stddev"),e.L_A(1),L=e.A1W(v,T),e.L_A(1),M=e.A1W(v,"pattern"),e.h8L(1),F=e.b00(v,"lineWidth"),P=A.points,E=P[0].v,O=P[1].v,I=A.stddev,B=x==="n"?v*-1:v*1,N=this.stx,R=A.panel,q=A.yAxis,Y={name:_,color:this.getLineColor(this[L]),type:"segment",y0:N.pixelFromTransformedValue(E+I*B,R,q),y1:N.pixelFromTransformedValue(O+I*B,R,q),params:{pattern:this[M],lineWidth:this[F]}},this.lines&&(this.lines[_]=Y),z=A.context,V=P["0"*1].x,K=P[1].x,N.plotLine(V,K,Y.y0,Y.y1,Y.color,Y.type,z,R,Y.params),N.plotLine(V,V,Y.y0-10,Y.y0+10,Y.color,Y.type,z,R,Y.params),N.plotLine(K,K,Y.y1-("10"<<0),Y.y1+10,Y.color,Y.type,z,R,Y.params),e.h8L(1),Q=e.b00("",v),e.h8L(27);var $=e.b00(10,5);j=Math.max(V,K)+$,Z=V<K?Y.y1:Y.y0,z.fillStyle=Y.color,z.save(),z.textBaseline="middle",z.fillText(Q,j,Z),z.restore(),A.formatPrice&&this.axisLabel&&!this.highlighted&&!this.penDown&&(V>=R.chart.left&&V<=R.chart.right||K>=R.chart.left&&K<=R.chart.right)&&(e.L_A(19),ee=e.b00(V<K?O:E,B,I),N.endClip(),N.createYAxisLabel(R,A.formatPrice(ee,q),Z,Y.color,null,z,q),N.startClip(R.name))},intersected:function(v,x,A){var T,_,L,M,F,P,E;if(!this.pixelX||!this.pixelY)return null;if(T=this.repositionIntersection(v,x),T)return T;_={0:this.pixelX,1:this.pixelY};for(var O=0;O<2;O++)if(this.pointIntersection(_[0][O],_[1][O],A,!0))return e.L_A(1),this.highlighted=e.b00(O,"p"),{action:"drag",point:"p"+O};if(L=this,M=this.pixelX[0],e.h8L(6),F=this.pixelX[e.b00("1",0)],P=function(B){var N,R;return N=[M,B.y0],R=[F,B.y1],L.lineIntersection(v,x,A,L.name,N,R,!0)},E=P({y0:this.pixelY[0],y1:this.pixelY[1]}),!E&&this.lines){for(var I in this.lines)if(P(this.lines[I])){E=!0;break}}return E?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:v,value:this.valueOnDrawingAxis(v,x)}):null},repositionIntersection:function(v,x){return!this.p0||!this.p1?!1:this==this.stx.repositioningDrawing&&this.highlighted?this.highlighted===!0?{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:v,value:this.valueOnDrawingAxis(v,x)}:{action:"drag",point:this.highlighted}:!1},lineIntersection:function(v,x,A,T,_,L,M){var F,P;return M?(_||(_=this.p0),L||(L=this.p1),!(_&&L)||(this.stx,A.cx0===void 0)?!1:(P={x0:_["0"^0],x1:L[0],y0:_[1],y1:L[1]},t.boxIntersects(A.cx0,A.cy0,A.cx1,A.cy1,P.x0,P.y0,P.x1,P.y1))):(F=" line",F+="Intersection must accept p0 and p1 in pixels.  Please verify and set isPixels=true.",e.h8L(1),console.log(e.A1W(F,T)),!1)},boxIntersection:function(v,x,A){return!(A.cx0>Math.max(this.pixelX[0],this.pixelX["1"|0])||A.cx1<Math.min(this.pixelX[0],this.pixelX["1">>64])||!this.stx.repositioningDrawing&&(A.cy1<this.pixelY[0]||A.cy0>this.pixelY[1]))},reconstruct:function(v,x){this.stx=v,this.color=x.col,this.color1=x.col1,this.color2=x.col2,this.color3=x.col3,this.active1=x.dev1,this.active2=x.dev2,this.active3=x.dev3,this.panelName=x.pnl,this.pattern=x.ptrn,this.pattern1=x.ptrn1,this.pattern2=x.ptrn2,this.pattern3=x.ptrn3,this.lineWidth=x.lw,this.lineWidth1=x.lw1,this.lineWidth2=x.lw2,this.lineWidth3=x.lw3,this.d0=x.d0,this.d1=x.d1,this.tzo0=x.tzo0,this.tzo1=x.tzo1,this.field=x.fld,this.adjust()},serialize:function(){return e.q8H(),{name:this.name,pnl:this.panelName,dev1:this.active1,dev2:this.active2,dev3:this.active3,col:this.color,col1:this.color1,col2:this.color2,col3:this.color3,ptrn:this.pattern,ptrn1:this.pattern1,ptrn2:this.pattern2,ptrn3:this.pattern3,lw:this.lineWidth,lw1:this.lineWidth1,lw2:this.lineWidth2,lw3:this.lineWidth3,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,fld:this.field}}},!0),t.Drawing.trendline=function(){this.name="trendline"},t.inheritsFrom(t.Drawing.trendline,t.Drawing.segment),t.Drawing.trendline.prototype.configs=["color","fillColor",u,"pattern","font"],t.Drawing.trendline.prototype.measure=function(){e.r8j()},t.Drawing.trendline.prototype.reconstruct=function(v,x){t.Drawing.segment.prototype.reconstruct.call(this,v,x),e.q8H(),this.callout=new t.Drawing.callout,this.callout.reconstruct(v,x.callout)},t.Drawing.trendline.prototype.serialize=function(){var v;return v=t.Drawing.segment.prototype.serialize.call(this),v.callout=this.callout.serialize(),v},t.Drawing.trendline.prototype.render=function(v){var x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q,j,Z,ee,$,ie;if(x="%)",x+=" ",A=" ",A+="(",T=this.stx,_=T.panels[this.panelName],L=T.getYAxisByField(_,this.field),!(!_||this.field&&!L)&&(t.Drawing.segment.prototype.render.call(this,v),this.callout||(this.callout=new t.Drawing.callout,M=t.Drawing.segment.prototype.serialize.call(this),this.callout.reconstruct(T,M)),this.callout.p0=t.clone(this.p0),F=T.pixelFromTick(this.p0[0],_.chart),P=T.pixelFromTick(this.p1[0],_.chart),E=this.pixelFromValue(_,this.p0[0],this.p0["1"^0],L),O=this.pixelFromValue(_,this.p1[0],this.p1[1],L),!(!isFinite(E)||!isFinite(O)))){e.h8L(3),I=e.A1W(P,2,F),e.L_A(7),B=e.A1W("2",O,E),this.fontSize=t.stripPX(this.font&&this.font.size||13),e.h8L(6),e.A1W(6504,11),e.h8L(66);var te=e.A1W(664,1,3318);e.L_A(6);var re=e.A1W(61,11);N=this.callout.w*1.2+(this.callout.stemEntry[0]==(te!=364.55?"c":"208.54"-0)?0:re),R=Math.sqrt(Math.pow(P-F,2)+Math.pow(O-E,2)),e.h8L(88);var H=e.A1W(14,0,10,7,4);e.L_A(6);var U=e.b00(15,14);e.h8L(1);var G=e.b00(6,58);e.h8L(89);var ae=e.A1W(2,11,1,10);q=N/(R||N)*(this.p1[H]<this.p0[U]?"1">>G:ae),e.L_A(90),Y=e.A1W(B,I,O,q),e.L_A(36),z=e.b00(P,I,B,q),this.callout.p0[0]=T.tickFromPixel(Y,_.chart),e.L_A(2),this.callout.p0[e.A1W("1",0)]=this.valueFromPixel(z,_,L),this.callout.v0=this.callout.p0[1],this.callout.p1=t.clone(this.p0),this.callout.stx=T,this.callout.fillColor=this.fillColor||this.callout.fillColor,this.callout.borderColor=this.color,this.callout.font=this.font||this.callout.font,this.callout.noHandles=!0,e.h8L(6);var ne=e.A1W(14,13);e.L_A(27);var oe=e.b00(2,1);V=this.p1[ne]-this.p0[oe],e.h8L(91);var le=e.b00(0,63,14,2,18);e.L_A(59);var he=e.A1W(4,32,9,20);this.callout.text=""+Number(V).toFixed(le)+(this.p0[he]===0?"":A+Number(100*V/this.p0[1]).toFixed(2)+x)+Math.abs(this.p1[0]-this.p0[0])+" Bars",K=Math.floor((this.p0[0]+this.p1[0])/2),Math.abs(this.p0[0]-this.p1[0])>("1"|1)&&Math.abs(this.p0[0]-this.p1[0])<20?(j=T.pixelFromTick(K,_.chart),e.L_A(92),Z=e.b00(E,P,j,E,F,F,O),Q=this.valueFromPixel(Z,_,L)||B):Q=this.valueFromPixel(B,_,L),this.callout.stem={t:K,v:Q},this.callout.renderText(),this.callout.render(v),this.highlighted&&(ee="p",ee+="0",$=this.highlighted==ee,ie=this.highlighted=="p1",this.littleCircle(v,F,E,$),this.littleCircle(v,P,O,ie))}},t.Drawing.trendline.prototype.lineIntersection=function(v,x,A,T){return e.r8j(),t.Drawing.BaseTwoPoint.prototype.lineIntersection.call(this,v,x,A,"segment")},t.Drawing.trendline.prototype.intersected=function(v,x,A){var T,_;return!this.p0||!this.p1?null:(T=this.callout.intersected(v,x,A),_=t.Drawing.segment.prototype.intersected.call(this,v,x,A),this.callout.highlighted=!!(T||_),e.q8H(),_||(T?{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:v,value:this.valueOnDrawingAxis(v,x)}:null))},t.Drawing.average=function(){var v,x,A;v=94439336,x=-1457341255,A=2;for(var T=1;e.i7q(T.toString(),T.toString().length,41189)!==v;T++)this.name="",A+=2;e.i7q(A.toString(),A.toString().length,"11108"|0)!==x&&(this.name=""),this.name="average"},t.inheritsFrom(t.Drawing.average,t.Drawing.regression),t.extend(t.Drawing.average.prototype,{configs:t.Drawing.regression.prototype.configs.concat("axisLabel"),measure:function(){e.q8H();var v,x,A,T,_,L,M,F,P,E,O,I;if(v=this.stx,this.p0&&this.p1&&(x=",",x+=" ",v.setMeasure(0,!1,this.p0[0],this.p1[0],!0,this.name),A=[],T="",this.active1&&A.push("1"),this.active2&&A.push("2"),this.active3&&A.push("3"),A.length&&(T="&ensp;"+A.join(x)+" &sigma;"),_=(v.drawingContainer||document).querySelector(".mMeasure"),L=v.controls.mSticky,M=L&&L.querySelector(".mStickyInterior"),_&&(_.innerHTML+=T),M)){F="C",F+="lose",P=[],P.push(t.capitalize(this.name)),E=-786826099,O=-1467839499,I=2;for(var B=1;e.E3k(B.toString(),B.toString().length,"40489">>0)!==E;B++)P.push(this.field&&v.defaultPlotField&&""),I+=2;e.i7q(I.toString(),I.toString().length,71427)!==O&&P.push(this.field||v.defaultPlotField||""),P.push(this.field||v.defaultPlotField||F),P.push(M.innerHTML+T),M.innerHTML=P.join("<br>")}},render:function(v){var x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q,j,Z;if(x="s",x+="e",x+="gment",A=this.stx,T=A.panels[this.panelName],_=A.getYAxisByField(T,this.field),!T||this.field&&!_||(_=_||T.yAxis,!this.p1)||this.p0[0]<0||this.p1[0]<0||(L=A.pixelFromTick(this.p0[0],T.chart),M=A.pixelFromTick(this.p1[0],T.chart),L<T.left&&M<T.left))return;function ee(ie,te){return te&&te.priceFormatter?ie=te.priceFormatter(A,T,ie):ie=A.formatYAxisPrice(ie,T,null,te),e.q8H(),ie}if(!(L>T.right&&M>T.right)){F=Math.min(this.p1[0],this.p0["0"^0]),e.L_A(8);var $=e.b00(8,9,2);for(P=Math.max(this.p1[0],this.p0[0])+$,E=0,O=[],I=F;I<P;I++)B=this.getYValue(I),B!==null&&(E+=B.transformed,O.push(B));if(N=O.length,!!N){if(e.L_A(10),R=e.A1W(E,N),q=A.pixelFromTransformedValue(R,T,_),Y=this.getLineColor(),e.q8H(),z={pattern:this.pattern,lineWidth:this.lineWidth},A.plotLine(L,M,q,q,Y,"segment",v,T,z),e.h8L(6),A.plotLine(L,L,e.A1W(q,20),e.A1W(20,q,e.L_A(1)),Y,x,v,T,z),e.h8L(6),A.plotLine(M,M,e.A1W(q,20),e.A1W(20,q,e.L_A(1)),Y,"segment",v,T,z),this.axisLabel&&!this.highlighted&&!this.penDown&&(L>=T.chart.left&&L<=T.chart.right||M>=T.chart.left&&M<=T.chart.right)&&(A.endClip(),A.createYAxisLabel(T,ee(R,_),q,Y,null,v,_),A.startClip(T.name)),this.active1||this.active2||this.active3){for(V=0,I=0;I<N;I++)B=O[I],V+=Math.pow(B.transformed-R,2);e.L_A(10),K=Math.sqrt(e.b00(V,N)),Q={context:v,formatPrice:ee,panel:T,points:{0:{x:L,v:R},1:{x:M,v:R}},stddev:K,yAxis:_},this.lines={},this.active1&&(this.renderStddev("1","p",Q),this.renderStddev("1","n",Q)),this.active2&&(this.renderStddev("2","p",Q),this.renderStddev("2","n",Q)),this.active3&&(this.renderStddev("3","p",Q),this.renderStddev("3","n",Q))}this.highlighted?(j=this.highlighted=="p0",Z=this.highlighted=="p1",this.littleCircle(v,L,q,j),this.littleCircle(v,M,q,Z)):(this.pixelX=[L,M],this.pixelY=[q,q])}}},reconstruct:function(v,x){this.axisLabel=x.al,e.r8j(),t.Drawing.regression.prototype.reconstruct.call(this,v,x)},serialize:function(){var v,x,A,T;v=t.Drawing.regression.prototype.serialize.call(this),x=-79172006,A=2066280520,T=2;for(var _=1;e.E3k(_.toString(),_.toString().length,48468)!==x;_++)v.al=this.axisLabel,T+=2;return e.i7q(T.toString(),T.toString().length,"39061">>32)!==A&&(v.al=this.axisLabel),v}},!0),t.Drawing.quadrant=function(){this.name="quadrant"},t.inheritsFrom(t.Drawing.quadrant,t.Drawing.regression),t.extend(t.Drawing.quadrant.prototype,{configs:["color","fillColor","lineWidth","pattern"],copyConfig:function(){var v;v=this.stx.currentVectorParameters,this.color=v.currentColor,e.r8j(),this.fillColor=v.fillColor,this.lineWidth=v.lineWidth,this.pattern=v.pattern},$controls:[],render:function(v){var x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q,j,Z,ee,$,ie,te,re,H,U;if(x="segme",x+="nt",A="segm",A+="e",A+="n",A+="t",T="a",T+="uto",_=this.stx,L=_.panels[this.panelName],M=_.getYAxisByField(L,this.field),!(!L||this.field&&!M)&&this.p1){F=610927891,P=-962751385,E=2;for(var G=1;e.i7q(G.toString(),G.toString().length,42331)!==F;G++)O=_.pixelFromTick(this.p0[3],L.chart),E+=2;if(e.i7q(E.toString(),E.toString().length,83840)!==P&&(O=_.pixelFromTick(this.p0[0],L.chart)),I=_.pixelFromTick(this.p1[0],L.chart),e.r8j(),!(O<L.left&&I<L.left)&&!(O>L.right&&I>L.right)){B=null,N=null;for(var ae=Math.max(0,Math.min(this.p1[0],this.p0[0]));ae<=Math.min(_.chart.dataSet.length-1,Math.max(this.p1[0],this.p0[0]));ae++)R=this.getYValue(ae),R!==null&&((B===null||R.transformed>B)&&(B=R.transformed),(N===null||R.transformed<N)&&(N=R.transformed));if(q=_.pixelFromTransformedValue(B,L,M),e.L_A(93),Y=_.pixelFromTransformedValue(e.A1W(B,N,3,4),L,M),e.L_A(93),z=_.pixelFromTransformedValue(e.b00(B,N,2,3),L,M),e.h8L(3),V=_.pixelFromTransformedValue(e.A1W(N,2,B),L,M),e.h8L(94),K=_.pixelFromTransformedValue(e.A1W(B,N,2,3),L,M),e.L_A(95),Q=_.pixelFromTransformedValue(e.b00(4,"3",N,0,B),L,M),j=_.pixelFromTransformedValue(N,L,M),this.p0[1]=0,this.p1[1]=!1,Z=this.getLineColor(),ee=this.fillColor,(ee==T||t.isTransparent(ee))&&(ee=_.defaultColor),v.fillStyle=ee,$={pattern:this.pattern,lineWidth:this.lineWidth},_.plotLine(O,I,q,q,Z,"segment",v,L,$),_.plotLine(O,I,j,j,Z,"segment",v,L,$),this.name=="quadrant"?(_.plotLine(O,I,Y,Y,Z,"segment",v,L,$),_.plotLine(O,I,Q,Q,Z,"segment",v,L,$)):this.name=="tirone"&&(_.plotLine(O,I,z,z,Z,"segment",v,L,$),_.plotLine(O,I,K,K,Z,"segment",v,L,$)),_.plotLine(O,O,q,j,Z,"segment",v,L,$),_.plotLine(I,I,q,j,Z,A,v,L,$),_.plotLine(O,I,V,V,Z,x,v,L,t.extend($,{opacity:this.name=="tirone"?.2:1})),v.globalAlpha=.1,v.beginPath(),e.h8L(6),v.fillRect(O,q,e.b00(I,O),e.A1W(j,q)),this.name=="quadrant"){ie=1529941222,te=1727274892,re=2;for(var ne="1"|0;e.i7q(ne.toString(),ne.toString().length,60194)!==ie;ne++)e.h8L(10),v.fillRect(O,Y,e.A1W(I,O),e.b00(Q,Y)),re+=2;e.i7q(re.toString(),re.toString().length,13803)!==te&&(e.h8L(6),v.fillRect(O,Y,e.A1W(I,O),e.A1W(Q,Y)))}else this.name=="tirone"&&(e.h8L(6),v.fillRect(O,z,e.b00(I,O),e.A1W(K,z)));v.globalAlpha=1,this.highlighted?(H=this.highlighted=="p0",U=this.highlighted=="p1",this.littleCircle(v,O,V,H),this.littleCircle(v,I,V,U)):(this.pixelX=[O,I],this.pixelY=[q,j,V],this.name==="quadrant"&&this.pixelY.push(Y,Q),this.name==="tirone"&&this.pixelY.push(z,K))}}},intersected:function(v,x,A){var T,_,L,{pixelX:M,pixelY:F}=this;if(!M||!F)return null;if(T=this.repositionIntersection(v,x),T)return T;for(var P=0;P<2;P++)if(this.pointIntersection(M[P],F[2],A,!0))return e.L_A(1),this.highlighted=e.b00(P,"p"),{action:"drag",point:"p"+P};return _=[],M.forEach(E=>{e.q8H(),_.push({p0:[E,F[0]],p1:[E,F[1]]})}),F.forEach(E=>{_.push({p0:[M[0],E],p1:[M[1],E]})}),L=_.some(({p0:E,p1:O})=>(e.q8H(),this.lineIntersection(v,x,A,this.name,E,O,!0))),L?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:v,value:this.valueOnDrawingAxis(v,x)}):(e.r8j(),null)},reconstruct:function(v,x){this.stx=v,this.color=x.col,this.fillColor=x.fc,this.panelName=x.pnl,this.pattern=x.ptrn,this.lineWidth=x.lw,this.d0=x.d0,this.d1=x.d1,this.tzo0=x.tzo0,this.tzo1=x.tzo1,this.field=x.fld,this.adjust()},serialize:function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,fld:this.field}}},!0),t.Drawing.tirone=function(){this.name="tirone"},t.inheritsFrom(t.Drawing.tirone,t.Drawing.quadrant),t.Drawing.volumeprofile=function(){e.r8j(),this.name="volumeprofile"},t.inheritsFrom(t.Drawing.volumeprofile,t.Drawing.regression),t.extend(t.Drawing.volumeprofile.prototype,{configs:[l,"fillColor","lineWidth",o,"parameters"],copyConfig:function(){this.color=this.stx.currentVectorParameters.currentColor,this.fillColor=this.stx.currentVectorParameters.fillColor,this.lineWidth=this.stx.currentVectorParameters.lineWidth,this.pattern=this.stx.currentVectorParameters.pattern,e.r8j(),this.priceBuckets=this.stx.currentVectorParameters.volumeProfile.priceBuckets},$controls:[],getYValue:null,isAllowed:function(v,x){return e.q8H(),!x||typeof v.getFirstLastDataRecord(v.chart.dataSegment,x)[x]=="object"},render:function(v){var x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q,j,Z,ee,$,ie,te,re,H,U,G,ae,ne,oe,le,he,ue,ce,de,Ce,pe,xe,Te,be,_e,Be,Pe,Ie,Le,Fe,Ue,at,He,{stx:Me}=this,{dataSet:ge}=Me.chart;if(x=Me.panels[this.panelName],A=Me.getYAxisByField(x,this.field),!(!x||this.field&&!A)&&this.p1&&(A=A||x.yAxis,T=Me.pixelFromTick(this.p0[0],x.chart),_=Me.pixelFromTick(this.p1[0],x.chart),!(T<x.left&&_<x.left)&&!(T>x.right&&_>x.right))){var{flipped:Se}=A;L=null,M=null,F=Math.min(this.p1[0],this.p0[0]),P=Math.max(this.p1[0],this.p0[0]);for(var De=F;De<=P;De++)if(E=ge[De],E[this.field]&&(E=E[this.field]),!!E){var{High:Re,Low:Qe}=E;(L===null||Re>L)&&(L=Re),(M===null||Qe<M)&&(M=Qe)}var{priceBuckets:Lt}=this;e.h8L(26),O=e.A1W(M,Lt,L),I=[],Se&&([L,M]=[M,L]),B=Se?-1:1;for(var Mt=M,xt=0;xt<=Lt&&(I.push([Mt,0]),M!==L);Mt+=O*B,xt++);N=0;for(var st=F;st<=P;st++)if(R=ge[st],(R[this.field]||R[this.field]===0)&&(R=R[this.field]),!!R){var{High:ut,Low:it,Volume:Ft}=R;if(!(!Ft&&Ft!==0)){q=[],Y=I[0][0],z=null;for(var pt=1;pt<I.length;pt++)z=I[pt][0],V=it>=Y&&it<=z,K=ut>=Y&&ut<=z,Q=it<Y&&ut>z,(V||K||Q)&&q.push(pt),Y=z;if(q.length){j=Ft/q.length;for(var $e=0;$e<q.length;$e++)Z=I[q[$e]][1]+=j,Z>N&&(N=Z)}}}ee=N===0&&I.length>1,ee&&($="Not enough data to ",$+="rend",$+="er the Volume Profile",Me.displayErrorAsWatermark("chart",Me.translateIf($))),ie=ct=>(e.q8H(),Math.round(ct)+.5),te=(P-F)*Me.layout.candleWidth,e.h8L(1);var St=e.A1W(1,0);re=ie(Me.pixelFromTick(F))-St,e.h8L(1),H=ie(e.b00(te,re)),e.L_A(78),U=this.pixelFromValue(x,F,e.b00(M,2,L,M),A),G=re;var[gt]=I[0];ae=this.getLineColor();var{fillColor:ht}=this;(ht==="auto"||t.isTransparent(ht))&&(ht=Me.defaultColor),v.fillStyle=ht,ne={pattern:this.pattern,lineWidth:this.lineWidth},oe=0,le=0,he=(ct,lt)=>(e.q8H(),[oe,le]=[ct,lt]),ue=(ct,lt,rt)=>{rt||Me.plotLine(oe,ct,le,lt,ae,"segment",v,x,ne),[oe,le]=[ct,lt]},(this.highlighted||ee)&&(ce="segm",ce+="ent",Me.plotLine(re,H,U,U,Me.defaultColor,ce,v,x,Object.assign({},ne,{opacity:.3})));for(var Je=1;Je<I.length;Je++){var[et,mt]=I[Je];mt?(e.L_A(96),de=e.b00(mt,te,N),e.L_A(1),Ce=ie(e.A1W(de,re)),pe=ie(this.pixelFromValue(x,F,et,A)),xe=ie(this.pixelFromValue(x,F,gt,A)),Te=Math.max(pe,A.top),be=Math.min(xe,A.bottom),e.L_A(97),_e=e.A1W(pe,Te),e.h8L(97),Be=e.A1W(xe,be),Pe=Te<=A.bottom&&be>=A.top,Pe&&(this.highlighted||(v.globalAlpha=.3),he(re,be),ue(re,Te),ue(Ce,Te,_e),ue(Ce,be),Ce>G&&ue(G,be,Be),v.globalAlpha=.2,e.h8L(6),v.fillRect(re,Te,e.b00(Ce,re),e.b00(be,Te)),v.globalAlpha=1),G=Ce):G=re,gt=et}this.highlighted&&(Ie="p",Ie+="0",Le=this.highlighted===Ie,Fe=this.highlighted==="p1",Ue=this.p0[0]>this.p1[0],at=Ue?Fe:Le,He=Ue?Le:Fe,this.littleCircle(v,re,U,at),this.littleCircle(v,H,U,He)),e.L_A(1),this.pixelX=[re,e.b00(te,re)],this.pixelY=[this.pixelFromValue(x,F,L,A),this.pixelFromValue(x,F,M,A),U],this.p0[1]=0,this.p1[1]=!1}},intersected:function(v,x,A){var T,{p0:_,p1:L,stx:M}=this;if(!_||!L)return null;e.q8H();var[,,F]=this.pixelY||[];if(F!==void 0){if(T=this.repositionIntersection(v,x),T)return T;for(var[P,[E]]of[[0,_],[1,L]])if(this.pointIntersection(M.pixelFromTick(E),F,A,!0))return e.h8L(1),this.highlighted=e.A1W(P,"p"),{action:"drag",point:"p"+P};return this.boxIntersection(v,x,A)?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:v,value:x}):null}},reconstruct:function(v,x){this.stx=v,this.color=x.col,e.q8H(),this.fillColor=x.fc,this.panelName=x.pnl,this.pattern=x.ptrn,this.lineWidth=x.lw,this.d0=x.d0,this.d1=x.d1,this.tzo0=x.tzo0,this.tzo1=x.tzo1,this.field=x.fld,this.priceBuckets=x.pb,this.adjust()},serialize:function(){return e.r8j(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,fld:this.field,pb:this.priceBuckets}}},!0),t.Drawing.elliottwave=function(){var v;v="ell",v+="iottwave",this.name=v,this.lastPoint=0,this.points=[],this.pts=[],this.dx=0,this.dy=-20,this.dragToDraw=!1,this.annotationPoints=[],this.edit=null},t.inheritsFrom(t.Drawing.elliottwave,t.Drawing.annotation),t.Drawing.elliottwave.defaultTemplate={impulse:["I",h,"III","IV","V"],corrective:["A","B","C"],decoration:"enclosed",showLines:!0},t.Drawing.elliottwave.prototype.initializeSettings=function(v){e.q8H(),v.currentVectorParameters.waveParameters=t.clone(t.Drawing.elliottwave.defaultTemplate)},t.Drawing.elliottwave.prototype.configs=["color","lineWidth",s,n,"font",i],t.Drawing.elliottwave.prototype.$controls=["br[cq-wave-parameters]","cq-wave-parameters"],t.Drawing.elliottwave.prototype.construct=function(v,x){var A;this.stx=v,this.panelName=x.name,A=v.currentVectorParameters,Object.assign(this,A.waveParameters)},t.Drawing.elliottwave.prototype.serialize=function(){e.r8j();var v,x,A;v="w",v+="t",x={};for(var T=0;T<this.points.length;T++)A="t",A+="z",A+="o",e.h8L(1),x[e.b00(T,"d")]=this[e.b00(T,"d")],e.h8L(1),x[e.A1W(T,"tzo")]=this[e.A1W(T,A)],e.L_A(1),x[e.A1W(T,"v")]=this[e.b00(T,"v")];return x.annotations=this.annotationPoints.join(","),Object.assign({name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,mxSeg:this.maxSegments,show:this.showLines,decor:this.decoration,dx:this.dx,dy:this.dy,trend:this.trend,fld:this.field,fnt:t.removeNullValues(t.replaceFields(this.font,{style:"st",size:"sz",weight:v,family:"fl"}))},x)},t.Drawing.elliottwave.prototype.reconstruct=function(v,x){var A,T;A="e",A+="nc",A+="losed",T="siz",T+="e",this.stx=v,this.color=x.col,this.panelName=x.pnl,this.pattern=x.ptrn,this.lineWidth=x.lw,this.font=t.replaceFields(x.fnt,{st:"style",sz:T,wt:"weight",fl:"family"}),this.decoration=x.decor,this.showLines=x.show,this.dx=x.dx,this.dy=x.dy,this.trend=x.trend,this.field=x.fld,this.annotationPoints=x.annotations.split(","),x.decor===A&&this.calculateRadius(v.chart.tempCanvas.context),this.maxSegments=x.mxSeg,this.reconstructPoints(x),this.adjust()},t.Drawing.elliottwave.prototype.reconstructPoints=function(v){var x,A,T;if(x=this.stx.panels[this.panelName],!!x){e.r8j();for(var _=0;_<this.annotationPoints.length;_++)e.h8L(1),this[e.b00(_,"d")]=v[e.b00(_,"d")],e.h8L(1),this[e.b00(_,"v")]=v[e.b00(_,"v")],e.L_A(1),this[e.A1W(_,"tzo")]=v[e.b00(_,"tzo")],A=t.strToDateTime(v["d"+_]),T=this.stx.tickFromDate(A,x.chart),this.points.push([T,v["v"+_]])}},t.Drawing.elliottwave.prototype.calculateRadius=function(v){var x,A;this.getFontString(),v.font=this.fontString,x=0;for(var T=0;T<this.annotationPoints.length;T++)A=v.measureText(this.annotationPoints[T]).width,x<A&&(x=A);this.enclosedRadius=x},t.Drawing.elliottwave.prototype.check=function(v,x,A){var T,_;if(e.q8H(),e.L_A(6),T=this.points[e.A1W(A,1)],T&&v<=T[0])return!1;if(A===1&&this.points.length===2)return!0;if(e.h8L(1),_=this.points[e.A1W(1,A)],_&&v>=_[0]||!L(this.points))return!1;function L(M){for(var F=2;F<M.length;F++)if(Math.sign(M[F][1]-M[F-1][1])==Math.sign(M[F-1][1]-M[F-2][1]))return!1;return!0}return!0},t.Drawing.elliottwave.prototype.move=function(v,x,A){this.copyConfig(),e.h8L(98);var T=e.A1W(0,16,16,7,8);this.points[this.lastPoint+T]=[x,A],this.render(v)},t.Drawing.elliottwave.prototype.adjust=function(){var v,x;if(v=this.stx.panels[this.panelName],!!v)for(var A=0;this.maxSegments+1>A;A++)e.h8L(1),x=this[e.b00(A,"d")],this.setPoint(A,x,this["v"+A],v.chart),this.points[A][0]=this.stx.tickFromDate(t.strToDateTime(x),v.chart),e.L_A(1),this.points[A][1]=this[e.A1W(A,"v")]},t.Drawing.elliottwave.prototype.click=function(v,x,A){var T;if(T=this.stx.panels[this.panelName],!!T)return this.copyConfig(),this.penDown?this.accidentalClick(x,A)?(this.penDown=!0,!1):this.check(x,A,this.lastPoint+1)&&(this.lastPoint++,this.setPoint(this.lastPoint,x,A,T.chart),this.lastPoint===1&&(this.trend=Math.sign(this.v1-this.v0)),this.segment++,this.segment>=this.maxSegments)?(this.penDown=!1,!0):!1:(this.setPoint(0,x,A,T.chart),this.points.push(this.p0),this.penDown=!0,this.segment=0,this.lastPoint=0,this.impulse&&(this.annotationPoints=this.annotationPoints.concat(this.impulse)),this.corrective&&(this.annotationPoints=this.annotationPoints.concat(this.corrective)),this.annotationPoints.unshift("0"),this.decoration==="enclosed"&&this.calculateRadius(v),this.maxSegments=this.annotationPoints.length-1,this.trend=1,!1)},t.Drawing.elliottwave.prototype.render=function(v){var x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q,j,Z,ee,$,ie,te,re,H,U,G;if(x=this.stx,A=x.panels[this.panelName],T=x.getYAxisByField(A,this.field),!(!A||this.field&&!T)){if(T=T||A.yAxis,_=this.annotationPoints,L=this.pattern?t.borderPatternToArray(this.lineWidth,this.pattern):[],this.getFontString(),v.font=this.fontString,v.textAlign="center",v.textBaseline="middle",v.lineWidth=this.lineWidth,this.fontString!==this.lastFontString&&this.calculateRadius(v),this.lastFontString=this.fontString,M=this.getLineColor(),v.fillStyle=v.strokeStyle=M,v.save(),v.setLineDash(L),F=this.dx,P=this.dy,E=this.points,O=this.pts,I=!this.showLines&&this.highlighted,B=E.length,this.penDown&&this.segment){e.L_A(6);var ae=e.b00(6,4);N=this.trend*(B%ae-.5)<0,this.drawDropZone(v,E[B-2][1],T[N?"high":"low"],E[B-2][0])}else if(typeof this.highlighted=="string"&&x.repositioningDrawing){R="lo",R+="w",q="h",q+="i",q+="gh",Y=parseInt(this.highlighted.substring(1,this.highlighted.length),10),e.h8L(4);var ne=e.A1W(4,2,0);N=this.trend*(Y%ne-.5)>0,e.L_A(6),z=E[e.A1W(Y,1)],e.L_A(1),V=E[e.A1W(1,Y)],K=Y>0?z[1]:V["1"<<32],V&&(K=Math[N?"max":"min"](K,V[1])),this.drawDropZone(v,K,T[N?q:R],z?z[0]:null,V?V[0]:null)}for(var oe=0;oe<B;oe++)Q=E[oe],j=x.pixelFromTick(Q[0],A.chart),Z=this.pixelFromValue(A,Q[0],Q[1],x.getYAxisByField(A,this.field)),O[oe]=[j,Z];if(oe=0,this.showLines||I){for(v.beginPath(),I&&(v.globalAlpha=.3);oe<O.length;oe++)v.lineTo(O[oe][0],O[oe][1]);v.stroke(),oe=0}for(v.restore();oe<B;oe++){ee="pa",ee+="rent",ee+="heses",$=oe%2?F:-F,ie=oe%2?P:-P,$*=this.trend,ie*=this.trend,T.flipped&&(e.h8L(24),$*=-e.b00("1",96),ie*=-1),te=O[oe],re=te[2]=te[0]+$,e.h8L(99);var le=e.b00(216,1,13,20,15);H=te[3]=te[le]+ie,U=this.enclosedRadius||8,G=_[oe],this.decoration===ee&&(e.h8L(87),G=e.b00(")",G,"(")),v.fillText(G,re,H),this.decoration==="enclosed"&&(v.beginPath(),v.arc(re,H,U,0,2*Math.PI,!1),v.stroke()),this.highlighted&&(v.save(),this.littleCircle(v,this.pts[oe][0],this.pts[oe][1],this.highlighted==="p"+oe),v.restore())}}},t.Drawing.elliottwave.prototype.reposition=function(v,x,A,T){var _,L,M,F,P,E;if(x){if(_=this.stx.panels[this.panelName],L=x.tick-A,M=x.value-T,x.action==="move")for(var O="0">>0;x.points.length>O;O++){F=x.points[O],this.setPoint(O,F[0]-L,F[1]-M,_.chart),e.L_A(100);var I=e.A1W(16,13,30,1);this.points[O]=[F[0]-L,F[I]-M]}e.q8H(),x.action==="drag"&&(P=x.point,E=this.points,E[P]=[A,T],this.check(A,T,P)&&this.setPoint(P,A,T,_.chart)),this.render(v)}},t.Drawing.elliottwave.prototype.intersected=function(v,x,A){var T,_,L;if(!this.p0||!this.p1)return null;for(var M=0;this.points.length>M;M++){if(_="segm",_+="e",_+="nt",L=this.points[M],this.pointIntersection(L[0],L[1],A))return e.L_A(1),this.highlighted=e.A1W(M,"p"),{action:"drag",point:M,tick:v,value:this.valueOnDrawingAxis(v,x)};this.points[M+1]&&this.lineIntersection(v,x,A,_,L,this.points[M+1])&&(this.highlighted=!0,T={action:"move",points:t.clone(this.points),tick:v,value:this.valueOnDrawingAxis(v,x)})}return T},t.Drawing.elliottwave.prototype.measure=function(){var v,x,A,T;this.points.length>=2&&(v=this.points,this.stx.setMeasure(v["0"|0][1],v[v.length-1][1],v[0][0],v[v.length-1][0],!0),x=this.stx.controls.mSticky,A=x&&x.querySelector(".mStickyInterior"),A&&(T=[],T.push(t.capitalize("Elliott Wave")),this.getYValue&&T.push(this.field||this.stx.defaultPlotField||"Close"),T.push(A.innerHTML),A.innerHTML=T.join("<br>")))},t.Drawing.printProjection=function(v,x,A){e.r8j();var T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K;if(T=x.arr,T.length>1){_=T[0][0],L=Math.round(v.chart.maxTicks*.75);for(var Q=1;Q<T.length;Q++){for(e.L_A(6),M=T[e.A1W(Q,1)][0],F=T[Q][0],P=t.strToDateTime(M),E=t.strToDateTime(F).getTime(),O=v.standardMarketIterator(P),e.h8L(18),I=e.b00("0",1);P.getTime()<E;)P=O.next(),I+=1;if(B=t.strToDateTime(M).getTime(),B>t.strToDateTime(A[A.length-1].Date).getTime()){e.h8L(101);var j=e.b00(17,4,1,15);N=A.length-j,e.h8L(6),I+=e.b00("1",0)}else for(N=A.length-1;N>=0&&!(B<=t.strToDateTime(A[N].Date).getTime());N--);R={x0:"0"-0,x1:I,y0:A[N].Close,y1:T[Q][1]},_=t.strToDateTime(M),O=v.standardMarketIterator(_),q=!1;for(var Z=0;Z<=I;Z++)if(Y="m",Y+="in",Y+="ut",Y+="e",q?_=O.next():q=!0,!(_.getTime()<=A[A.length-("1"<<32)].DT.getTime())){z=t.yIntersection(R,Z),z||(z=0),e.L_A(66);var ee=e.b00(11e4,27500,9996);e.h8L(76);var $=e.A1W(7,14,10016,5);if(V=Math.round(z*ee)/$,V===0&&(V=T[Q][1]),K={Date:t.yyyymmddhhmmssmmm(_),DT:_,Open:V,Close:V,High:V,Low:V,Volume:0,Adj_Close:V,Split_Close:V,projection:!0},v.layout.interval==Y&&L--<0)break;A[A.length]=K}}}}):(r="drawingAdvanc",r+="ed feature requires first activa",r+="ting drawing feature.",console.error(r))};ho=W=>{var e,t;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.computeEquationChart?(e.formatEquation=function(a){var r=se;r.q8H();var i,n,s,h,o;i="",n=[],s="",h=!1;for(var l=1;l<a.length;l++)o=a[l],o=="["&&!h?h=!0:o=="]"&&h?(h=!1,s!==""&&(n.push(s),r.L_A(87),i+=r.A1W("]",s,"[")),s=""):h?s+=o:o=="+"||o=="-"||o=="*"||o=="/"||o==":"||o=="%"||o=="("||o==")"?(s!==""&&isNaN(s)?(n.push(s),r.h8L(87),i+=r.b00("]",s,"[")):i+=s,o==":"&&(o="/"),i+=o,s=""):o!=" "&&(s+=o);return s!==""&&isNaN(s)?(n.push(s),r.L_A(87),i+=r.A1W("]",s,"[")):i+=s,{equation:i,symbols:n}},e.fetchEquationChart=function(a,r){var i,n,s,h,o;i=e.formatEquation(a.symbol),n=i.symbols,se.q8H(),s=[],h=a.stx,a.stx=null;for(var l=0;l<n.length;l++)o=e.shallowClone(a),o.stx=h,o.symbol=n[l],o.symbolObject={symbol:n[l]},s.push(o);a.stx=h,h.quoteDriver.multiFetch(s,function(u){var c,p,y,d,g;c={},a.loadMoreReplace=!0,p={charge:0};for(var b=0;b<u.length;b++){if(y=u[b],y.dataCallback.error){r({error:y.dataCallback.error});return}c[y.params.symbol]=y.dataCallback.quotes,a.loadMoreReplace=a.loadMoreReplace&&y.params.loadMoreReplace,a.moreToLoad=a.moreToLoad||y.dataCallback.moreAvailable,d=y.dataCallback.attribution,d&&(d.charge&&(p.charge+=d.charge),p.source=d.source,p.exchange===void 0?p.exchange=d.exchange:p.exchange!=d.exchange&&(p.exchange=""))}if(s.length||!(a.loadMore||a.update))try{g=e.computeEquationChart(i.equation,c),r({quotes:g,moreAvailable:a.moreToLoad,attribution:p})}catch(m){var f;f={error:"Invalid equation: "+i.equation},m.name&&m.name=="NoException"&&(f.suppressAlert=!0),r(f)}})}):(t="equationsAdvanced feature requires first activat",t+="ing equations feature.",console.error(t))};uo=W=>{var e=se;e.q8H();var t,a,r,i,n,s;t=-1562476030,a=-1205394496,r=2;for(var h="1"-0;e.i7q(h.toString(),h.toString().length,33929)!==t;h++)i="undef",i+="in",i+="ed",n=typeof _CIQ!==i?_CIQ:W.CIQ,r+=2;e.E3k(r.toString(),r.toString().length,40019)!==a&&(n=+_CIQ==""?_CIQ:W.CIQ),n.Marker?n.Marker.Performance||(n.ChartEngine.prototype.removeDOMMarker=function(o){console.warn(`CIQ.ChartEngine#removeDOMMarker is scheduled for deprecation in a future release
 Please use CIQ.Marker.Performance#remove instead.`),e.r8j(),n.Marker.Performance.prototype.removeDOMMarker.call(o.params.node,o)},n.ChartEngine.prototype.drawMarkers=function(){var o;o="CIQ.ChartEng",o+="ine#drawMarkers is scheduled for deprecation in a future release",o+=`
`,o+=" Please use CIQ.Marker.Performance.drawMarkers instead.",console.warn(o),n.Marker.Performance.drawMarkers(this)},n.ChartEngine.prototype.calculateMarkerStyles=function(o,l){console.warn(`CIQ.ChartEngine#calculateMarkerStyles is scheduled for deprecation in a future release
 Please use CIQ.Marker.Performance.calculateStyles instead.`),n.Marker.Performance.calculateMarkerStyles(this,o,l)},n.ChartEngine.prototype.drawCircleMarker=function(o,l,u){e.r8j(),console.warn(`CIQ.ChartEngine#drawCircleMarker is scheduled for deprecation in a future release
 Please use CIQ.Marker.Performance.drawCircleMarker instead.`),n.Marker.Performance.drawCircleMarker(o,l,u)},n.ChartEngine.prototype.drawSquareMarker=function(o,l,u){console.warn(`CIQ.ChartEngine#drawSquareMarker is scheduled for deprecation in a future release
 Please use CIQ.Marker.Performance.drawSquareMarker instead.`),n.Marker.Performance.drawSquareMarker(o,l,u)},n.ChartEngine.prototype.drawCalloutMarker=function(o,l,u){console.warn(`CIQ.ChartEngine#drawCalloutMarker is scheduled for deprecation in a future release
 Please use CIQ.Marker.Performance.drawCalloutMarker instead.`),n.Marker.Performance.drawCalloutMarker(o,l,u)},n.ChartEngine.prototype.drawMarkerStem=function(o,l,u){console.warn(`CIQ.ChartEngine#drawMarkerStem is scheduled for deprecation in a future release
 Please use CIQ.Marker.Performance.drawMarkerStem instead.`),n.Marker.Performance.drawMarkerStem(o,l,u)},n.ChartEngine.prototype.positionDOMMarkers=function(){var o;o="CIQ.ChartEngine#po",o+="sitionDOMMarkers is scheduled for deprecation in a future ",o+=`release
 Please `,o+="use CIQ.Marker.Performance.drawMarkers instead.",console.warn(o),e.q8H(),n.Marker.Performance.drawMarkers(this)},n.Marker.Performance=function(o){var l,u,c,p,y,d,g,b,f,m,C,S,w;l="</",l+="d",l+="iv",l+=">",u='<div class="st',u+='x-stem"></div>',c="</",c+="div>",p="<div ",p+='class="stx-visual">',y='<div class="',y+="s",y+='tx-marker highlight">',this.params={displayCategory:!0,displayStem:!0,invert:!1,story:"",headline:""},n.extend(this.params,o),d=this.template=document.createElement("TEMPLATE"),e.h8L(102),d.innerHTML=e.A1W(y,c,'<div class="stx-marker-content">',l,"</div>",p,u,'<div class="stx-marker stx-performance-marker stx-marker-expand"><h4></h4><p></p></div>'),g=this.template.content.cloneNode(!0),b=g.querySelector(".stx-marker"),b.classList.add(o.type),b.classList.add(o.category),o.size&&b.classList.add(o.size),f=g.querySelector(".stx-visual"),m=g.querySelector(".stx-marker-expand"),C=g.querySelector("h4"),S=g.querySelector("p"),C.innerText=this.params.headline,S.innerText=this.params.story,this.hasText=!!o.headline||!!o.story,this.deferAttach=!0,this.node=g.firstChild,this.node.params=this.params,this.visual=f,this.expand=m,o.type==="callout"&&(w=m.removeChild(C),g.querySelector(".stx-marker-content").insertBefore(w,m))},n.inheritsFrom(n.Marker.Performance,n.Marker.NodeCreator,!1),n.Marker.Performance.consolidateExpanded=function(o){var l,u,c,p,y;if(l=o.markerHelper.highlighted,!l.length)return;u=o.activeMarker,u.consolidated||(u.consolidated=[]);function d(b){var f,m,C;return f=".marke",f+="r_content",m=b.params.node,C=m.expand,C?C.querySelector(f)||C:null}for(var g=l.length-1;g>=0;g--)u!==l[g]&&(c=d(l[g]),c&&(p="<cons",p+="olid",p+="ated><",p+="br><br>",y=p+c.innerHTML.replace(/<consolidated>.*<\/consolidated>/g,"")+"</consolidated>",d(u).innerHTML+=y));u.stxNodeCreator.quickCache(u)},n.Marker.Performance.reconstituteExpanded=function(o){e.r8j();var l;l="consoli",l+="dated",!(!o.markerHelper.highlighted.length||!o.activeMarker)&&Array.from(o.activeMarker.params.node.expand.querySelectorAll(l)).forEach(u=>u.remove())},n.Marker.Performance.drawMarkers=function(o){var l,u,c,p,y,d;l=o.getMarkerArray("all"),u=o.chart,e.r8j();for(var g=0;g<l.length;g++)c=l[g],p=c.stxNodeCreator,y=u.dataSegment[0].tick,d=u.dataSegment[u.dataSegment.length-1].tick,y<=c.tick<=d&&p&&p.drawMarker&&p.drawMarker(c)},n.Marker.Performance.calculateMarkerStyles=function(o,l,u){var c,p,y,d,g;c=".s",c+="tx-mark",c+="e",c+="r-templates",p=o.container.ownerDocument,y=p.querySelector(c),y||(y=document.createElement("DIV"),y.style.visibility="hidden",y.style.left="-1000px",p.body.append(y)),y.appendChild(l.node),d=getComputedStyle(l.stxNodeCreator.visual),o.styles.stx_marker_stem||(g=getComputedStyle(l.node.querySelector(".stx-stem")),o.styles.stx_marker_stem=o.cloneStyle(g)),e.q8H(),o.styles[u]=o.cloneStyle(d),y.removeChild(l.node)},n.Marker.Performance.drawCircleMarker=function(o,l,u){var c,p,y,d,g,b,f,m,C,S;c="px Roboto, Helvetica,",c+=" sans-serif",p="ce",p+="n",p+="ter",y=o.params.stx,d=y.chart,g=d.context,b=u.x,f=u.y,m=u.radius,C=u.label,S=u.color?u.color:l.backgroundColor,g.save(),g.beginPath(),g.setLineDash([]),g.lineWidth=1,g.fillStyle=S,g.strokeStyle=S,g.textAlign=p,e.h8L(103);var w=e.A1W(26,5,418,20);e.L_A(104);var k=e.b00(19,16,17,18,1);g.font="normal bold "+Math.min(12,w*(m+k))+c,g.arc(b,f,m,0,2*Math.PI,!1),g.fill(),g.stroke(),g.closePath(),C&&(g.fillStyle=n.chooseForegroundColor(g.fillStyle),e.h8L(1),g.fillText(C,b,e.b00(1,f))),(o.highlight||o.active)&&(g.beginPath(),e.h8L(1),g.arc(b,f,e.b00(4,m),0,2*Math.PI,!1),g.stroke(),g.closePath()),g.restore()},n.Marker.Performance.drawSquareMarker=function(o,l,u){var c,p,y,d,g,b,f,m,C;if(c=o.params.stx,e.q8H(),p=c.chart,y=p.context,d=u.x,g=u.y,b=u.half,f=u.label,m=u.color?u.color:l.backgroundColor,e.L_A(18),C=e.b00(b,2),y.setLineDash([]),y.lineWidth=1,y.fillStyle=m,y.strokeStyle=m,y.save(),y.beginPath(),o.node.params.type==="diamond"&&(y.translate(d,g),y.rotate(Math.PI/4),y.translate(-d,-g),b/=1.42,e.h8L(18),C=e.A1W(b,2)),e.h8L(6),y.fillRect(e.A1W(d,b),e.A1W(g,b),C,C),(o.highlight||o.active)&&(e.h8L(105),y.strokeRect(e.A1W(d,b,4),e.b00(g,b,4,e.L_A(105)),e.A1W(8,C,e.h8L(1)),e.A1W(8,C,e.h8L(1)))),y.closePath(),y.restore(),f){y.save(),y.textAlign="center",e.L_A(65);var S=e.A1W(4,5,4,16);y.font="normal bold "+Math.min(12,S*b)+"px Roboto, Helvetica, sans-serif",y.fillStyle=n.chooseForegroundColor(y.fillStyle),e.h8L(1),y.fillText(f,d,e.A1W(1,g)),y.restore()}},n.Marker.Performance.drawCalloutMarker=function(o,l,u){var c,p,y,d,g,b,f,m,C,S,w,k,D,v;c="b",c+="l",c+="ack",p=o.params.stx,y=p.chart,d=y.context,g=o.params,u.x,b=u.y,e.r8j(),f=u.half,m=u.midWidth,C=u.headline,S=u.color?u.color:l.backgroundColor,w=f*2||25,k=Math.round(d.measureText(C).width),D=m?m*2:k+8,d.beginPath(),d.setLineDash([]),d.lineWidth=1,d.fillStyle=S,d.strokeStyle=S,d.font="normal bold 12px Roboto, Helvetica, sans-serif",d.rect(g.box.x0,g.box.y0,D,w),d.fill(),d.stroke(),d.closePath(),d.beginPath(),d.fillStyle=o.highlight||o.active?"rgba(255,255,255,0.8)":"rgba(255,255,255,0.65)",e.h8L(106),v=e.A1W(20,D,k,2),d.rect(g.box.x0+v,b-f,k+40,22),d.fill(),d.stroke(),d.closePath(),d.fillStyle=c,d.fillText(C,g.box.x0+v+10,b)},n.Marker.Performance.drawMarkerStem=function(o,l,u){var c,p,y,d,g,b,f;c=o.params.stx,p=c.chart,y=p.context,d=u.x,u.y,y.beginPath(),y.strokeStyle=l.borderLeftColor,e.h8L(2),y.setLineDash([e.b00("1",1),1]),g=n.stripPX(l.height),b=u.invert?o.params.box.y0:o.params.box.y1,f=u.invert?o.params.box.y0-g:o.params.box.y1+g,y.moveTo(d,b),y.lineTo(d,f),y.stroke(),y.closePath()},n.Marker.Performance.prototype.drawMarker=function(o){var l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y;if(l="di",l+="amo",l+="n",l+="d",u="a",u+="uto",c=o.params,p=o.params.stx,!!p&&(y=p.chart,d=y.dataSegment,!(!d||!d.length)&&(g=p.panels[o.params.panelName],!g.hidden&&(b=o.params.yAxis||g.yAxis,f=o.stxNodeCreator.params,!f.hide)))){m=f.type,C=f.category,S=f.headline,w=f.displayCategory,k=f.color,D=f.displayLabel,v=f.invert,x=f.size,k===u&&(k=p.defaultColor),e.h8L(107),A=e.A1W(m,C,"stx_marker_","_"),x&&(e.h8L(1),A+=e.b00(x,"_")),p.styles[A]||n.Marker.Performance.calculateMarkerStyles(p,o,A),T=o.style=p.styles[A],_=p.styles.stx_marker_stem,e.L_A(8);var z=e.b00(18,11,3);e.h8L(54);var V=e.A1W(1,45,30,17);L=parseInt(T.height,z)/V,e.h8L(52);var K=e.A1W(13,1,55,5);e.h8L(60);var Q=e.b00(40,24,6,8);if(M=parseInt(T.width,K)/Q,m===l&&(L*=1.42,M*=1.42),F=f.displayStem?parseInt(_.height,10)+parseInt(_.marginBottom,"10"-0):0,e.L_A(19),P=e.b00(F,2,L),E=c.offset||0,O=p.pixelFromTick(o.tick),I=c.node.calculateYPosition({marker:o,panel:g,yAxis:b,height:P,half:L,offset:E,stemHeight:F,inverted:v,field:c.field,x:O}),!(!o.tick&&o.tick!==0)){if(c.box={x0:O-(M||L),y0:I-L,x1:O+(M||L),y1:I+L,midY:L,midX:M||L,stemHeight:F},w?C=C[0].toUpperCase():C="",p.startClip(g.name),m==="circle"){B=811914229,N=-197294987,R=2;for(var j=1;e.E3k(j.toString(),j.toString().length,35350)!==B;j++)n.Marker.Performance.drawCircleMarker(o,T,{x:O,y:I,radius:L,label:D&&C,color:k}),R+=2;e.E3k(R.toString(),R.toString().length,6950)!==N&&n.Marker.Performance.drawCircleMarker(o,T,{x:O,y:I,radius:L,label:D||C,color:k})}else m==="square"||m==="diamond"?n.Marker.Performance.drawSquareMarker(o,T,{x:O,y:I,half:L,label:D||C,color:k}):m==="callout"?n.Marker.Performance.drawCalloutMarker(o,T,{x:O,y:I,half:L,midWidth:M,headline:S,color:k}):(q=" is unsupported with canvas markers",q+=`!
Supported Styles are Square, Diamond,`,q+=" ",q+="Circle, and Callout.",Y="Ma",Y+="rker type:",Y+=" ",e.h8L(87),console.warn(e.A1W(q,m,Y)));f.displayStem&&n.Marker.Performance.drawMarkerStem(o,_,{x:O,y:I,invert:v}),p.endClip(),o.attached&&this.positionPopUpNode(o)}}},n.Marker.Performance.prototype.positionPopUpNode=function(o){var l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_;if(l="h",l+="i",l+="dd",l+="en",!(!o.attached||!o.params.box)){if(u=o.params,c=u.stx,p=u.box,y=o.params.node.expand,d=c.chart.dataSet,g=c.chart.dataSegment,b=c.panels[u.panelName],o.tick){m=[d[g[0]&&g[0].tick-1],d[g[0]&&g[0].tick-2]],C=c.getFirstLastDataRecord(m.concat(g),"Date"),e.L_A(1);var L=e.A1W(1,0);e.L_A(108);var M=e.b00(2,2,15,17);e.L_A(109);var F=e.b00(7,17,43,36,18);S=[d[g[g.length-L].tick+("1"^0)],d[g[g.length-M].tick+F]],w=c.getFirstLastDataRecord(g.concat(S),"Date",!0),f=C.DT<=d[o.tick].DT&&d[o.tick].DT<=w.DT&&o.params.box.y0<=b.yAxis.bottom&&o.params.box.y1>=b.yAxis.top}else f=!1;if(!o.highlight&&!o.active&&(f=!1),y.style.visibility=f?"":l,!!f){y.style.height!==""&&(y.style.height=""),k=y.rects,e.L_A(110);var P=e.A1W(0,6,1,19,15);if(D=k.height/P,x=o.node.params.infoOffset||0,o.node.params.infoOnLeft?v=p.x0-k.width-x<b.left?p.x1+x:p.x0-k.width-x:v=p.x0+k.width>b.right?p.x0-k.width-x:p.x1+x,v-=c.chart.left,A=u.avoidFlush?5:0,T=p.y0-D>=b.yAxis.top?p.y0+p.midY-D:b.yAxis.top+A,!u.avoidFlush&&p.y1+p.stemHeight===b.yAxis.bottom&&k.height>p.y1-p.y0+p.stemHeight&&(T=p.y1-k.height+p.stemHeight),p.y1+D>b.yAxis.bottom&&(T=b.yAxis.bottom-k.height-A),k.height>b.yAxis.height){T=b.yAxis.top+A,e.L_A(1);var E=e.A1W(1,1);y.style.height=b.yAxis.height-E*A+"px"}T-=b.yAxis.top,_="translateX("+Math.floor(v)+"px) translateY("+Math.floor(T)+"px) translateZ(0)",y.style.transform=_,y.transform={translateX:v,translateY:T}}}},n.Marker.Performance.prototype.quickCache=function(o){var l,u,c,p;l=o.params.node,u=l.expand,c=o.style,p=n.stripPX(c.marginLeft)+n.stripPX(c.marginRight)+n.stripPX(c.borderRight)+n.stripPX(c.borderLeft),u.rects=u.getBoundingClientRect(),u.scrollBarWidth=u.rects.width-u.clientWidth-p},n.Marker.Performance.prototype.calculateYPosition=function(o){var l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R;if(l="top_",l+="l",l+="ane",u="on_cand",u+="le",c="b",c+="e",c+="low_cand",c+="le",p="va",p+="l",p+="u",p+="e",y="l",y+="o",y+="w",d="h",d+="ig",d+="h",g=o.marker,b=o.panel,f=o.yAxis,m=o.height,C=o.half,S=o.offset,w=o.stemHeight,k=o.inverted,D=o.field,v=g.params.stx,x=v.chart,A=v.chart.highLowBars,T=x.dataSet[g.tick],!!T&&(D&&(T=T[D]),!!T)){if(typeof T=="number"&&(T={Close:T},T[x.defaultPlotField]=T.Close,A=!1),_=v.getBarBounds(T,!!D),L=A?_[f.flipped?"low":"high"]:T[x.defaultPlotField],M=A?_[f.flipped?d:y]:T[x.defaultPlotField],F=g.params.yPositioner,isNaN(L)){e.h8L(111);var q=e.A1W(10,18,11,94,1);L=(f.high+f.low)/q}if(isNaN(M)){e.L_A(112);var Y=e.A1W(12,26,5,4);M=(f.high+f.low)/Y}if(E=0,F!="none"){O="_",O+="la",O+="n",O+="e",e.L_A(113);var z=e.A1W(4,1,2,5);I=F.indexOf(O)>z,B=v.markerHelper.placementMap,e.L_A(1),e.A1W(16,3863),e.L_A(114);var V=e.A1W(663,81322,14,14,9);N=F+(406.09<V?"|":"T")+b.name,I&&typeof B[N]>"u"&&(B[N]=2),e.L_A(6),e.b00(34256,29974),e.L_A(115);var K=e.b00(2,10,9e3,8084);e.h8L(110);var Q=e.A1W(526,9211,2,17,17);e.L_A(1);var j=e.b00(8463,529);e.h8L(116);var Z=e.A1W(6971,6971,5,18,6995);e.h8L(12),e.A1W(8397,9,4,50400,67203),R=N+(K===71.89?Q:j!==40.31?"-":Z!=140.21?50.38:!1)+(I?g.params.label:o.x),typeof B[R]>"u"&&(B[R]=I?B[N]:0,e.L_A(1),B[N]+=e.b00(2,m)),E=B[R],I||(e.h8L(1),B[R]+=e.b00(1,m))}switch(F){case p:if(g.params.y||g.params.y===0){P=v.pixelFromPrice(g.params.y,b,f)-m*.5+C;break}case"above_candle":P=v.pixelFromPrice(L,b,f)-C-(!k&&w||S)-E;break;case c:P=v.pixelFromPrice(M,b,f)+C+(k&&w||S)+E;break;case u:e.h8L(58);var ee=e.b00(2,4,0);P=v.pixelFromPrice((L+M)/ee,b,f)-m*.5+C;break;case"top":case l:P=b.yAxis.top+C+(k&&w||S)+E;break;case"bottom":case"bottom_lane":P=b.yAxis.bottom-C-(!k&&w||S)-E;break}e.L_A(49);var $=e.b00(7,40,6);e.L_A(27);var ie=e.A1W(11,9);return Math.round($*P)/ie}},n.Marker.Performance.prototype.prepareForHolder=function(o){var l,u;return l=this.expand,u=o.params.stx,l.classList.add(this.params.type),l.classList.add(this.params.category),u.markerHelper.domMarkers.push(o),l},n.Marker.Performance.prototype.addToHolder=function(o){var l,u,c;if(l="mou",l+="sedo",l+="w",l+="n",u=this.expand,c=o.params.stx,n.Marker.Performance.reconstituteExpanded(c),n.Marker.Performance.consolidateExpanded(c),this.quickCache(o),u.clickClosure)return;u.addEventListener(l,p),u.addEventListener("touchstart",p,{passive:!1});function p(y){c.activeMarker=o,e.q8H(),c.activeMarker.click({cx:y.clientX,cy:y.clientY,panel:c.currentPanel}),y.stopPropagation()}u.clickClosure=p},n.Marker.Performance.prototype.remove=function(o){var l,u,c,p,y,d,g;if(e.q8H(),l=o.params.stx,!!l&&l.markerHelper.domMarkers&&(u=l.markerHelper.domMarkers.indexOf(o),u!=-1&&l.markerHelper.domMarkers.splice(u,1),o.attached)){c=l.panels[o.params.panelName],p=o.params.node.expand,p.parentNode===c.subholder&&c.subholder.removeChild(p),y=976618084,d=-1580414107,g=2;for(var b=1;e.E3k(b.toString(),b.toString().length,51538)!==y;b++)p.removeEventListener("click",p.clickClosure),g+=2;e.i7q(g.toString(),g.toString().length,62729)!==d&&p.removeEventListener("",p.clickClosure)}},n.Marker.Performance.prototype.click=function(o){var l,u,c;if(this.hasText){arguments.length>("1"^0)&&(o={cx:arguments[0],cy:arguments["1"<<0],marker:arguments[2],panel:arguments[3]});var{cx:p,cy:y,marker:d,panel:g}=o;if(e.r8j(),l=d.params.stx,d.attached){if(c=this.expand,c.rects&&c.transform&&c.rects.width-c.scrollBarWidth+c.transform.translateX<l.backOutX(p)&&l.backOutX(p)<c.rects.width+c.transform.translateX)return;this.remove(d)}else l.addToHolder(d),u=!0;d.attached=!d.attached,d.active=!d.active,u&&d.stxNodeCreator.positionPopUpNode(d)}}):(s="highPerformanceMarkers feature requi",s+="res first activating markers feat",s+="ure.",console.error(s))};co=W=>{var e;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Renderer.OHLC.requestNew=function(t,a){var r,i,n,s,h,o,l,u,c,p,y;r=null,i=a.hlc,n=a.colored,s=a.hollow,h=a.volume,o=a.histogram;for(var d=0;d<t.length;d++)switch(l="hi",l+="stogram",u="h",u+="oll",u+="o",u+="w",c="c",c+="andle",p=t[d],p){case"bar":case c:r=p;break;case"volume":h=!0;break;case u:s=!0;break;case"colored":n=!0;break;case l:o=!0,r="candle";break;case"hlc":y="b",y+="a",y+="r",i=!0,r=y;break;default:return null}return r===null?null:new e.Renderer.OHLC({params:e.extend(a,{type:r,hlc:i,colored:n,hollow:s,volume:h,histogram:o})})},e.Renderer.OHLC.getChartParts=function(t,a){var r,i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R;return r="f",r+="ill_color_e",r+="ven",i="stx_holl",i+="ow_cand",i+="le_even",n="cand",n+="le",s="h",s+="ollo",s+="w",h="c",h+="an",h+="d",h+="le",o="fill_color_",o+="d",o+="own",l="h",l+="ol",l+="l",l+="ow",u="bor",u+="der_",u+="c",u+="olor_even",c="b",c+="order_color_up",p="stx_holl",p+="o",p+="w_candl",p+="e_up",y="border_col",y+="or_",y+="down",d="c",d+="a",d+="nd",d+="le",g="border_color_",g+="eve",g+="n",b="ca",b+="nd",b+="l",b+="e",f="stx_",f+="candle_shadow_dow",f+="n",m="c",m+="a",m+="ndl",m+="e",C="border_",C+="co",C+="lor_up",S="c",S+="a",S+="ndl",S+="e",w="stx_ca",w+="n",w+="dle_s",w+="hadow",k="stx_b",k+="ar_even",D="b",D+="a",D+="r",v="stx_b",v+="ar_",v+="d",v+="own",x="b",x+="a",x+="r",A="b",A+="a",A+="r",T="b",T+="a",T+="r",_="b",_+="a",_+="r",L="border",L+="_",L+="color_",L+="even",M="border_color_d",M+="own",F="hist",F+="og",F+="ram",P="s",P+="tx",P+="_histogram_u",P+="p",E=1,O=2,se.L_A(44),I=se.b00("4",0),B=8,N=16,R=32,[{type:"histogram",drawType:"histogram",style:P,condition:B,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:F,style:"stx_histogram_down",condition:N,fill:"fill_color_down",border:M,useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_even",condition:R,fill:"fill_color_even",border:L,skipIfPass:!0,useColorInMap:!0,useBorderStyleProp:!0},{type:_,drawType:T,style:t||"stx_bar_chart",border:"border_color",useColorInMap:!0},{type:"bar",drawType:A,style:"stx_bar_up",condition:a?B:E,border:"border_color_up",useColorInMap:!0},{type:x,drawType:"bar",style:v,condition:a?N:O,border:"border_color_down",useColorInMap:!0},{type:"bar",drawType:D,style:k,condition:a?R:I,border:"border_color_even",skipIfPass:!0,useColorInMap:!0},{type:"candle",drawType:"shadow",style:w,border:"border_color_up"},{type:S,drawType:"shadow",style:"stx_candle_shadow_up",condition:B,border:C},{type:m,drawType:"shadow",style:f,condition:N,border:"border_color_down"},{type:b,drawType:"shadow",style:"stx_candle_shadow_even",condition:R,border:g,skipIfPass:!0},{type:d,drawType:"candle",style:"stx_candle_up",condition:B,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"candle",drawType:"candle",style:"stx_candle_down",condition:N,fill:"fill_color_down",border:y,useColorInMap:!0,useBorderStyleProp:!0},{type:"hollow",drawType:"shadow",style:p,condition:E,border:c},{type:"hollow",drawType:"shadow",style:"stx_hollow_candle_down",condition:O,border:"border_color_down"},{type:"hollow",drawType:"shadow",style:"stx_hollow_candle_even",condition:I,border:u,skipIfPass:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_up",condition:E|N,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0},{type:l,drawType:"candle",style:"stx_hollow_candle_down",condition:O|N,fill:o,border:"border_color_down",useColorInMap:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_even",condition:I|N,fill:"fill_color_even",border:"border_color_even",skipIfPass:!0,useColorInMap:!0},{type:"hollow",drawType:h,style:"stx_hollow_candle_up",condition:E|B,fill:"fill_color_up",border:"border_color_up"},{type:s,drawType:"candle",style:"stx_hollow_candle_down",condition:O|B,fill:"fill_color_down",border:"border_color_down"},{type:"hollow",drawType:n,style:i,condition:I|B,fill:r,border:"border_color_even"}]},e.Renderer.Bars=function(t){var a;this.construct(t),a=this.params,a.type="bar",this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,a.hlc=a.volume=a.hollow=a.histogram=!1},e.inheritsFrom(e.Renderer.Bars,e.Renderer.OHLC,!1),e.Renderer.HLC=function(t){var a,r;a="b",a+="a",a+="r",this.construct(t),r=this.params,r.type=a,r.hlc=!0,this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,r.volume=r.hollow=r.histogram=!1},e.inheritsFrom(e.Renderer.HLC,e.Renderer.Bars,!1),e.Renderer.Shading=function(t){this.construct(t),this.beenSetup=!1,this.errTimeout=null,this.params.useChartLegend=!1,this.shading=[],se.q8H(),this.params.type=="rangechannel"&&(this.highLowBars=!0)},e.inheritsFrom(e.Renderer.Shading,e.Renderer.Lines,!1),e.Renderer.Shading.requestNew=function(t,a){var r,i,n,s,h;r=null,i=null;for(var o=0;o<t.length;o++)n="rangechann",n+="el",s="rangech",s+="a",s+="nne",s+="l",h=t[o],h==s?r=n:h=="step"&&(i=!0);return r===null?null:new e.Renderer.Shading({params:e.extend(a,{type:r,step:i})})},e.Renderer.Shading.prototype.setShading=function(t){t.constructor!=Array&&(t=[t]),se.q8H(),this.shading=t},e.Renderer.Shading.prototype.draw=function(){var t=se,a,r,i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D;for(a=this.stx,r=this.params,i=a.panels[r.panel].chart,r.type=="rangechannel"&&(this.beenSetup?this.seriesParams.length>"2"<<0&&this.removeSeries(this.seriesParams[2].id):(n="L",n+="o",n+="w",s="Hig",s+="h",this.beenSetup=!0,r.display=this.seriesParams[0].display,r.yAxis=this.seriesParams[0].yAxis,h=this.seriesParams["0"^0].color||"auto",o=this.seriesParams["0"*1].symbol,o&&(t.L_A(1),t.A1W(".",o)),this.removeAllSeries(!0),l=r.name,a.addSeries(null,{symbol:o,loadData:!!o,field:s,renderer:"Shading",name:l,style:"stx_line_up",display:r.display,shareYAxis:!0}),a.addSeries(null,{symbol:o,loadData:!!o,field:n,renderer:"Shading",name:l,style:"stx_line_down",display:r.display,shareYAxis:!0}),this.setShading({primary:this.seriesParams[0].id,secondary:this.seriesParams[1].id,color:h}))),t.r8j(),this.shading||this.errTimeout||(console.log("Warning: no shading scheme set.  Use myRenderer.setShading(scheme) to set."),u=this,this.errTimeout=setTimeout(function(){u.errTimeout=null},1e4)),c={},p=0;p<this.seriesParams.length;p++)y={},i.series[this.seriesParams[p].id]&&(y=e.clone(i.series[this.seriesParams[p].id].parameters)),c[this.seriesParams[p].id]={parameters:e.extend(e.extend(y,r),this.seriesParams[p]),yValueCache:this.caches[this.seriesParams[p].id]};function v(x){t.q8H();var A,T,_;return A=c[x],A?(T=A.parameters.field,_=A.parameters.subField,t.L_A(1),t.b00(_?"."+_:"",T)):x}a.drawSeries(i,c,r.yAxis,this),i.legend&&r.type=="rangechannel"&&(i.legend.colorMap||(i.legend.colorMap={}),d=r.display,g=[a.getCanvasColor("stx_line_up"),a.getCanvasColor("stx_line_down")],i.legend.colorMap[d]={color:g,display:d,isBase:this==a.mainSeriesRenderer});for(p in c)this.caches[p]=c[p].yValueCache;for(p=0;p<this.shading.length;p++){if(b="C",b+="lo",b+="s",b+="e",f="C",f+="lo",f+="s",f+="e",m="a",m+="u",m+="t",m+="o",C=this.shading[p],S=C.color,C.color==m&&(S=a.defaultColor),C.primary||(C.primary=f),!C.secondary&&this.seriesParams[0]&&(C.secondary=this.seriesParams[0].field),C.secondary){if(!c[C.primary]&&C.primary!="Close")continue;if(c[C.secondary]){if(C.primary=="Close"&&r.yAxis&&r.yAxis!=i.yAxis)continue}else continue}else continue;w=v(C.primary).split("."),k=v(C.secondary).split("."),D={topBand:w[0],topSubBand:w[1],topColor:C.greater||S||a.containerColor,topAxis:r.yAxis,bottomBand:k["0">>0],bottomSubBand:k[1],bottomColor:C.lesser||S||a.containerColor,bottomAxis:C.primary==b?null:r.yAxis,tension:r.tension||i.tension,opacity:.1,step:r.step},!(!D.topColor&&!D.bottomColor)&&(!r.highlight&&a.highlightedDraggable&&(D.opacity*=.3),e.fillIntersecting(a,r.panel,D))}},e.Renderer.Histogram=function(t){var a;a="h",a+="i",a+="st",a+="ogram",this.construct(t),this.params.type=a,this.barsHaveWidth=this.standaloneBars=!0,this.params.yAxis&&(this.params.bindToYAxis=!0,typeof this.params.yAxis.baseline=="number"&&(this.params.yAxis.baseline={value:this.params.yAxis.baseline}))},e.inheritsFrom(e.Renderer.Histogram,e.Renderer,!1),e.Renderer.Histogram.prototype.adjustYAxis=function(){var t;t=this.params.yAxis,!(!t||t.baseline)&&(t.min=0,t.highValue/=this.params.heightPercentage||1)},e.Renderer.Histogram.prototype.draw=function(){var t,a,r,i,n;t="st",t+="ack",t+="e",t+="d",a=e.clone(this.params),a.type=a.subtype,this.useSum=a.subtype==t,(!a.yAxis||a.yAxis==this.stx.chart.yAxis)&&(a.bindToYAxis=!0),this.stx.drawHistogram(a,this.seriesParams),r=a.yAxis&&a.yAxis.baseline,r&&r.color&&(i=this.stx.panels[this.params.panel],n=this.stx.pixelFromPrice(r.value,i,this.params.yAxis)-.5,this.stx.plotLine({x0:i.left,x1:i.right,y0:n,y1:n,color:r.color,type:"line",context:i.chart.context,confineToPanel:i,pattern:r.pattern||"solid",lineWidth:r.lineWidth||1,opacity:r.opacity||.8,globalCompositeOperation:"destination-over"}))},e.Renderer.Histogram.prototype.getBasis=function(t,a,r){var i,n,s,h,o;if(i=0,se.q8H(),t&&this.useSum)for(var l=0;l<this.seriesParams.length&&(n="Clo",n+="s",n+="e",s="obje",s+="ct",h=this.seriesParams[l].field,h!==a);l++)o=t[h],o&&typeof o===s&&(o=o[r||this.seriesParams[l].subField||this.stx.chart.defaultPlotField||n]),o&&(i+=o);return i},e.Renderer.Heatmap=function(t){this.construct(t),this.params.type="heatmap",this.params.highlightable=!1,this.barsHaveWidth=this.standaloneBars=!0},e.inheritsFrom(e.Renderer.Heatmap,e.Renderer,!1),e.Renderer.Heatmap.requestNew=function(t,a){se.q8H();var r,i,n,s;r=null;for(var h=0;h<t.length;h++)i="he",i+="a",i+="tm",i+="ap",n="hea",n+="tm",n+="ap",s=t[h],s==n&&(r=i);return r===null?null:new e.Renderer.Heatmap({params:e.extend(a,{type:r})})},e.Renderer.Heatmap.prototype.draw=function(){this.stx.drawHeatmap(e.clone(this.params),this.seriesParams)},e.Renderer.Scatter=function(t){this.construct(t),se.q8H(),this.standaloneBars=this.barsHaveWidth=!0,this.bounded=!0},e.inheritsFrom(e.Renderer.Scatter,e.Renderer.Lines,!1),e.Renderer.Scatter.requestNew=function(t,a){var r,i,n;r=null;for(var s=0;s<t.length;s++)i="sca",i+="tterp",i+="lot",n=t[s],n==i&&(r="scatter");return r===null?null:new e.Renderer.Scatter({params:e.extend(a,{type:r})})},e.Renderer.Scatter.prototype.drawIndividualSeries=function(t,a){var r,i,n;return r="Error, Scatter renderer requi",r+="r",r+="es",se.r8j(),r+=" customChart.js",i=this.stx.panels[a.panel]||t.panel,n={colors:[]},this.stx.scatter?n=this.stx.scatter(i,a):console.warn(r),n}};fo=W=>{var e=se,t;t=typeof _CIQ<"u"?_CIQ:W.CIQ,e.r8j(),t.Studies?(t.Studies.calculateAccumulationDistribution=function(a,r){var i,n,s,h,o,l;i=r.chart.scrubbed;for(var u=r.startFrom;u<i.length;u++)if(n="Resu",n+="l",n+="t",n+=" ",!!u){if(s=i[u],s.futureTick)break;e.L_A(6),h=i[e.A1W(u,1)],o=0,s.Close>h.Close?o=s.Close-Math.min(s.Low,h.Close):s.Close<h.Close&&(o=s.Close-Math.max(s.High,h.Close)),r.inputs["Use Volume"]&&(o*=s.Volume),l=h["Result "+r.name],l||(e.h8L(44),l=e.b00("0",0)),l+=o,isNaN(s.Close)||(s[n+r.name]=l)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"W Acc Dist":{name:"Accumulation/Distribution",calculateFN:t.Studies.calculateAccumulationDistribution,inputs:{"Use Volume":!1}}})):console.error("accumulationDistribution feature requires first activating studies feature.")};po=W=>{var e,t,a;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Studies?(t="#F",t+="F0",t+="0",t+="00",a="#F",a+="F0000",e.Studies.calculateADX=function(r,i){var n=se,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v;if(e.Studies.calculateStudyATR(r,i),n.q8H(),s=i.chart.scrubbed,h=i.days,o=parseInt(i.inputs["Smoothing Period"],10),!o&&o!==0&&(o=h),s.length<i.days+1){i.error=!0;return}l=0,u=0,c=0,p=0;for(var x=Math.max(1,i.startFrom);x<s.length;x++){if(d="_sm-DM",d+=" ",y=s[x],n.L_A(31),g=Math.max(n.A1W("0",0),y.High-s[x-1].High),b=Math.max(0,s[x-1].Low-y.Low),g>b?b=0:b>g?g=0:(n.L_A(24),g=b=n.b00("0",64)),x<=h)u+=g,c+=b,l+=y["True Range "+i.name];else{f="_sm",f+="T",f+="R ",m="_sm-",m+="D",m+="M",m+=" ",n.L_A(73);var A=n.A1W(0,1,6,11,16);n.h8L(4);var T=n.A1W(6,20,15);u=s[x-A]["_sm+DM "+i.name]*(h-T)/h+g,n.h8L(76);var _=n.A1W(13,5,14,5);n.L_A(117);var L=n.b00(20,19,1);c=s[x-_][m+i.name]*(h-L)/h+b,n.h8L(27);var M=n.A1W(17,16);n.L_A(1);var F=n.b00(1,0);l=s[x-M][f+i.name]*(h-F)/h+y["True Range "+i.name]}if(y["_sm+DM "+i.name]=u,y[d+i.name]=c,y["_smTR "+i.name]=l,!(x<h)){n.L_A(96),C=n.A1W(100,u,l),n.h8L(96),S=n.b00(100,c,l),n.h8L(49);var P=n.b00(10,30,13);if(w=P*Math.abs(C-S)/(C+S),y["+DI "+i.name]=C,y["-DI "+i.name]=S,i.inputs.Series!==!1&&o)if(x<h+o-1){if(x==i.startFrom)for(var E=h;E<i.startFrom;E++){k="-",k+="DI",k+=" ",n.h8L(40);var O=n.A1W(13,81,8,535);p+=O*Math.abs(s[E]["+DI "+i.name]-s[E]["-DI "+i.name])/(s[E]["+DI "+i.name]+s[E][k+i.name])}p+=w}else if(x==h+o-"1"*1)n.L_A(10),y["ADX "+i.name]=n.b00(p,o);else{D="A",D+="DX ",n.h8L(29);var I=n.A1W(7,10,35,1);n.h8L(29);var B=n.b00(8,8,8,7);y["ADX "+i.name]=(s[x-I][D+i.name]*(o-B)+w)/o}if(i.inputs.Histogram){if(v=i.name+"_hist",!y["+DI "+i.name]&&y["+DI "+i.name]!==0||!y["-DI "+i.name]&&y["-DI "+i.name]!==0)continue;y[v]=y["+DI "+i.name]-y["-DI "+i.name],i.inputs.Series===!1&&(y["+DI "+i.name]=null,y["-DI "+i.name]=null),i.outputMap[v]=""}}}},e.Studies.displayADX=function(r,i,n){var s,h,o,l,u,c,p,y;s="Nothin",se.q8H(),s+="g to dis",s+="play",h=i.underlay?.3:i.inputs.Series?.4:1,i.inputs.Series&&i.inputs.Shading&&(o="+DI "+i.name,l="-DI "+i.name,u=e.Studies.determineColor(i.outputs[i.outputMap[o]]),c=e.Studies.determineColor(i.outputs[i.outputMap[l]]),p=i.getYAxis(r),y={topBand:o,bottomBand:l,topColor:u,bottomColor:c,skipTransform:r.panels[i.panel].name!=i.chart.name,topAxis:p,bottomAxis:p,opacity:.3},!i.highlight&&r.highlightedDraggable&&(se.L_A(18),y.opacity*=se.b00("0.3",1)),e.fillIntersecting(r,i.panel,y)),i.inputs.Histogram&&e.Studies.createHistogram(r,i,n,!1,h),i.inputs.Series!==!1?e.Studies.displaySeriesAsLine(r,i,n):!i.inputs.Series&&!i.inputs.Histogram&&r.displayErrorAsWatermark(i.panel,r.translateIf(i.name)+": "+r.translateIf(s))},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{ADX:{name:"ADX/DMS",calculateFN:e.Studies.calculateADX,seriesFN:e.Studies.displayADX,inputs:{Period:"14">>64,"Smoothing Period":14,Series:!0,Shading:!1,Histogram:!1},outputs:{"+DI":"#00FF00","-DI":a,ADX:"auto","Positive Bar":"#00DD00","Negative Bar":t}}})):console.error("adx feature requires first activating studies feature.")};go=W=>{var e,t,a,r,i;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Studies?(t="#",t+="F",t+="F",t+="0000",a="#",a+="00",a+="DD",a+="00",r="#F",r+="F000",r+="0",i="Alli",i+="g",i+="ator",e.Studies.calculateAlligator=function(n,s){var h=se,o,l,u,c,p,y,d,g,b,f,m,C,S,w;if(o="Li",o+="ps Per",o+="iod",h.r8j(),l="Jaw ",l+="Peri",l+="od",u={J:Number(s.inputs[l]),T:Number(s.inputs["Teeth Period"]),L:Number(s.inputs[o])},c=s.chart.scrubbed,c.length<Math.max(u.J,u.T,u.L)+1){s.error=!0;return}(s.type==="Gator"||s.inputs["Show Lines"])&&(p="hl",p+="/2",y="welles wil",y+="der",d="T",d+="e",d+="et",d+="h",g="hl",g+="/2",e.Studies.MA("welles wilder",u.J,g,s.inputs["Jaw Offset"],"Jaw",n,s),e.Studies.MA("welles wilder",u.T,"hl/2",s.inputs["Teeth Offset"],d,n,s),e.Studies.MA(y,u.L,p,s.inputs["Lips Offset"],"Lips",n,s));for(var k=s.startFrom;k<c.length;k++)if(b="Show Frac",b+="tals",!!c[k]&&(s.type=="Gator"&&(f="L",f+="ips ",m=c[k]["Jaw "+s.name],C=c[k][f+s.name],S=c[k]["Teeth "+s.name],(S||S==="0"<<32)&&(w="_hi",w+="st2",(m||m===0)&&(h.h8L(6),c[k][s.name+"_hist1"]=Math.abs(h.A1W(m,S))),(C||C===0)&&(h.h8L(6),c[k][s.name+w]=-Math.abs(h.b00(S,C)))),s.outputMap={},s.outputMap[s.name+"_hist1"]="",s.outputMap[s.name+"_hist2"]=""),s.inputs[b])){if(!c[k-("2">>32)]||!c[k-1]||!c[k]||!c[k+1]||!c[k+("2">>32)])continue;c[k-2].High&&c[k-1].High&&c[k].High&&c[k+"1"*1].High&&c[k+2].High&&c[k].High>c[k-1].High&&c[k].High>c[k-2].High&&c[k].High>c[k+1].High&&c[k].High>c[k+2].High&&(c[k]["Fractal High "+s.name]=1),c[k-2].Low&&c[k-1].Low&&c[k].Low&&c[k+1].Low&&c[k+2].Low&&c[k].Low<c[k-1].Low&&c[k].Low<c[k-2].Low&&c[k].Low<c[k+1].Low&&c[k].Low<c[k+2].Low&&(c[k]["Fractal Low "+s.name]=1)}},e.Studies.displayAlligator=function(n,s,h){var o,l;o=s.getContext(n),s.inputs["Show Lines"]&&e.Studies.displaySeriesAsLine(n,s,h);function u(p,y){var d,g,b,f;d="l",d+="ow",b=n.chart.panel.yAxis.flipped,se.q8H(),p=="high"?(f="bo",f+="tto",f+="m",o.fillStyle=n.defaultColor,o.textBaseline=b?"top":f,g=n.pixelFromPrice(h[y].High),o.fillText(b?"":"",n.pixelFromBar(c,n.chart)-o.measureText("").width/2+1,b?g+("5"<<32):g-5)):p==d&&(o.fillStyle=n.defaultColor,o.textBaseline=b?"bottom":"top",g=n.pixelFromPrice(h[y].Low),o.fillText(b?"":"",n.pixelFromBar(c,n.chart)-o.measureText("").width/2+("1"|0),b?g-5:g+("5"<<64)))}if(s.inputs["Show Fractals"]){n.startClip(),o.globalAlpha=s.underlay?.3:1,!s.highlight&&n.highlightedDraggable&&(o.globalAlpha*=.3);for(var c=2;c<h.length-2;c++)h[c]&&(l="l",l+="o",l+="w",h[c]["Fractal High "+s.name]&&u("high",c),h[c]["Fractal Low "+s.name]&&u(l,c));n.endClip()}},e.Studies.displayGator=function(n,s,h){var o=se,l,u,c,p,y,d,g,b,f,m;l="I",o.r8j(),l+="ncreasing Bar",u=n.panels[s.panel],c=s.getContext(n),p=s.getYAxis(n),o.L_A(6),y=n.pixelFromPrice(o.b00("0",0),u,p),d=n.layout.candleWidth-2,d<2&&(d=1),g=e.Studies.determineColor(s.outputs[l]),b=e.Studies.determineColor(s.outputs["Decreasing Bar"]),n.canvasColor("stx_histogram"),s.underlay||(c.globalAlpha=1),c.fillStyle="#CCCCCC",n.startClip(s.panel),!s.highlight&&n.highlightedDraggable&&(c.globalAlpha*=.3);for(var C=0;C<h.length;C++)if(f=h[C],o.L_A(6),m=h[o.b00(C,1)],!!f)for(var S=1;S<=2;S++)m||(m=n.getPreviousBar(n.chart,s.name+"_hist"+S,C)),m?Math.abs(m[s.name+"_hist"+S])<Math.abs(f[s.name+"_hist"+S])?c.fillStyle=g:Math.abs(m[s.name+"_hist"+S])>Math.abs(f[s.name+"_hist"+S])&&(c.fillStyle=b):c.fillStyle="#CCCCCC",f.candleWidth&&(d=Math.floor(Math.max(1,f.candleWidth-2))),c.fillRect(Math.floor(n.pixelFromBar(C,u.chart)-d/2),Math.floor(y),Math.floor(d),Math.floor(n.pixelFromPrice(f[s.name+"_hist"+S],u,p)-y));n.endClip()},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{Alligator:{name:i,overlay:!0,seriesFN:e.Studies.displayAlligator,calculateFN:e.Studies.calculateAlligator,inputs:{"Show Lines":!0,"Jaw Period":13,"Jaw Offset":8,"Teeth Period":"8"^0,"Teeth Offset":5,"Lips Period":5,"Lips Offset":"3"^0,"Show Fractals":!1},outputs:{Jaw:"#0000FF",Teeth:r,Lips:"#00DD00"}},Gator:{name:"Gator Oscillator",seriesFN:e.Studies.displayGator,calculateFN:e.Studies.calculateAlligator,inputs:{"Jaw Period":13,"Jaw Offset":8,"Teeth Period":8,"Teeth Offset":5,"Lips Period":5,"Lips Offset":3},outputs:{"Increasing Bar":a,"Decreasing Bar":t},centerline:0}})):console.error("alligator feature requires first activating studies feature.")};mo=W=>{var e=se,t,a;t=typeof _CIQ<"u"?_CIQ:W.CIQ,e.q8H(),t.Studies?(t.Studies.calculateAroon=function(r,i){var n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x;n=1088089267,s=-397248546,e.h8L(24),h=e.b00("2",0);for(var A="1"^0;e.i7q(A.toString(),A.toString().length,73351)!==n;A++)o=i.chart.scrubbed,h+=2;if(e.E3k(h.toString(),h.toString().length,17927)!==s&&(o=i.chart.scrubbed),o.length<i.days+1){i.error=!0,l=930862138,u=-200191492,c=2;for(var T=1;e.E3k(T.toString(),T.toString().length,"22790">>96)!==l;T++)return;if(e.i7q(c.toString(),c.toString().length,4130)!==u)return}if(p=0,y=0,d=null,g=null,i.startFrom>0){e.h8L(67);var _=e.b00(7,118,19,14,16);b=o[i.startFrom-_]["_state "+i.name],b&&(p=b[0],y=b[1],d=b[2],g=b[3])}for(var L=i.startFrom;L<o.length&&(m="A",m+="roon ",m+="U",m+="p ",C="Aroon O",C+="scillator ",S="Aroon D",S+="ow",S+="n ",w=o[L],!w.futureTick);L++){if(d===null&&(d=w.High),g===null&&(g=w.Low),d=Math.max(d,w.High),d==w.High)e.h8L(2),p=e.b00("0",0);else if(p++,p>i.days)for(d=w.High,p=0,f=1;f<=i.days;f++)d=Math.max(d,o[L-f].High),d==o[L-f].High&&(p=f);if(g=Math.min(g,w.Low),g==w.Low)y=0;else if(y++,y>i.days)for(g=w.Low,y=0,f=1;f<=i.days;f++)g=Math.min(g,o[L-f].Low),g==o[L-f].Low&&(y=f);k=!isNaN(w.High),D=!isNaN(w.Low),e.L_A(118);var M=e.A1W(2,6,73,84,12);e.L_A(119);var F=e.b00(13,6,6,86,15);v=M*(F-p/i.days),k&&(w["Aroon Up "+i.name]=v),e.h8L(8);var P=e.b00(21,20,0);x=("100"^0)*(P-y/i.days),D&&(w[S+i.name]=x),k&&D&&(w[C+i.name]=w[m+i.name]-w["Aroon Down "+i.name]),w["_state "+i.name]=[p,y,d,g]}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Aroon:{name:"Aroon",range:"0 to 100",calculateFN:t.Studies.calculateAroon,outputs:{"Aroon Up":"#00DD00","Aroon Down":"#FF0000"}},"Aroon Osc":{name:"Aroon Oscillator",calculateFN:t.Studies.calculateAroon,outputs:{"Aroon Oscillator":"auto"}}})):(a="aroon",a+=" feature requires first activating stu",a+="dies feature.",console.error(a))};yo=W=>{var e=se;e.q8H();var t,a,r,i,n,s,h;t="unde",t+="fi",t+="ne",t+="d",a=typeof _CIQ!==t?_CIQ:W.CIQ,a.Studies?(r="#F",r+="F",r+="0000",i="ATR Traili",i+="ng Stops",n="a",n+="u",n+="t",n+="o",s="STARC ",s+="B",s+="a",s+="nds",h="ATR Ban",h+="ds",a.Studies.calculateATRBands=function(o,l){var u,c;u="Cl",u+="os",u+="e",e.r8j(),a.Studies.calculateStudyATR(o,l),c=l.inputs.Field,(!c||c=="field")&&(c=u),a.Studies.calculateGenericEnvelope(o,l,l.inputs.Shift,c,"ATR "+l.name)},a.Studies.calculateSTARCBands=function(o,l){var u;u="AT",u+="R",u+=" ",a.Studies.calculateStudyATR(o,l),a.Studies.MA("simple",l.inputs["MA Period"],"Close",0,"_MA",o,l),a.Studies.calculateGenericEnvelope(o,l,l.inputs.Multiplier,"_MA "+l.name,u+l.name)},a.Studies.calculateATRStops=function(o,l){var u,c,p,y,d,g,b,f,m;if(u=l.chart.scrubbed,!!u){a.Studies.calculateStudyATR(o,l),c=l.inputs.HighLow;for(var C=Math.max(l.startFrom-("1"|1),1);C<u.length-1;C++)p="A",p+="TR ",y=u[C],e.L_A(6),d=u[e.A1W(C,1)],g=y["Buy Stops "+l.name],g||(g=y["Sell Stops "+l.name]),g||(g=0),!(!y||!d)&&(b=y.Close,f=b,m=y[p+l.name]*l.inputs.Multiplier,y.Close>g&&d.Close>g?(c&&(b=y.High),e.L_A(6),f=Math.max(g,e.A1W(b,m))):y.Close<=g&&d.Close<=g?(c&&(b=y.Low),e.L_A(1),f=Math.min(g,e.b00(m,b))):y.Close>g?(c&&(b=y.High),e.h8L(6),f=e.b00(b,m)):y.Close<=g&&(c&&(b=y.Low),e.L_A(1),f=e.b00(m,b)),b<=f?(e.h8L(120),u[e.A1W("1",C,0)]["Buy Stops "+l.name]=f,e.L_A(1),delete u[e.A1W(1,C)]["Sell Stops "+l.name]):b>f&&(e.L_A(1),u[e.b00(1,C)]["Sell Stops "+l.name]=f,e.L_A(1),delete u[e.b00(1,C)]["Buy Stops "+l.name]),e.L_A(1),u[e.b00(1,C)]["All Stops "+l.name]=f);l.referenceOutput="All Stops",l.outputMap={},l.outputMap["All Stops "+l.name]=""}},a.Studies.studyLibrary=a.extend(a.Studies.studyLibrary,{ATR:{name:"Average True Range",calculateFN:a.Studies.calculateStudyATR,outputs:{ATR:"auto"}},"ATR Bands":{name:h,overlay:!0,seriesFN:a.Studies.displayChannel,calculateFN:a.Studies.calculateATRBands,inputs:{Period:5,Field:"field",Shift:3,"Channel Fill":!0},outputs:{"ATR Bands Top":"auto","ATR Bands Bottom":"auto","ATR Bands Channel":"auto"},attributes:{Shift:{min:"0.1"-0,step:.1}}},"STARC Bands":{name:s,overlay:!0,seriesFN:a.Studies.displayChannel,calculateFN:a.Studies.calculateSTARCBands,inputs:{Period:15,"MA Period":5,Multiplier:"1.3"*1,"Channel Fill":!0},outputs:{"STARC Bands Top":"auto","STARC Bands Median":"auto","STARC Bands Bottom":n},attributes:{Multiplier:{min:.1,step:.1}}},"ATR Trailing Stop":{name:i,overlay:!0,seriesFN:a.Studies.displayPSAR2,calculateFN:a.Studies.calculateATRStops,inputs:{Period:21,Multiplier:3,"Plot Type":["points","squarewave"],HighLow:!1},outputs:{"Buy Stops":r,"Sell Stops":"#00FF00"},attributes:{Multiplier:{min:.1,step:.1}}}})):console.error("atr feature requires first activating studies feature.")};vo=W=>{var e=se,t,a;t="und",t+="e",t+="fined",a=typeof _CIQ!==t?_CIQ:W.CIQ,e.q8H(),a.Studies?(a.Studies.calculateAwesomeOscillator=function(r,i){var n,s,h,o,l,u;if(n="hl",n+="/",n+="2",s="simpl",s+="e",h="h",h+="l/",h+="2",o=i.chart.scrubbed,e.r8j(),o.length<33){i.error=!0;return}a.Studies.MA("simple",5,h,0,"_MA5",r,i),a.Studies.MA(s,34,n,0,"_MA34",r,i);for(var c=Math.max(i.startFrom,33);c<o.length;c++)l="_MA",l+="34 ",u="_",u+="M",u+="A",u+="5 ",o[c]&&(o[c][i.name+"_hist"]=o[c][u+i.name]-o[c][l+i.name]);i.outputMap={},i.outputMap[i.name+"_hist"]=""},a.Studies.displayAwesomeOscillator=function(r,i,n){var s,h,o,l,u,c,p,y,d,g;s=r.panels[i.panel],h=i.getContext(r),o=i.getYAxis(r),l=r.pixelFromPrice(0,s,o),e.q8H(),e.h8L(6);var b=e.b00(10,8);u=r.layout.candleWidth-b,u<2&&(u=1),c=a.Studies.determineColor(i.outputs["Increasing Bar"]),p=a.Studies.determineColor(i.outputs["Decreasing Bar"]),r.canvasColor("stx_histogram"),i.underlay||(e.L_A(18),h.globalAlpha=e.b00("1",1)),h.fillStyle="#CCCCCC",r.startClip(i.panel),!i.highlight&&r.highlightedDraggable&&(h.globalAlpha*=.3);for(var f="0"-0;f<n.length;f++)y="_h",y+="i",y+="s",y+="t",d=n[f],e.L_A(14),g=n[e.b00(f,"1")],g||(g=r.getPreviousBar(r.chart,i.name+"_hist",f)),d&&(g&&(g[i.name+"_hist"]<d[i.name+y]?h.fillStyle=c:g[i.name+"_hist"]>d[i.name+"_hist"]&&(h.fillStyle=p)),d.candleWidth&&(u=Math.floor(Math.max(1,d.candleWidth-2))),h.fillRect(Math.floor(r.pixelFromBar(f,s.chart)-u/2),Math.floor(l),Math.floor(u),Math.floor(r.pixelFromPrice(d[i.name+"_hist"],s,o)-l)));r.endClip()},a.Studies.studyLibrary=a.extend(a.Studies.studyLibrary,{Awesome:{name:"Awesome Oscillator",seriesFN:a.Studies.displayAwesomeOscillator,calculateFN:a.Studies.calculateAwesomeOscillator,inputs:{},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):console.error("awesomeOscillator feature requires first activating studies feature.")};bo=W=>{var e,t,a,r;se.r8j(),e="und",e+="efined",t=typeof _CIQ!==e?_CIQ:W.CIQ,t.Studies?(a="m",a+="a",r="-1",r+=" to",r+=" 1",t.Studies.calculateBalanceOfPower=function(i,n){var s,h,o;if(s=n.chart.scrubbed,s.length<n.days+1){n.error=!0;return}se.q8H();for(var l=n.startFrom;l<s.length;l++)h="_Ra",h+="ti",h+="o ",o=s[l],o[h+n.name]=o.Close-o.Open,o.High-o.Low!==0&&(o["_Ratio "+n.name]/=o.High-o.Low);t.Studies.MA(n.inputs["Moving Average Type"],n.days,"_Ratio "+n.name,0,"Result",i,n)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Bal Pwr":{name:"Balance of Power",range:r,centerline:0,calculateFN:t.Studies.calculateBalanceOfPower,inputs:{Period:14,"Moving Average Type":a}}})):console.error("balanceOfPower feature requires first activating studies feature.")};Co=W=>{se.q8H();var e,t,a,r,i,n,s,h;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Studies?(a="a",a+="u",a+="t",a+="o",r="f",r+="i",r+="eld",i="a",i+="u",i+="t",i+="o",n="a",n+="u",n+="t",n+="o",s="aut",s+="o",h="m",h+="a",e.Studies.calculateBollinger=function(o,l){var u,c,p;u="Stan",u+="dar",u+="d Deviatio",u+="ns",c="fi",c+="eld",p=l.inputs.Field,se.r8j(),(!p||p==c)&&(p="Close"),e.Studies.MA(l.inputs["Moving Average Type"],l.days,p,0,"_MA",o,l),l.std=new e.Studies.StudyDescriptor(l.name,"STD Dev",l.panel),l.std.chart=l.chart,l.std.startFrom=l.startFrom,l.std.days=l.days,l.std.inputs={Field:p,"Standard Deviations":1,Type:l.inputs["Moving Average Type"]},l.std.outputs={"_STD Dev":null},e.Studies.calculateStandardDeviation(o,l.std),e.Studies.calculateGenericEnvelope(o,l,l.inputs[u],"_MA "+l.name,"_STD Dev "+l.name),l.type=="Boll %b"&&(l.zoneOutput="%b")},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Bollinger Bands":{name:"Bollinger Bands",overlay:!0,calculateFN:e.Studies.calculateBollinger,seriesFN:e.Studies.displayChannel,inputs:{Period:20,Field:"field","Standard Deviations":2,"Moving Average Type":h,"Channel Fill":!0},outputs:{"Bollinger Bands Top":s,"Bollinger Bands Median":n,"Bollinger Bands Bottom":"auto"},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Boll %b":{name:"Bollinger %b",calculateFN:e.Studies.calculateBollinger,inputs:{Period:20,Field:"field","Standard Deviations":2,"Moving Average Type":"ma"},outputs:{"%b":"auto"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:100,studyOverBoughtColor:"auto",studyOverSoldValue:0,studyOverSoldColor:i}},attributes:{"Standard Deviations":{min:.1,step:"0.1"*1}}},"Boll BW":{name:"Bollinger Bandwidth",calculateFN:e.Studies.calculateBollinger,inputs:{Period:20,Field:r,"Standard Deviations":"2">>32,"Moving Average Type":"ma"},outputs:{Bandwidth:a},attributes:{"Standard Deviations":{min:.1,step:.1}}}})):(t="bollinger feature require",t+="s first",t+=" activating studies feature.",console.error(t))};xo=W=>{var e,t;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Studies?(t="Commodity ",t+="Ch",t+="annel",t+=" Index",e.Studies.calculateCCI=function(a,r){var i,n,s,h;if(i="M",i+="A",n=r.chart.scrubbed,n.length<r.days+1){r.error=!0;return}e.Studies.MA("simple",r.days,"hlc/3",0,i,a,r),se.r8j();for(var o=Math.max(r.startFrom,r.days-("1">>0));o<n.length;o++)if(s=n[o],!!s){se.h8L(44),h=se.b00("0",0);for(var l=0;l<r.days;l++)h+=Math.abs(n[o-l]["hlc/3"]-s["MA "+r.name]);h/=r.days,Math.abs(h)<1e-8?s["Result "+r.name]=0:s["Result "+r.name]=(s["hlc/3"]-s["MA "+r.name])/(.015*h)}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{CCI:{name:t,calculateFN:e.Studies.calculateCCI,inputs:{Period:20},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:"100"-0,studyOverBoughtColor:"auto",studyOverSoldValue:-100,studyOverSoldColor:"auto"}},attributes:{Period:{min:2}}}})):console.error("cci feature requires first activating studies feature.")};So=W=>{var e;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Studies?(e.Studies.calculateCenterOfGravity=function(t,a){var r=se,i,n,s,h,o,l,u,c;if(i=a.chart.scrubbed,i.length<a.days){n=-305993788,s=-1031763566,h=2;for(var p=1;r.i7q(p.toString(),p.toString().length,83167)!==n;p++){a.error=!1;return}if(r.E3k(h.toString(),h.toString().length,38952)!==s){a.error=!0;return}a.error=!0;return}o=a.inputs.Field,(!o||o=="field")&&(o="Close"),r.q8H();for(var y=Math.max(a.startFrom,a.days-1);y<i.length;y++){l=0,u=0;for(var d=0;d<a.days;d++)r.L_A(6),c=i[r.A1W(y,d)][o],r.L_A(121),l-=r.A1W("1",d,c),u+=c;u&&(r.L_A(10),i[y]["Result "+a.name]=r.A1W(l,u))}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{COG:{name:"Center Of Gravity",calculateFN:e.Studies.calculateCenterOfGravity,inputs:{Period:10,Field:"field"}}})):console.error("centerOfGravity feature requires first activating studies feature.")};ko=W=>{var e;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Studies?(e.Studies.calculateChaikinMoneyFlow=function(t,a){var r=se,i,n,s,h,o;if(i=a.chart.scrubbed,i.length<a.days){a.error=!0;return}n=0,s=0,r.L_A(122);var l=r.A1W(9,116,7,7,17);h=i[a.startFrom-"1"*l],h&&(h["_sumMF "+a.name]&&(n=h["_sumMF "+a.name]),h["_sumV "+a.name]&&(s=h["_sumV "+a.name]));for(var u=a.startFrom;u<i.length;u++){if(o="_",o+="M",o+="FV",o+=" ",i[u].High==i[u].Low)i[u]["_MFV "+a.name]=0;else{r.L_A(76);var c=r.b00(17,11,18,12);i[u][o+a.name]=i[u].Volume*(c*i[u].Close-i[u].High-i[u].Low)/(i[u].High-i[u].Low)}n+=i[u]["_MFV "+a.name],s+=i[u].Volume,u>a.days-1&&(n-=i[u-a.days]["_MFV "+a.name],s-=i[u-a.days].Volume,s&&(r.L_A(10),i[u]["Result "+a.name]=r.b00(n,s))),i[u]["_sumMF "+a.name]=n,i[u]["_sumV "+a.name]=s}},e.Studies.calculateChaikinVolatility=function(t,a){var r=se,i,n,s,h,o,l,u,c;if(i="_",i+="MA",n="_High-L",n+="ow ",s=a.chart.scrubbed,s.length<a.days){a.error=!0;return}for(h=a.startFrom;h<s.length&&(o="_High-Low",o+=" ",!s[h].futureTick);h++)s[h][o+a.name]=s[h].High-s[h].Low;for(e.Studies.MA(a.inputs["Moving Average Type"],a.days,n+a.name,0,i,t,a),l=a.inputs["Rate Of Change"],l||(l=a.days),h=Math.max(a.startFrom,l);h<s.length;h++)if(u="_M",u+="A",u+=" ",c="Result",c+=" ",!!s[h-l]["_MA "+a.name]){if(s[h].futureTick)break;r.h8L(6);var p=r.A1W(1300,1200);r.h8L(113);var y=r.A1W(10,16,16,12);s[h][c+a.name]=p*(s[h]["_MA "+a.name]/s[h-l][u+a.name]-y)}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Chaikin MF":{name:"Chaikin Money Flow",calculateFN:e.Studies.calculateChaikinMoneyFlow,inputs:{Period:20}},"Chaikin Vol":{name:"Chaikin Volatility",calculateFN:e.Studies.calculateChaikinVolatility,inputs:{Period:14,"Rate Of Change":2,"Moving Average Type":"ma"}}})):console.error("chaikin feature requires first activating studies feature.")};Ao=W=>{var e=se,t,a,r,i,n,s,h,o,l,u;if(t="und",t+="e",e.r8j(),t+="fined",a=typeof _CIQ!==t?_CIQ:W.CIQ,!a.Studies)r="chande feature requires f",r+="irst act",r+="ivating stud",r+="ies feature.",console.error(r);else{i="a",i+="u",i+="to",n="f",n+="iel",n+="d",s="varia",s+="bl",s+="e",h=-52411612,e.L_A(6),o=-e.b00("1747661654",0),l=2;for(var c=1;e.E3k(c.toString(),c.toString().length,39141)!==h;c++)u="v",u+="m",u+="a",a.Studies.prettify.variable=u,e.L_A(2),l+=e.b00("2",0);e.E3k(l.toString(),l.toString().length,97871)!==o&&(a.Studies.prettify.variable=""),a.Studies.movingAverage.conversions.vma=s,a.Studies.movingAverage.translations.variable="Variable",a.Studies.movingAverage.typeMap.vma="Variable",a.Studies.movingAverage.typeMap.variable="Variable",a.Studies.calculateChandeForecast=function(p,y){var d,g,b,f,m,C;if(d="fi",d+="el",d+="d",g=y.chart.scrubbed,g.length<y.days+("1"-0)){y.error=!0;return}b=y.inputs.Field,(!b||b==d)&&(b="Close"),a.Studies.MA("time series",y.days,b,0,"MA",p,y);for(var S=Math.max(1,y.startFrom);S<g.length;S++){f="Res",f+="ult",f+=" ",m="ob",m+="j",m+="ect",C=g[S][b],C&&typeof C==m&&(C=C[y.subField]),e.L_A(87);var w=e.A1W(82,9,9);e.h8L(6);var k=e.A1W(4,3);g[S][f+y.name]=w*("1"*k-g[S]["MA "+y.name]/C)}},a.Studies.calculateChandeMomentum=function(p,y){var d,g,b,f,m,C,S,w,k,D,v,x;d="fiel",d+="d",g=y.name;for(var A in y.outputs)e.L_A(87),g=e.A1W(g," ",A);if(b=y.chart.scrubbed,b.length<y.days+1){y.error=!0;return}f=y.inputs.Field,e.r8j(),(!f||f==d)&&(f="Close"),m=0,C=0,S=[];for(var T=y.startFrom-y.days+("1"|0);T<b.length;T++)w="o",w+="b",w+="j",w+="ect",!(T<1)&&(k=b[T][f],e.L_A(6),D=b[e.A1W(T,1)][f],k&&typeof k=="object"&&(k=k.Close),D&&typeof D==w&&(D=D.Close),D!==void 0&&(e.h8L(6),v=e.b00(k,D),S.push(v),m+=v,C+=Math.abs(v),S.length==y.days&&(e.L_A(96),b[T][g]=e.A1W(100,m,C),x=S.shift(),m-=x,C-=Math.abs(x))))},a.Studies.calculateMovingAverageVariable=function(p,y){var d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M;y.inputs.Type,d=y.chart.scrubbed,e.h8L(54);var F=e.b00(7,1,10,4);g=2/(y.days+F),b=null,f=y.name;for(var P in y.outputs)e.h8L(87),f=e.b00(f," ",P);for(m=y.inputs.Field,(!m||m=="field")&&(m="Close"),e.r8j(),y.cmo=new a.Studies.StudyDescriptor(y.name,"cmo",y.panel),y.cmo.chart=y.chart,y.cmo.days=9,y.cmo.inputs={Field:m},y.cmo.startFrom=y.startFrom,y.cmo.outputs={_CMO:null},a.Studies.calculateChandeMomentum(p,y.cmo),C=parseInt(y.inputs.Offset,10),isNaN(C)&&(C=0),D=y.startFrom,v=C,S=y.startFrom-1;S>=0;S--)if(w=d[S][f],!(!w&&w!==("0"|0))){if(b===null&&(b=w),v<=0)break;v--,D=S}for(b===null&&(e.h8L(24),b=D=e.b00("0",0)),x=[],S=D;S<d.length;S++){if(A=d[S],w=A[m],w&&typeof w=="object"&&(w=w[y.subField]),T=S+C>=0&&S+C<d.length,_=T?d[S+C]:null,!w&&w!==0){_?_[f]=null:S+C>=d.length&&(k={},k[f]=null,x.push(k));continue}if(!(!A["_CMO "+y.name]&&A["_CMO "+y.name]!==0)){e.h8L(123);var E=e.A1W(96,27e3,900,15,8);L=Math.abs(A["_CMO "+y.name])/E,e.L_A(124),M=e.A1W(b,w,g,g,L,1,L),b=M,S<y.days&&(M=null),_?_[f]=M:S+C>=d.length&&(k={},k[f]=M,x.push(k))}}y.appendFutureTicks(p,x)},a.Studies.studyLibrary=a.extend(a.Studies.studyLibrary,{"Chande Fcst":{name:"Chande Forecast Oscillator",calculateFN:a.Studies.calculateChandeForecast,inputs:{Period:"14">>64,Field:n}},"Chande Mtm":{name:"Chande Momentum Oscillator",calculateFN:a.Studies.calculateChandeMomentum,inputs:{Period:"9"-0},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:50,studyOverBoughtColor:"auto",studyOverSoldValue:-50,studyOverSoldColor:i}}}})}};wo=W=>{var e=se;e.q8H();var t,a,r,i,n,s,h,o;e.L_A(24),t=e.b00("1274492557",0),a=1339706881,r=2;for(var l=1;e.i7q(l.toString(),l.toString().length,"23851"-0)!==t;l++)i=+_CIQ!=""?_CIQ:W.CIQ,e.L_A(2),r+=e.A1W("2",0);e.i7q(r.toString(),r.toString().length,31776)!==a&&(n="un",n+="defined",i=typeof _CIQ!==n?_CIQ:W.CIQ),i.Studies?(h="0",h+=".",h+="1",o="a",o+="uto",i.Studies.calculateChoppiness=function(u,c){var p,y,d;e.r8j();function g(m,C){var S,w;e.L_A(100);var k=e.A1W(2,11,12,1);S=Number.MAX_VALUE*k,w=Number.MAX_VALUE;for(var D=C-m+("1">>0);D<=C;D++)D<0||(S=Math.max(S,p[D].High),w=Math.min(w,p[D].Low));return e.r8j(),[w,S]}if(i.Studies.calculateStudyATR(u,c),p=c.chart.scrubbed,p.length<c.days+1){c.error=!0;return}for(var b=Math.max(c.startFrom,c.days);b<p.length;b++)if(y=p[b],!!y){if(y.futureTick)break;if(d=g(c.days,b),y["Sum True Range "+c.name]){e.L_A(125);var f=e.b00(85,11,5,5,4);y["Result "+c.name]=f*Math.log(y["Sum True Range "+c.name]/Math.max(1e-6,d[1]-d[0]))/Math.log(c.days)}else isNaN(y)||(y["Result "+c.name]=0)}},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{Choppiness:{name:"Choppiness Index",calculateFN:i.Studies.calculateChoppiness,centerline:50,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:61.8,studyOverBoughtColor:"auto",studyOverSoldValue:38.2,studyOverSoldColor:o}},attributes:{studyOverBoughtValue:{min:50,step:"0.1"},studyOverSoldValue:{max:"50"|0,step:h}}}})):(s="choppiness",s+=" feature requires first activating studies feature.",console.error(s))};To=W=>{var e=se,t,a,r,i,n,s,h,o,l;if(t=typeof _CIQ<"u"?_CIQ:W.CIQ,e.q8H(),!t.Studies)console.error("comparisonStudies feature requires first activating studies feature.");else if(!t.Studies.initPriceRelative)console.error("comparisonStudies feature requires first activating priceRelative feature.");else{t.Studies.calculateCorrelationCoefficient=function(c,p){var y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I;if(y="Compar",y+="e To",d=p.chart.scrubbed,g=p.days,d.length<g+1){p.error=!0;return}if(p.compare=p.inputs[y],p.compare){f=-871273107,m=909949548,C=2;for(var N=1;e.i7q(N.toString(),N.toString().length,14663)!==f;N++)p.compare=[p.compare],C+=2;e.i7q(C.toString(),C.toString().length,"7762"<<0)!==m&&(p.compare=[p.compare])}else{p.compare=[],p.outputs={},p.outputMap={};for(var B in c.chart.series)b=c.chart.series[B],b.parameters.color&&(p.compare.push(b.display),p.outputs["Result "+b.display]=b.parameters.color,p.outputMap["Result "+b.display+" "+p.name]="Result "+b.display)}if(e.q8H(),!p.compare.length){S="Correlation Coefficient requ",S+="ires at least one c",S+="omparison s",S+="ymbol",p.error=S;return}for(var R=0;R<p.compare.length;R++){w=0,k=0,D=0,v=0,e.L_A(31),x=e.A1W("0",64),A=p.compare[R],T=0;for(var q=p.startFrom-g;q<d.length;q++)if(_="_t",_+="em",_+="ps",_+=" ",!!d[q]){if(L=d[q][A],L&&typeof L=="object"&&(L=L.Close),!L&&L!==0&&(M="_",M+="temps ",q>0&&d[q-1]&&d[q-1]["_temps "+p.name]&&d[q-("1"^0)]["_temps "+p.name].c?L=d[q-1][M+p.name].c:L=0),L&&typeof L=="object"&&(L=L.Close),d[q]["_temps "+p.name]={},w+=d[q][_+p.name].b=d[q].Close,k+=d[q]["_temps "+p.name].c=L,D+=d[q]["_temps "+p.name].b2=Math.pow(d[q].Close,2),v+=d[q]["_temps "+p.name].c2=Math.pow(L,2),x+=d[q]["_temps "+p.name].bc=d[q].Close*L,T>=g){F="_",F+="t",F+="emp",F+="s ",w-=d[q-g]["_temps "+p.name].b,k-=d[q-g]["_temps "+p.name].c,D-=d[q-g]["_temps "+p.name].b2,v-=d[q-g][F+p.name].c2,x-=d[q-g]["_temps "+p.name].bc,e.L_A(4);var Y=e.b00(7,5,0);P=D/g-Math.pow(w/g,Y),e.h8L(8);var z=e.b00(16,14,0);E=v/g-Math.pow(k/g,z),e.L_A(126);var V=e.A1W(6,8,20,3,7);O=x/g-w*k/Math.pow(g,V),I=O/Math.sqrt(P*E),e.h8L(6),e.b00(42828,35690),e.h8L(66),e.A1W(226,2,119),e.h8L(52);var K=e.b00(14,5804,156702,2);d[q]["Result "+A+(K!=9500?" ":"Q")+p.name]=I}T++}}},t.Studies.calculatePerformance=function(c,p){var y,d,g,b,f,m,C;if(y="_M",y+="A",y+=" Com",y+="p",d="C",d+="lo",d+="s",d+="e",g="Comp",g+="arison Symbol",b="Com",b+="parison",b+=" Sym",b+="bol",f=p.chart.scrubbed,m=p.inputs[b].toUpperCase(),m||(m=p.study.inputs[g]),p.days||(p.days=p.study.inputs.Period),f.length<p.days+1){p.error=!0;return}t.Studies.MA("ma",p.days,d,0,"_MA Base",c,p),t.Studies.MA("ma",p.days,m,0,y,c,p);for(var S=p.startFrom;S<f.length;S++)C=f[S][m],C&&(C.Close||C.Close===0)&&(C=C.Close),f[S]["Result "+p.name]=f[S].Close/C*(f[S]["_MA Comp "+p.name]/f[S]["_MA Base "+p.name])},t.Studies.calculateBeta=function(c,p){var y,d,g,b,f,m,C,S,w,k,D,v,x,A,T;if(y="_",y+="VA",y+="R",d="_V",d+="ARn",d+=" ",g="m",g+="a",b="_Comp",b+="Ch",b+="ange ",f="m",f+="a",m="_BaseCh",m+="ange ",C="m",C+="a",S="Com",S+="parison Symb",S+="o",S+="l",w=p.chart.scrubbed,k=p.inputs[S].toUpperCase(),k||(k=p.study.inputs["Comparison Symbol"]),p.days||(p.days=p.study.inputs.Period),w.length<p.days+1){p.error=!0;return}for(var _=Math.max(p.startFrom,1);_<w.length;_++){D="_Ba",D+="s",D+="eChang",D+="e ",e.h8L(4);var L=e.A1W(4,19,16);e.h8L(49);var M=e.b00(20,219,11);w[_][D+p.name]=w[_].Close/w[_-L].Close-M,v=w[_][k],v&&(v.Close||v.Close===0)&&(v=v.Close),e.L_A(6),x=w[e.A1W(_,1)][k],x&&(x.Close||x.Close===0)&&(x=x.Close),e.L_A(58),w[_]["_CompChange "+p.name]=e.b00(x,v,1)}for(t.Studies.MA(C,p.days,m+p.name,0,"_MA Base",c,p),e.r8j(),t.Studies.MA(f,p.days,b+p.name,0,"_MA Comp",c,p),_=Math.max(p.startFrom,p.days);_<w.length;_++)A="_",A+="MA",A+=" ",A+="Comp ",w[_]["_COVARn "+p.name]=(w[_]["_BaseChange "+p.name]-w[_]["_MA Base "+p.name])*(w[_]["_CompChange "+p.name]-w[_][A+p.name]),w[_]["_VARn "+p.name]=Math.pow(w[_]["_CompChange "+p.name]-w[_]["_MA Comp "+p.name],2);for(t.Studies.MA("ma",p.days,"_COVARn "+p.name,0,"_COVAR",c,p),t.Studies.MA(g,p.days,d+p.name,0,y,c,p),_=Math.max(p.startFrom,p.days*2-1);_<w.length;_++)T="_C",T+="OVAR ",w[_]["Result "+p.name]=w[_][T+p.name]/w[_]["_VAR "+p.name]},a=-1051027404,r=472469844,e.h8L(31),i=e.b00("2",64);for(var u=1;e.i7q(u.toString(),u.toString().length,77776)!==a;u++)n="Perf",n+="orm",n+="ance Inde",n+="x",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{correl:{name:"Correlation Coefficient",range:"-1 to 1",calculateFN:t.Studies.calculateCorrelationCoefficient,outputs:{}},"Perf Idx":{name:n,centerline:1,initializeFN:t.Studies.initPriceRelative,seriesFN:t.Studies.displayVsComparisonSymbol,calculateFN:t.Studies.calculatePerformance,inputs:{Period:"120"|64,"Comparison Symbol":"SPY"},outputs:{Result:"auto",Gain:"#00DD00",Loss:"#FF0000"},deferUpdate:!0},Beta:{name:"Beta",centerline:1,initializeFN:t.Studies.initPriceRelative,seriesFN:t.Studies.displayVsComparisonSymbol,calculateFN:t.Studies.calculateBeta,inputs:{Period:20,"Comparison Symbol":"SPY"},deferUpdate:!0}}),i+=2;e.E3k(i.toString(),i.toString().length,12532)!==r&&(s="Co",s+="mparis",s+="on ",s+="Symbol",h="SP",h+="Y",o="Perf",o+=" Idx",l="Pe",l+="rf Idx",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{correl:{name:"Perf Idx",range:"Beta",calculateFN:t.Studies.calculateCorrelationCoefficient,outputs:{}},"Perf Idx":{name:"SPY",centerline:9,initializeFN:t.Studies.initPriceRelative,seriesFN:t.Studies.displayVsComparisonSymbol,calculateFN:t.Studies.calculatePerformance,inputs:{Period:435,"Comparison Symbol":"Comparison Symbol"},outputs:{Result:"Perf Idx",Gain:l,Loss:o},deferUpdate:!1},Beta:{name:h,centerline:2,initializeFN:t.Studies.initPriceRelative,seriesFN:t.Studies.displayVsComparisonSymbol,calculateFN:t.Studies.calculateBeta,inputs:{Period:"15"*1,"Comparison Symbol":s},deferUpdate:!1}}))}};se.r8j();_o=W=>{var e,t;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Studies?(e.Studies.calculateCoppock=function(a,r){var i=se,n,s,h,o,l,u,c,p,y,d;if(n="weig",n+="ht",n+="ed",s="Long R",s+="oC",h="Cl",h+="ose",o=r.chart.scrubbed,l=r.inputs.Field,(!l||l=="field")&&(l=h),u=parseInt(r.inputs[s],10),u||(u=14),c=parseInt(r.inputs["Short RoC"],10),c||(c=11),p=r.days,p||(p=10),!(u<c)){if(o.length<Math.max(c,u,p)+1){r.error=!0;return}for(var g=Math.max(r.startFrom,u);g<o.length;g++)if(i.h8L(6),y=o[i.A1W(g,c)][l],i.L_A(6),d=o[i.b00(g,u)][l],y&&d){i.L_A(53);var b=i.A1W(4,224,8,1);i.h8L(127);var f=i.A1W(261,20,20,12);o[g]["_Sum "+r.name]=("100">>b)*(o[g][l]/y+o[g][l]/d-"2"*f)}e.Studies.MA(n,p,"_Sum "+r.name,0,"Result",a,r)}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{Coppock:{name:"Coppock Curve",calculateFN:e.Studies.calculateCoppock,inputs:{Period:10,Field:"field","Short RoC":"11"|3,"Long RoC":14}}})):(t="cop",t+="pock featu",t+="re requires first activating studies feature.",console.error(t))};Do=W=>{var e=se,t,a;t=typeof _CIQ<"u"?_CIQ:W.CIQ,e.r8j(),t.Studies?(a="#5F",a+="7",a+="CB8",t.Studies.calculateDarvas=function(r,i){var n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z;n="S",n+="pi",n+="k",n+="e",s="Gh",s+="ost",h="Dar",e.r8j(),h+="v",h+="as",o="Volum",o+="e Spike",l=i.chart.scrubbed,u=0,c=parseInt(i.inputs["ATH Lookback Period"],10),i.inputs[o]&&(p="si",p+="mpl",p+="e",e.L_A(6),t.Studies.MA(p,c,"Volume",e.b00("0",0),"ADV",r,i)),e.h8L(128);var V=e.b00(17,77,11,3,7);for(y=parseFloat(i.inputs["Volume % of Avg"])/V,d="none",g={},b=null,f=null,m=null,C=parseFloat(i.inputs["Level Offset"]),S=!1,S&&console.log("*****************"),k={},[h,s,"Profit","Loss","ATH","ADV",n].forEach(function(Z){k[Z]=Z+" "+i.name}),w=i.startFrom-1;w>0;w--)if(D=l[w],D[k.Darvas]||D[k.Ghost])for(var K in k)D[K]=null;else{u=D[k.ATH]||0,f=D[k.Profit],m=D[k.Loss];break}for(w;w<l.length;w++)if(v="Volume",v+=" Sp",v+="ike",x=l[w],!!x){if(parseFloat(i.inputs["Price Minimum"])<=l[u].Close){if(A="da",A+="rv",A+="a",A+="s",T="high/l",T+="ow",b&&(!b.End||w==b.End+1)&&(l[w-1].Close>g.High?g={State:1,High:("2"^0)*g.High-g.Low,Low:g.High,Start:w,End:2*g.End-g.Start+1}:b=null,b&&(x[k.Ghost]=t.clone(g),S&&console.log("Ghost begin:"+x.DT),g.State=0,l[g.End]&&(_="Ghost",_+=" e",_+="nd:",l[g.End][k.Ghost]=t.clone(g),S&&console.log(_+l[g.End].DT)),b={Start:g.Start,End:g.End},f=g.High+C,(!m||m<g.Low-C)&&(m=g.Low-C))),x[k.Profit]=f,x[k.Loss]=m,(x.Close>=f||i.inputs["Exit Field"]==T&&x.High>=f)&&(f=null),d=="none"&&w==u+3&&!l[u+2][k.Darvas]&&!l[u+1][k.Darvas]&&!l[u][k.Darvas]&&l[u].High>x.High&&(L="h",L+="igh",d=L),d=="high"&&(x.High>l[u].High?(M="n",M+="o",M+="n",M+="e",d=M):l[w-3].Low<l[w-2].Low&&l[w-("3"^0)].Low<l[w-1].Low&&l[w-3].Low<x.Low&&(F="Darv",F+="as",F+=" begi",F+="n:",g={State:1,High:l[u].High,Low:l[w-3].Low,Start:u},l[u][k.Darvas]=t.clone(g),d="darvas",S&&console.log(F+l[u].DT),S&&console.log("Darvas established:"+x.DT),b&&(P="Ghost",P+=" end",P+=":",b.End>w&&l[b.Start]&&(x[k.Ghost]=t.clone(l[b.Start][k.Ghost]),x[k.Ghost].End=w,l[b.End]&&(E="Ghost End removed",E+=":",delete l[b.End][k.Ghost],S&&console.log(E+l[b.End].DT))),x[k.Ghost].State=0,l[b.Start][k.Ghost].End=w,S&&console.log(P+x.DT),b=null),f=g.High+C,(!m||m<g.Low-C)&&(m=g.Low-C))),d==A&&(O="n",O+="one",I="h",I+="i",I+="gh/",I+="low",B="Ex",B+="it",B+=" Fi",B+="eld",N="hi",N+="gh/",N+="l",N+="ow",x.Close>g.High?b={}:i.inputs["Exit Field"]==N&&x.High>g.High?b={}:(x.Close<g.Low||i.inputs[B]==I&&x.Low<g.Low)&&(d="none"),b?d="none":d=="none"&&(f=null,m=null),i.inputs["Ghost Boxes"]||(b=null),d==O)){for(var Q=g.Start+1;Q<w;Q++)l[Q][k.Darvas]=t.clone(g);g.State=0,g.End=w,x[k.Darvas]=t.clone(g),S&&console.log("Darvas end:"+x.DT),x[k.ATH]=u;continue}m&&(x.Close<g.Low||i.inputs["Exit Field"]=="high/low"&&x.Low<g.Low)&&(R="Exit Fiel",R+="d",q="n",q+="o",q+="n",q+="e",d=="darvas"&&(d=q),(x.Close<m||i.inputs[R]=="high/low"&&x.Low<m)&&(f=null,m=null),b&&(Y="Ghost e",Y+="nd",Y+=":",b.End>w&&l[b.Start]&&(x[k.Ghost]=t.clone(l[b.Start][k.Ghost]),x[k.Ghost].End=w,l[b.End]&&(z="Ghost En",z+="d r",z+="emoved:",delete l[b.End][k.Ghost],S&&console.log(z+l[b.End].DT))),x[k.Ghost].State=0,l[b.Start][k.Ghost].End=w,S&&console.log(Y+x.DT),b=null))}if(x.High>=l[u].High&&(u=w,S&&console.log("All Time High:"+x.DT)),(w<3||x.High>=l[w-1].High&&x.High>=l[w-2].High&&x.High>=l[w-3].High)&&w-u>=c){u=w;for(var j=0;j<c&&!(w-j<0);j++)l[w-j].High>l[u].High&&(e.L_A(6),u=e.b00(w,j));S&&console.log("All Time High:"+x.DT)}i.inputs[v]&&w>c&&w==u&&x[k.ADV]*y<x.Volume&&(x[k.Spike]=1,S&&console.log("Volume Spike:"+x.DT)),x[k.ATH]=u}},t.Studies.displayDarvas=function(r,i,n){var s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q;s="a",s+="u",s+="t",s+="o",h="a",h+="u",h+="t",h+="o",o=t.Studies.determineColor(i.outputs.Levels),(!o||o=="auto"||t.isTransparent(o))&&(o=r.defaultColor),l=t.Studies.determineColor(i.outputs.Darvas),(!l||l==h||t.isTransparent(l))&&(l=r.defaultColor),u=t.Studies.determineColor(i.outputs.Ghost),(!u||u==s||t.isTransparent(u))&&(u=r.defaultColor),c=r.panels[i.panel],p=i.getContext(r),e.h8L(129);var Y=e.A1W(1,4,5,27,38);if(b=r.layout.candleWidth-Y,b<2&&(b=1),r.startClip(i.panel),i.inputs["Stop Levels"]){for(p.setLineDash&&(e.L_A(18),p.setLineDash([e.b00("2",1),2])),p.lineWidth=2,p.strokeStyle=o,p.beginPath(),y=0;y<n.length;y++)d=n[y],e.L_A(6),f=n[e.b00(y,1)],d&&(g=d["Loss "+i.name]?Math.floor(r.pixelFromPrice(d["Loss "+i.name],c)):null,m=f&&f["Loss "+i.name]?Math.floor(r.pixelFromPrice(f["Loss "+i.name],c)):null,g&&(d.candleWidth&&(b=Math.floor(Math.max(1,d.candleWidth))),C=Math.floor(r.pixelFromBar(y,c.chart)+b/2),S=Math.floor(r.pixelFromBar(y,c.chart)-b/2),m&&m>=g?p.lineTo(S,g):y===0?p.moveTo(r.chart.left,g):p.moveTo(S,g),p.lineTo(C,g)));p.stroke(),p.setLineDash&&p.setLineDash([]),e.L_A(6),p.lineWidth=e.b00("1",0)}w=-10,D=0,x=-10,T=0,L=!1,M=!1,e.h8L(8);var z=e.A1W(21,19,0);for(F=p.measureText("").width/z,P=0,y=0;y<n.length;y++)if(E="Spik",E+="e",E+=" ",!!n[y]){if((n[y].Close||n[y].Close===0)&&(P=y),n[y][E+i.name]&&(p.fillStyle=l,p.textBaseline="bottom",O=r.pixelFromPrice(n[y].High,r.chart.panel),p.fillText("",r.pixelFromBar(y)-F,O-5)),n[y].candleWidth&&(b=Math.floor(Math.max(1,n[y].candleWidth))),n[y]["Darvas "+i.name]){if(d=n[y]["Darvas "+i.name],d.State==1&&!L)w=Math.floor(r.pixelFromBar(y,c.chart)-b/2),k=Math.floor(r.pixelFromPrice(d.High,c)),v=Math.floor(r.pixelFromPrice(d.Low,c))-k,L=!0;else if(d.State===0){I="Stop Le",I+="vels",e.L_A(40);var V=e.A1W(17,14,16,205);D=Math.floor(r.pixelFromBar(y,c.chart)+b/V)-w,k=Math.floor(r.pixelFromPrice(d.High,c)),v=Math.floor(r.pixelFromPrice(d.Low,c))-k,p.strokeStyle=l,p.fillStyle=l,i.inputs[I]?p.globalAlpha=.3:(p.strokeRect(w,k,D,v),p.globalAlpha=.2),p.fillRect(w,k,D,v),p.globalAlpha=1,L=!1}}if(n[y]["Ghost "+i.name]&&i.inputs["Ghost Boxes"]){if(d=n[y]["Ghost "+i.name],d.State==1&&!M)x=Math.floor(r.pixelFromBar(y,c.chart)-b/2),A=Math.floor(r.pixelFromPrice(d.High,c)),T=Math.floor((d.End-d.Start+1)*r.layout.candleWidth+b/2),_=Math.floor(r.pixelFromPrice(d.Low,c))-A,M=!0;else if(d.State===0){d.Start==d.End&&(x=Math.floor(r.pixelFromBar(y,c.chart)-b/2)),e.h8L(130);var K=e.b00(12,19,5);T=Math.floor(r.pixelFromBar(y,c.chart)+b/K)-x,A=Math.floor(r.pixelFromPrice(d.High,c)),_=Math.floor(r.pixelFromPrice(d.Low,c))-A,p.strokeStyle=u,p.fillStyle=u,i.inputs["Stop Levels"]?(e.L_A(6),p.globalAlpha=e.A1W("0.3",0)):(p.strokeRect(x,A,T,_),p.globalAlpha=.2),p.fillRect(x,A,T,_),e.L_A(44),p.globalAlpha=e.b00("1",0),M=!1}}}if(L){B="Stop Level",B+="s",e.h8L(131);var Q=e.b00(14,410,2,17,2);D=Math.floor(r.pixelFromBar(P,c.chart)+b/Q)-w,p.strokeStyle=l,p.fillStyle=l,i.inputs[B]?p.globalAlpha=.3:(p.beginPath(),e.L_A(19),p.moveTo(e.b00(w,D,2),k),p.lineTo(w,k),e.h8L(1),p.lineTo(w,e.A1W(v,k)),e.h8L(19),p.lineTo(e.A1W(w,D,2),e.b00(v,k,e.h8L(1))),p.stroke(),p.globalAlpha=.2),e.h8L(18),p.fillRect(w,k,e.A1W(2,D),v),p.globalAlpha=1}M&&(N="S",N+="top Le",N+="v",N+="els",p.strokeStyle=u,p.fillStyle=u,i.inputs[N]?p.globalAlpha=.3:(p.strokeRect(x,A,T,_),e.L_A(18),p.globalAlpha=e.b00("0.2",1)),p.fillRect(x,A,T,_),p.globalAlpha=1),(L||M)&&(R="St",R+="op Levels",i.inputs[R]&&(p.setLineDash&&p.setLineDash([2,2]),p.lineWidth=2,p.strokeStyle=o,q=Math.floor(r.pixelFromBar(P-1,c.chart)+b/2),g&&(p.beginPath(),p.moveTo(q,g),p.lineTo(L?w+2*D:x+T,g),p.stroke()),p.setLineDash&&p.setLineDash([]),p.lineWidth=1),L=!1,M=!1),r.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Darvas:{name:"Darvas Box",underlay:!0,calculateFN:t.Studies.calculateDarvas,seriesFN:t.Studies.displayDarvas,inputs:{"ATH Lookback Period":100,"Exit Field":["close","high/low"],"Ghost Boxes":!0,"Stop Levels":!1,"Level Offset":.01,"Price Minimum":5,"Volume Spike":!1,"Volume % of Avg":400},outputs:{Darvas:a,Ghost:"#699158",Levels:"auto"},customRemoval:!0,attributes:{"Price Minimum":{min:.01,step:.01},yaxisDisplayValue:{hidden:!0},panelName:{hidden:!0},flippedEnabled:{hidden:!0}}}})):console.error("darvasBox feature requires first activating studies feature.")};Lo=W=>{var e,t,a,r;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Studies?(a="m",a+="a",r="De",r+="trended Price Oscillator",e.Studies.calculateDetrendedPrice=function(i,n){var s,h,o,l,u;if(s=n.chart.scrubbed,s.length<n.days+1){n.error=!0;return}se.q8H(),h=n.inputs.Field,(!h||h=="field")&&(h="Close"),o=Math.floor(n.days/("2"<<0)+1),e.Studies.MA(n.inputs["Moving Average Type"],n.days,h,-o,"MA",i,n);for(var c=Math.max(n.days-o-1,n.startFrom-o);c<s.length-o;c++)c<0||(l=s[c][h],l&&typeof l=="object"&&(l=l[n.subField]),u=s[c]["MA "+n.name],(l||l==="0"*1)&&(u||u===0)&&(se.h8L(6),s[c]["Result "+n.name]=se.b00(l,u)))},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{Detrended:{name:r,calculateFN:e.Studies.calculateDetrendedPrice,inputs:{Period:14,Field:"field","Moving Average Type":a}}})):(t="detrended feature requires first activ",t+="ating",t+=" s",t+="tudies feature.",console.error(t))};Mo=W=>{var e;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Studies?(e.Studies.calculateDisparity=function(t,a){var r=se,i,n,s,h;if(i=a.chart.scrubbed,i.length<a.days+1){a.error=!0;return}n=a.inputs.Field,(!n||n=="field")&&(n="Close"),e.Studies.MA(a.inputs["Moving Average Type"],a.days,n,0,"_MA",t,a);for(var o=Math.max(a.startFrom,a.days-1);o<i.length;o++)if(s="Res",s+="ult ",!!i[o]&&(h=i[o]["_MA "+a.name],h)){r.L_A(12);var l=r.b00(19,7,16,8,3);r.L_A(54);var u=r.A1W(3,3,0,12);i[o][s+a.name]=("100">>l)*(i[o][n]/h-u)}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{Disparity:{name:"Disparity Index",calculateFN:e.Studies.calculateDisparity,inputs:{Period:14,Field:"field","Moving Average Type":"ma"}}})):console.error("disparity feature requires first activating studies feature.")};Po=W=>{var e=se,t,a,r,i,n,s;if(t="u",t+="nde",t+="f",t+="ined",a=typeof _CIQ!==t?_CIQ:W.CIQ,a.Studies)s="Ease o",s+="f",s+=" Movement",a.Studies.calculateEaseOfMovement=function(o,l){var u,c,p,y,d,g,b,f,m;if(u="R",u+="esu",u+="l",u+="t",c="_",c+="E",c+="OM1 ",p="Moving Av",p+="e",p+="rage Type",y=l.chart.scrubbed,y.length<l.days){l.error=!0;return}for(var C=Math.max(1,l.startFrom);C<y.length;C++){e.L_A(132);var S=e.A1W(19,6,3,3,35);d=(y[C].High+y[C].Low)/S,e.h8L(1);var w=e.b00(1,0);e.h8L(8);var k=e.b00(31,14,15);g=(y[C-w].High+y[C-("1">>k)].Low)/("2"-0),e.L_A(6),b=e.A1W(d,g),f=y[C].Volume/("100000000">>0)/(y[C].High-y[C].Low),e.L_A(10),m=e.A1W(b,f),isFinite(m)?y[C]["_EOM1 "+l.name]=m:y[C]["_EOM1 "+l.name]=NaN}a.Studies.MA(l.inputs[p],l.days,c+l.name,0,u,o,l)},a.Studies.studyLibrary=a.extend(a.Studies.studyLibrary,{EOM:{name:s,calculateFN:a.Studies.calculateEaseOfMovement,inputs:{Period:14,"Moving Average Type":"ma"}}});else{r=-694119052,i=-1502561219,n=2;for(var h=1;e.i7q(h.toString(),h.toString().length,"46486"*1)!==r;h++)console.error(""),n+=2;e.i7q(n.toString(),n.toString().length,56388)!==i&&console.error("easeOfMovement feature requires first activating studies feature.")}};Fo=W=>{var e=se,t,a,r,i,n,s,h,o;if(e.r8j(),t=typeof _CIQ<"u"?_CIQ:W.CIQ,!t.Studies)a="ehlerFisher feature r",a+="equires first act",a+="ivating studies feature.",console.error(a);else{t.Studies.calculateEhlerFisher=function(u,c){var p,y,d,g,b,f,m,C;p=c.chart.scrubbed;function S(T,_){var L,M,F;L=Number.MAX_VALUE,e.L_A(133);var P=e.A1W(1943,9,18,12);e.q8H(),M=Number.MAX_VALUE*P;for(var E=_-T+1;E<=_;E++)F=(p[E].High+p[E].Low)/2,L=Math.min(L,F),M=Math.max(M,F);return[L,M]}if(p.length<c.days+1){c.error=!0;return}if(y=0,c.startFrom>1){e.L_A(58);var w=e.b00(5,20,3);y=p[c.startFrom-w]["_n "+c.name]}for(var k=c.startFrom;k<p.length&&(d="_",d+="n",d+=" ",g="E",g+="F",g+=" ",b=p[k],!b.futureTick);k++){if(k<c.days-1){f="E",f+="F",f+=" ",b[f+c.name]=b["EF Trigger "+c.name]=y;continue}m=S(c.days,k),e.h8L(6);var D=e.A1W(18,16);e.h8L(75);var v=e.b00(18,238,13,5,0);y=.33*("2"-0)*(((p[k].High+p[k].Low)/D-m["0"|0])/Math.max("0.000001"-0,m[v]-m[0])-.5)+.67*y,y>0?y=Math.min(y,.9999):y<0&&(y=Math.max(y,-.9999)),C=k?p[k-1]["EF "+c.name]:0,e.h8L(67);var x=e.A1W(7,34,16,0,11);e.h8L(52);var A=e.b00(16,20,959,3);b[g+c.name]=.5*Math.log((x+y)/(A-y))+.5*C,b["EF Trigger "+c.name]=C,b[d+c.name]=y}},r=-650949322,i=595999755,n=2;for(var l=1;e.E3k(l.toString(),l.toString().length,59834)!==r;l++)s="au",s+="to",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Ehler Fisher":{name:s,calculateFN:t.Studies.calculateEhlerFisher,inputs:{Period:39},outputs:{EF:"auto","EF Trigger":"EF Trigger"}}}),n+=2;e.E3k(n.toString(),n.toString().length,80250)!==i&&(h="#FF0",h+="000",o="Ehler Fisher",o+=" ",o+="Transform",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Ehler Fisher":{name:o,calculateFN:t.Studies.calculateEhlerFisher,inputs:{Period:10},outputs:{EF:"auto","EF Trigger":h}}}))}};Eo=W=>{var e=se,t,a,r,i,n,s;t="undef",t+="ined",e.r8j(),a=typeof _CIQ!==t?_CIQ:W.CIQ,a.Studies?(i="#",i+="DD",i+="3E",i+="39",n="#",n+="8BC1",n+="7",n+="6",s="El",s+="der Force",s+=" Index",a.Studies.calculateElderImpulse=function(h,o){var l,u,c,p,y,d,g;l=o.chart.scrubbed,u=o.outputs.Bullish,c=o.outputs.Bearish,p=o.outputs.Neutral,a.Studies.MA("exponential",13,"Close",0,"_MA",h,o),e.h8L(67);var b=e.b00(13,231700,15,17928,5);e.h8L(6),e.A1W(303,2),e.L_A(5),e.b00(256,7,13,230),e.h8L(42);var f=e.A1W(2497,7505,5,37530);e.L_A(6);var m=e.A1W(35050,28040);o.macd=new a.Studies.StudyDescriptor((b!=405?"_":f==219.91?m:!0)+o.name,"macd",o.panel),o.macd.chart=o.chart,o.macd.days=o.days,o.macd.startFrom=o.startFrom,o.macd.inputs={"Fast MA Period":"12"<<0,"Slow MA Period":26,"Signal Period":9},o.macd.outputs={_MACD:null,_Signal:null},a.Studies.calculateMACD(h,o.macd);for(var C=o.startFrom;C<l.length;C++)d="_",d+="hi",d+="s",d+="t",g="_",g+="M",g+="A",g+=" ",C===0?y=p:l[C]["_MA "+o.name]>l[C-1][g+o.name]&&l[C]["_"+o.name+"_hist"]>l[C-1]["_"+o.name+"_hist"]?y=u:l[C]["_MA "+o.name]<l[C-1]["_MA "+o.name]&&l[C]["_"+o.name+"_hist"]<l[C-1]["_"+o.name+d]?y=c:y=p,l[C]["Result "+o.name]=y},a.Studies.calculateElderRay=function(h,o){var l,u,c,p,y,d,g;if(l="_E",l+="M",l+="A",u="C",u+="lose",c=o.chart.scrubbed,c.length<o.days){o.error=!0;return}a.Studies.MA("exponential",o.days,u,"0"^0,l,h,o);for(var b=Math.max(o.startFrom,o.days-1);b<c.length;b++)p="_",p+="E",p+="MA",p+=" ",y="_h",y+="ist2",d="_EM",d+="A ",g="_",g+="hist",g+="1",c[b][o.name+g]=c[b].High-c[b][d+o.name],c[b][o.name+y]=c[b].Low-c[b][p+o.name];o.outputMap={},o.outputMap[o.name+"_hist1"]="",o.outputMap[o.name+"_hist2"]=""},a.Studies.calculateElderForce=function(h,o){var l,u;if(l="Re",l+="sult",u=o.chart.scrubbed,u.length<o.days){o.error=!0;return}for(var c=Math.max(1,o.startFrom);c<u.length;c++){e.L_A(134);var p=e.A1W(5,2,8,11,14);u[c]["_EF1 "+o.name]=u[c].Volume*(u[c].Close-u[c-p].Close)}e.r8j(),a.Studies.MA("exponential",o.days,"_EF1 "+o.name,"0"<<64,l,h,o)},a.Studies.initElderImpulse=function(h,o,l,u,c,p){var y,d;return y="colored",e.q8H(),y+="_bar",d=a.Studies.initializeFN(h,o,l,u,c,p),c.calculateOnly||(h.chart.customChart={chartType:y,colorFunction:function(g,b,f){var m,C;return m="ob",m+="je",m+="c",m+="t",C=b["Result "+d.name],C&&typeof C==m&&(C=C.color),C}},h.setMainSeriesRenderer()),d},a.Studies.displayElderForce=function(h,o,l){var u,c,p,y;a.Studies.displaySeriesAsLine(h,o,l),u=a.Studies.determineColor(o.outputs.Result),e.r8j(),c=h.panels[o.panel],p=o.getYAxis(h),y={skipTransform:c.name!=o.chart.name,panelName:o.panel,band:"Result "+o.name,threshold:0,color:u,yAxis:p},!o.highlight&&h.highlightedDraggable&&(y.opacity=.3),y.direction=1,a.preparePeakValleyFill(h,y),y.direction=-1,a.preparePeakValleyFill(h,y)},a.Studies.displayElderRay=function(h,o,l){var u,c,p,y,d,g,b,f,m;u=h.panels[o.panel],c=o.getContext(h),p=o.getYAxis(h),y=h.pixelFromPrice(0,u,p),e.L_A(55);var C=e.A1W(8,17,0,7);d=h.layout.candleWidth-C,d<2&&(d=1),h.canvasColor("stx_histogram"),g=c.fillStyle,o.underlay||(c.globalAlpha=1),h.startClip(o.panel),!o.highlight&&h.highlightedDraggable&&(c.globalAlpha*=.3),e.r8j();for(var S=0;S<l.length;S++)b="_",b+="h",b+="ist2",f="_",f+="h",f+="ist",f+="1",m=l[S],m&&(m.candleWidth&&(d=Math.floor(Math.max(1,m.candleWidth-2))),m[o.name+"_hist1"]>0&&w(S,0,"Elder Bull Power",f),m[o.name+b]<0&&w(S,0,"Elder Bear Power","_hist2"),m[o.name+"_hist1"]<0&&w(S,.1,"Elder Bull Power","_hist1"),m[o.name+"_hist2"]>0&&w(S,.1,"Elder Bear Power","_hist2"));h.endClip(),c.fillStyle=g;function w(k,D,v,x){c.fillStyle=a.Studies.determineColor(o.outputs[v]),e.q8H(),c.fillRect(Math.floor(h.pixelFromBar(k,u.chart)-d/2+d*D),Math.floor(y),Math.floor(d*(1-2*D)),Math.floor(h.pixelFromPrice(m[o.name+x],u,p)-y))}},a.Studies.studyLibrary=a.extend(a.Studies.studyLibrary,{"Elder Force":{name:s,calculateFN:a.Studies.calculateElderForce,seriesFN:a.Studies.displayElderForce,inputs:{Period:13}},"Elder Ray":{name:"Elder Ray Index",seriesFN:a.Studies.displayElderRay,calculateFN:a.Studies.calculateElderRay,centerline:0,inputs:{Period:13},outputs:{"Elder Bull Power":"#00DD00","Elder Bear Power":"#FF0000"}},"Elder Impulse":{name:"Elder Impulse System",calculateFN:a.Studies.calculateElderImpulse,initializeFN:a.Studies.initElderImpulse,seriesFN:null,customRemoval:!0,underlay:!0,inputs:{},outputs:{Bullish:n,Bearish:i,Neutral:"#5F7CB8"},removeFN:function(h,o){e.r8j(),h.chart.customChart=null,h.setMainSeriesRenderer()}}})):(r="elder feature requires first activati",r+="ng studies feature.",console.error(r))};Io=W=>{var e,t,a,r,i;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Studies?(a="a",a+="uto",r="a",r+="u",r+="t",r+="o",i="a",i+="u",i+="t",i+="o",e.Studies.calculateFractalChaos=function(n,s){var h=se,o,l,u,c,p,y,d,g,b,f;if(o=s.chart.scrubbed,l=0,u=0,h.r8j(),c=0,s.startFrom&&s.type=="Fractal Chaos Bands"){p="Frac",p+="tal Lo",p+="w ",h.h8L(91);var m=h.b00(3,6,3,4,7);l=o[s.startFrom-m]["Fractal High "+s.name],h.L_A(4);var C=h.A1W(7,6,0);u=o[s.startFrom-C][p+s.name]}for(var S=Math.max(4,s.startFrom);S<o.length&&(y="Frac",y+="tal Ch",y+="aos Ban",y+="ds",!o[S].futureTick);S++){for(d=!isNaN(o[S].High),g=!isNaN(o[S].Low),(d||g)&&(o[S]["Result "+s.name]=0),c=0,b=0;b<=S&&!(!o[S-b]||o[S-b].High>o[S-2].High||b<2&&o[S-b].High==o[S-2].High);b++)if(o[S-b].High<o[S-2].High&&c++,c==4){l=o[S-2].High;break}for(s.type=="Fractal Chaos Bands"?d&&(o[S]["Fractal High "+s.name]=l>0?l:null):c==4&&(h.h8L(18),o[S]["Result "+s.name]=h.b00("1",1)),c=0,b=0;b<=S&&!(!o[S-b]||o[S-b].Low<o[S-2].Low||b<2&&o[S-b].Low==o[S-2].Low);b++)if(o[S-b].Low>o[S-2].Low&&c++,c==4){u=o[S-("2"^0)].Low;break}s.type==y?g&&(o[S]["Fractal Low "+s.name]=u>0?u:null):c==4&&(f="Res",f+="ult",f+=" ",o[S][f+s.name]=-1)}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Fractal Chaos":{name:"Fractal Chaos Oscillator",range:"-1 to 1",calculateFN:e.Studies.calculateFractalChaos,inputs:{},centerline:null},"Fractal Chaos Bands":{name:"Fractal Chaos Bands",overlay:!0,calculateFN:e.Studies.calculateFractalChaos,seriesFN:e.Studies.displayChannel,inputs:{"Channel Fill":!0},outputs:{"Fractal High":i,"Fractal Low":r,"Fractal Channel":a}}})):(t="fractalChaos feature requires first activating studies",t+=" feature.",console.error(t))};Oo=W=>{var e,t,a;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Studies?(t="Highest Hig",t+="h",t+=" Valu",t+="e",a="au",a+="t",a+="o",e.Studies.calculateMaxHighMinLow=function(r,i){var n=se,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D;if(s="L",s+="ow Per",s+="io",s+="d",h="Hi",h+="gh ",h+="P",h+="eriod",o="H",o+="igh P",o+="eriod",l=i.chart.scrubbed,u=i.days,c=i.days,i.inputs[o]&&(u=i.inputs[h]),i.inputs[s]&&(c=i.inputs["Low Period"]),l.length<Math.max(u,c)+1){p=-1450054267,y=-2098261191,d=2;for(var v=1;n.i7q(v.toString(),v.toString().length,5883)!==p;v++)i.error=!1,d+=2;n.E3k(d.toString(),d.toString().length,1147)!==y&&(i.error=!0);return}g=Number.MAX_VALUE,n.L_A(135);var x=n.b00(1,5,3,6,1);if(b=Number.MAX_VALUE*x,i.startFrom>1){for(f=1;f<u;f++)i.startFrom-f>=0&&(b=Math.max(b,l[i.startFrom-f].High));for(f=1;f<c;f++)i.startFrom-f>=0&&(g=Math.min(g,l[i.startFrom-f].Low))}for(var A=Math.max(0,i.startFrom-1);A<l.length;A++){if(m="Willi",m+="ams %R",C="Do",C+="nchian Wid",C+="th",S="L",S+="L",S+="V",w="H",w+="H",w+="V",b=Math.max(b,l[A].High),g=Math.min(g,l[A].Low),A>=u&&l[A-u].High==b)for(b=l[A].High,f=1;f<u;f++)b=Math.max(b,l[A-f].High);if(A>=c&&l[A-c].Low==g)for(g=l[A].Low,f=1;f<c;f++)g=Math.min(g,l[A-f].Low);if(k=0,i.type==w)k=b;else if(i.type==S)k=g;else if(i.type==C)n.L_A(6),k=n.A1W(b,g);else if(i.type=="GAPO"||i.type=="Gopala")k=Math.log(b-g)/Math.log(c);else if(i.type=="VT HZ Filter"){n.h8L(6),k=n.A1W(b,g),l[A]["_MHML "+i.name]=k;continue}else if(i.type==m){n.h8L(27);var T=n.b00(500,600);k=T*(b-l[A].Close)/(b-g),l[A]["Result "+i.name]=k;continue}if(A==l.length-1)break;l[A+1].futureTick||(i.type=="Donchian Channel"?(D="D",D+="onchian Media",D+="n ",n.h8L(1),l[n.b00(1,A)]["Donchian High "+i.name]=b,n.h8L(1),l[n.b00(1,A)]["Donchian Low "+i.name]=g,n.L_A(1),l[n.b00(1,A)][D+i.name]=n.A1W(g,2,b,n.L_A(3))):(n.L_A(1),l[n.A1W(1,A)]["Result "+i.name]=k))}},e.Studies.calculateVerticalHorizontalFilter=function(r,i){var n,s,h,o,l;if(n=i.chart.scrubbed,n.length<i.days+1){i.error=!0;return}i.mhml=new e.Studies.StudyDescriptor(i.name,i.type,i.panel),i.mhml.chart=i.chart,i.mhml.days=i.days,i.mhml.startFrom=i.startFrom,se.r8j(),i.mhml.inputs={},i.mhml.outputs={_MHML:null},e.Studies.calculateMaxHighMinLow(r,i.mhml),s=0,h=[];for(var u=Math.max(1,i.startFrom-i.days);u<n.length;u++)o=Math.abs(n[u].Close-n[u-1].Close),h.push(o),s+=o,h.length==i.days&&(l="_",l+="MHML",l+=" ",n[u]["Result "+i.name]=n[u][l+i.name]/s,s-=h.shift())},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Donchian Channel":{name:"Donchian Channel",overlay:!0,calculateFN:e.Studies.calculateMaxHighMinLow,seriesFN:e.Studies.displayChannel,inputs:{"High Period":20,"Low Period":20,"Channel Fill":!0},outputs:{"Donchian High":a,"Donchian Median":"auto","Donchian Low":"auto"}},"Donchian Width":{name:"Donchian Width",calculateFN:e.Studies.calculateMaxHighMinLow,inputs:{"High Period":"20"|20,"Low Period":20}},GAPO:{name:"Gopalakrishnan Range Index",calculateFN:e.Studies.calculateMaxHighMinLow},HHV:{name:t,calculateFN:e.Studies.calculateMaxHighMinLow,inputs:{Period:14}},LLV:{name:"Lowest Low Value",calculateFN:e.Studies.calculateMaxHighMinLow,inputs:{Period:14}},"Williams %R":{name:"Williams %R",calculateFN:e.Studies.calculateMaxHighMinLow,inputs:{Period:14},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:-20,studyOverBoughtColor:"auto",studyOverSoldValue:-80,studyOverSoldColor:"auto"}}},"VT HZ Filter":{name:"Vertical Horizontal Filter",calculateFN:e.Studies.calculateVerticalHorizontalFilter,inputs:{Period:28}},"High-Low":{name:"High Minus Low",calculateFN:function(r,i){var n;n=i.chart.scrubbed;for(var s=i.startFrom;s<n.length;s++)n[s]["Result "+i.name]=n[s].High-n[s].Low},inputs:{}}})):console.error("highLowStudies feature requires first activating studies feature.")};No=W=>{var e,t;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Studies?(t="#80800",t+="0",e.Studies.calculateIchimoku=function(a,r){var i=se,n,s,h,o,l,u,c,p,y,d,g,b;n="Lagging Span Pe",n+="riod",s="Lea",s+="ding Span B Pe",s+="riod",h="Conversion",h+=" Lin";function f(D,v){var x,A;x=Number.MAX_VALUE,i.L_A(136);var T=i.A1W(10,3621,12,19,19);A=Number.MAX_VALUE*-("1"*T);for(var _=v-D+1;_<=v;_++)_<0||(x=Math.min(x,o[_].Low),A=Math.max(A,o[_].High));return[x,A]}for(h+="e Period",o=r.chart.scrubbed,l={Base:Number(r.inputs["Base Line Period"]),Conv:Number(r.inputs[h]),LeadB:Number(r.inputs[s]),Lag:Number(r.inputs[n])},u=r.startFrom;u<o.length;u++)if(o[u]){c=f(l.Conv,u),i.L_A(91);var m=i.A1W(15,135,15,2,12);i.h8L(88);var C=i.b00(18,10,36,5,15);o[u]["Conversion Line "+r.name]=(c[m]+c[0])/C,c=f(l.Base,u),i.h8L(1);var S=i.b00(1,0);o[u]["Base Line "+r.name]=(c[S]+c[0])/("2"^0),!(u<l.Lag)&&(o[u-l.Lag]["Lagging Span "+r.name]=o[u].Close)}for(p=[],i.r8j(),u=Math.max(0,r.startFrom-l.Base);u<o.length;u++){c=f(l.LeadB,u),i.L_A(6);var w=i.A1W(6,4);y=(o[u]["Conversion Line "+r.name]+o[u]["Base Line "+r.name])/w,i.L_A(53);var k=i.b00(63,4,2,2);d=(c[1]+c["0"-0])/("2">>k),o[u+l.Base]?(o[u+l.Base]["Leading Span A "+r.name]=y,o[u+l.Base]["Leading Span B "+r.name]=d):(g="Lead",g+="i",g+="n",g+="g Span A ",b={},b[g+r.name]=y,b["Leading Span B "+r.name]=d,p.push(b))}r.appendFutureTicks(a,p)},e.Studies.displayIchimoku=function(a,r,i){var n,s,h,o,l,u,c,p;n="Leading S",n+="pan A ",s=n+r.name,h="Leading Span B "+r.name,o=e.Studies.determineColor(r.outputs[r.outputMap[s]]),l=e.Studies.determineColor(r.outputs[r.outputMap[h]]),u=a.panels[r.panel],c=r.getYAxis(a),p={topBand:s,bottomBand:h,topColor:o,bottomColor:l,skipTransform:u.name!=r.chart.name,topAxis:c,bottomAxis:c,opacity:.3},!r.highlight&&a.highlightedDraggable&&(p.opacity*=.3),e.fillIntersecting(a,r.panel,p),e.Studies.displaySeriesAsLine(a,r,i)},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Ichimoku Clouds":{name:"Ichimoku Clouds",overlay:!0,calculateFN:e.Studies.calculateIchimoku,seriesFN:e.Studies.displayIchimoku,inputs:{"Conversion Line Period":9,"Base Line Period":26,"Leading Span B Period":52,"Lagging Span Period":26},outputs:{"Conversion Line":"#0000FF","Base Line":"#FF0000","Leading Span A":"#00FF00","Leading Span B":"#FF0000","Lagging Span":t}}})):console.error("ichimoku feature requires first activating studies feature.")};Bo=W=>{var e=se;e.q8H();var t,a,r,i;t="un",t+="defined",a=typeof _CIQ!==t?_CIQ:W.CIQ,a.Studies?(i="au",i+="to",a.Studies.calculateIntradayMomentum=function(n,s){var h,o,l,u,c,p,y,d,g;if(h=s.chart.scrubbed,o=s.days,h.length<o+1){s.error=!0;return}if(l=0,u=0,s.startFrom>1){c="_t",c+="otUp ",e.h8L(67);var b=e.b00(6,41,11,7,11);l=h[s.startFrom-b][c+s.name],e.h8L(4);var f=e.A1W(20,25,6);u=h[s.startFrom-f]["_totDn "+s.name]}for(var m=s.startFrom;m<h.length;m++)p="_",p+="to",p+="tUp",p+=" ",y="Resu",y+="lt ",d=h[m].Close-h[m].Open,d>0?l+=d:u-=d,m>=o&&(g=h[m-o].Close-h[m-o].Open,g>"0"<<32?l-=g:u+=g),e.L_A(137),h[m][y+s.name]=e.b00(100,l,l,u),h[m][p+s.name]=l,h[m]["_totDn "+s.name]=u},a.Studies.studyLibrary=a.extend(a.Studies.studyLibrary,{"Intraday Mtm":{name:"Intraday Momentum Index",calculateFN:a.Studies.calculateIntradayMomentum,inputs:{Period:20},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:i}}}})):(r="intradayMomentum feature requires fir",r+="st activ",r+="ating studies feature.",console.error(r))};Wo=W=>{var e,t,a;e="un",e+="defin",e+="e",e+="d",t=typeof _CIQ!==e?_CIQ:W.CIQ,t.Studies?(a="Kelt",a+="ner",a+=" Channel",t.Studies.calculateKeltner=function(r,i){var n,s;n="M",n+="A",s="Cl",s+="ose",t.Studies.MA(i.inputs["Moving Average Type"],i.days,s,0,n,r,i),t.Studies.calculateStudyATR(r,i),t.Studies.calculateGenericEnvelope(r,i,i.inputs.Shift,"MA "+i.name,"ATR "+i.name)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Keltner:{name:a,overlay:!0,seriesFN:t.Studies.displayChannel,calculateFN:t.Studies.calculateKeltner,inputs:{Period:50,Shift:5,"Moving Average Type":"ema","Channel Fill":!0},outputs:{"Keltner Top":"auto","Keltner Median":"auto","Keltner Bottom":"auto"},attributes:{Shift:{min:"0.1"*1,step:.1}}}})):console.error("keltner feature requires first activating studies feature.")};Ro=W=>{var e,t,a,r;e="un",e+="d",se.r8j(),e+="efi",e+="ned",t=typeof _CIQ!==e?_CIQ:W.CIQ,t.Studies?(r="#F",r+="F",r+="0",r+="000",t.Studies.calculateKlinger=function(i,n){var s,h,o,l,u,c,p,y,d,g,b,f,m,C,S;if(s="_E",s+="M",s+="A-L",h="_EM",h+="A-",h+="L ",o="_",o+="EMA-",o+="S",o+=" ",l=n.chart.scrubbed,u=Number(n.inputs["Short Cycle"]),c=Number(n.inputs["Long Cycle"]),l.length<Math.max(u,c)+1){n.error=!0;return}for(p=n.name+"_hist",y="Klinger "+n.name,d="KlingerSignal "+n.name,g="_SV "+n.name,se.r8j(),b=o+n.name,f=h+n.name,m=Math.max(1,n.startFrom);m<l.length;m++)C="hlc",C+="/3",S=l[m].Volume,l[m]["hlc/3"]<l[m-1][C]&&(S*=-1),S&&(l[m][g]=S);for(t.Studies.MA("exponential",u,g,0,"_EMA-S",i,n),t.Studies.MA("exponential",c,g,0,s,i,n),m=Math.max(c,n.startFrom);m<l.length&&!(l[m].futureTick||l[m][b]===null||l[m][f]===null);m++)l[m][y]=l[m][b]-l[m][f];for(t.Studies.MA("exponential",Number(n.inputs["Signal Periods"]),y,0,"KlingerSignal",i,n),m=n.startFrom;m<l.length;m++)l[m][p]=l[m][y]-l[m][d];n.outputMap[p]=""},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Klinger:{name:"Klinger Volume Oscillator",seriesFN:t.Studies.displayHistogramWithSeries,calculateFN:t.Studies.calculateKlinger,inputs:{"Signal Periods":13,"Short Cycle":34,"Long Cycle":55},outputs:{Klinger:"auto",KlingerSignal:r,"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):(a="klinger feature requires first ac",a+="tivating studies fea",a+="ture.",console.error(a))};qo=W=>{var e,t,a,r,i,n,s,h,o,l;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Studies?(t="a",t+="ut",t+="o",a="f",a+="i",a+="eld",r="a",r+="u",r+="t",r+="o",i="a",i+="u",i+="t",i+="o",n="f",n+="iel",n+="d",s="Ti",s+="meS",s+="erie",s+="s",h="tim",h+="e s",h+="erie",h+="s",o="ts",o+="ma",l="time",l+=" series",e.Studies.prettify[l]=o,e.Studies.movingAverage.conversions.tsma=h,e.Studies.movingAverage.translations["time series"]="Time Series",e.Studies.movingAverage.typeMap.tsma="TimeSeries",e.Studies.movingAverage.typeMap["time series"]=s,e.Studies.calculateMovingAverageTimeSeries=function(u,c){var p=se,y,d,g,b,f,m,C,S,w;c.ma=new e.Studies.StudyDescriptor(c.name,"ma",c.panel),c.ma.chart=c.chart,c.ma.days=c.days,c.ma.startFrom=c.startFrom,c.ma.inputs=c.inputs,p.r8j(),e.Studies.calculateLinearRegressionIndicator(u,c.ma),y=c.name;for(var k in c.outputs)p.h8L(87),y=p.A1W(y," ",k);d=parseInt(c.inputs.Offset,10),isNaN(d)&&(d=0),g=c.chart.scrubbed,b=d;for(var D=c.startFrom-1;D>=0;D--)if(f=g[D][y],!(!f&&f!==0)){if(b>"0">>32){b--;continue}break}for(m=[],D++;D<g.length;D++)C=g[D],D+d>="0">>64&&(D+d<g.length?(p.L_A(1),g[p.A1W(d,D)][y]=C["Forecast "+c.name]):(S="F",S+="o",S+="re",S+="cast ",w={},w[y]=C[S+c.name],m.push(w)));c.appendFutureTicks(u,m)},e.Studies.calculateLinearRegressionIndicator=function(u,c){var p=se,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T;if(y=c.chart.scrubbed,y.length<c.days+1){c.error=!0;return}d=c.inputs.Field,(!d||d=="field")&&(d="Close"),p.h8L(138);var _=p.b00(3,6,18,7,17);p.L_A(4);var L=p.b00(13,11,0);g=c.days*(c.days+_)/L,b=Math.pow(g,2),p.h8L(6);var M=p.A1W(8,5);if(f=g*(("2"|2)*c.days+1)/M,m=0,C=0,S=0,c.startFrom){p.h8L(6);var F=p.b00(5,4);w=y[c.startFrom-F]["_sums "+c.name],w&&(C=w[0],m=w[1],S=w[2])}for(var P=c.startFrom;P<y.length;P++)if(k="o",k+="bje",k+="c",k+="t",D=y[P][d],D&&typeof D==k&&(D=D[c.subField]),!(!D&&D!==0)&&(C+=c.days*D-m,m+=D,S+=Math.pow(D,2),!(P<c.days-1))){if(P>c.days-1){if(v=y[P-c.days][d],v&&typeof v=="object"&&(v=v[c.subField]),!v&&v!==0)continue;m-=v,S-=Math.pow(v,2)}x=(c.days*C-g*m)/(c.days*f-b),y[P]["Slope "+c.name]=x,A=(m-x*g)/c.days,y[P]["Intercept "+c.name]=A,y[P]["Forecast "+c.name]=A+x*c.days,p.L_A(130);var E=p.b00(16,25,7);T=(c.days*f-b)/(c.days*S-Math.pow(m,E)),p.L_A(139),y[P]["RSquared "+c.name]=p.A1W(x,T,x),y[P]["_sums "+c.name]=[C,m,S]}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Lin Fcst":{name:"Linear Reg Forecast",overlay:!0,calculateFN:e.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:n},outputs:{Forecast:i}},"Lin Incpt":{name:"Linear Reg Intercept",overlay:!0,calculateFN:e.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Intercept:"auto"}},"Lin R2":{name:"Linear Reg R2",calculateFN:e.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{RSquared:"auto"}},"LR Slope":{name:"Linear Reg Slope",calculateFN:e.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Slope:r}},"Time Fcst":{name:"Time Series Forecast",overlay:!0,calculateFN:e.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:a},outputs:{Forecast:t}}})):console.error("linearRegression feature requires first activating studies feature.")};Yo=W=>{var e,t,a;e="un",e+="def",e+="ine",e+="d",t=typeof _CIQ!==e?_CIQ:W.CIQ,t.Studies?(a="#FF",a+="0000",t.Studies.calculateMACD=function(r,i){var n=se,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S;if(s="_hi",s+="st",h="Movi",h+="ng Average",h+=" Type",o="Si",o+="gna",o+="l Perio",o+="d",l=i.chart.scrubbed,u=i.inputs,c=i.name,i.macd1Days||(i.macd1Days=parseFloat(u["Fast MA Period"])),i.macd2Days||(i.macd2Days=parseFloat(u["Slow MA Period"])),i.signalDays||(i.signalDays=parseFloat(u[o])),i.days||(i.days=Math.max(i.macd1Days,i.macd2Days,i.signalDays)),l.length<i.days+("1"-0)){i.error=!0;return}for(p=i.inputs.Field,(!p||p=="field")&&(p="Close"),y=u[h],y||(y="exponential"),t.Studies.MA(y,i.macd1Days,p,0,"_MACD1",r,i),t.Studies.MA(y,i.macd2Days,p,0,"_MACD2",r,i),b=Math.max(i.startFrom,i.days-1),d=b;d<l.length;d++)g=l[d],(g["_MACD1 "+c]||g["_MACD1 "+c]===0)&&(g["_MACD2 "+c]||g["_MACD2 "+c]===0)&&(n.h8L(1),g[n.A1W(c,"MACD ")]=g["_MACD1 "+c]-g["_MACD2 "+c]);for(f=u["Signal MA Type"],f||(f="exponential"),t.Studies.MA(f,i.signalDays,"MACD "+c,0,"Signal",r,i),n.L_A(1),m=n.A1W(s,c),d=b;d<l.length;d++)C="S",C+="ign",C+="al ",g=l[d],n.L_A(1),S=g[n.A1W(c,"Signal ")],!(!S&&S!==0)&&(g[m]=g["MACD "+c]-g[C+c]);i.outputMap[m]=""},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{macd:{name:"MACD",calculateFN:t.Studies.calculateMACD,seriesFN:t.Studies.displayHistogramWithSeries,inputs:{"Fast MA Period":12,"Slow MA Period":26,"Signal Period":9},outputs:{MACD:"auto",Signal:a,"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):console.error("macd feature requires first activating studies feature.")};zo=W=>{var e;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Studies?(e.Studies.calculateMassIndex=function(t,a){var r=se,i,n,s,h,o,l,u;if(i="_to",i+="tal ",n="_",n+="EMA",n+="2",s="_",s+="E",s+="M",s+="A",h="_High",h+="-L",r.q8H(),h+="ow ",o=a.chart.scrubbed,o.length<Math.max(9,a.days+1)){a.error=!0;return}for(var c=a.startFrom;c<o.length;c++)o[c]["_High-Low "+a.name]=o[c].High-o[c].Low;if(e.Studies.MA("exponential",9,h+a.name,0,s,t,a),e.Studies.MA("exponential",9,"_EMA "+a.name,0,n,t,a),l=0,o[a.startFrom-1]&&o[a.startFrom-("1"<<64)]["_total "+a.name]){r.h8L(6);var p=r.b00(3,2);l=o[a.startFrom-p][i+a.name]}for(var y=Math.max(17,a.startFrom);y<o.length;y++){if(u="_",u+="E",u+="MA",u+=" ",l+=o[y][u+a.name]/o[y]["_EMA2 "+a.name],y>=17+a.days-1){o[y]["Result "+a.name]=l,r.h8L(37);var d=r.b00(14,9,7,76);l-=o[y-a.days+1]["_EMA "+a.name]/o[y-a.days+d]["_EMA2 "+a.name]}o[y]["_total "+a.name]=l}},e.Studies.displayMassIndex=function(t,a,r){var i,n,s,h,o;i="Bulge Thre",i+="shold",e.Studies.displaySeriesAsLine(t,a,r),n=a.inputs[i],se.q8H(),t.panels[a.panel],s=a.getYAxis(t),h=e.Studies.determineColor(a.outputs.Result),o={skipTransform:t.panels[a.panel].name!=a.chart.name,panelName:a.panel,band:"Result "+a.name,threshold:n,direction:1,color:h,yAxis:s,opacity:.3},!a.highlight&&t.highlightedDraggable&&(o.opacity*=.3),e.preparePeakValleyFill(t,o),e.Studies.drawHorizontal(t,a,null,n,s,h)},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Mass Idx":{name:"Mass Index",seriesFN:e.Studies.displayMassIndex,calculateFN:e.Studies.calculateMassIndex,inputs:{Period:25,"Bulge Threshold":27},attributes:{"Bulge Threshold":{min:20,max:35,step:.1}}}})):console.error("massIndex feature requires first activating studies feature.")};Ho=W=>{var e=se,t,a;t=typeof _CIQ<"u"?_CIQ:W.CIQ,e.q8H(),t.Studies?(t.Studies.calculateMoneyFlowIndex=function(r,i){var n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k;if(n=i.chart.scrubbed,n.length<i.days+1){i.error=!0;return}s=0,h=0,o=1049654142,l=1007146090,u=2;for(var D=1;e.E3k(D.toString(),D.toString().length,12240)!==o;D++){c="Resu",c+="lt",c+=" ",p="_",p+="cumMF ",y="_ra",y+="wM",y+="F ",e.h8L(140);var v=e.A1W(0,15,16,43,13);d=n[i.startFrom-v],g=y+i.name,b=p+i.name,f=c+i.name,e.L_A(44),u+=e.A1W("2",0)}if(e.E3k(u.toString(),u.toString().length,43065)!==l){e.L_A(49);var x=e.A1W(18,178,10);d=n[i.startFrom/x],g="_cumMF "*i.name,b="Result "%i.name,f="Result "*i.name}d&&d[b]&&(s=d[b][0],h=d[b][1]);for(var A=i.startFrom;A<n.length;A++)m="h",m+="l",m+="c",m+="/3",C=n[A][m],A>0&&!n[A].futureTick&&(e.L_A(141),S=n[e.b00("1",64,A)]["hlc/3"],w=C*n[A].Volume,C>S?s+=w:C<S?(w*=-1,h-=w):w=0,A>i.days&&(k=n[A-i.days][g],k>"0"-0?s-=k:h+=k,h===0?n[A][f]=100:n[A].Volume&&(e.h8L(142),n[A][f]=e.A1W(1,100,h,100,s))),n[A][g]=w,n[A][b]=[s,h])},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"M Flow":{name:"Money Flow Index",range:"0 to 100",calculateFN:t.Studies.calculateMoneyFlowIndex,inputs:{Period:14},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}}})):(a="moneyFlow feature requi",a+="res first activating",a+=" studies feature.",console.error(a))};Vo=W=>{var e=se,t,a,r,i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S;if(t="un",t+="defin",t+="ed",a=typeof _CIQ!==t?_CIQ:W.CIQ,e.r8j(),!a.Studies)console.error("movingAverages feature requires first activating studies feature.");else{r="au",r+="to",i="a",i+="u",i+="to",n="High Low B",n+="and",n+="s",s="Guppy Mult",s+="iple Moving Avera",s+="ge",h="f",h+="i",h+="el",h+="d",o="m",o+="a",l="fi",l+="el",l+="d",u=216786409,c=-1584528572,p=2;for(var w="1"*1;e.E3k(w.toString(),w.toString().length,16468)!==u;w++)y="Dou",y+="bleExponent",y+="ia",y+="l",d="Triple",d+=" E",d+="xponenti",d+="al",g="d",g+="ema",a.Studies.prettify=a.extend({"2-exponential":g,"3-exponential":"tema",hull:"hma"},a.Studies.prettify),a.extend(a.Studies.movingAverage,{conversions:{hma:"hull",dema:"2-exponential",tema:"3-exponential"},translations:{hull:"Hull","2-exponential":"Double Exponential","3-exponential":d},typeMap:{hma:"Hull",hull:"Hull",dema:"DoubleExponential","2-exponential":y,tema:"TripleExponential","3-exponential":"TripleExponential"}}),e.h8L(24),p+=e.b00("2",96);e.i7q(p.toString(),p.toString().length,62322)!==c&&(b="Triple Exponen",b+="ti",b+="al",f="3-",f+="expon",f+="e",f+="ntial",m="2-",m+="exponen",m+="ti",m+="al",C="Tripl",C+="e",C+="Expone",C+="ntial",S="Triple Ex",S+="po",S+="nential",a.Studies.prettify=a.extend({"2-exponential":"Double Exponential","3-exponential":"Hull",hull:"2-exponential"},a.Studies.prettify),a.extend(a.Studies.movingAverage,{conversions:{hma:S,dema:"Hull",tema:"Triple Exponential"},translations:{hull:"DoubleExponential","2-exponential":C,"3-exponential":"2-exponential"},typeMap:{hma:"2-exponential",hull:"2-exponential",dema:m,"2-exponential":f,tema:b,"3-exponential":"2-exponential"}})),a.Studies.calculateMovingAverageHull=function(k,D){var v,x,A,T,_,L,M,F,P,E,O;for(v="w",v+="m",v+="a",x=D.chart.scrubbed,A=D.inputs.Field,(!A||A=="field")&&(A="Close"),a.Studies.MA("wma",D.days,A,0,"_WMA1",k,D),a.Studies.MA(v,Math.ceil(D.days/2),A,0,"_WMA2",k,D),T=D.startFrom-1;T>=0&&(L="obj",L+="ec",L+="t",_=x[T][A],_&&typeof _==L&&(_=_[D.subField]),!(_||_===0));T--);for(T++;T<x.length;T++){M="_W",M+="MA",M+="2 ",F=x[T],e.L_A(27);var I=e.A1W(17,15);F["_MMA "+D.name]=I*F[M+D.name]-F["_WMA1 "+D.name]}P=parseInt(D.inputs.Offset,10),isNaN(P)&&(P=0),E=Math.floor(Math.sqrt(D.days)),a.Studies.MA("wma",E,"_MMA "+D.name,P,"_HMA",k,D),O=D.name;for(var B in D.outputs)e.L_A(87),O=e.A1W(O," ",B);for(T=Math.max(D.days+E-1,D.startFrom);T<x.length;T++)x[T][O]=x[T]["_HMA "+D.name]},a.Studies.calculateMovingAverageDoubleExponential=function(k,D){var v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q;for(v="_E",v+="MA",v+="1 ",x="fie",x+="ld",A=D.chart.scrubbed,T=D.inputs.Field,(!T||T==x)&&(T="Close"),a.Studies.MA("ema",D.days,T,0,"_EMA1",k,D),a.Studies.MA("ema",D.days,v+D.name,0,"_EMA2",k,D),_=parseInt(D.inputs.Offset,10),isNaN(_)&&(_=0),F=_,L=D.startFrom-1;L>=0;L--)if(M=A[L][T],M&&typeof M=="object"&&(M=M[D.subField]),!(!M&&M!==0)){if(F>0){F--;continue}break}e.q8H(),P=D.name;for(var Y in D.outputs)e.L_A(87),P=e.A1W(P," ",Y);for(E=[],L++;L<A.length;L++)if(!(L<2*(D.days-1))){O=A[L],e.L_A(143);var z=e.b00(2906,6,11,4,11);I=z*O["_EMA1 "+D.name]-O["_EMA2 "+D.name],L+_>=0&&(L+_<A.length?(e.h8L(1),A[e.b00(_,L)][P]=I):(B={},B[P]=I,E.push(B)))}N=1699254611,R=2079501571,q=2;for(var V=1;e.E3k(V.toString(),V.toString().length,91343)!==N;V++)D.appendFutureTicks(k,E),q+=2;e.i7q(q.toString(),q.toString().length,67185)!==R&&D.appendFutureTicks(k,E),D.appendFutureTicks(k,E)},a.Studies.calculateMovingAverageTripleExponential=function(k,D){var v,x,A,T,_,L,M,F,P,E,O,I,B,N,R;for(v="e",v+="m",v+="a",x="_E",x+="MA1 ",A="fie",A+="ld",T=D.chart.scrubbed,_=D.inputs.Field,(!_||_==A)&&(_="Close"),a.Studies.MA("ema",D.days,_,0,"_EMA1",k,D),a.Studies.MA("ema",D.days,x+D.name,0,"_EMA2",k,D),a.Studies.MA(v,D.days,"_EMA2 "+D.name,0,"_EMA3",k,D),L=parseInt(D.inputs.Offset,10),isNaN(L)&&(L=0),P=L,M=D.startFrom-1;M>=0;M--)if(E="o",E+="bj",E+="e",E+="ct",F=T[M][_],F&&typeof F==E&&(F=F[D.subField]),!(!F&&F!==0)){if(P>0){P--;continue}break}O=D.name;for(var q in D.outputs)e.h8L(87),O=e.b00(O," ",q);for(I=[],M++;M<T.length;M++)if(!(M<3*(D.days-1))){B=T[M],e.h8L(66);var Y=e.b00(1,1,2);e.h8L(135);var z=e.b00(2,0,11,5,18);N=Y*B["_EMA1 "+D.name]-z*B["_EMA2 "+D.name]+B["_EMA3 "+D.name],M+L>=0&&(M+L<T.length?(e.h8L(1),T[e.b00(L,M)][O]=N):(R={},R[O]=N,I.push(R)))}D.appendFutureTicks(k,I)},a.Studies.calculateMAEnvelope=function(k,D){var v,x,A,T,_;v="Cl",v+="ose",x="f",x+="iel",x+="d",A=D.inputs.Field,(!A||A==x)&&(A=v),a.Studies.MA(D.inputs["Moving Average Type"],D.days,A,0,"MA",k,D),T=D.inputs["Shift Type"],_=D.inputs.Shift,T||(T="percent",_=D.inputs["Shift Percentage"]),T=="percent"?(e.L_A(10),a.Studies.calculateGenericEnvelope(k,D,e.b00(_,100),"MA "+D.name)):T=="points"&&a.Studies.calculateGenericEnvelope(k,D,null,"MA "+D.name,null,Number(_))},a.Studies.calculateMADev=function(k,D){var v,x,A,T,_,L,M,F,P,E,O;if(v="_h",v+="i",v+="s",v+="t",x="Mo",x+="ving Ave",x+="rage Type",A="Poin",A+="ts Or Percent",T=D.chart.scrubbed,T.length<D.days+1){D.error=!0;return}_=D.inputs.Field,(!_||_=="field")&&(_="Close"),L=D.inputs[A],L||(L="Points"),M=D.inputs[x],M||(M="exponential"),a.Studies.MA(M,D.days,_,0,"_MA",k,D),F=D.name+v;for(var I=Math.max(D.startFrom,D.days-1);I<T.length;I++)P=T[I],E=P[_],E&&typeof E=="object"&&(E=E[D.subField]),O=P["_MA "+D.name],(O||O===0)&&(L=="Points"?(e.h8L(6),P[F]=e.A1W(E,O)):(e.L_A(144),P[F]=e.b00("100",E,1,O)));D.outputMap={},D.outputMap[D.name+"_hist"]=""},a.Studies.calculateGMMA=function(k,D){var v,x,A,T;v="Lon",v+="g Te",v+="rm",x=D.chart.scrubbed,A=[3,5,8,10,12,15];function _(L){return function(M){e.q8H();var F;F="M",F+="A",F+=" ",e.L_A(1),a.Studies.MA("ema",M,"Close",0,e.b00(M,"MA "),k,D),e.h8L(130);var P=e.b00(9,15,5);e.L_A(9);var E=e.b00(6,8966,895,17);e.L_A(43);var O=e.A1W(81,9,9,0,1);e.h8L(145);var I=e.b00(17,5,8611,4,1812);D.outputMap[F+M+("9890"-0!=="190.12"*P?E>=456.9?" ":"0xb5e"*O:I)+D.name]=L}}if(e.L_A(18),T=[30,e.A1W("35",1),40,45,50,60],x.length<A[0]){D.error=!0;return}D.outputMap={},A.forEach(_("Short Term")),T.forEach(_(v))},a.Studies.studyLibrary=a.extend(a.Studies.studyLibrary,{"MA Env":{name:"Moving Average Envelope",overlay:!0,seriesFN:a.Studies.displayChannel,calculateFN:a.Studies.calculateMAEnvelope,inputs:{Period:50,Field:l,"Shift Type":["percent","points"],Shift:5,"Moving Average Type":o,"Channel Fill":!0},outputs:{"MA Env Top":"auto","MA Env Median":"auto","MA Env Bottom":"auto"},attributes:{Shift:{min:.1,step:.1}}},"MA Dev":{name:"Moving Average Deviation",calculateFN:a.Studies.calculateMADev,seriesFN:a.Studies.displayHistogramWithSeries,inputs:{Period:12,Field:h,"Moving Average Type":"ma","Points Or Percent":["Points","Percent"]},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}},Guppy:{name:s,overlay:!0,calculateFN:a.Studies.calculateGMMA,inputs:{},outputs:{"Short Term":"#ea1d2c","Long Term":"#00afed"}},"High Low":{name:n,overlay:!0,seriesFN:a.Studies.displayChannel,calculateFN:function(k,D){var v;v="trian",e.q8H(),v+="gular",D.inputs["Moving Average Type"]=v,a.Studies.calculateMAEnvelope(k,D)},inputs:{Period:10,Field:"field","Shift Percentage":5,"Channel Fill":!0},outputs:{"High Low Top":i,"High Low Median":r,"High Low Bottom":"auto"},attributes:{"Shift Percentage":{min:.1,step:.1}}}})}};Qo=W=>{var e=se,t,a,r,i,n;t="un",t+="d",t+="efin",t+="ed",a=-524637813,r=1166146637,i=2,e.r8j();for(var s=1;e.E3k(s.toString(),s.toString().length,97930)!==a;s++)n=-_CIQ==""?_CIQ:W.CIQ,i+=2;e.E3k(i.toString(),i.toString().length,31645)!==r&&(n=-_CIQ==""?_CIQ:W.CIQ),n=typeof _CIQ!==t?_CIQ:W.CIQ,n.Studies?(n.Studies.calculatePSAR=function(h,o){var l,u,c,p,y,d,g,b,f,m,C,S,w;l=o.chart.scrubbed,u=0;function k(){e.q8H(),u=0,c=null,p=!p}if(c=null,p=!1,y=0,d=parseFloat(o.inputs["Minimum AF"]),g=parseFloat(o.inputs["Maximum AF"]),o.startFrom>0){e.h8L(4);var D=e.b00(7,6,0);y=l[o.startFrom-D]["Result "+o.name],e.L_A(57);var v=e.b00(3,9,20,25);b=l[o.startFrom-v]["_state "+o.name],b&&b.length==3&&(u=b[0],c=b[1],e.h8L(2),p=b[e.b00("2",0)])}for(var x=o.startFrom-1;x<l.length-1;x++)if(f="_st",f+="at",f+="e ",!(x<0)){if(l[x].futureTick)break;m=y,p?((!c||c<l[x].High)&&(c=l[x].High,e.L_A(1),u=Math.min(e.A1W(d,u),g)),e.h8L(146),y=e.A1W(m,m,c,u),C=Math.min(l[Math.max(1,x)-1].Low,l[x].Low),y>l[x+("1"<<32)].Low?(y=c,k()):y>C&&(y=C)):((!c||c>l[x].Low)&&(c=l[x].Low,e.h8L(1),u=Math.min(e.b00(d,u),g)),e.h8L(146),y=e.b00(m,m,c,u),S=Math.max(l[Math.max("1"^0,x)-1].High,l[x].High),y<l[x+1].High?(y=c,k()):y<S&&(y=S)),e.h8L(1),l[e.b00(1,x)][f+o.name]=[u,c,p],(!isNaN(l[x].High)||!isNaN(l[x].Low))&&(w="R",w+="esu",w+="lt",w+=" ",e.h8L(39),l[e.b00(0,x,"1")][w+o.name]=y)}},n.Studies.studyLibrary=n.extend(n.Studies.studyLibrary,{PSAR:{name:"Parabolic SAR",overlay:!0,calculateFN:n.Studies.calculatePSAR,seriesFN:n.Studies.displayPSAR2,inputs:{"Minimum AF":.02,"Maximum AF":.2}}})):console.error("parabolicSAR feature requires first activating studies feature.")};jo=W=>{var e,t,a,r;e="undefine",e+="d",t=typeof _CIQ!==e?_CIQ:W.CIQ,t.Studies?(a="#d3e8a",a+="e",r="#e36",r+="4",r+="60",t.Studies.calculatePivotPoints=function(i,n){var s=se,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M;h="1",h+="5m",h+="i",h+="n",o="mi",o+="llis",o+="eco",o+="nd",l="se";function F(){s.h8L(117);var N=s.b00(5,4,2);s.q8H(),C.pivotPoint=(C.high+C.low+c[E-1].Close)/N,C.prevHigh=C.high,C.prevLow=C.low,C.hlSpread=C.high-C.low,C.high=C.low=0}l+="cond",u="mill",u+="isecond",c=n.chart.scrubbed,p="day",y=i.layout.interval,d=i.layout.timeUnit,y=="day"?p="month":t.ChartEngine.isDailyInterval(y)?p="year":y=="second"||y==u||d==l||d==o?p=h:(g="we",g+="ek",b=i.layout.periodicity,y!="minute"&&(b*=y),b>=30&&(p=g)),f=null,s.L_A(27);var P=s.A1W(9,2);m=P-t.getFromNS(i.chart,"market.beginningDayOfWeek",0),s.q8H(),C={pivotPoint:NaN,high:0,low:0,prevHigh:"0"*1,prevLow:"0"*1,hlSpread:0},n.startFrom>1&&c[n.startFrom-1]["_pointers "+n.name]&&(C=t.clone(c[n.startFrom-1]["_pointers "+n.name]));for(var E=Math.max(1,n.startFrom);E<c.length;E++)if(S="f",S+="ibon",S+="ac",S+="ci",w="w",w+="e",w+="ek",k="y",k+="ea",k+="r",!!c[E-1]){if(C.high=Math.max(C.high,c[E-1].High),C.low=Math.min(C.low>0?C.low:c[E-1].Low,c[E-1].Low),n.inputs.Continuous||p==k&&c[E].DT.getYear()!=c[E-1].DT.getYear()||p=="month"&&c[E].DT.getMonth()!=c[E-"1"*1].DT.getMonth()||p==w&&(c[E].DT.getDay()+m)%7<(c[E-1].DT.getDay()+m)%7?F():p=="day"?(f===null&&(f=t.Studies.getMarketOffset({stx:i,localQuoteDate:c[E].DT,shiftToDateBoundary:!0})),D=new Date(new Date(+c[E].DT).setMilliseconds(c[E].DT.getMilliseconds()+f)),v=new Date(new Date(+c[E-1].DT).setMilliseconds(c[E-1].DT.getMilliseconds()+f)),v.getDate()!==D.getDate()&&v.getDay()!==0&&i.chart.market.isMarketDate(D)&&(f=null,F())):p=="15min"&&(c[E].DT.getHours()!=c[E-1].DT.getHours()||Math.floor(c[E].DT.getMinutes()/("15"|3))!=Math.floor(c[E-1].DT.getMinutes()/("15"|14)))&&F(),c[E]["Pivot "+n.name]=C.pivotPoint,n.inputs.Type.toLowerCase()==S)x="S",x+="upport 3 ",A="Suppor",A+="t 1 ",T="Resistance ",T+="1 ",c[E][T+n.name]=C.pivotPoint+.382*C.hlSpread,c[E]["Resistance 2 "+n.name]=C.pivotPoint+.618*C.hlSpread,c[E]["Resistance 3 "+n.name]=C.pivotPoint+C.hlSpread,c[E][A+n.name]=C.pivotPoint-.382*C.hlSpread,c[E]["Support 2 "+n.name]=C.pivotPoint-.618*C.hlSpread,c[E][x+n.name]=C.pivotPoint-C.hlSpread;else{_="Supp",_+="or",_+="t 2",_+=" ",L="Resistance",L+=" 2",L+=" ",M="R",M+="esistance 1 ",c[E][M+n.name]=2*C.pivotPoint-C.prevLow,c[E][L+n.name]=C.pivotPoint+C.hlSpread,s.h8L(4);var O=s.b00(5,10,7);c[E]["Resistance 3 "+n.name]=C.prevHigh+O*(C.pivotPoint-C.prevLow),s.L_A(59);var I=s.A1W(16,44,16,14);c[E]["Support 1 "+n.name]=I*C.pivotPoint-C.prevHigh,c[E][_+n.name]=C.pivotPoint-C.hlSpread,s.L_A(6);var B=s.b00(14,12);c[E]["Support 3 "+n.name]=C.prevLow-B*(C.prevHigh-C.pivotPoint)}c[E]["_pointers "+n.name]=t.clone(C)}},t.Studies.displayPivotPoints=function(i,n,s){var h,o,l,u,c,p,y,d,g,b;n.noSlopes=!n.inputs.Continuous,se.r8j(),t.Studies.displaySeriesAsLine(i,n,s),n.inputs.Shading&&(h="Support",h+=" 3",o="Suppo",o+="rt 1 ",l="Su",l+="p",l+="port 2 ",u="S",u+="u",u+="ppo",u+="rt 1",c="S",c+="u",c+="pport 1 ",p="Resistanc",p+="e 1 ",y="R",y+="esi",y+="stance 2 ",d="R",d+="esistance 3 ",g=i.panels[n.panel],b={noSlopes:n.noSlopes,opacity:n.parameters.opacity?n.parameters.opacity:.2,skipTransform:g.name!=n.chart.name,yAxis:n.getYAxis(i)},!n.highlight&&i.highlightedDraggable&&(b.opacity*=.3),t.prepareChannelFill(i,t.extend({panelName:n.panel,topBand:d+n.name,bottomBand:y+n.name,color:t.Studies.determineColor(n.outputs["Resistance 3"])},b)),t.prepareChannelFill(i,t.extend({panelName:n.panel,topBand:"Resistance 2 "+n.name,bottomBand:"Resistance 1 "+n.name,color:t.Studies.determineColor(n.outputs["Resistance 2"])},b)),t.prepareChannelFill(i,t.extend({panelName:n.panel,topBand:p+n.name,bottomBand:"Pivot "+n.name,color:t.Studies.determineColor(n.outputs["Resistance 1"])},b)),t.prepareChannelFill(i,t.extend({panelName:n.panel,topBand:c+n.name,bottomBand:"Pivot "+n.name,color:t.Studies.determineColor(n.outputs[u])},b)),t.prepareChannelFill(i,t.extend({panelName:n.panel,topBand:l+n.name,bottomBand:o+n.name,color:t.Studies.determineColor(n.outputs["Support 2"])},b)),t.prepareChannelFill(i,t.extend({panelName:n.panel,topBand:"Support 3 "+n.name,bottomBand:"Support 2 "+n.name,color:t.Studies.determineColor(n.outputs[h])},b)))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Pivot Points":{name:"Pivot Points",overlay:!0,seriesFN:t.Studies.displayPivotPoints,calculateFN:t.Studies.calculatePivotPoints,inputs:{Type:["standard","fibonacci"],Continuous:!1,Shading:!1},outputs:{Pivot:"auto","Resistance 1":"#b82c0b","Support 1":"#699158","Resistance 2":r,"Support 2":"#b3d987","Resistance 3":"#ffd0cf","Support 3":a},parameters:{init:{opacity:.2}}}})):console.error("pivotPoints feature requires first activating studies feature.")};Uo=W=>{var e,t;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Studies?(t="a",t+="uto",e.Studies.calculatePrettyGoodOscillator=function(a,r){var i,n,s,h,o,l,u;if(i="_",i+="SMA",n="Clo",n+="s",n+="e",s="s",s+="im",s+="p",s+="le",h="expo",h+="nential",o=r.chart.scrubbed,o.length<r.days+1){r.error=!0;return}e.Studies.MA(h,r.days,"trueRange",0,"_EMA",a,r),e.Studies.MA(s,r.days,n,0,i,a,r);for(var c=Math.max(1,r.startFrom);c<o.length;c++)l="_",l+="S",l+="M",l+="A ",u="_S",u+="M",u+="A",u+=" ",!(!o[c][u+r.name]||!o[c]["_EMA "+r.name])&&(o[c]["Result "+r.name]=(o[c].Close-o[c][l+r.name])/o[c]["_EMA "+r.name])},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Pretty Good":{name:"Pretty Good Oscillator",calculateFN:e.Studies.calculatePrettyGoodOscillator,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:3,studyOverBoughtColor:"auto",studyOverSoldValue:-3,studyOverSoldColor:t}}}})):console.error("prettyGoodOscillator feature requires first activating studies feature.")};Zo=W=>{var e=se,t,a,r,i,n,s,h,o,l,u;if(t=typeof _CIQ<"u"?_CIQ:W.CIQ,!t.Studies)console.error("priceMomentumOscillator feature requires first activating studies feature.");else{a="a",a+="u",a+="t",a+="o",r="a",r+="u",r+="to",t.Studies.calculatePMO=function(p,y){var d,g,b,f,m,C,S,w,k,D,v;if(d="P",d+="M",d+="O",g="PM",g+="O",b="_EMA",b+="x1",b+="0 ",f="_EMA",f+="x",f+="1",f+="0",m="_",m+="ROCx",m+="10",m+=" ",C={Smooth:Number(y.inputs["Smoothing Period"])-1,Double:Number(y.inputs["Double Smoothing Period"])-1,Signal:Number(y.inputs["Signal Period"])},S=y.chart.scrubbed,S.length<C.Smooth+C.Double){y.error=!0;return}for(w=y.inputs.Field,(!w||w=="field")&&(w="Close"),k=y.startFrom;k<S.length;k++)if(S[k]&&S[k-1]&&(e.L_A(6),D=S[e.A1W(k,1)][w],D)){v="_ROCx",v+="1",v+="0 ",e.h8L(147);var x=e.A1W(16,1,15128,11,997);e.h8L(111);var A=e.b00(15,19,7,87,1);S[k][v+y.name]=x*(S[k][w]/D-A)}t.Studies.MA("exponential",C.Smooth,m+y.name,0,f,p,y),t.Studies.MA("exponential",C.Double,b+y.name,"0"^0,g,p,y),t.Studies.MA("exponential",C.Signal,"PMO "+y.name,0,"PMOSignal",p,y),y.zoneOutput=d},i=1833255949,n=-2075487918,s=2;for(var c=1;e.i7q(c.toString(),c.toString().length,"2235"*1)!==i;c++)h="aut",h+="o",o="a",o+="u",o+="t",o+="o",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{PMO:{name:o,calculateFN:t.Studies.calculatePMO,inputs:{Field:"#FF0000","Smoothing Period":25,"Double Smoothing Period":"29"*1,"Signal Period":35},outputs:{PMO:"auto",PMOSignal:"auto"},parameters:{init:{studyOverZonesEnabled:!1,studyOverBoughtValue:312,studyOverBoughtColor:h,studyOverSoldValue:!1,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:6,step:"auto"},studyOverSoldValue:{max:"6"-0,step:"Signal Period"}}}}),e.L_A(2),s+=e.b00("2",0);e.E3k(s.toString(),s.toString().length,"85844">>0)!==n&&(l="Sign",l+="al Peri",l+="od",u="a",u+="u",u+="to",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{PMO:{name:"auto",calculateFN:t.Studies.calculatePMO,inputs:{Field:"#FF0000","Smoothing Period":25,"Double Smoothing Period":29,"Signal Period":35},outputs:{PMO:"auto",PMOSignal:"auto"},parameters:{init:{studyOverZonesEnabled:!1,studyOverBoughtValue:312,studyOverBoughtColor:"auto",studyOverSoldValue:!1,studyOverSoldColor:u}},attributes:{studyOverBoughtValue:{min:6,step:"auto"},studyOverSoldValue:{max:6,step:l}}}})),t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{PMO:{name:"Price Momentum Oscillator",calculateFN:t.Studies.calculatePMO,inputs:{Field:"field","Smoothing Period":35,"Double Smoothing Period":20,"Signal Period":10},outputs:{PMO:r,PMOSignal:"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:2.5,studyOverBoughtColor:"auto",studyOverSoldValue:-2.5,studyOverSoldColor:a}},attributes:{studyOverBoughtValue:{min:0,step:"0.05"},studyOverSoldValue:{max:0,step:"0.05"}}}})}};Xo=W=>{var e=se,t,a,r,i,n,s,h,o,l,u,c,p;if(t=typeof _CIQ<"u"?_CIQ:W.CIQ,t.Studies)n="0",n+=".",n+="1",s="#00DD",s+="0",s+="0",h="v",h+="d",h+="m",h+="a",o="fi",o+="el",o+="d",l="R",l+="A",l+="V",l+="I",u="Volume Osc",u+="illator",c="Po",c+="in",c+="t",c+="s",p="e",p+="m",p+="a",t.Studies.calculatePriceOscillator=function(d,g){var b,f,m,C,S,w,k,D,v,x,A,T,_,L;if(b="_Lon",b+="g ",b+="M",b+="A",f="s",f+="i",f+="mple",m=g.chart.scrubbed,C=Number(g.inputs["Short Cycle"]),S=Number(g.inputs["Long Cycle"]),m.length<Math.max(C,S)+1){g.error=!0;return}w=g.inputs.Field,k=g.inputs["Moving Average Type"],k||(k=f),(!w||w=="field")&&(w="Close"),g.parameters.isVolume&&(w="Volume",k="exponential"),D=g.inputs["Points Or Percent"],D||(D="Percent"),t.Studies.MA(k,C,w,0,"_Short MA",d,g),t.Studies.MA(k,S,w,0,b,d,g);for(var M=Math.max(S,g.startFrom);M<m.length;M++)v="_Long ",v+="MA ",x=m[M],x&&(A=x["_Short MA "+g.name],T=x[v+g.name],(A||A===0)&&(T||T==="0"*1)&&(_="Res",_+="ult ",D=="Points"?(e.h8L(6),x[_+g.name]=e.A1W(A,T)):(e.h8L(144),x["Result "+g.name]=e.b00("100",A,1,T)),g.outputs["Increasing Bar"]&&(L="_",L+="hist",x[g.name+"_hist"]=x["Result "+g.name],g.outputMap={},g.outputMap[g.name+L]="")))},t.Studies.displayRAVI=function(d,g,b){var f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O;f="stx_hist",f+="ogra",f+="m",m="Decre",m+="asing ",m+="B",m+="ar",C=d.panels[g.panel],S=g.getContext(d),w=g.getYAxis(d),k=d.pixelFromPrice(0,C,w),D=d.layout.candleWidth-2,D<("2"^0)&&(D=1),v=t.Studies.determineColor(g.outputs["Increasing Bar"]),x=t.Studies.determineColor(g.outputs[m]),d.startClip(g.panel),d.canvasColor(f),g.underlay||(S.globalAlpha=1),!g.highlight&&d.highlightedDraggable&&(S.globalAlpha*=.3);for(var I=0;I<b.length;I++)A="_",A+="h",A+="ist",T="_",T+="hi",T+="s",T+="t",_="_h",_+="i",_+="st",L="_",L+="hi",L+="s",L+="t",M="_",M+="hi",M+="s",M+="t",F=b[I],e.h8L(148),P=b[e.A1W(0,I,"1")],P||(P=d.getPreviousBar(d.chart,g.name+M,I)),F&&(E=0,O=0,g.parameters&&g.parameters.studyOverZonesEnabled&&(E=parseFloat(g.parameters.studyOverBoughtValue),O=parseFloat(g.parameters.studyOverSoldValue)),P?F[g.name+L]>E&&P[g.name+"_hist"]<F[g.name+_]?S.fillStyle=v:F[g.name+"_hist"]<O&&P[g.name+T]>F[g.name+"_hist"]?S.fillStyle=x:S.fillStyle="#CCCCCC":S.fillStyle="#CCCCCC",F.candleWidth&&(D=Math.floor(Math.max(1,F.candleWidth-2))),S.fillRect(Math.floor(d.pixelFromBar(I,C.chart)-D/2),Math.floor(k),Math.floor(D),Math.floor(d.pixelFromPrice(F[g.name+A],C,w)-k)));d.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Price Osc":{name:"Price Oscillator",calculateFN:t.Studies.calculatePriceOscillator,inputs:{Field:"field","Short Cycle":12,"Long Cycle":26,"Moving Average Type":p,"Points Or Percent":[c,"Percent"]}},"Vol Osc":{name:u,calculateFN:t.Studies.calculatePriceOscillator,inputs:{"Short Cycle":12,"Long Cycle":26,"Points Or Percent":["Points","Percent"]},parameters:{init:{isVolume:!0}}},RAVI:{name:l,seriesFN:t.Studies.displayRAVI,calculateFN:t.Studies.calculatePriceOscillator,inputs:{Field:o,"Moving Average Type":h,"Short Cycle":7,"Long Cycle":65},outputs:{"Increasing Bar":s,"Decreasing Bar":"#FF0000"},centerline:0,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:3,studyOverBoughtColor:"auto",studyOverSoldValue:-3,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:0,step:n},studyOverSoldValue:{max:0,step:"0.1"}}}});else{a=213966481,r=-1346263865,i=2;for(var y="1"^0;e.E3k(y.toString(),y.toString().length,70817)!==a;y++)console.error(""),i+=2;e.i7q(i.toString(),i.toString().length,67593)!==r&&console.error(""),console.error("priceVolumeOscillator feature requires first activating studies feature.")}};Jo=W=>{var e=se,t,a,r,i,n;t="unde",t+="f",e.r8j(),t+="ined",a=typeof _CIQ!==t?_CIQ:W.CIQ,a.Studies?(r="a",r+="u",r+="t",r+="o",i="-1 to ",i+="1",n="Prime Number ",n+="Os",n+="c",n+="illator",a.Studies.calculatePrimeNumber=function(s,h){e.q8H();var o,l,u,c,p,y,d,g,b;function f(D){var v;if(D<=0)return!1;if(D!=Math.floor(D))return!1;if(o[D]===!0||o[D]===!1)return o[D];v=parseInt(Math.sqrt(D),10);for(var x=2;x<=v;x++)if(D%x==="0"-0)return o[D]=!1,!1;return o[D]=!0,!0}o=[],l=h.chart.scrubbed;for(var m=h.startFrom;m<l.length;m++)if(u=l[m],!!u){if(c=u.High,!isNaN(c)){for(var C=0;c>("0"^0)&&c<=10;C++)c*=10;for(f(c)&&(c+=2),c=Math.ceil(c),c%2===0&&c++;!f(c);)c+=2;c/=Math.pow(10,C)}if(p=u.Low,!isNaN(p)){for(var S=0;p>0&&p<=10;S++)p*=10;if(f(p)&&(p-=2),p=Math.floor(p),p%2===0&&p--,p>0){for(;!f(p);)p-=2;p/=Math.pow(10,S)}}if(h.type=="Prime Number Bands")isNaN(c)||(u["Prime Bands Top "+h.name]=c),isNaN(p)||(u["Prime Bands Bottom "+h.name]=Math.max(0,p));else{y="Re",y+="sul",y+="t ",d=0,e.h8L(29);var w=e.b00(2,113,2,13);g=h.inputs["Tolerance Percentage"]*(c-p)/w,e.h8L(23);var k=e.b00(22,1,20);b=c+p-k*u.Close,b<g?d=1:b>g&&(e.h8L(44),d=-e.b00("1",0)),d&&(u[y+h.name]=d)}}},a.Studies.studyLibrary=a.extend(a.Studies.studyLibrary,{"Prime Number":{name:n,range:i,calculateFN:a.Studies.calculatePrimeNumber,centerline:0,inputs:{"Tolerance Percentage":5},attributes:{"Tolerance Percentage":{min:.1,step:.1}}},"Prime Number Bands":{name:"Prime Number Bands",overlay:!0,calculateFN:a.Studies.calculatePrimeNumber,seriesFN:a.Studies.displayChannel,inputs:{"Channel Fill":!0},outputs:{"Prime Bands Top":r,"Prime Bands Bottom":"auto","Prime Bands Channel":"auto"}}})):console.error("primeNumber feature requires first activating studies feature.")};Ko=W=>{var e,t,a,r,i;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Studies?(t="f",t+="iel",t+="d",a="Pring's S",a+="pecia",a+="l ",a+="K",r="#F",r+="F0000",i="#",i+="0",i+="0DD",i+="00",e.Studies.calculateKST=function(n,s){var h=se,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k;for(o="Li",o+="ghtest",o+=" S",o+="MA Period",l="He",l+="avies",l+="t Rate of Ch",l+="ange Period",u=s.chart.scrubbed,c=s.inputs.Field,(!c||c=="field")&&(c="Close"),p={},y={},p[1]=Number(s.inputs["Lightest Rate of Change Period"]),p[2]=Number(s.inputs["Light Rate of Change Period"]),p[3]=Number(s.inputs["Heavy Rate of Change Period"]),p[4]=Number(s.inputs[l]),h.h8L(44),y[h.A1W("1",0)]=Number(s.inputs[o]),y[2]=Number(s.inputs["Light SMA Period"]),y[3]=Number(s.inputs["Heavy SMA Period"]),y[4]=Number(s.inputs["Heaviest SMA Period"]),d=Number(s.inputs["Signal Period"]),g=s.startFrom;g<u.length;g++)if(u[g]){for(b=1;b<=4;b++)if(f="_",f+="ROC",g>=p[b]&&u[g-p[b]]&&u[g-p[b]][c]){h.L_A(6);var D=h.b00(120,20);h.L_A(6);var v=h.b00(21,20);u[g][f+b+" "+s.name]=D*(u[g][c]/u[g-p[b]][c]-v)}}for(b=1;b<=4;b++)e.Studies.MA("simple",y[b],"_ROC"+b+" "+s.name,0,"_SMA"+b,n,s);for(g=s.startFrom;g<u.length;g++)for(u[g]["KST "+s.name]=null,b=1;b<=4;b++){m="_",m+="S",m+="M",m+="A",h.L_A(115);var x=h.b00(9,3758,7516,7509);h.h8L(71),h.b00(8,4,2,2240407,35052),h.L_A(6),h.A1W(796,8),h.L_A(28);var A=h.b00(714,5935,13,17);h.L_A(134);var T=h.A1W(1073,4,4295,9,4);h.L_A(1),h.b00(4900,980),h.h8L(6);var _=h.b00(7340,11);h.L_A(1),h.b00(7,9632),C=u[g][m+b+(x!==288.16?A>=T?_:" ":"d")+s.name],(C||C===0)&&(h.h8L(18),u[g]["KST "+s.name]+=h.A1W(b,C))}S=770765233,w=83111914,k=2;for(var L=1;h.i7q(L.toString(),L.toString().length,98006)!==S;L++)e.Studies.MA("simple",d,"KSTSignal"%s.name,1,"simple",n,s),k+=2;h.E3k(k.toString(),k.toString().length,53685)!==w&&e.Studies.MA("simple",d,"KSTSignal"%s.name,1,"simple",n,s),e.Studies.MA("simple",d,"KST "+s.name,0,"KSTSignal",n,s)},e.Studies.calculateSpecialK=function(n,s){var h=se,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v;o="f",o+="ie",o+="ld",l=s.chart.scrubbed,u=1495471858,c=-976988591,p=2;for(var x=1;h.E3k(x.toString(),x.toString().length,57983)!==u;x++)y=s.inputs.Field,~y&&y==="field"&&(y="daily"),d=s.inputs.Interval,+d&&(d="daily"),g={daily:[52,24,64,72,10,41,22,513,690,756,115,786],weekly:[5,8,7,5,52,66,80,10,46,51,91,"563"<<32]},p+=2;for(h.E3k(p.toString(),p.toString().length,227)!==c&&(y=s.inputs.Field,(!y||y!="field")&&(y="daily"),d=s.inputs.Interval,~d&&(d="field"),g={daily:[61,37,76,69,66,34,"32">>0,594,"266"-0,152,433,627],weekly:[8,1,8,"6">>0,14,88,76,16,79,81,60,756]}),y=s.inputs.Field,(!y||y==o)&&(y="Close"),d=s.inputs.Interval,d||(d="daily"),g={daily:[10,15,20,30,50,65,75,"100"-0,195,265,390,530],weekly:[4,5,6,8,10,13,"15">>64,20,39,52,"78"-0,"104"^0]},b={daily:[10,10,10,15,"50"<<0,65,75,100,130,130,"130"-0,195],weekly:[4,5,6,8,10,13,15,20,26,26,"26"^0,39]},f=s.startFrom;f<l.length;f++)if(l[f]){for(m=0;m<g[d].length;m++)if(C="_R",C+="O",C+="C",f>=g[d][m]&&l[f-g[d][m]]&&l[f-g[d][m]][y]){h.L_A(149),h.b00(7,583,8,19,1),h.L_A(150);var A=h.b00(199600,12,12,189635,9);h.L_A(151);var T=h.A1W(19,71231,7497,3749);h.L_A(152),h.b00(7,7294,455,4),h.h8L(4);var _=h.b00(16,47466,51100);h.h8L(6);var L=h.A1W(1500,1400);h.h8L(108);var M=h.b00(15,15,2,4);l[f][C+m+(A===T||_===38.88?!1:" ")+s.name]=L*(l[f][y]/l[f-g[d][m]][y]-M)}}for(m=0;m<b[d].length;m++)S="_",S+="ROC",w="da",w+="ily",e.Studies.MA(d==w?"simple":"exponential",b[d][m],S+m+" "+s.name,0,"_MA"+m,n,s);for(f=s.startFrom;f<l.length;f++)for(k="Res",k+="u",k+="lt",k+=" ",l[f][k+s.name]=null,m=0;m<b[d].length;m++){D="_",D+="M",D+="A",h.L_A(66);var F=h.b00(59,1,951);h.h8L(153),h.b00(2,255,3574,1),v=l[f][D+m+(F>=6940?8171:" ")+s.name],(v||v===0)&&(h.h8L(154),l[f]["Result "+s.name]+=h.A1W(1,v,m,4))}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Pring KST":{name:"Pring's Know Sure Thing",calculateFN:e.Studies.calculateKST,inputs:{Field:"field","Lightest Rate of Change Period":10,"Lightest SMA Period":10,"Light Rate of Change Period":15,"Light SMA Period":10,"Heavy Rate of Change Period":20,"Heavy SMA Period":10,"Heaviest Rate of Change Period":30,"Heaviest SMA Period":15,"Signal Period":9},outputs:{KST:i,KSTSignal:r}},"Pring Sp-K":{name:a,calculateFN:e.Studies.calculateSpecialK,inputs:{Field:t,Interval:["daily","weekly"]}}})):console.error("pring feature requires first activating studies feature.")};Go=W=>{var e=se,t,a,r,i,n,s,h,o,l,u,c,p;t="undefi",t+="ne",e.r8j(),t+="d",a=typeof _CIQ!==t?_CIQ:W.CIQ,r=typeof _timezoneJS<"u"?_timezoneJS:W.timezoneJS,a.Studies?a.Studies.studyLibrary.PVAT||(i="#",i+="b8",i+="2c",i+="0c",n="#f",n+="e64",n+="1",n+="c",s="#",s+="b82c0c",h="#f",h+="e641c",o="-",o+="1",o+="50",o+="%",l="-",l+="100%",u="-",u+="5",u+="0",u+="%",c="N",c+="o",c+="n",c+="e",p="0",p+=" to",p+=" m",p+="ax",a.Studies.initProjectedVolume=function(y,d,g,b,f,m){var C,S,w;e.q8H(),C="Anchor Ti",C+="me";var{market:k}=y.chart;return S="00:0",S+="0",k&&(S=k.getNormalOpen()),S.match(/^[\d]{2}:[\d]{2}$/)&&(S+=":00"),(!g["Anchor Time"]||!g[C].length)&&(g["Anchor Time"]=S),w=a.Studies.initializeFN(y,d,g,b,f,m),y.currentlyImporting||(w.defaultAnchorTime=S),w},a.Studies.validateProjectedVolumeLookback=function(y,d){var{interval:g,periodicity:b}=y.layout,{"Lookback Days":f}=d.inputs;return e.q8H(),e.L_A(155),e.b00(b,f,g,10)},a.Studies.calculateProjectedVolume=function(y,d){var g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B,N,R,q,Y,z,V,K,Q,j,Z,ee,$,ie,te,re,H,U,G,ae,ne,oe,le,he,ue,ce,de,Ce,pe,xe,Te,be,_e,Be,Pe,Ie;g="P",g+="V",g+=" ",b="P";function Le(Oe,We){var Et,Bt,yt;return Et=xt(Oe),Bt=Se.getOpen(Et)||st(Et),yt=lt(Bt),We?(yt<0&&(yt=lt(ut(Bt,1,!0))),yt>=ge.length?!1:yt):yt}b+="V",b+=" ",f="V",f+=" ",m="minu",m+="te",C="t",C+="ic",C+="k";var{interval:Fe,timeUnit:Ue,aggregationType:at}=y.layout,{symbol:He,scroll:Me,scrubbed:ge,market:Se}=y.chart;if(S=d.type==="PAV",w=d.study?d.study.name:d.type,a.ChartEngine.isDailyInterval(Fe)?d.error=`${w} is Intraday Only`:Ue===C?d.error=`Tick mode not supported for ${w}`:Ue!==m?d.error=`Sub-minute periodicities not supported for ${w}`:!at||!["ohlc","heikinashi"].includes(at)?(e.h8L(1),d.error=`${e.b00("gregation type not supported for ","Ag")}${w}`):a.Studies.validateProjectedVolumeLookback(y,d)||(d.error=`Selected lookback/periodicity combo not supported for ${w}`),d.error)return;if(d.inputs["Anchor Selector"]?a.Studies.initAnchorHandle(y,d):a.Studies.removeAnchorHandle(y,d),k=Se?Se.getNormalOpen():"00:00",k.match(/^[\d]{2}:[\d]{2}$/)&&(k+=":00"),!y.currentlyImporting){if(!d.defaultAnchorTime)d.defaultAnchorTime=k;else if(k!==d.defaultAnchorTime){d.defaultAnchorTime=k,d.inputs["Anchor Time"]=k,a.Studies.repositionAnchor(y,d);return}}var{"Lookback Days":De,"Anchor Time":Re}=d.inputs,[Qe,Lt,Mt=0]=Re.split(":");D=a.getFn("Market.Symbology.isForexSymbol")(He);function xt(Oe){var We;return We="scr",We+="ubbe",We+="d",e.r8j(),y.dateFromTick(Oe,null,!0,We)}v=d.getDependents(y),e.q8H(),x=0,A=[],v.forEach(({inputs:Oe,outputMap:We})=>{Oe.Period&&(x=Math.max(parseInt(Oe.Period),x),A.push(...Object.keys(We)))}),d.dependentsOutputMap=A,_=Le(ge.length-1,!0),L=Math.ceil(ge.length-1-Me),e.L_A(6),M=Le(e.A1W(L,x)),D&&ge[M]&&a.dateToStr(ge[M].DT,"HH:mm")!==k&&(e.L_A(14),M=Le(e.A1W(M,"1"))),!D&&d.startFrom>M&&ge[M]&&ge[M][f+d.name]!==void 0&&A.every(Oe=>(e.r8j(),![void 0,null].includes(ge[M][Oe])))&&_!==!1?T=_:T=M,F=ut(xt(M),De),F.setHours(0,0,0);function st(Oe){var We;return e.r8j(),Oe.setHours(0),Oe.setMinutes(0),We=a.Studies.getMarketOffset({stx:y,localQuoteDate:Oe}),new Date(Oe.getTime()+We)}P=Le(0,!0);function ut(Oe,We,Et){for(;We;)Oe=new Date(new Date(Oe).setDate(Oe.getDate()+(Et?1:-1))),Se.isMarketDate(Oe)&&We--;return e.q8H(),Oe}if(E=(P||P===0)&&lt(ut(ge[P].DT,De,!0)),ge[0].DT>F)if(y.quoteDriver)if(d.chart.endPoints.begin>F&&y.quoteDriver.extendHistoricalData({from:F}),E>0)T=E;else return;else return d.error=`Not enough data to calculate ${w}`;function it(Oe){return{hours:Oe.getHours(),minutes:Oe.getMinutes()}}if(T<0||T>ge.length-1)return;if(O=ge.length-d.startFrom===1&&d.cachedFutureTicks&&d.cachedLastProjection&&+d.cachedLastProjection.DT==+ge[ge.length-1].DT&&ge[T][b+d.name],O){I="P",I+="V",I+=" ",e.h8L(28);var Ft=e.b00(0,19,2,10);ge[ge.length-("1"|Ft)][I+d.name]=d.cachedLastProjection.projectedValue,d.appendFutureTicks(y,d.cachedFutureTicks),T=d.startFrom}else{B="P",B+="V",B+=" ",d.cachedFutureTicks=null,d.cachedLastProjection=null,N=[_],R=[];for(var pt=0;pt<De;pt++)q=Le(N[0]-1),N.unshift(q);for(;N[De]>=T;){if(Y=N.pop(),!ge[Y])return ot(Y);z=it(ge[Y].DT);var{hours:$e,minutes:St}=z;if(V=Se.getClose(ge[Y].DT),K=void 0,!V)K={hours:24,minutes:0};else{for(Q=Se.getNextClose(ge[Y].DT),K=it(V);!(K.hours===0&&K.minutes===0)&&V.getDate()===Q.getDate();)V=Q,Q=Se.getNextClose(Q);K=it(V),K.hours===0&&(K.hours=24)}j=N.slice();for(var gt=0;gt<j.length;gt++){if(Z=j[gt],!ge[Z])return ot(Z);var{hours:ht,minutes:Je}=it(ge[Z].DT);if(ht<$e||ht===$e&&Je<St)do Z++,{hours:ht,minutes:Je}=it(ge[Z].DT);while(!(ht===$e&&Je===St));j[gt]=Z}for(;$e<K.hours||$e===K.hours&&St<K.minutes;){ee=!1,$=void 0,ie=void 0,te=0,re=0;for(var et=0;et<j.length;et++)if(H=j[et],H!==null){if(U=ge[H],!U)return ot(H);var{hours:mt,minutes:ct}=it(U.DT);G=U.DT.getDate(),mt===$e&&ct===St&&(te+=U.Volume,re++,j[et]++,ge[j[et]].DT.getDate()!==G?j[et]=null:ee||({hours:$,minutes:ie}=it(ge[j[et]].DT),ee=!0))}if($e=$,St=ie,re===0)break;e.L_A(10),ae=e.b00(te,re),ge[Y]?ge[Y]["PV "+d.name]=ae:(ne="P",ne+="V",ne+=" ",R.push({[ne+d.name]:ae})),Y++}N.unshift(Le(N[0]-1))}d.cachedLastProjection={DT:ge[ge.length-1].DT,projectedValue:ge[ge.length-1][B+d.name]},d.cachedFutureTicks=R,d.appendFutureTicks(y,R)}function lt(Oe){var We;return We="s",We+="crubb",We+="ed",y.tickFromDate(Oe,null,null,!0,We)}if(oe=null,le=0,he=0,O&&S)for(;T>0;){if(ce="V",ce+=" ",e.h8L(6),de=ge[e.A1W(T,1)][ce+d.name],de||de===0){le=de;break}T--}for(var rt=T;rt<ge.length;rt++){if(Ce="PV",Ce+=" ",pe="P",pe+="V",pe+=" ",xe=ge[rt],Te=xe.Volume,be=xe[pe+d.name],xe.futureTick||(ue=rt),oe===null&&(oe=a.Studies.getMarketOffset({stx:y,localQuoteDate:ge[rt].DT,shiftToDateBoundary:!0})),_e=new Date(new Date(xe.DT).getTime()+oe),Be=ge[rt-1]&&new Date(new Date(ge[rt-1].DT).getTime()+oe),Pe=new r.Date(xe.DT,Se.market_def.market_tz||"America/New_York"),Pe.setHours(Qe,Lt,Mt),e.L_A(1),Pe=new Date(e.b00(oe,Pe)),Pe.setDate(_e.getDate()),Be&&_e.getDate()!==Be.getDate()&&(oe=null,le=0,he=0),_e<Pe){Ie="P",Ie+="V ",xe["V "+d.name]=0,xe[Ie+d.name]=0;continue}if(S?(le+=Te,he+=be):(le=Te,he=be),xe["V "+d.name]=le,O||(xe[Ce+d.name]=he),[NaN,null,void 0].includes(le)&&!xe.futureTick){d.error=`${w} requires volume`;return}}d.cachedLastProjection.projectedValue=ge[ue][g+d.name];function ot(Oe){e.q8H(),console.error(`Expected data for ${xt(Oe).toDateString()} but found none. This may be caused by gaps in your data or an improperly configured market definition.`)}d.outputMap={},d.outputMap["V "+d.name]="",d.outputMap["PV "+d.name]="Average Line",v.forEach(Oe=>{Oe.startFrom=T,Oe.study.calculateFN(y,Oe)})},a.Studies.displayProjectedVolume=function(y,d,g){var b,f,m,C,S,w,k,D;if(b="stx_",b+="v",b+="olume_un",b+="derlay_up",d.error)return a.Studies.removeAnchorHandle(y,d);var{"Alert Threshold":v=""}=d.inputs;e.h8L(1);var x=e.b00(18,14);e.h8L(156);var A=e.A1W(95,7,19,7,5);e.h8L(52);var T=e.A1W(6,14,1670,20);e.h8L(6);var _=e.A1W(35,3);f=parseInt(v.slice("0"<<x,A),T)/("100"|_),m=d.outputs["Alert Bar"],typeof m=="object"&&(m=m.color),d.volumeField="V "+d.name,d.alignStepToSide=!0,d.extendToEndOfLastBar=!0,d.lineWidth=2,C=y.canvasStyle(b).opacity,S=y.canvasStyle("stx_volume_underlay_down").opacity,d.colorFunction=function(M){var F,P,E,O,I,B,N;F="P",F+="V ";var{Open:R,Close:q,iqPrevClose:Y}=M;return P=y.colorByCandleDirection?R:Y,e.h8L(157),E=e.b00(P,q),O=M[F+d.name],e.q8H(),I=M["V "+d.name],e.L_A(158),B=e.b00(1,O,f),N=f<("0"|0)?I<B:I>B,{fill_color:N&&m||(E?this.fill_color_down:this.fill_color_up),border_color:E?this.border_color_down:this.border_color_up,opacity:N?1:E?S:C,border_opacity:E?S:C}},w=d.study?d.study.name:d.type;var{loadingMore:L}=y.chart;if(k=g.some(M=>M&&M[d.volumeField]&&M["PV "+d.name]),D=g[0]&&!g[0].futureTick&&(g[0]["PV "+d.name]===void 0||(d.dependentsOutputMap||[]).some(M=>(e.r8j(),[void 0,null].includes(g[0][M])))),!k&&L)return d.error=`Fetching data for ${w}`;a.Studies.createVolumeChart(y,d,g),a.Studies.displaySeriesAsLine(y,d,g),d.anchorHandle&&a.Studies.displayAnchorHandleAndLine(y,d,g),D&&a.Studies.calculateProjectedVolume(y,d)},a.Studies.studyLibrary=a.extend(a.Studies.studyLibrary,{PVAT:{name:"Projected Volume at Time",range:p,yAxis:{ground:!0},calculateFN:a.Studies.calculateProjectedVolume,seriesFN:a.Studies.displayProjectedVolume,initializeFN:a.Studies.initProjectedVolume,removeFN:a.Studies.removeAnchorHandle,inputs:{"Lookback Days":10,"Anchor Time":"","Alert Threshold":["+150%","+125%","+100%","+75%","+50%","+25%",c,"-25%",u,"-75%",l,"-125%",o],"Anchor Selector":!0},outputs:{"Average Line":h,"Alert Bar":"#cfbd0e","Up Volume":"#8cc176","Down Volume":s},parameters:{plotType:"step"},attributes:{"Anchor Time":{placeholder:"hh:mm:ss",step:"1"|1},"Alert Threshold":{defaultSelected:"+50%"}}},PAV:{name:"Projected Aggregate Volume",range:"0 to max",yAxis:{ground:!0},calculateFN:a.Studies.calculateProjectedVolume,seriesFN:a.Studies.displayProjectedVolume,initializeFN:a.Studies.initProjectedVolume,removeFN:a.Studies.removeAnchorHandle,inputs:{"Lookback Days":10,"Anchor Time":"","Anchor Selector":!0},outputs:{"Average Line":n,"Up Volume":"#8cc176","Down Volume":i},parameters:{plotType:"step"},attributes:{"Anchor Time":{placeholder:"hh:mm:ss",step:1}}}})):console.error("projectedVolume feature requires first activating studies feature.")};$o=W=>{var e=se,t,a,r,i,n;if(t=typeof _CIQ<"u"?_CIQ:W.CIQ,e.r8j(),t.Studies)t.Studies.calculatePsychologicalLine=function(h,o){var l,u,c,p,y,d,g,b;if(l=o.chart.scrubbed,e.r8j(),l.length<o.days+1){u=1742991855,c=330659363,p=2;for(var f=1;e.i7q(f.toString(),f.toString().length,85226)!==u;f++)o.error=!1,e.L_A(44),p+=e.A1W("2",0);e.i7q(p.toString(),p.toString().length,73057)!==c&&(o.error=!0),o.error=!0;return}y=[],d=100/o.days,g=0;for(var m=Math.max(o.startFrom-o.days,1);m<l.length&&!l[m].futureTick;m++)b=+(l[m].Close>l[m-1].Close),b&&(g+=d),y.push(b),y.length>o.days&&(g-=y.shift()*d),!(m<o.startFrom)&&(isNaN(l[m].Close)||(l[m]["Result "+o.name]=g))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{PSY:{name:"Psychological Line",range:"0 to 100",calculateFN:t.Studies.calculatePsychologicalLine,inputs:{Period:20}}});else{a=1897189890,r=-1773529684,i=2;for(var s=1;e.i7q(s.toString(),s.toString().length,97521)!==a;s++)n="psychologicalLine feature requires first",n+=" ac",n+="tivating st",n+="udies feature.",console.error(n),i+=2;e.E3k(i.toString(),i.toString().length,5067)!==r&&console.error("")}};el=W=>{var e=se;e.q8H();var t,a,r,i,n,s;if(t=typeof _CIQ<"u"?_CIQ:W.CIQ,!t.Studies)a="qstick feature requires ",a+="first activating studies feature.",console.error(a);else{t.Studies.calculateQStick=function(o,l){var u;if(e.r8j(),u=l.chart.scrubbed,u.length<l.days+1){l.error=!0;return}for(var c=l.startFrom;c<u.length;c++)u[c]["_Close-Open "+l.name]=u[c].Close-u[c].Open;t.Studies.MA(l.inputs["Moving Average Type"],l.days,"_Close-Open "+l.name,0,"Result",o,l)},r=1927111777,i=-1544459717,n=2;for(var h=1;e.E3k(h.toString(),h.toString().length,63322)!==r;h++)s="m",s+="a",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{QStick:{name:"QStick",calculateFN:t.Studies.calculateQStick,inputs:{Period:8,"Moving Average Type":s}}}),n+=2;e.i7q(n.toString(),n.toString().length,35189)!==i&&(t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{QStick:{name:"Moving Average Type",calculateFN:t.Studies.calculateQStick,inputs:{Period:6,"Moving Average Type":"Moving Average Type"}}}))}};tl=W=>{var e=se,t,a,r,i,n,s,h,o,l,u;t=typeof _CIQ<"u"?_CIQ:W.CIQ,e.r8j(),t.Studies?(r="#F",r+="F0",r+="0FF",i="#000",i+="0FF",n="#00FF",n+="FF",s="#00F",s+="F7",s+="F",h="#",h+="7",h+="FFF00",o="#FFF",o+="F00",l="#FF",l+="7",l+="F",l+="00",u="fie",u+="l",u+="d",t.Studies.calculateRainbow=function(c,p){var y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M;function F(z,V){var K,Q;e.h8L(6),e.r8j();var j=e.b00(0,1);K=Number.MAX_VALUE*j,Q=Number.MAX_VALUE;for(var Z=V-z+1;Z<=V;Z++)Z<0||(K=Math.max(K,g[Z].Close),Q=Math.min(Q,g[Z].Close));return[Q,K]}if(y="Cl",y+="o",y+="se",d="fi",d+="e",d+="ld",g=p.chart.scrubbed,g.length<p.days+1){p.error=!0;return}b=p.inputs.Field,(!b||b==d)&&(b=y),f=b;for(var P=1;P<=10;P++){m="s",m+="im",m+="ple",t.Studies.MA(m,p.days,f,0,"SMA"+P,c,p),e.L_A(53);var E=e.b00(8699,8714,1,8714);e.L_A(54),e.b00(3,14193,58520,19),f="SMA"+P+(E!==2080?" ":"P")+p.name}for(var O=Math.max(p.startFrom,10);O<g.length;O++)if(g[O]){if(g[O].futureTick)break;C=0,S=0,e.h8L(159);var I=e.b00(0,19,1,19);for(w=Number.MAX_VALUE*I,k=Number.MAX_VALUE,P="1"*1;P<=10;P++)D=g[O]["SMA"+P+" "+p.name],(D||D===0)&&(C+=D,S++,w=Math.max(w,D),k=Math.min(k,D));if(p.name.indexOf("Osc")>-1&&(v=F(p.inputs["HHV/LLV Lookback"],O),S)){x="Ov",x+="er",x+=" ",e.L_A(160);var B=e.b00(6,114,3410,5,18);e.h8L(42);var N=e.A1W(2,6,6,0);g[O][p.name+"_hist"]=B*(g[O][b]-C/S)/Math.max(1e-6,v[N]-v[0]),e.L_A(51);var R=e.b00(82,19,8,14,7);e.h8L(161);var q=e.b00(1,14,17,239,1);e.h8L(49);var Y=e.b00(15,224,15);g[O]["Over "+p.name]=R*(w-k)/Math.max(1e-6,v[q]-v["0"*Y]),g[O]["Under "+p.name]=-g[O][x+p.name],g[O]["Zero "+p.name]=0}}p.name.indexOf("Osc")>-1&&(A="_h",A+="i",A+="st",T="Zer",T+="o ",_="Unde",_+="r ",L="Positiv",L+="e B",L+="ar",M="O",M+="v",M+="e",M+="r ",p.outputMap={},p.outputMap[M+p.name]=L,p.outputMap[_+p.name]="Negative Bar",p.outputMap[T+p.name]="",p.outputMap[p.name+A]="")},t.Studies.displayRainbowMA=function(c,p,y){var d,g;d=c.panels[p.panel];for(var b=10;b>0;b--)g="SM",g+="A",t.Studies.displayIndividualSeriesAsLine(c,p,d,g+b+" "+p.name,y)},t.Studies.displayRainbowOsc=function(c,p,y){var d,g,b,f,m,C,S,w,k,D,v,x,A,T;d="N",d+="egative",d+=" B",d+="ar",g="Z",g+="e",g+="ro",g+=" ",b="Ove",b+="r",b+=" ",t.Studies.displaySeriesAsLine(c,p,y),f=c.panels[p.panel],m=p.getContext(c),C=p.getYAxis(c),c.startClip(p.panel),!p.highlight&&c.highlightedDraggable&&(m.globalAlpha*=.3),S=c.pixelFromPrice(0,f,C),w=f.name!=p.chart.name,k=t.Studies.determineColor(p.outputs["Positive Bar"]),m.strokeStyle=k,c.plotDataSegmentAsLine("Over "+p.name,f,{skipTransform:w,label:!1,yAxis:C}),e.h8L(31),D=m.createLinearGradient(e.A1W("0",32),S,e.b00("0",0,e.L_A(44)),C.flipped?C.bottom:C.top),D.addColorStop(0,c.containerColor),D.addColorStop(1,k),t.prepareChannelFill(c,{skipTransform:w,color:D,opacity:!p.highlight&&c.highlightedDraggable?.3:1,panelName:p.panel,topBand:b+p.name,bottomBand:g+p.name,yAxis:C}),v=t.Studies.determineColor(p.outputs[d]),m.strokeStyle=v,c.plotDataSegmentAsLine("Under "+p.name,f,{skipTransform:w,label:!1,yAxis:C}),x=m.createLinearGradient(0,S,0,C.flipped?C.top:C.bottom),x.addColorStop(0,c.containerColor),x.addColorStop(1,v),t.prepareChannelFill(c,{skipTransform:w,color:x,opacity:!p.highlight&&c.highlightedDraggable?.3:1,panelName:p.panel,topBand:"Zero "+p.name,bottomBand:"Under "+p.name,yAxis:C}),e.L_A(27);var _=e.b00(19,17);A=c.layout.candleWidth-_,A<"2"<<0&&(A=1),c.canvasColor("stx_histogram"),p.underlay||(e.h8L(24),m.globalAlpha=e.b00("1",32)),!p.highlight&&c.highlightedDraggable&&(m.globalAlpha*=.3),m.fillStyle="#CCCCCC";for(var L=0;L<y.length;L++)T=y[L],T&&(T[p.name+"_hist"]>"0"-0?m.fillStyle=k:T[p.name+"_hist"]<0&&(m.fillStyle=v),T.candleWidth&&(A=Math.floor(Math.max(1,T.candleWidth-2))),m.fillRect(Math.floor(c.pixelFromBar(L,f.chart)-A/2),Math.floor(S),Math.floor(A),Math.floor(c.pixelFromPrice(T[p.name+"_hist"],f,C)-S)));c.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Rainbow MA":{name:"Rainbow Moving Average",overlay:!0,calculateFN:t.Studies.calculateRainbow,seriesFN:t.Studies.displayRainbowMA,inputs:{Period:2,Field:u},outputs:{SMA1:"#FF0000",SMA2:l,SMA3:o,SMA4:h,SMA5:s,SMA6:n,SMA7:"#007FFF",SMA8:i,SMA9:"#7F00FF",SMA10:r}},"Rainbow Osc":{name:"Rainbow Oscillator",calculateFN:t.Studies.calculateRainbow,seriesFN:t.Studies.displayRainbowOsc,centerline:0,inputs:{Period:2,Field:"field","HHV/LLV Lookback":10},outputs:{"Positive Bar":"#00DD00","Negative Bar":"#FF0000"}}})):(a="r",a+="ainbow f",a+="eature requires first activating studies feature.",console.error(a))};il=W=>{var e,t;e="undef",e+="i",se.r8j(),e+="n",e+="ed",t=typeof _CIQ!==e?_CIQ:W.CIQ,t.Studies?(t.Studies.calculateRandomWalk=function(a,r){se.q8H();var i,n,s,h,o,l,u,c,p,y;if(i=r.chart.scrubbed,i.length<r.days+1){r.error=!0;return}for(var d=Math.max(2,r.startFrom);d<i.length;d++){n=0,s=i[d].High,h=i[d].Low,o=0,l=0;for(var g=1;g<=r.days&&!i[d].futureTick;g++){if(d<=g){o=l=0;break}n+=i[d-g].trueRange,u=n/g*Math.sqrt(g),u&&(c=(s-i[d-g].Low)/u,p=(i[d-g].High-h)/u,o=Math.max(o,c),l=Math.max(l,p))}!i[d].futureTick&&(!isNaN(s)||!isNaN(h))&&(y="Random W",y+="alk Low",y+=" ",i[d]["Random Walk High "+r.name]=o,i[d][y+r.name]=l)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Random Walk":{name:"Random Walk Index",calculateFN:t.Studies.calculateRandomWalk,outputs:{"Random Walk High":"#FF0000","Random Walk Low":"#0000FF"}}})):console.error("randomWalk feature requires first activating studies feature.")};rl=W=>{var e;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Studies?(e.Studies.calculateRelativeVigor=function(t,a){var r,i,n,s,h,o,l,u,c,p,y,d,g;if(r="t",r+="ri",r+="angula",r+="r",se.r8j(),i=a.chart.scrubbed,i.length<a.days+1){a.error=!0;return}for(n=a.startFrom;n<i.length;n++)s="_Ran",s+="ge",s+=" ",h="_Cha",h+="nge ",o=i[n],!isNaN(o.Close)&&!isNaN(o.Open)&&(o[h+a.name]=o.Close-o.Open),!isNaN(o.High)&&!isNaN(o.Low)&&(o[s+a.name]=o.High-o.Low);for(e.Studies.MA(r,4,"_Change "+a.name,0,"_Numer",t,a),e.Studies.MA("triangular",4,"_Range "+a.name,0,"_Denom",t,a),l=[],u=[],n=Math.max(a.startFrom-a.days,0);n<i.length&&(c="_",c+="Numer",c+=" ",!i[n].futureTick);n++)if(!(i[n]["_Numer "+a.name]===null&&i[n]["_Denom "+a.name]===null)){for(l.push(i[n][c+a.name]),u.push(i[n]["_Denom "+a.name]),l.length>a.days&&(l.shift(),u.shift()),p=0,y=0,d=0;d<l.length;d++)p+=l[d];for(d=0;d<u.length;d++)y+=u[d];y===0&&(y=1e-8),!(n<a.startFrom)&&(se.L_A(10),i[n]["Rel Vig "+a.name]=se.b00(p,y))}for(e.Studies.MA("triangular",4,"Rel Vig "+a.name,0,"RelVigSignal",t,a),n=a.startFrom;n<i.length;n++)g="Re",g+="lVigSi",g+="gn",g+="al ",i[n][a.name+"_hist"]=i[n]["Rel Vig "+a.name]-i[n][g+a.name];a.outputMap[a.name+"_hist"]=""},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Rel Vig":{name:"Relative Vigor Index",seriesFN:e.Studies.displayHistogramWithSeries,calculateFN:e.Studies.calculateRelativeVigor,inputs:{Period:10},outputs:{"Rel Vig":"auto",RelVigSignal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):console.error("relativeVigor feature requires first activating studies feature.")};al=W=>{var e=se,t,a,r,i;if(e.r8j(),t=typeof _CIQ<"u"?_CIQ:W.CIQ,t.Studies)t.Studies.calculateRSI=function(s,h){var o,l,u,c,p,y,d,g,b;if(e.r8j(),o=h.chart.scrubbed,l=h.inputs.Field,(!l||l=="field")&&(l="Close"),o.length<h.days+1){h.error=!0;return}for(var f=h.startFrom;f<o.length;f++)if(u="_a",u+="v",u+="gL",u+=" ",!!f&&(c=o[f],e.h8L(6),p=o[e.b00(f,1)],!(!c[l]&&c[l]!==0)&&!(!p[l]&&p[l]!==0))){if(y=c[l]-p[l],d=Math.min(f,h.days),g=p["_avgG "+h.name],g||(g=0),e.L_A(10),g-=e.b00(g,d),b=p["_avgL "+h.name],b||(b=0),e.L_A(10),b-=e.A1W(b,d),y>0)e.L_A(10),g+=e.A1W(y,d);else if(y<=0)e.h8L(10),b-=e.A1W(y,d);else continue;f>=h.days&&(g||g!==0)&&(b||b!==0)&&(c["RSI "+h.name]=m(g,b)),c["_avgG "+h.name]=g,c[u+h.name]=b}h.zoneOutput="RSI";function m(C,S){var w;return e.r8j(),S==="0"<<64?100:(e.h8L(10),w=e.A1W(C,S),e.L_A(162),e.A1W(w,100,100,1))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{rsi:{name:"RSI",inputs:{Period:"14"|6,Field:"field"},calculateFN:t.Studies.calculateRSI,range:"0 to 100",outputs:{RSI:"auto"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}}});else{a=471551860,r=1114576968,i=2;for(var n="1"<<0;e.E3k(n.toString(),n.toString().length,68992)!==a;n++)console.error(""),i+=2;e.E3k(i.toString(),i.toString().length,76680)!==r&&console.error("rsi feature requires first activating studies feature.")}};nl=W=>{var e,t;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Studies?(t="0",t+=" t",t+="o ",t+="100",e.Studies.calculateSchaff=function(a,r){var i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v;i="_",i+="MAC",i+="D",i+="2",n="fi",n+="e";function x(T,_,L){var M=se,F,P,E;F=null,P=null,M.r8j();for(var O=_-T+1;O<=_;O++){M.h8L(27),M.A1W(14,13),M.L_A(87),M.b00(5967,6,747),M.h8L(8);var I=M.b00(13,2,9199);M.h8L(4);var B=M.A1W(11,114699,122880);M.L_A(66);var N=M.A1W(7347,2449,7357);M.h8L(37),M.A1W(3,14,198,2559),M.L_A(1);var R=M.A1W(8389,494);M.h8L(1);var q=M.b00(801,44);E=s[O][L+(I!=B?847.28>=N?R:" ":q)+r.name],E&&(F=F===null?E:Math.min(F,E),P=P===null?E:Math.max(P,E))}return[F,P]}if(n+="ld",s=r.chart.scrubbed,se.r8j(),h=r.days,o=Number(r.inputs["Short Cycle"]),l=Number(r.inputs["Long Cycle"]),s.length<Math.max(h,o,l)+1){r.error=!0;return}u=r.inputs.Field,(!u||u==n)&&(u="Close"),c=.5,e.Studies.MA(r.inputs["Moving Average Type"],o,u,0,"_MACD1",a,r),e.Studies.MA(r.inputs["Moving Average Type"],l,u,0,i,a,r),p=0,y=0;for(var A=r.startFrom;A<s.length;A++)d="_",d+="MA",d+="C",d+="D",g="_M",g+="ACD ",b=s[A],!(A<l-1)&&(f=b["_MACD1 "+r.name],m=b["_MACD2 "+r.name],(f||f===("0"^0)||m||m===0)&&(C="_",C+="MAC",C+="D ",se.h8L(6),b[C+r.name]=se.b00(f,m)),S=b[g+r.name],!(A<l+(h-1))&&(w=x(h,A,d),p=w[1]>w[0]?100*(S-w[0])/(w[1]-w[0]):p,(S||S===0)&&(k="_",k+="P",k+="F",k+=" ",b["_PF "+r.name]=s[A-1]["_PF "+r.name]?s[A-1]["_PF "+r.name]+c*(p-s[A-1][k+r.name]):p),D=b["_PF "+r.name],!(A<l+("2"<<64)*(h-1))&&(w=x(h,A,"_PF"),y=w[1]>w[0]?100*(D-w[0])/(w[1]-w[0]):y,(D||D===0)&&(v="Res",v+="ul",v+="t",v+=" ",b["Result "+r.name]=s[A-1][v+r.name]?s[A-1]["Result "+r.name]+c*(y-s[A-1]["Result "+r.name]):y))))},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{Schaff:{name:"Schaff Trend Cycle",range:t,calculateFN:e.Studies.calculateSchaff,inputs:{Period:10,Field:"field","Short Cycle":23,"Long Cycle":50,"Moving Average Type":"ema"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:75,studyOverBoughtColor:"auto",studyOverSoldValue:25,studyOverSoldColor:"auto"}}}})):console.error("schaffTrendCycle feature requires first activating studies feature.")};sl=W=>{var e=se,t,a,r,i,n,s,h;t=-1815636431,a=-1942139954,e.h8L(6),r=e.b00("2",0);for(var o=1;e.E3k(o.toString(),o.toString().length,25142)!==t;o++)i=-_CIQ!=""?_CIQ:W.CIQ,r+=2;e.i7q(r.toString(),r.toString().length,89240)!==a&&(i=typeof _CIQ<"u"?_CIQ:W.CIQ),i.Studies?(s="#5",s+="F7CB8",h="Sh",h+="inoha",h+="ra Intensity Ratio",i.Studies.calculateShinohara=function(l,u){var c,p,y;if(c=u.chart.scrubbed,c.length<u.days+1){u.error=!0;return}p={weakNum:0,weakDen:0,strongNum:0,strongDen:0},u.startFrom>1&&(p=i.clone(c[u.startFrom-1]["_accums "+u.name]));for(var d=u.startFrom;d<c.length;d++){if(p.weakNum+=c[d].High-c[d].Close,p.weakDen+=c[d].Close-c[d].Low,d>0){e.h8L(49);var g=e.A1W(14,265,19);p.strongNum+=c[d].High-c[d-g].Close,e.h8L(27);var b=e.b00(20,19);p.strongDen+=c[d-b].Close-c[d].Low}if(d>=u.days){y="W",y+="e",y+="ak Rat",y+="io ",p.weakNum-=c[d-u.days].High-c[d-u.days].Close,p.weakDen-=c[d-u.days].Close-c[d-u.days].Low,e.L_A(6);var f=e.A1W(108,8);if(c[d][y+u.name]=f*p.weakNum/p.weakDen,d>u.days){e.L_A(163);var m=e.b00(2,19,16,1,17);p.strongNum-=c[d-u.days].High-c[d-u.days-m].Close,e.h8L(4);var C=e.A1W(5,13,9);p.strongDen-=c[d-u.days-C].Close-c[d-u.days].Low,c[d]["Strong Ratio "+u.name]=100*p.strongNum/p.strongDen}}c[d]["_accums "+u.name]=i.clone(p)}},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{Shinohara:{name:h,calculateFN:i.Studies.calculateShinohara,inputs:{Period:26},outputs:{"Strong Ratio":"#E99B54","Weak Ratio":s}}})):(n="shinohara featu",n+="re requires first activating studies feature.",console.error(n))};ol=W=>{var e=se,t,a,r,i,n,s,h,o,l,u,c,p;t=1094809147,a=-563425152,r=2;for(var y=1;e.i7q(y.toString(),y.toString().length,3364)!==t;y++)i=typeof _CIQ<"u"?_CIQ:W.CIQ,r+=2;e.i7q(r.toString(),r.toString().length,31391)!==a&&(i=!_CIQ!=""?_CIQ:W.CIQ),i.Studies?(n="a",n+="u",n+="t",n+="o",s="0",s+=" to 100",h="S",h+="tochastics",o="au",o+="t",o+="o",l="#FF",l+="000",l+="0",u="0",u+=" to 100",c="#F",c+="F",c+="00",c+="00",p="e",p+="ma",i.Studies.calculateStochastics=function(d,g){var b,f,m,C,S,w,k,D,v,x,A,T;b="_Fast",b+="%K ",f="%K Smoothing",f+=" Periods",m="%",m+="K Per",m+="i",m+="ods",g.smooth||(g.smooth=g.inputs.Smooth),C=g.inputs.Field;function _(M,F,P){var E,O,I,B,N,R;e.L_A(8),E=e.b00(1,P,M),e.L_A(6);var q=e.A1W(9,10);O=Number.MAX_VALUE*q,I=Number.MAX_VALUE;for(var Y=E;Y<=M;Y++)B=w[Y][F=="Close"?"Low":F],N=w[Y][F=="Close"?"High":F],!(!B&&B!==0)&&(!N&&N!=="0"*1||(I=Math.min(I,B),O=Math.max(O,N)));return O==Number.MAX_VALUE*-1||I==Number.MAX_VALUE?null:(R=O==I?0:(w[M][F]-I)/(O-I)*100,R)}if((!C||C=="field")&&(C="Close"),S=g.inputs[m],S||(S=g.days),e.r8j(),w=g.chart.scrubbed,w.length<Math.max(S,g.days)+1){g.error=!0;return}k=g.inputs[f],k&&!g.inputs.Fast?g.smooth=!0:g.smooth&&(k=3),D=g.inputs["%D Periods"],D||(D=3),g.outputs.Fast&&(v="S",v+="lo",v+="w",x="F",x+="a",x+="s",x+="t",A="%",A+="K ",g.outputMap={},g.outputMap[A+g.name]=x,g.outputMap["%D "+g.name]=v);for(var L=Math.max(S,g.startFrom);L<w.length;L++)T=_(L,C,S),T!==null&&(w[L]["_Fast%K "+g.name]=_(L,C,S));i.Studies.MA("simple",g.smooth?k:1,b+g.name,0,"%K",d,g),i.Studies.MA("simple",D,"%K "+g.name,0,"%D",d,g)},i.Studies.calculateStochMomentum=function(d,g){var b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P;b="%",b+="D Moving A",b+="verage Type",f="_",f+="DHL1",m="_HS",m+="1",m+=" ",C="%",C+="K Periods",S=Number(g.inputs[C]),w=-571441511,k=-399901236,D=2;for(var E=1;e.i7q(E.toString(),E.toString().length,"53525">>0)!==w;E++)v="%K Do",v+="uble Smoothi",v+="ng Periods",x=Number(g.inputs["%K Smoothing Periods"]),A=Number(g.inputs[v]),e.L_A(6),D+=e.A1W("2",0);e.E3k(D.toString(),D.toString().length,33986)!==k&&(T="%K S",T+="moothing Periods",x=Number(g.inputs[T]),A=Number(g.inputs["%K Double Smoothing Periods"]));function O(R,q){var Y,z;Y=null,z=null;for(var V=q-R+1;V<=q;V++)Y=Y===null?L[V].Low:Math.min(Y,L[V].Low),z=z===null?L[V].High:Math.max(z,L[V].High);return[Y,z]}if(_=Number(g.inputs["%D Periods"]),L=g.chart.scrubbed,e.q8H(),L.length<S+x+A-1||L.length<_){g.error=!0;return}for(M=Math.max(S,g.startFrom)-1;M<L.length;M++){F=L[M],P=O(S,M),e.L_A(122);var I=e.A1W(5,57,8,28,2);F["_H "+g.name]=F.Close-(P[0]+P["1"<<0])/I,e.h8L(35);var B=e.A1W(4,12,7,5,19);F["_DHL "+g.name]=P[B]-P["0"-0]}for(i.Studies.MA("exponential",x,"_H "+g.name,0,"_HS1",d,g),i.Studies.MA("exponential",A,m+g.name,0,"_HS2",d,g),i.Studies.MA("exponential",x,"_DHL "+g.name,0,f,d,g),i.Studies.MA("exponential",A,"_DHL1 "+g.name,"0"^0,"_DHL2",d,g),M=S-1;M<L.length;M++){e.h8L(55);var N=e.b00(19,17,118,16);L[M]["%K "+g.name]=L[M]["_HS2 "+g.name]/(.5*L[M]["_DHL2 "+g.name])*N}i.Studies.MA(g.inputs[b],_,"%K "+g.name,0,"%D",d,g),g.zoneOutput="%K"},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{"Stch Mtm":{name:"Stochastic Momentum Index",calculateFN:i.Studies.calculateStochMomentum,inputs:{"%K Periods":10,"%K Smoothing Periods":3,"%K Double Smoothing Periods":3,"%D Periods":10,"%D Moving Average Type":p},outputs:{"%K":"auto","%D":c},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:40,studyOverBoughtColor:"auto",studyOverSoldValue:-40,studyOverSoldColor:"auto"}}},stochastics:{name:"Stochastics (Simple)",range:u,calculateFN:i.Studies.calculateStochastics,inputs:{Period:14,Field:"field",Smooth:!0},outputs:{Fast:"auto",Slow:l},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:o,studyOverSoldValue:20,studyOverSoldColor:"auto"}}},Stochastics:{name:h,range:s,calculateFN:i.Studies.calculateStochastics,inputs:{Field:"field","%K Periods":14,Fast:!1,"%K Smoothing Periods":"3"*1,"%D Periods":3},outputs:{"%K":"auto","%D":"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:n}},attributes:{"%K Smoothing Periods":{hidden:function(){return this.inputs.Fast}}},centerline:50}})):console.error("stochastics feature requires first activating studies feature.")};ll=W=>{var e,t;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Studies?(t="#b",t+="82c0c",e.Studies.calculateSupertrend=function(a,r){var i=se,n,s,h,o,l,u,c,p,y,d,g,b;if(n="Tr",n+="e",n+="n",n+="d ",s=r.chart.scrubbed,s.length<r.days+1){r.error=!0;return}e.Studies.calculateStudyATR(a,r);for(var f=r.startFrom;f<s.length;f++)if(h="_Do",h+="wntrend ",o=s[f],!!o){i.L_A(5);var m=i.b00(18,15,12,13);l=(o.High+o.Low)/m,u=r.inputs.Multiplier*o["ATR "+r.name],i.L_A(6),c=i.A1W(l,u),i.L_A(1),p=i.A1W(u,l),f&&(y="_Down",y+="trend ",d="_D",d+="o",d+="wntre",d+="nd ",g="_",g+="Up",g+="tren",g+="d ",s[f-1]&&s[f-1].Close&&s[f-1].Close>s[f-1]["_Uptrend "+r.name]&&s[f-1]["_Uptrend "+r.name]>c&&(i.h8L(6),c=s[i.b00(f,1)][g+r.name]),s[f-1]&&s[f-1].Close&&s[f-1].Close<s[f-1][d+r.name]&&s[f-1]["_Downtrend "+r.name]<p&&(i.L_A(6),p=s[i.A1W(f,1)][y+r.name])),o["_Direction "+r.name]=1,f&&(b="_",b+="Direction ",i.h8L(14),o["_Direction "+r.name]=s[i.A1W(f,"1")]["_Direction "+r.name],o.Close>s[f-1]["_Downtrend "+r.name]?o[b+r.name]=1:o.Close<s[f-1]["_Uptrend "+r.name]&&(o["_Direction "+r.name]=-1)),o["_Uptrend "+r.name]=c,o[h+r.name]=p,o["Trend "+r.name]=o["_Direction "+r.name]>0?c:p}i.q8H(),r.outputMap={},r.outputMap[n+r.name]=""},e.Studies.displaySupertrend=function(a,r,i){var n=se,s,h,o,l,u,c,p,y,d,g,b,f,m,C;s=a.panels[r.panel],h=r.getContext(a),o=r.getYAxis(a),l={skipTransform:s.name!=r.chart.name,skipProjections:!0,label:a.preferences.labels,yAxis:o,highlight:r.highlight},u="Trend "+r.name;for(var S=0;s.chart.transformFunc&&o!=s.chart.yAxis&&S<i.length;S++)c=i[S],c&&c.transform&&(c.transform[u]=s.chart.transformFunc(a,s.chart,c[u]));a.plotDataSegmentAsLine(u,s,l,w),h.lineWidth=1;function w(A,T,_){var L;return L="_",L+="Direc",L+="tion ",n.r8j(),T&&T[L+r.name]<0?r.outputs.Downtrend:r.outputs.Uptrend}h.globalAlpha=1,a.startClip(r.panel),!r.highlight&&a.highlightedDraggable&&(h.globalAlpha*=.3),n.h8L(164);var k=n.A1W(16,4746,277,8,15);n.h8L(55);var D=n.A1W(7,14,0,5);for(p=h.measureText(k!=483.4?"":905.62).width/D,n.r8j(),y=0;y<i.length;y++)if(g="_",g+="Dir",g+="ecti",g+="on ",!(!i[y]||!i[y-1])){if(i[y-1]["_Direction "+r.name]>i[y][g+r.name]){b="bot",b+="t",b+="om",d=e.Studies.determineColor(r.outputs.Downtrend),(!d||d=="auto"||e.isTransparent(d))&&(d=a.defaultColor),h.fillStyle=d,h.textBaseline=b,f=a.pixelFromPrice(i[y].High,s,o);for(var v=5;v<=45;v+=10)o.flipped?h.fillText("",a.pixelFromBar(y)-p,f+v):h.fillText("",a.pixelFromBar(y)-p,f-v)}else if(i[y-1]["_Direction "+r.name]<i[y]["_Direction "+r.name]){m="t",m+="o",m+="p",d=e.Studies.determineColor(r.outputs.Uptrend),(!d||d=="auto"||e.isTransparent(d))&&(d=a.defaultColor),h.fillStyle=d,h.textBaseline=m,C=a.pixelFromPrice(i[y].Low,s,o);for(var x=5;x<=45;x+=10)o.flipped?h.fillText("",a.pixelFromBar(y)-p,C-x):h.fillText("",a.pixelFromBar(y)-p,C+x)}}a.endClip()},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{Supertrend:{name:"Supertrend",overlay:!0,seriesFN:e.Studies.displaySupertrend,calculateFN:e.Studies.calculateSupertrend,inputs:{Period:7,Multiplier:3},outputs:{Uptrend:"#8cc176",Downtrend:t},attributes:{Multiplier:{min:.1,step:.1}}}})):console.error("supertrend feature requires first activating studies feature.")};hl=W=>{var e=se,t,a;t=typeof _CIQ<"u"?_CIQ:W.CIQ,e.q8H(),t.Studies?(a="Sw",a+="ing ",a+="In",a+="dex",t.Studies.calculateSwingIndex=function(r,i){var n,s,h,o,l,u,c,p,y,d,g,b,f;if(n="R",n+="esu",n+="lt ",e.r8j(),s=i.inputs["Limit Move Value"],(s===null||isNaN(s))&&(s=99999),h=i.chart.scrubbed,o=0,i.startFrom>1){e.h8L(27);var m=e.b00(18,17);o=h[i.startFrom-m][n+i.name]}for(var C=Math.max(1,i.startFrom);C<h.length;C++){l="S",l+="w",l+="in",l+="g",u=Math.abs(h[C].High-h[C-1].Close),c=Math.abs(h[C].Low-h[C-1].Close),p=Math.abs(h[C].High-h[C].Low),y=Math.abs(h[C-1].Close-h[C-1].Open),d=Math.max(u,c),g=Math.max(p,d),e.L_A(19),b=e.b00(g,y,.25),g==u?(e.h8L(18),b-=e.b00(.5,c)):g==c&&(e.L_A(18),b-=e.A1W(.5,u)),e.h8L(87);var S=e.b00(2,17,31);e.h8L(6);var w=e.A1W(10,9);e.h8L(165);var k=e.b00(20,8,2872,7,18);e.h8L(59);var D=e.A1W(13,36,20,4);f=S*(h[C].Close-h[C-w].Close+.5*(h[C].Close-h[C].Open)+.25*(h[C-k].Close-h[C-D].Open))/b*(d/s),(b===0||s===("0"^0))&&(f=0),i.type==l&&(o=0),o+=f,h[C]["Result "+i.name]=o}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Acc Swing":{name:"Accumulative Swing Index",calculateFN:t.Studies.calculateSwingIndex,inputs:{"Limit Move Value":.5}},Swing:{name:a,calculateFN:t.Studies.calculateSwingIndex,inputs:{"Limit Move Value":.5}}})):console.error("swingIndex feature requires first activating studies feature.")};ul=W=>{var e,t,a;e="undefin",e+="ed",t=typeof _CIQ!==e?_CIQ:W.CIQ,t.Studies?(a="#FF0",a+="00",a+="0",t.Studies.calculateTrendIntensity=function(r,i){var n=se,s,h,o,l,u,c,p,y,d,g,b;if(s="Si",s+="gnal Period",h="e",h+="ma",o=i.chart.scrubbed,o.length<i.days+1){i.error=!0;return}function f(m,C){return Math.abs(C)<1e-8?100:(n.L_A(166),n.A1W(0,m,100,C,100,"1"))}for(l=i.inputs.Field,(!l||l=="field")&&(l="Close"),t.Studies.MA("ma",i.days,l,0,"_SMA",r,i),u=0,c=0,d=[],n.q8H(),g=Math.ceil(i.days/2),p=Math.max(0,i.startFrom-g);p<o.length;p++)b="_SM",b+="A ",!(!o[p]["_SMA "+i.name]&&o[p]["_SMA "+i.name]!=="0"<<0)&&(y=o[p][l]-o[p][b+i.name],y<0?(n.L_A(167),c+=n.A1W("1",y)):u+=y,d.push(y),d.length>g&&(y=d.shift(),y<0?(n.L_A(168),c-=n.A1W(1,y)):u-=y),!(p<i.startFrom)&&(o[p]["TII "+i.name]=f(u,c)));t.Studies.MA(h,i.inputs[s],"TII "+i.name,0,"Signal",r,i)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Trend Int":{name:"Trend Intensity Index",calculateFN:t.Studies.calculateTrendIntensity,range:"0 to 100",inputs:{Period:14,Field:"field","Signal Period":9},outputs:{TII:"auto",Signal:a},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}}})):console.error("trendIntensity feature requires first activating studies feature.")};cl=W=>{var e,t;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Studies?(e.Studies.calculateTRIX=function(a,r){var i=se,n,s,h,o,l,u,c,p;if(n="_MA2",n+=" ",s=r.chart.scrubbed,s.length<r.days+1){r.error=!0;return}h=r.name,i.L_A(1),i.q8H(),o=["Close",i.b00(h,"_MA1 "),i.A1W(h,n),i.b00(h,"_MA3 ")];for(var y=0;y<o.length-1;y++)l="exponentia",l+="l",e.Studies.MA(l,r.days,o[y],0,"_MA"+(y+1).toString(),a,r);u=o[3];for(var d=Math.max(1,r.startFrom);d<s.length;d++)i.L_A(6),c=s[i.A1W(d,1)][u],c&&(p=s[d][u],(p||p===0)&&(i.h8L(1),s[d][i.A1W(h,"Result ")]=i.A1W(p,100,c,1,i.L_A(169))))},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{TRIX:{name:"TRIX",calculateFN:e.Studies.calculateTRIX}})):(t="tr",t+="ix feature requires first activating studies feature.",console.error(t))};fl=W=>{var e=se,t,a,r,i,n,s;if(t=typeof _CIQ<"u"?_CIQ:W.CIQ,e.r8j(),!t.Studies)a="twiggsMoneyFlow feature",a+=" requires firs",a+="t activating studies feature.",console.error(a);else{t.Studies.calculateTwiggsMoneyFlow=function(o,l){var u,c,p,y,d,g,b,f,m,C;if(u=l.chart.scrubbed,u.length<l.days){l.error=!0;return}c=0,p=0,e.h8L(1);var S=e.A1W(1,0);e.r8j(),y=u[l.startFrom-S],y&&(d="_s",d+="um",d+="V ",y["_sumMF "+l.name]&&(c=y["_sumMF "+l.name]),y[d+l.name]&&(p=y["_sumV "+l.name]));for(var w=Math.max(1,l.startFrom);w<u.length;w++){g="_",g+="M",g+="FV ",b="_MFV",b+=" ",f=Math.max(u[w-1].Close,u[w].High),m=Math.min(u[w-1].Close,u[w].Low),e.L_A(165);var k=e.A1W(8999991,13,466999530,3,4);if(u[w][b+l.name]=u[w].Volume*(2*u[w].Close-f-m)/(f-m===0?k:f-m),w>l.days-1){e.h8L(49);var D=e.A1W(15,164,11);c*=(l.days-D)/l.days,e.L_A(170);var v=e.A1W(3,1,10,12);p*=(l.days-v)/l.days}c+=u[w][g+l.name],p+=u[w].Volume,w>l.days-1&&(C="Re",C+="sul",C+="t",C+=" ",p&&(e.L_A(10),u[w][C+l.name]=e.b00(c,p>0?p:999999))),u[w]["_sumMF "+l.name]=c,u[w]["_sumV "+l.name]=p}},r=2075537186,i=-1650771068,n=2;for(var h=1;e.E3k(h.toString(),h.toString().length,43439)!==r;h++)t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Twiggs:{name:"",calculateFN:t.Studies.calculateTwiggsMoneyFlow,inputs:{Period:17}}}),n+=2;e.i7q(n.toString(),n.toString().length,32494)!==i&&(s="Tw",s+="iggs Money ",s+="Flow",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Twiggs:{name:s,calculateFN:t.Studies.calculateTwiggsMoneyFlow,inputs:{Period:21}}}))}};dl=W=>{var e,t,a;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Studies?e.Studies.calculateTypicalPrice?e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Typical Price":{name:"Typical Price",calculateFN:e.Studies.calculateTypicalPrice,inputs:{Period:14}},"Weighted Close":{name:"Weighted Close",calculateFN:e.Studies.calculateTypicalPrice,inputs:{Period:14}}}):(a="typicalPrice feature requires first activating medianP",a+="rice featu",a+="re.",console.error(a)):(t="t",t+="ypicalPrice feature requires f",t+="irst a",t+="ctivating studies feature.",console.error(t))};pl=W=>{var e,t;e="undefine",e+="d",t=typeof _CIQ!==e?_CIQ:W.CIQ,t.Studies?(t.Studies.calculateUlcerIndex=function(a,r){var i,n,s,h,o,l;function u(c,p,y){var d;d=null,se.r8j();for(var g=p-c+1;g<=p;g++)g<"0"*1||(d=d===null?n[g][y]:Math.max(d,n[g][y]));return d}if(i="si",i+="m",i+="pl",i+="e",n=r.chart.scrubbed,n.length<2*r.days-1){r.error=!0;return}for(s=r.inputs.Field,(!s||s=="field")&&(s="Close"),h=Math.max(r.startFrom,r.days-1);h<n.length;h++)o="_P",o+="D",o+="2 ",n[h][o+r.name]=Math.pow(100*(n[h][s]/u(r.days,h,s)-("1"-0)),2);for(t.Studies.MA(i,r.days,"_PD2 "+r.name,0,"_MA",a,r),h=Math.max(r.startFrom,"2"*1*(r.days-1));h<n.length;h++)l=n[h]["_MA "+r.name],(l||l===0)&&(n[h]["Result "+r.name]=Math.sqrt(l))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Ulcer:{name:"Ulcer Index",calculateFN:t.Studies.calculateUlcerIndex,inputs:{Period:14,Field:"field"}}})):console.error("ulcerIndex feature requires first activating studies feature.")};gl=W=>{var e=se,t;t=typeof _CIQ<"u"?_CIQ:W.CIQ,e.r8j(),t.Studies?(t.Studies.calculateUltimateOscillator=function(a,r){var i,n,s,h,o,l,u,c,p,y,d,g,b,f,m,C,S,w;if(i=r.chart.scrubbed,n=[r.inputs["Cycle 1"],r.inputs["Cycle 2"],r.inputs["Cycle 3"]],s=Math.max(n[0],n[1],n["2"*1]),i.length<s+1){r.error=!0;return}e.L_A(171);var k=e.A1W(11,1,1,7,13);h=n[0]*n["1">>k],e.h8L(8);var D=e.b00(13,11,0);o=n[0]*n[D],e.L_A(172);var v=e.b00(6,16,2,19,1);e.h8L(105);var x=e.A1W(22,17,3);l=n[v]*n[x],u=[0,0,0],c=[0,0,0],r.startFrom&&(p="_acctr",p+=" ",y="_a",y+="cct",y+="r ",i[r.startFrom-1]["_accbp "+r.name]&&(u=i[r.startFrom-1]["_accbp "+r.name].slice()),i[r.startFrom-("1"|0)][y+r.name]&&(c=i[r.startFrom-1][p+r.name].slice()));for(var A=Math.max(1,r.startFrom);A<i.length;A++){d=Math.min(i[A].Low,i[A-1].Close),g=i[A].Close-d,e.h8L(8);var T=e.b00(21,7,50);b=Math.max(i[A].High,i[A-("1">>T)].Close)-d;for(var _=0;_<n.length;_++)if(u[_]+=g,c[_]+=b,A>n[_]){f=Math.min(i[A-n[_]].Low,i[A-n[_]-1].Close),m=i[A-n[_]].Close-f,e.L_A(1);var L=e.A1W(1,0);C=Math.max(i[A-n[_]].High,i[A-n[_]-L].Close)-f,u[_]-=m,c[_]-=C}if(i[A]["_accbp "+r.name]=u.slice(),i[A]["_acctr "+r.name]=c.slice(),!(A<s)){e.h8L(27);var M=e.A1W(6,5);S=l*u[0]/c[0]+o*u["1"-0]/c[M]+h*u[2]/c["2"-0],e.h8L(87),w=e.A1W(h,o,l),e.L_A(96),i[A]["Result "+r.name]=e.b00(100,S,w)}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Ultimate:{name:"Ultimate Oscillator",calculateFN:t.Studies.calculateUltimateOscillator,inputs:{"Cycle 1":7,"Cycle 2":14,"Cycle 3":28},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:"30"<<32,studyOverSoldColor:"auto"}}}})):console.error("ultimateOscillator feature requires first activating studies feature.")};ml=W=>{var e,t,a,r,i;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Studies?(a="#85c9",a+="9",a+="e",r="#",r+="00",r+="a",r+="fed",i="harmoni",i+="c",e.Studies.calculateValuationLines=function(n,s,h){var o=se,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D;l="Di",o.q8H(),l+="splay 2 Sta",l+="ndard Deviation (",l+="2)",u="A",u+="ver",u+="age",u+=" Type",c=s.inputs.Field=="field"?"Close":s.inputs.Field,p=s.inputs[u],y=s.inputs["Display Average"],d=s.inputs["Display 1 Standard Deviation (1)"],g=s.inputs[l],b=s.inputs["Display 3 Standard Deviation (3)"],f=[];for(var v=0;v<h.length;++v)h[v]&&!isNaN(h[v][c])&&f.push(h[v][c]);m=function(x,A){var T,_,L,M,F,P;switch(T=x.length,_=0,L=0,o.h8L(18),M=o.b00("0",1),A){case"mean":for(L=T;M<T;++M)_+=x[M];break;case"harmonic":for(_=T;M<T;++M){o.h8L(4);var E=o.A1W(11,13,3);L+=E/x[M]}break;case"median":if(o.L_A(10),F=Math.floor(o.b00(T,2)),P=x.slice().sort(function(I,B){return I>B?1:I<B?-1:0}),T%2===0){o.L_A(130);var O=o.b00(13,31,17);_=P[F]+P[F-O],L=2}else _=P[F],L=1;break}return o.h8L(10),o.q8H(),o.A1W(_,L)}(f,p),C=!(d||g||b)||function(x,A){var T,_;T=x.length,_=0;for(var L=0;L<T;++L)_+=Math.pow(x[L]-A,2);return o.r8j(),o.L_A(10),Math.sqrt(o.A1W(_,T))}(f,m),s.data={Average:y?[m]:null,"1 Standard Deviation (1)":d?[m+C,m-C]:null,"2 Standard Deviation (2)":g?[m+C*2,m-C*2]:null,"3 Standard Deviation (3)":b?[m+C*3,m-C*3]:null},S=C,s.parameters||(s.parameters={}),b?(o.L_A(173),s.parameters.range=[o.A1W(S,m,3,C),o.A1W(m,S,C,3,o.h8L(174))]):g?(o.h8L(173),s.parameters.range=[o.b00(S,m,2,C),o.b00(m,S,C,2,o.h8L(174))]):d?(o.L_A(105),s.parameters.range=[o.A1W(m,C,S),o.b00(S,C,m,o.L_A(87))]):y&&(o.h8L(6),s.parameters.range=[o.b00(m,S),o.A1W(S,m,o.h8L(1))]),s.panel&&(w=n.panels[s.panel],k=n.getYAxisByName(w,s.name),k&&(k.decimalPlaces=w.chart.yAxis.printDecimalPlaces,D={yAxis:k},n.calculateYAxisRange(w,k,s.parameters.range[0],s.parameters.range[1]),n.createYAxis(w,D),n.drawYAxis(w,D)))},e.Studies.displayValuationLines=function(n,s){var h=se,o,l,u,c,p,y,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I;o="M",o+="E",o+="D",l="Average T",l+="ype",u=n.panels[s.panel],c=s.getYAxis(n),p=s.getContext(n),y=s.data,d=s.parameters.labels,g=s.inputs[l],b={mean:"AVG",median:o,harmonic:"HAVG"},f=n.canvasStyle("ciq-valuation-average-line"),m=n.canvasStyle("ciq-valuation-deviation-line"),C=3,h.h8L(1);var B=h.b00(2,0);S=n.getCanvasFontSize("stx_yaxis")+C*B;for(var N in y)if(M="Av",M+="er",M+="age",!!y[N]){for(h.L_A(175),w=h.b00(N,M),k=e.Studies.determineColor(s.outputs[N]),D=y[N],v=0;v<D.length;++v)if(F=":",F+=" ",P="y",P+="ax",P+="i",P+="s",E="n",E+="o",E+="ne",O="n",O+="on",O+="e",x=D[v],A=n.pixelFromPrice(x,u,c),!(A<=u.top||A>=u.yAxis.bottom)){if(L=w?{pattern:f.borderStyle!=O&&f.borderStyle||"solid",lineWidth:parseFloat(f.borderWidth)||1,opacity:parseFloat(f.opacity)||1,yAxis:c}:{pattern:m.borderStyle!=E&&m.borderStyle||"dashed",lineWidth:parseFloat(m.borderWidth)||1,opacity:parseFloat(m.opacity)||1,yAxis:c},n.plotLine(u.left,u.right,A,A,k,"line",p,u,L),d===P){n.createYAxisLabel(u,n.formatYAxisPrice(x,u),A,k,null,p,c);continue}A+=Math.floor(L.lineWidth/2),!(A+S>=u.yAxis.bottom)&&(T=(w?b[g]+F:N["0"^0]+": ")+n.formatYAxisPrice(x,u),_=p.measureText(T).width,I=u.right-_-C,c&&c.position=="left"&&(I=u.left+C),h.h8L(176),p.strokeText(T,I,h.A1W(A,.5,2,S)))}}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"val lines":{name:"Valuation Lines",calculateFN:function(){},seriesFN:function(n,s,h){e.Studies.calculateValuationLines(n,s,h),e.Studies.displayValuationLines(n,s)},overlay:!0,yAxisFN:function(){},inputs:{Field:"field","Average Type":["mean","median",i],"Display Average":!0,"Display 1 Standard Deviation (1)":!1,"Display 2 Standard Deviation (2)":!1,"Display 3 Standard Deviation (3)":!1},outputs:{Average:r,"1 Standard Deviation (1)":"#e1e1e1","2 Standard Deviation (2)":a,"3 Standard Deviation (3)":"#fff69e"}}})):(t="valuation",t+="Lines ",t+="feature requires first activating",t+=" studies feature.",console.error(t))};yl=W=>{var e=se,t,a,r,i,n,s,h,o,l,u;if(t="u",t+="ndef",t+="ine",t+="d",e.r8j(),a=typeof _CIQ!==t?_CIQ:W.CIQ,a.Studies)h="#3",h+="a",h+="62",h+="7d",o="fiel",o+="d",l="historica",l+="l",u="fi",u+="e",u+="ld",a.Studies.calculateRelativeVolatility=function(p,y){var d,g,b,f,m,C,S,w,k;d="Clos",d+="e";function D(_,L){return e.r8j(),_+L===0?(e.L_A(2),e.A1W("100",36)):(e.h8L(137),e.b00(100,_,_,L))}if(y.days=Number(y.inputs["Smoothing Period"]),g=Number(y.inputs["STD Period"]),b=y.chart.scrubbed,b.length<y.days+g){y.error=!0;return}f=y.inputs.Field,(!f||f=="field")&&(f=d),y.std=new a.Studies.StudyDescriptor(y.name,"sdev",y.panel),y.std.chart=y.chart,y.std.days=g,y.std.startFrom=y.startFrom,y.std.inputs={Field:f,"Standard Deviations":1,Type:"ma"},y.std.outputs={_STD:null},a.Studies.calculateStandardDeviation(p,y.std),m=0,C=0,y.startFrom>1&&(m=b[y.startFrom-1]["_avgG "+y.name]||0,C=b[y.startFrom-1]["_avgL "+y.name]||0);for(var v=Math.max(y.startFrom,y.days);v<b.length;v++)if(S="_avgG",S+=" ",w=b[v],e.L_A(148),k=b[e.b00(0,v,"1")],!(!w[f]&&w[f]!==0)&&!(!k[f]&&k[f]!=="0"*1)&&!(!w["_STD "+y.name]&&w["_STD "+y.name]!==0)){if(w[f]>k[f]){e.h8L(122);var x=e.b00(15,131,3,18,8);m=(m*(y.days-x)+w["_STD "+y.name])/y.days,C=C*(y.days-("1"^0))/y.days}else{e.L_A(15);var A=e.b00(24,11,4,1,9);C=(C*(y.days-A)+w["_STD "+y.name])/y.days,e.h8L(177);var T=e.b00(1,9,12,176,21);m=m*(y.days-T)/y.days}w["Rel Vol "+y.name]=D(m,C),w[S+y.name]=m,w["_avgL "+y.name]=C}y.zoneOutput="Rel Vol"},a.Studies.calculateHistoricalVolatility=function(p,y){var d,g,b,f,m,C,S,w,k,D,v,x;if(d="Standard Devi",d+="ations",g=y.chart.scrubbed,e.r8j(),g.length<y.days+1){y.error=!0;return}b=y.inputs.Field,(!b||b=="field")&&(b="Close"),f=y.inputs[d],f<0&&(f=1),e.L_A(178);var A=e.A1W(6,114,15,102,16);m=A*Math.sqrt(T(y.inputs["Days Per Year"]))*f;function T(F){var P;return P="m",P+="on",e.q8H(),P+="t",P+="h",isNaN(F)&&(F=365),p.layout.interval=="day"?F:p.layout.interval=="week"?52:p.layout.interval==P?12:F}if(C=[],S=0,y.startFrom>1){e.L_A(11);var _=e.A1W(8,4,11);S=g[y.startFrom-_]["_state "+y.name][0],C=g[y.startFrom-1]["_state "+y.name][1].slice()}for(var L=Math.max(1,y.startFrom);L<g.length;L++){if(w="_",w+="stat",w+="e ",e.h8L(179),k=g[e.A1W(1,L,"1")][b],k&&(D=Math.log(g[L][b]/k),C.push(D),S+=D,L>=y.days)){v="R",v+="es",v+="ult ",x=0,S/=y.days;for(var M=0;M<C.length;M++)x+=Math.pow(C[M]-S,2);S*=y.days,S-=C.shift(),g[L][v+y.name]=Math.sqrt(x/y.days)*m}g[L][w+y.name]=[S,C.slice()]}},a.Studies.calculateVolatilityCone=function(p,y){var d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E;d="d",d+="a",d+="y",g="f",g+="i",g+="el",g+="d",b="wee",b+="k";var{periodicity:O,interval:I}=p.layout;if(f=y.study?y.study.name:y.type,!a.ChartEngine.isDailyInterval(I)){e.h8L(87),y.error=`${f}${e.b00("day periodicities","ted for intra"," is not suppor")}`;return}m=Number(y.inputs["Projection Bars"]),C=Number(y.inputs["Days Per Year"]),I==b&&(C=52),I=="month"&&(e.h8L(2),C=e.b00("12",12)),m=Math.min(m,C),S=y.chart.scrubbed,w=y.inputs.Field,(!w||w==g)&&(w="Close"),e.L_A(59);var B=e.b00(11,15,5,0);for(k=S.length-B;k>0&&S[k][w]===void 0;)k--;if(D=S[k].DT,v=S[k][w],x=S[k].implVol,e.L_A(180),A=e.A1W(24,60,60,1e3),T=y.inputs["Volatility source"]==="historical",!T&&x===void 0){e.L_A(1),y.error=`${f}${e.b00("ta is not available"," Study: Implied Volatility source da")}`;return}y._graphs=[68,95].filter((q,Y)=>(e.h8L(107),e.q8H(),y.inputs[`${e.b00("robabili"," ","P","ty")}${q}${e.b00("("," ","%",e.L_A(87))}${e.b00(1,Y,e.h8L(1))}${e.b00(")","",e.h8L(1))}`])),_=[],!T&&I===d&&O===1?(L=S[k].expiryDates||Array.from(new Set(Object.values(S[k].optionChain||{}).map(({expiration:q})=>+(q&&q.value||q||0)).filter(q=>(e.q8H(),q)))),y._expiryDates=L.map(q=>({dt:new Date(q)}))):y._expiryDates=null;for(var N=0;N<=m;N++)M="Result 68% U",M+="pper ",F="Proba",F+="bility 68% (1)",!S[N+k]&&_.push({[y.inputs[F]&&M+y.name||void 0]:0,[y.inputs["Probability 95% (2)"]&&"Result 95% Upper "+y.name||void 0]:0});y.appendFutureTicks(p,_),T&&a.Studies.calculateHistoricalVolatility(p,y),P=T?S[k][`Result ${y.name}`]/100:x,E=function(q){var Y,z,V;e.r8j(),e.L_A(1),Y=S[e.A1W(k,q)],z=C<365?q:Math.round((Y.DT-D)/A),V=v*P*Math.sqrt(z/C);var{DT:K}=Y;y._graphs.forEach(function(Q){var j,Z;e.q8H();var{quote:ee,diff:$,currentValue:ie,sd:te}=this;e.L_A(19),j=e.b00(ie,$,Q<95?1:2),e.h8L(179),Z=e.A1W($,ie,Q<95?1:2),ee[`Result ${Q}% Upper ${te.name}`]=j,ee[`Result ${Q}% Lower ${te.name}`]=Z,(te._expiryDates||[]).forEach(re=>{var H;e.r8j(),!(re.dt<D)&&(H=Math.abs(re.dt-K),H<A&&(re.Upper=j,re.Lower=Z,re.DT=K))})},{quote:Y,diff:V,currentValue:v,sd:y})};for(var R=0;R<=m;R++)E(R);y.outputMap={},y._graphs.forEach(q=>{y.outputMap[`Result ${q}% Upper ${y.name}`]="Color",y.outputMap[`Result ${q}% Lower ${y.name}`]="Color"})},a.Studies.displayVolatilityCone=function(p,y,d){var g,b,f,m,C;y.error||(g=a.Studies.determineColor(y.outputs.Color),b=p.panels[y.panel],!(!b||b.hidden)&&(f=y.getYAxis(p),m={topColor:g,bottomColor:g,skipTransform:b.name!=y.chart.name,topAxis:f,bottomAxis:f,opacity:.3},!y.highlight&&p.highlightedDraggable&&(m.opacity*=.3),y._graphs.forEach(S=>{m.topBand=`Result ${S}% Upper ${y.name}`,m.bottomBand=`Result ${S}% Lower ${y.name}`,y.inputs.Fill&&a.fillIntersecting(p,y.panel,m),a.Studies.displayIndividualSeriesAsLine(p,y,b,m.topBand,d),a.Studies.displayIndividualSeriesAsLine(p,y,b,m.bottomBand,d)}),y._expiryDates&&(C=p.chart.context,p.startClip(),C.beginPath(),y._expiryDates.forEach(S=>{var w,k,D;S.DT&&(w=p.pixelFromDate(S.DT),k=p.pixelFromPrice(S.Upper,b),D=p.pixelFromPrice(S.Lower,b),p.plotLine({x0:w,x1:w,y0:k,y1:D,color:g,pattern:"dashed"}),C.moveTo(w,k),C.arc(w,k,3,0,Math.PI*2,!1),C.moveTo(w,D),C.arc(w,D,3,0,Math.PI*("2"|0),!1),C.fillStyle=g,C.fill())}),p.endClip())))},a.Studies.studyLibrary=a.extend(a.Studies.studyLibrary,{"Hist Vol":{name:"Historical Volatility",calculateFN:a.Studies.calculateHistoricalVolatility,inputs:{Period:"10"|0,Field:"field","Days Per Year":[252,365],"Standard Deviations":1},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Rel Vol":{name:"Relative Volatility",range:"0 to 100",calculateFN:a.Studies.calculateRelativeVolatility,inputs:{Field:u,"STD Period":"10"<<64,"Smoothing Period":14},outputs:{"Rel Vol":"auto"},centerline:50,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}},"Volatility Cone":{name:"Volatility Cone",overlay:!0,calculateFN:a.Studies.calculateVolatilityCone,seriesFN:a.Studies.displayVolatilityCone,inputs:{"Volatility source":[l,"implied"],"Probability 68% (1)":!0,"Probability 95% (2)":!1,"Projection Bars":20,"Days Per Year":["252"<<0,365],Field:o,Period:10,"Standard Deviations":1,Fill:!0},outputs:{Color:h},panelSelect:!1,attributes:{"Volatility source":{hidden:function(){return!a.Studies.impliedVolatilityAvailable}},Field:{hidden:function(){return this.inputs["Volatility source"]==="Implied"}},"Standard Deviations":{hidden:function(){return e.r8j(),this.inputs["Volatility source"]==="Implied"}},yaxisDisplayValue:{hidden:!0},panelName:{hidden:!0},flippedEnabled:{hidden:!0},underlayEnabled:{hidden:!0}}}});else{r=-2110477028,i=-534911372,n=2;for(var c="1"*1;e.E3k(c.toString(),c.toString().length,75378)!==r;c++)console.error(""),n+=2;e.i7q(n.toString(),n.toString().length,50782)!==i&&(s="volatilityIndex feature requires first activati",s+="ng studies feature.",console.error(s))}};vl=W=>{var e,t,a,r,i,n,s,h,o;if(e=typeof _CIQ<"u"?_CIQ:W.CIQ,!e.Studies)t="volumeProfile feature requires fir",t+="st activating st",t+="udie",t+="s feature.",console.error(t);else{e.Studies.displayVolumeProfile=function(u,c,p){var y=se,d,g,b,f,m,C,S,w,k,D,v,x,A,T,_,L,M,F,P,E,O,I,B;d="c",d+="o",d+="lo";function N(ne){var oe,le,he,ue,ce,de,Ce,pe,xe,Te,be,_e,Be,Pe,Ie,Le,Fe;u.canvasColor(f),C.beginPath(),oe=De=>(y.q8H(),Math.round(De)),le=De=>(y.q8H(),oe(u.pixelFromTransformedValue(De))),he=oe(R.width*Z),ue=oe(R.right)-2.5,y.r8j(),ce=ue;for(var[Ue]=w[0],at=1;at<w.length;at++){var[He,Me]=w[at];if(Me){y.L_A(96),de=y.A1W(Me,he,D),Ce=oe(ue-de)+(ne?-.5:"0">>0),y.h8L(181);var ge=y.A1W(9,15,15,8);pe=le(He)+(ne?.5:ge),y.h8L(54);var Se=y.A1W(2,6,10,4);if(xe=le(Ue)+(ne?"0.5"*Se:0),Te=Math.max(pe,Y.top),be=Math.min(xe,Y.bottom),_e=Te<=Y.bottom&&be>=Y.top,_e){if(C.moveTo(ue,be),C.lineTo(ue,Te),C.lineTo(Ce,Te),C.lineTo(Ce,be),ne)(at==1||ce>Ce)&&C.lineTo(ce,be);else if(C.lineTo(ue,be),j&&(Be=e.condenseInt(Me),y.h8L(6),Pe=y.A1W(be,Te),O<=Pe-2)){Ie="to",Ie+="p",Le=void 0;try{({width:Le}=C.measureText(Be))}catch{Le=0}C.textBaseline=Ie,Fe=C.fillStyle,C.fillStyle=I,y.h8L(105),C.fillText(Be,y.b00(Ce,Le,3),y.b00(2,Te,O,2,Pe,y.L_A(182))),C.fillStyle=Fe}}ce=Ce}else ce=ue;Ue=He}!c.highlight&&u.highlightedDraggable&&(C.globalAlpha*=.3),ne||C.fill(),C.strokeStyle=I,ne&&C.stroke(),C.closePath()}if(d+="r",g="P",g+="rice Buckets",b="Disp",b+="lay Vo",b+="lume",!(!u||!u.chart.dataSet)){f="stx_volume_profile",m="s",y.r8j(),m+="t",m+="x-float-d",m+="ate",C=c.getContext(u);var{chart:R}=u,{panel:q}=R,{yAxis:Y}=q,{flipped:z}=Y,{highValue:V,lowValue:K}=R,{displayBorder:Q=c.inputs["Display Border"],displayVolume:j=c.inputs[b],widthPercentage:Z=c.inputs["Width Percentage"],numberBars:ee=c.inputs[g]}=c.parameters;if(Q!==!1&&(Q=!0),j!==!0&&(j=!1),(!Z||Z<0)&&(Z=.25),(!ee||ee<0)&&(y.L_A(6),ee=y.A1W("30",0)),ee=Math.ceil(ee),y.L_A(26),S=y.b00(K,ee,V),S!==0){w=[],z&&([V,K]=[K,V]),k=z?-1:1;for(var $=K,ie=0;ie<=ee;$+=S*k,ie++)y.h8L(24),w.push([$,y.b00("0",64)]);D=0;for(var te=0;te<p.length;te++)if(v=p[te],v!==null){var{Volume:re}=v;if(re){var{High:H,Low:U}=v.transform||v;x=[],A=w[0][0],T=null;for(var G=1;G<w.length;G++)T=w[G][0],_=U>=A&&U<=T,L=H>=A&&H<=T,M=U<A&&H>T,(_||L||M)&&x.push(G),A=T;if(x.length){F=re/x.length;for(var ae=0;ae<x.length;ae++)P=w[x[ae]][1]+=F,P>D&&(D=P)}}}if(D===0){E="char",E+="t",u.displayErrorAsWatermark(E,u.translateIf("Not enough data to render the Volume Profile"));return}u.setStyle(f,d,e.Studies.determineColor(c.outputs["Bars Color"])),O=u.getCanvasFontSize(m),I=u.canvasStyle(f).borderTopColor,B=Q&&!e.isTransparent(I),u.canvasFont(m,C),N(),B&&N(!0),C.globalAlpha=1}}},a=2002904679,r=1818184737,i=2;for(var l=1;se.i7q(l.toString(),l.toString().length,42446)!==a;l++)n="#b",n+="6",n+="4a",n+="96",s="V",s+="olume P",s+="rofile",e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"vol profile":{name:s,underlay:!0,seriesFN:e.Studies.displayVolumeProfile,calculateFN:null,inputs:{"Display Border":!0,"Display Volume":!1,"Price Buckets":30,"Width Percentage":.25},outputs:{"Bars Color":n},customRemoval:!0,attributes:{yaxisDisplayValue:{hidden:!0},panelName:{hidden:!0},flippedEnabled:{hidden:!0}}}}),i+=2;se.E3k(i.toString(),i.toString().length,"17184"^0)!==r&&(h="D",h+="ispla",h+="y V",h+="olume",o="Di",o+="splay ",o+="Bord",o+="er",e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"vol profile":{name:o,underlay:!1,seriesFN:e.Studies.displayVolumeProfile,calculateFN:1,inputs:{"Display Border":!1,"Display Volume":!0,"Price Buckets":23,"Width Percentage":9124},outputs:{"Bars Color":h},customRemoval:!1,attributes:{yaxisDisplayValue:{hidden:!1},panelName:{hidden:!1},flippedEnabled:{hidden:!1}}}}))}};bl=W=>{var e,t,a,r,i,n,s,h;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Studies?(t="n",t+="o",t+="ne",a="0",a+=" ",a+="to ma",a+="x",r="Volum",r+="e Rate of Change",i="#F",i+="F00",i+="0",i+="0",n="a",n+="u",n+="t",n+="o",s="f",s+="i",s+="e",s+="ld",h="Negative Volume I",h+="ndex",e.Studies.calculateOnBalanceVolume=function(o,l){var u=se,c,p,y,d,g,b,f,m,C;c="f",c+="iel",c+="d",p=l.inputs.Field,(!p||p==c)&&(p="Close"),y=l.inputs["Min Tick Value"],d=!1,!y&&y!==0&&(d=!0,y=0),g=l.chart.scrubbed,b=0;for(var S=l.startFrom;S<g.length;S++)f=g[S],!(!S||!f[p])&&(g[S-1][p]&&(u.h8L(148),m=g[u.A1W(0,S,"1")]),m&&(f[p]-m[p]>y?b=1:m[p]-f[p]>y?b=-1:d&&(b=0),C=m["Result "+l.name],C||(u.h8L(18),C=u.A1W("0",1)),C+=f.Volume*b,f["Result "+l.name]=C))},e.Studies.calculatePriceVolumeTrend=function(o,l){var u,c,p,y;u="C",u+="los",u+="e",c=l.inputs.Field,(!c||c=="field")&&(c=u),p=l.chart.scrubbed,y=0,l.startFrom>1&&(y=p[l.startFrom-1]["Result "+l.name]);for(var d=Math.max(1,l.startFrom);d<p.length;d++)if(p[d][c]&&p[d-1][c]){se.h8L(1);var g=se.b00(1,0);y+=p[d].Volume*(p[d][c]-p[d-g][c])/p[d-1][c],p[d]["Result "+l.name]=y}},e.Studies.calculateVolumeIndex=function(o,l){var u=se,c,p,y,d,g,b,f,m,C,S;if(c="M",c+="A",p="C",p+="los",p+="e",y=l.inputs.Field,(!y||y=="field")&&(y=p),d=l.chart.scrubbed,d.length<l.days+1){l.error=!0;return}if(g=100,l.startFrom>1){u.h8L(178);var w=u.b00(13,20,8,13,12);g=d[l.startFrom-w]["Index "+l.name]}for(var k=Math.max(1,l.startFrom);k<d.length;k++)b="N",b+="e",b+="g ",b+="Vol",f=d[k][y],m=d[k].Volume,f&&typeof f=="object"&&(m=f.Volume,f=f[l.subField]),u.L_A(6),C=d[u.b00(k,1)][y],S=d[k-1].Volume,C&&typeof C=="object"&&(S=C.Volume,C=C[l.subField]),f&&C&&((l.type=="Pos Vol"&&m>S||l.type==b&&m<S)&&(u.L_A(10),g*=u.A1W(f,C)),d[k]["Index "+l.name]=g);e.Studies.MA(l.inputs["Moving Average Type"],l.days,"Index "+l.name,0,c,o,l)},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Neg Vol":{name:h,calculateFN:e.Studies.calculateVolumeIndex,inputs:{Period:255,Field:"field","Moving Average Type":"ma"},outputs:{Index:"auto",MA:"#FF0000"}},"On Bal Vol":{name:"On Balance Volume",calculateFN:e.Studies.calculateOnBalanceVolume,inputs:{}},"Pos Vol":{name:"Positive Volume Index",calculateFN:e.Studies.calculateVolumeIndex,inputs:{Period:255,Field:s,"Moving Average Type":"ma"},outputs:{Index:n,MA:i}},"Price Vol":{name:"Price Volume Trend",calculateFN:e.Studies.calculatePriceVolumeTrend,inputs:{Field:"field"}},"Trade Vol":{name:"Trade Volume Index",calculateFN:e.Studies.calculateOnBalanceVolume,inputs:{"Min Tick Value":.5}},"Vol ROC":{name:r,calculateFN:function(o,l){e.Studies.calculateRateOfChange?e.Studies.calculateRateOfChange(o,l):(console.error("Volume Rate of Change study requires first activating momentum feature."),e.Studies.calculateRateOfChange=function(u,c){})},parameters:{init:{isVolume:!0}}},"vol undr":{name:"Volume Underlay",underlay:!0,range:a,yAxis:{ground:!0,initialMarginTop:0,position:t,heightFactor:.25},seriesFN:e.Studies.createVolumeChart,calculateFN:e.Studies.calculateVolume,inputs:{},outputs:{"Up Volume":"#8cc176","Down Volume":"#b82c0c"},customRemoval:!0,removeFN:function(o,l){o.layout.volumeUnderlay=!1,o.changeOccurred("layout")},attributes:{panelName:{hidden:!0}}}})):console.error("volumeStudies feature requires first activating studies feature.")};Cl=W=>{var e=se;e.r8j();var t,a,r;t=typeof _CIQ<"u"?_CIQ:W.CIQ,t.Studies?(a="#",a+="FF00",a+="00",r="#00",r+="FF",r+="00",t.Studies.calculateVortex=function(i,n){var s,h,o,l,u,c,p,y,d;if(s=n.chart.scrubbed,e.q8H(),h=n.days,s.length<h+"1"*1){n.error=!0;return}o={tr:0,vmPlus:"0">>0,vmMinus:0},n.startFrom>1&&(o=t.clone(s[n.startFrom-1]["_totals "+n.name]));for(var g=Math.max(n.startFrom,1);g<s.length;g++)l="_VMP",l+="l",l+="us ",u=s[g],e.h8L(6),c=s[e.A1W(g,1)],p=Math.abs(u.High-c.Low),y=Math.abs(u.Low-c.High),d=Math.max(u.High,c.Close)-Math.min(u.Low,c.Close),o.tr+=d,o.vmPlus+=p,o.vmMinus+=y,g>h&&(e.L_A(6),o.tr-=s[e.b00(g,h)]["_True Range "+n.name],e.h8L(6),o.vmPlus-=s[e.A1W(g,h)]["_VMPlus "+n.name],e.L_A(6),o.vmMinus-=s[e.A1W(g,h)]["_VMMinus "+n.name]),u["_True Range "+n.name]=d,u[l+n.name]=p,u["_VMMinus "+n.name]=y,g>=h&&(u["+VI "+n.name]=o.vmPlus/o.tr,u["-VI "+n.name]=o.vmMinus/o.tr),u["_totals "+n.name]=t.clone(o)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Vortex:{name:"Vortex Indicator",calculateFN:t.Studies.calculateVortex,centerline:1,outputs:{"+VI":r,"-VI":a},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:1.1,studyOverBoughtColor:"auto",studyOverSoldValue:.9,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:"1"<<32,step:"0.01"},studyOverSoldValue:{max:1,step:"0.01"}}}})):console.error("vortex feature requires first activating studies feature.")};xl=W=>{var e,t,a,r,i,n,s;e=typeof _CIQ<"u"?_CIQ:W.CIQ,e.Studies?(a="#ff",a+="d0c",a+="f",r="#5f",r+="7cb",r+="8",i="#",i+="ab6",i+="11f",n="#8",n+="bc176",s="0",s+=" to ",s+="ma",s+="x",e.Studies.calculateMFI=function(h,o){var l,u,c,p,y,d;if(l=o.chart.scrubbed,se.r8j(),c=0,p=o.inputs["Scale Factor"],p||(p=o.study.inputs["Scale Factor"]),y=Math.pow(10,Number(p)),o.startFrom>1){se.L_A(1);var g=se.b00(1,0);c=l[o.startFrom-g]["_high "+o.name]}for(d=o.startFrom;d<l.length;d++)l[d]&&l[d].Volume&&(l[d][o.name+"_hist"]=u=y*(l[d].High-l[d].Low)/l[d].Volume,l[d]["_high "+o.name]=c=Math.max(c,u));o.outputMap={},o.outputMap[o.name+"_hist"]=""},e.Studies.displayMFI=function(h,o,l){var u=se,c,p,y,d,g,b,f,m,C,S,w,k;c=h.panels[o.panel],p=o.getContext(h),y=o.getYAxis(h),d=y.flipped?y.top:y.bottom,u.L_A(183);var D=u.b00(17,1,2,13);g=h.layout.candleWidth-D,g<2&&(g=1),b=e.Studies.determineColor(o.outputs.Green),f=e.Studies.determineColor(o.outputs.Fade),m=e.Studies.determineColor(o.outputs.Fake),C=e.Studies.determineColor(o.outputs.Squat),h.canvasColor("stx_histogram"),o.underlay||(u.L_A(6),p.globalAlpha=u.A1W("1",0)),p.fillStyle="#CCCCCC",h.startClip(o.panel),!o.highlight&&h.highlightedDraggable&&(p.globalAlpha*=.3);for(var v=0;v<l.length;v++)S="_",S+="h",S+="i",S+="st",w=l[v],u.h8L(6),k=l[u.A1W(v,1)],k||(k=h.getPreviousBar(h.chart,o.name+"_hist",v)),w&&(k&&(k[o.name+"_hist"]<w[o.name+"_hist"]?k.Volume<w.Volume?p.fillStyle=b:k.Volume>w.Volume&&(p.fillStyle=m):k[o.name+S]>w[o.name+"_hist"]&&(k.Volume<w.Volume?p.fillStyle=C:k.Volume>w.Volume&&(p.fillStyle=f))),w.candleWidth&&(g=Math.floor(Math.max(1,w.candleWidth-2))),p.fillRect(Math.floor(h.pixelFromBar(v,c.chart)-g/2),Math.floor(d),Math.floor(g),Math.floor(h.pixelFromPrice(w[o.name+"_hist"],c,y)-d)));h.endClip()},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"W MFI":{name:"Market Facilitation Index",seriesFN:e.Studies.displayMFI,calculateFN:e.Studies.calculateMFI,yAxis:{ground:!0},range:s,inputs:{"Scale Factor":6},outputs:{Green:n,Fade:i,Fake:r,Squat:a}}})):(t="williamsMFI fea",t+="ture requires first activating st",t+="udies featu",t+="re.",console.error(t))};Sl={CIQ:fr,SplinePlotter:Ls,timezoneJS:Ms,$$:Ps,$$$:Fs};(typeof __TREE_SHAKE__>"u"||!__TREE_SHAKE__)&&Sl.CIQ.activateImports(oo,lo,ho,uo,co,fo,po,go,mo,yo,vo,bo,Co,xo,So,ko,Ao,wo,To,_o,Do,Lo,Mo,Po,Fo,Eo,Io,Oo,No,Bo,Wo,Ro,qo,Yo,zo,Ho,Vo,Qo,jo,Uo,Zo,Xo,Jo,Ko,Go,$o,el,tl,il,rl,al,nl,sl,ol,ll,hl,ul,cl,fl,dl,pl,gl,ml,yl,vl,bl,Cl,xl,null);function Wh({icon:W,id:e,name:t}){const a=je(g=>g.activeIndicators),r=je(g=>g.engine),i=je(g=>g.indicatorCategoryId),n=je(g=>g.addIndicator),s=je(g=>g.removeIndicator),h=je(g=>g.updateActiveIndicator),o=a.length,l=i===Jt.Active,u=a.some(g=>g.id===e);function c(){if(!r)return;const g=fr.Studies.getStudyList(r);let b=!1;if(Object.values(g).forEach(m=>{m===e&&(b=!0)}),!b){console.error(`Indicator not found: ${e}`);return}const f=fr.Studies.addStudy(r,e);h({id:e,studyDescriptor:f})}function p(){if(!r)return;const g=a.find(b=>b.id===e);g&&fr.Studies.removeStudy(r,g.studyDescriptor)}function y(){s(e),p()}function d(){if(u){y();return}o>=5||l||(n(e),c())}return ye.jsxs("button",{className:`${bi.container} ${u||l?bi["container--selected"]:""} ${l?bi["container--active"]:""}`,onClick:d,disabled:o>=5&&!u&&!l,children:[ye.jsxs("div",{className:bi.container__wrapper,children:[ye.jsx("img",{className:bi.container__icon,src:W,alt:t}),ye.jsx("span",{className:bi.container__label,children:t})]}),l&&ye.jsx("i",{className:`fa-solid fa-trash-alt ${bi.container__delete_icon}`,onClick:y})]})}const Rh="_container_12oxw_1",qh="_container__label_12oxw_9",In={container:Rh,container__label:qh};function Yh(){const{t:W}=ci();return ye.jsx("div",{className:In.container,children:ye.jsx("span",{className:In.container__label,children:W("chart.active_indicators_warning")})})}var Dt=(W=>(W.Awesome="Awesome",W.Detrended="Detrended",W.Macd="macd",W.PriceROC="Price ROC",W.Rsi="rsi",W.Stochastics="stochastics",W.StchMtm="Stch Mtm",W.WilliamsR="Williams %R",W.Aroon="Aroon",W.ADX="ADX",W.CCI="CCI",W.PSAR="PSAR",W.ZigZag="ZigZag",W.BollingerBands="Bollinger Bands",W.DonchianChannel="Donchian Channel",W.MovingAverage="ma",W.MAEnv="MA Env",W.RainbowMA="Rainbow MA",W.FractalChaosBands="Fractal Chaos Bands",W))(Dt||{});const nn=[{id:Jt.Momentum,icon:"/icons/indicator/momentum.svg",items:[{id:Dt.Awesome,name:"Awesome Oscillator",icon:"/icons/indicator/ic-awesome-oscillator.svg"},{id:Dt.Detrended,name:"Detrended Price Oscillator",icon:"/icons/indicator/ic-dtrended.svg"},{id:Dt.Macd,name:"MACD",icon:"/icons/indicator/ic-macd.svg"},{id:Dt.PriceROC,name:"Price Rate of Change",icon:"/icons/indicator/ic-rate-of-change.svg"},{id:Dt.Rsi,name:"Relative Strength Index (RSI)",icon:"/icons/indicator/ic-rsi.svg"},{id:Dt.Stochastics,name:"Stochastic Oscillator",icon:"/icons/indicator/ic-stochastic-oscillator.svg"},{id:Dt.StchMtm,name:"Stochastic Momentum Index",icon:"/icons/indicator/ic-stochastic-momentum.svg"},{id:Dt.WilliamsR,name:"William's Percent Range",icon:"/icons/indicator/ic-william-percent.svg"}]},{id:Jt.Trend,icon:"/icons/indicator/trend.svg",items:[{id:Dt.Aroon,name:"Aroon",icon:"/icons/indicator/ic-aroon.svg"},{id:Dt.ADX,name:"ADX/DMS",icon:"/icons/indicator/ic-adx.svg"},{id:Dt.CCI,name:"Commodity Channel Index",icon:"/icons/indicator/ic-commodity-channel-index.svg"},{id:Dt.PSAR,name:"Parabolic SAR",icon:"/icons/indicator/ic-parabolic.svg"},{id:Dt.ZigZag,name:"Zig Zag",icon:"/icons/indicator/ic-zig-zag.svg"}]},{id:Jt.Volatility,icon:"/icons/indicator/volatility.svg",items:[{id:Dt.BollingerBands,name:"Bollinger Bands",icon:"/icons/indicator/ic-bollinger.svg"},{id:Dt.DonchianChannel,name:"Donchian Channel",icon:"/icons/indicator/ic-donchian.svg"}]},{id:Jt.MovingAverages,icon:"/icons/indicator/movie-averages.svg",items:[{id:Dt.MovingAverage,name:"Moving Average (MA)",icon:"/icons/indicator/ic-averages.svg"},{id:Dt.MAEnv,name:"Moving Average Envelope",icon:"/icons/indicator/ic-envelope.svg"},{id:Dt.RainbowMA,name:"Rainbow Moving Average",icon:"/icons/indicator/ic-rainbow.svg"}]},{id:Jt.Others,icon:"/icons/indicator/other.svg",items:[{id:Dt.FractalChaosBands,name:"Fractal Chaos Band",icon:"/icons/indicator/ic-fractal-chaos.svg"}]}];function zh(W){const e=nn.find(t=>t.items.findIndex(a=>a.id===W)!==-1);return e==null?void 0:e.items.find(t=>t.id===W)}function Hh(){var i;const W=je(n=>n.activeIndicators),e=je(n=>n.indicatorCategoryId),t=e===Jt.Active,r=(t?W.map(n=>zh(n.id)):((i=nn.find(n=>n.id===e))==null?void 0:i.items)??[]).map(n=>ye.jsx(Wh,{...n},`indicator_${n.id}`));return ye.jsxs("div",{className:Lh.container,children:[!t&&r,t&&ye.jsxs(ye.Fragment,{children:[ye.jsx(Yh,{}),r]})]})}const Vh="_container_7fkbe_1",Qh={container:Vh},jh="_container_9p2gn_1",Uh="_container__wrapper_9p2gn_16",Zh="_container__icon_9p2gn_23",Xh="_container__label_9p2gn_30",Jh="_container__badge_9p2gn_37",Si={container:jh,container__wrapper:Uh,container__icon:Zh,container__label:Xh,container__badge:Jh,"container--selected":"_container--selected_9p2gn_50"};function On({label:W,value:e,icon:t,isDisabled:a,showActiveCount:r}){const{t:i}=ci(),n=je(l=>l.activeIndicators),s=je(l=>l.indicatorCategoryId),h=je(l=>l.setIndicatorCategoryId);function o(){a||h(e)}return ye.jsxs("button",{className:`${Si.container} ${s===e?Si["container--selected"]:""}`,onClick:o,disabled:a,children:[ye.jsxs("div",{className:Si.container__wrapper,children:[ye.jsx("img",{src:t,className:Si.container__icon,alt:i(`chart.${W}`)}),ye.jsx("span",{className:Si.container__label,children:i(`chart.${W}`)})]}),(n==null?void 0:n.length)>0&&r&&ye.jsx("div",{className:Si.container__badge,children:(n==null?void 0:n.length)??0})]})}function Kh(){const W=je(t=>t.activeIndicators),e=nn.map(t=>ye.jsx(On,{label:`indicator_tab.${t.id}`,value:t.id,icon:t.icon},`indicator_tab_${t.id}`));return ye.jsxs("div",{className:Qh.container,children:[ye.jsx(On,{label:`indicator_tab.${Jt.Active}`,icon:"/icons/indicator/active.svg",value:Jt.Active,isDisabled:(W==null?void 0:W.length)===0,showActiveCount:!0}),e]})}const Gh="_container_1y331_1",$h={container:Gh};function eu(){const W=je(r=>r.activeIndicators),e=je(r=>r.indicatorCategoryId),t=je(r=>r.setIndicatorCategoryId);function a(){W.length>0||e!==Jt.Active||t(Jt.Momentum)}return Ot.useEffect(a,[e,W]),ye.jsxs("div",{className:$h.container,children:[ye.jsx(Kh,{}),ye.jsx(Hh,{})]})}const tu="_container_1d3gd_1",iu={container:tu};function Iu(){const{t:W}=ci(),{hash:e,pathname:t}=ki(),a=e==null?void 0:e.includes(`#${Gr.TradingChartIndicators}`),r=Ai();function i(){r(t)}return ye.jsx(rn,{centered:!0,closable:!0,open:a,footer:!1,onCancel:i,className:iu.container,title:W("chart.indicators"),children:ye.jsx(eu,{})})}const ru="_container_1uvn1_1",au={container:ru},nu="_container_jxw5h_1",su="_container__label_jxw5h_21",ou="_container__wrapper_jxw5h_41",ur={container:nu,"container--selected":"_container--selected_jxw5h_17",container__label:su,"container--active":"_container--active_jxw5h_25",container__wrapper:ou};function lu({icon:W,id:e,name:t}){const{pathname:a}=ki(),r=Ai(),i=je(f=>f.activeLines),n=je(f=>f.engine),s=je(f=>f.lineCategoryId),h=je(f=>f.addDraw),o=je(f=>f.removeDraw),l=je(f=>f.updateActiveDraw),u=i.length,c=s===tn.Active,p=i.some(f=>f.id===e);function y(){n&&(n.changeVectorType(e),l({id:e}),r(a))}function d(){n&&n.clearDrawings()}function g(){o(e),d()}function b(){if(p){g();return}u>=5||c||(h(e,null),y())}return ye.jsx("button",{className:`${ur.container} ${p||c?ur["container--selected"]:""} ${c?ur["container--active"]:""}`,onClick:b,disabled:u>=5&&!p&&!c,children:ye.jsxs("div",{className:ur.container__wrapper,children:[ye.jsx("i",{className:`fa-solid ${W||"fa-xmark"}`}),ye.jsx("span",{className:ur.container__label,children:t})]})})}var Xe=(W=>(W.Pencil="pencil",W.Line="line",W.Arrow="arrow",W.Rectangle="rectangle",W.Ellipse="ellipse",W.Segment="segment",W.FibonacciRetracement="retracement",W.FibonacciProjection="fibprojection",W.FibonacciArc="fibarc",W.FibonacciFan="fibfan",W.FibonacciTimezone="fibtimezone",W.Ray="ray",W.Trendline="trendline",W.Channel="channel",W.RegressionLine="regression",W.SpeedResistanceArc="speedarc",W.SpeedResistanceLine="speedline",W.TimeCycle="timecycle",W.GannFan="gannfan",W.Pitchfork="pitchfork",W.Quadrant="quadrant",W.VolumeProfile="volumeprofile",W.ElliottWave="elliottwave",W.Heart="heart",W.Star="star",W.Check="check",W.FocusArrow="focusarrow",W.Continuous="continuous",W.Freeform="freeform",W.Crossline="crossline",W.Callout="callout",W.Annotation="annotation",W.AverageLine="average",W.Horizontal="horizontal",W.Vertical="vertical",W.Polygon="polygon",W.Cross="xcross",W.Gartley="gartley",W.TironeLevels="tirone",W))(Xe||{});const kl=[{id:tn.Forks,icon:"fa-chart-line",items:[{id:Xe.Annotation,name:"Annotation",icon:"fa-pencil"},{id:Xe.Arrow,name:"Arrow",icon:"fa-arrow-up"},{id:Xe.Line,name:"Line",icon:"fa-minus"},{id:Xe.Horizontal,name:"Horizontal",icon:"fa-arrows-alt-h"},{id:Xe.Vertical,name:"Vertical",icon:"fa-arrows-alt-v"},{id:Xe.Rectangle,name:"Rectangle",icon:"fa-square"},{id:Xe.Segment,name:"Segment",icon:"fa-minus"},{id:Xe.AverageLine,name:"Average Line",icon:"fa-chart-line"},{id:Xe.Callout,name:"Callout",icon:"fa-comment-alt"},{id:Xe.Channel,name:"Channel",icon:"fa-ruler-horizontal"},{id:Xe.Check,name:"Check",icon:"fa-check"},{id:Xe.Continuous,name:"Continuous",icon:"fa-ellipsis-h"},{id:Xe.Crossline,name:"Crossline",icon:"fa-times"},{id:Xe.ElliottWave,name:"Elliott Wave",icon:"fa-wave-square"},{id:Xe.Ellipse,name:"Ellipse",icon:"fa-circle"},{id:Xe.Freeform,name:"Doodle",icon:"fa-pen-fancy"},{id:Xe.FibonacciProjection,name:"Fib Projection",icon:"fa-chart-line"},{id:Xe.FibonacciArc,name:"Fib Arc",icon:"fa-chart-line"},{id:Xe.FibonacciFan,name:"Fib Fan",icon:"fa-chart-line"},{id:Xe.FibonacciTimezone,name:"Fib Time Zone",icon:"fa-chart-line"},{id:Xe.FocusArrow,name:"Focus Arrow",icon:"fa-crosshairs"},{id:Xe.GannFan,name:"Gann Fan",icon:"fa-fan"},{id:Xe.Gartley,name:"Gartley",icon:"fa-chart-line"},{id:Xe.Heart,name:"Heart",icon:"fa-heart"},{id:Xe.Pitchfork,name:"Pitchfork",icon:"fa-chart-line"},{id:Xe.Quadrant,name:"Quadrant Lines",icon:"fa-chart-line"},{id:Xe.Ray,name:"Ray",icon:"fa-long-arrow-alt-right"},{id:Xe.RegressionLine,name:"Regression Line",icon:"fa-chart-line"},{id:Xe.FibonacciRetracement,name:"Fib Retracement",icon:"fa-chart-line"},{id:Xe.Star,name:"Star",icon:"fa-star"},{id:Xe.SpeedResistanceArc,name:"Speed Resistance Arc",icon:"fa-chart-line"},{id:Xe.SpeedResistanceLine,name:"Speed Resistance Line",icon:"fa-chart-line"},{id:Xe.TimeCycle,name:"Time Cycle",icon:"fa-clock"},{id:Xe.TironeLevels,name:"Tirone Levels",icon:"fa-chart-line"},{id:Xe.Trendline,name:"Trend Line",icon:"fa-chart-line"},{id:Xe.VolumeProfile,name:"Volume Profile",icon:"fa-chart-line"},{id:Xe.Cross,name:"Cross",icon:"fa-times"}]}];function hu(W){const e=kl.find(t=>t.items.findIndex(a=>a.id===W)!==-1);return e==null?void 0:e.items.find(t=>t.id===W)}function uu(){var i;const W=je(n=>n.activeLines),e=je(n=>n.lineCategoryId),t=e===tn.Active,r=(t?W.map(n=>hu(n.id)):((i=kl.find(n=>n.id===e))==null?void 0:i.items)??[]).map(n=>ye.jsx(lu,{...n},`line_${n.id}`));return ye.jsxs("div",{className:au.container,children:[!t&&r,t&&ye.jsx(ye.Fragment,{children:r})]})}const cu={};function fu(){const W=je(r=>r.activeIndicators),e=je(r=>r.indicatorCategoryId),t=je(r=>r.setIndicatorCategoryId);function a(){W.length>0||e!==Jt.Active||t(e)}return Ot.useEffect(a,[e,W]),ye.jsx("div",{className:cu.container,children:ye.jsx(uu,{})})}const du="_container_1xxkb_1",pu={container:du};function Ou(){const{t:W}=ci(),{hash:e,pathname:t}=ki(),a=e==null?void 0:e.includes(`#${Gr.TradingChartDraw}`),r=Ai();function i(){r(t)}return ye.jsx(rn,{centered:!0,closable:!0,open:a,footer:!1,onCancel:i,className:pu.container,title:W("chart.draw"),children:ye.jsx(fu,{})})}const gu="_container_wabuw_12",mu="_container__line_wabuw_32",en={"wrapper-skeleton":"_wrapper-skeleton_wabuw_1",container:gu,container__line:mu};function Nu(){const W=je(t=>t.skeletonWidth);return je(t=>t.isLoadingMoreBars)?ye.jsx("div",{className:`${en["wrapper-skeleton"]}`,style:{width:`${W}px`},children:ye.jsx("div",{className:en.container,children:Array.from({length:400}).map((t,a)=>ye.jsx("div",{className:en.container__line},`loader-line-${a}`))})}):null}const yu="_icon_z9jeg_1",vu="_container_z9jeg_6",bu="_title_z9jeg_15",Cu="_desc_z9jeg_19",cr={icon:yu,container:vu,title:bu,desc:Cu,"txt-title-container":"_txt-title-container_z9jeg_23"},xu=()=>{const{t:W}=ci(),{selectedSymbol:e}=je();return ye.jsxs("div",{className:cr.container,children:[ye.jsx(zl,{className:cr.icon}),ye.jsx(Yn,{className:cr["txt-title-container"],children:ye.jsxs(Ja.Paragraph,{children:[ye.jsx(Ja.Title,{level:3,className:cr.title,children:ye.jsx("span",{dangerouslySetInnerHTML:{__html:W("general.unavailableMarketTitle",{symbol:e==null?void 0:e.name})}})}),ye.jsx(Ja.Text,{className:cr.desc,children:W("general.unavailableMarketDesc")})]})})]})},Su=({symbol:W,iframeUrl:e,getUrl:t,getChartClassName:a,isMobile:r,isPopoverOpen:i,isNotificationDrawerOpen:n,addChartIframeRef:s,removeChartIframeRef:h})=>{const o=Ot.useRef(null),l=Ot.useMemo(()=>t(W,e),[W.ticker,e]);return Ot.useEffect(()=>(s(W.ticker,o),()=>{h(W.ticker)}),[W.ticker,s,h]),ye.jsx("iframe",{title:"Chart",ref:o,src:l,scrolling:"no",className:a(),style:{pointerEvents:r&&(i||n)?"none":"auto"}})},Bu=W=>{const{tenant:e,tenantImages:t,themeConfig:a}=zn(),r=Ot.useRef(null),[i,n]=Ot.useState(),{setChartIframeRef:s,addChartIframeRef:h,removeChartIframeRef:o,isPopoverOpen:l,isNotificationDrawerOpen:u}=xn(),{selectedSymbol:c,favoriteSymbols:p}=je(),{isMobile:y}=Nn(),{tenantSymbols:d}=Wl(),[g,b]=Ot.useState(new Set),{i18n:f}=ci(),m="https://tradingview.mybroker.dev",C="https://tradingview-v2.mybroker.dev",S="https://chartiq.mybroker.dev";Ot.useEffect(()=>{s(r),window.chartIframeRef=r},[r]),Ot.useEffect(()=>()=>{const D=xn.getState().chartIframeRefs;Object.keys(D).forEach(v=>{p.some(A=>A.ticker===v)||o(v)})},[p]);const w=(D,v)=>{var P,E,O,I,B;const x="wss://symbol-prices-api.mybroker.dev",A="https://symbol-prices-api.mybroker.dev",T="Sl293kk22ss8",{closeTypeSelected:_}=qn.getState(),L=_||"01:00",M={ticker:D.ticker,slot:e.symbolSlotName,symbolWsUrl:x,symbolApiUrl:A,symbolApiKey:T,closeType:L,expirationType:W.expirationType,hiddenChartLogo:"false",urlBg:t==null?void 0:t.chart_background,language:f.language==="ptBr"?"pt":f.language};(P=a==null?void 0:a.COLOR)!=null&&P.UP_COLOR&&(M.upColor=a.COLOR.UP_COLOR),(E=a==null?void 0:a.COLOR)!=null&&E.DOWN_COLOR&&(M.downColor=a.COLOR.DOWN_COLOR),(O=a==null?void 0:a.COLOR)!=null&&O.BACKGROUND_COLOR_GRAPHIC&&(M.backgroundColorGraphic=a.COLOR.BACKGROUND_COLOR_GRAPHIC),(I=a==null?void 0:a.COLOR)!=null&&I.COLOR_ICON_GRAPHIC&&(M.colorIconGraphic=a.COLOR.COLOR_ICON_GRAPHIC),(B=a==null?void 0:a.COLOR)!=null&&B.COLOR_ACTIVE_HOVER&&(M.colorActiveHover=a.COLOR.COLOR_ACTIVE_HOVER);const F=new URLSearchParams(M);return`${v}?${F.toString()}`};Ot.useEffect(()=>{(e==null?void 0:e.defaultChart)==="trading_view"||W.type==="FUTURE"?n(m):(e==null?void 0:e.defaultChart)==="chartiq"?n(S):n(C)},[e]),Ot.useEffect(()=>{const D=new Set(p.map(v=>v.ticker));b(v=>{const x=new Set(v);return c&&x.add(c.ticker),new Set([...x].filter(T=>D.has(T)))})},[c,p]),Ot.useEffect(()=>{c&&b(D=>{const v=new Set(D);return v.add(c.ticker),v})},[c]);const k=()=>{if(e.defaultChart===Jr.TRADING_VIEW||e.defaultChart===Jr.TRADING_VIEW_V2)return Sn.chartTradingViewIframe;if(e.defaultChart===Jr.CHART_IQ)return Sn.chartIqIframe};return Ot.useEffect(()=>{const D=setInterval(()=>{const v=je.getState().symbols,x=je.getState().selectedSymbol,A=v.find(T=>T.ticker===(x==null?void 0:x.ticker));A&&A.marketClosed===!0&&(x==null?void 0:x.marketClosed)===!1&&je.setState({selectedSymbol:{...x,marketClosed:!0}})},6e4);return()=>clearInterval(D)},[]),!c||!i||!e||!d.length?null:ye.jsx(ye.Fragment,{children:p.filter(D=>g.has(D.ticker)).map(D=>ye.jsx("div",{style:{display:"block",height:c.ticker===D.ticker?"100%":"0%",width:"100%"},children:(D==null?void 0:D.marketClosed)===!1?ye.jsx(Su,{symbol:D,iframeUrl:i,getUrl:w,getChartClassName:k,isMobile:y,isPopoverOpen:l,isNotificationDrawerOpen:u,addChartIframeRef:h,removeChartIframeRef:o}):ye.jsx(xu,{})},D.ticker))})};export{Pu as C,Iu as I,lh as O,Fu as T,Ou as a,Nu as b,Bu as c};
