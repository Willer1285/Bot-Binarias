import{P as Oe,Q as Je,r as m,I as we,_ as xe,R as v,S as Q,V as Z,W as K,X as le,Y as Xe,Z as Ze,$ as je,a0 as fe,a1 as Ne,a2 as Le,a3 as Qe,i as et,a4 as Me,a5 as tt,a6 as nt,a7 as rt,a8 as ot,g as ce,j as w,e as _e,a9 as it,h as Fe,b as Ae,F as ze,T as at,aa as st,l as ct,u as lt,G as ut,q as dt,a as ft,ab as ht,E as se,m as pt,p as mt,ac as gt,O as yt,ad as Ie,ae as bt}from"./index-C_KJhDjU.js";import{s as vt,g as wt}from"./scrollTo-I-cr9LB9.js";import{B as xt}from"./index-9yf0Qo83.js";import{i as St}from"./index-DUFnKYjp.js";import{M as Et}from"./index-BjrAweWy.js";import{F as me}from"./index-BOf3BtyV.js";import{S as Ot}from"./index-C3mQltk1.js";import{I as It}from"./index-CUQp-0qE.js";import{B as Tt}from"./button-DJdt9XC8.js";import{R as Ct}from"./SendOutlined-Ce-K2YZf.js";import{S as Rt}from"./index-pYb29J46.js";import{a as Te}from"./response.type-C55kdV9s.js";import{L as $t}from"./LoadingComponent-37dcqxXY.js";import{u as Bt}from"./useUtmsStore-B1kduE95.js";import{R as kt}from"./RotateLeftOutlined-BOPy2-8O.js";import"./index-DTSfyFSI.js";import"./Skeleton-CDPE8yPt.js";import"./PurePanel-a4V6-x80.js";import"./collapse-BbEVqHco.js";import"./row-RUGv5-_1.js";import"./QuestionCircleOutlined-L7rkI-A0.js";import"./index-BlHQ17Ob.js";function Pt(n){let o;const e=r=>()=>{o=null,n.apply(void 0,Je(r))},t=function(){if(o==null){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];o=Oe(e(i))}};return t.cancel=()=>{Oe.cancel(o),o=null},t}var jt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M859.9 168H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM518.3 355a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V848c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V509.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 355z"}}]},name:"vertical-align-top",theme:"outlined"},Nt=function(o,e){return m.createElement(we,xe({},o,{ref:e,icon:jt}))},Lt=m.forwardRef(Nt);const Se=v.createContext(void 0),{Provider:Mt}=Se;var _t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},Ft=function(o,e){return m.createElement(we,xe({},o,{ref:e,icon:_t}))},De=m.forwardRef(Ft);const At=n=>{const{icon:o,description:e,prefixCls:t,className:r}=n,i=v.createElement("div",{className:`${t}-icon`},v.createElement(De,null));return v.createElement("div",{onClick:n.onClick,onFocus:n.onFocus,onMouseEnter:n.onMouseEnter,onMouseLeave:n.onMouseLeave,className:Q(r,`${t}-content`)},o||e?v.createElement(v.Fragment,null,o&&v.createElement("div",{className:`${t}-icon`},o),e&&v.createElement("div",{className:`${t}-description`},e)):i)},zt=m.memo(At),Ce=n=>n===0?0:n-Math.sqrt(Math.pow(n,2)/2),Dt=n=>{const{componentCls:o,floatButtonSize:e,motionDurationSlow:t,motionEaseInOutCirc:r,calc:i}=n,a=new Z("antFloatButtonMoveTopIn",{"0%":{transform:`translate3d(0, ${K(e)}, 0)`,transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),l=new Z("antFloatButtonMoveTopOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:`translate3d(0, ${K(e)}, 0)`,transformOrigin:"0 0",opacity:0}}),u=new Z("antFloatButtonMoveRightIn",{"0%":{transform:`translate3d(${i(e).mul(-1).equal()}, 0, 0)`,transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),d=new Z("antFloatButtonMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:`translate3d(${i(e).mul(-1).equal()}, 0, 0)`,transformOrigin:"0 0",opacity:0}}),s=new Z("antFloatButtonMoveBottomIn",{"0%":{transform:`translate3d(0, ${i(e).mul(-1).equal()}, 0)`,transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),c=new Z("antFloatButtonMoveBottomOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:`translate3d(0, ${i(e).mul(-1).equal()}, 0)`,transformOrigin:"0 0",opacity:0}}),E=new Z("antFloatButtonMoveLeftIn",{"0%":{transform:`translate3d(${K(e)}, 0, 0)`,transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),O=new Z("antFloatButtonMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:`translate3d(${K(e)}, 0, 0)`,transformOrigin:"0 0",opacity:0}}),b=`${o}-group`;return[{[b]:{[`&${b}-top ${b}-wrap`]:le(`${b}-wrap`,a,l,t,!0),[`&${b}-bottom ${b}-wrap`]:le(`${b}-wrap`,s,c,t,!0),[`&${b}-left ${b}-wrap`]:le(`${b}-wrap`,E,O,t,!0),[`&${b}-right ${b}-wrap`]:le(`${b}-wrap`,u,d,t,!0)}},{[`${b}-wrap`]:{[`&${b}-wrap-enter, &${b}-wrap-appear`]:{opacity:0,animationTimingFunction:r},[`&${b}-wrap-leave`]:{opacity:1,animationTimingFunction:r}}}]},Ut=n=>{const{antCls:o,componentCls:e,floatButtonSize:t,margin:r,borderRadiusLG:i,borderRadiusSM:a,badgeOffset:l,floatButtonBodyPadding:u,zIndexPopupBase:d,calc:s}=n,c=`${e}-group`;return{[c]:Object.assign(Object.assign({},je(n)),{zIndex:d,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:"none",position:"fixed",height:"auto",boxShadow:"none",minWidth:t,minHeight:t,insetInlineEnd:n.floatButtonInsetInlineEnd,bottom:n.floatButtonInsetBlockEnd,borderRadius:i,[`${c}-wrap`]:{zIndex:-1,display:"flex",justifyContent:"center",alignItems:"center",position:"absolute"},[`&${c}-rtl`]:{direction:"rtl"},[e]:{position:"static"}}),[`${c}-top > ${c}-wrap`]:{flexDirection:"column",top:"auto",bottom:s(t).add(r).equal(),"&::after":{content:'""',position:"absolute",width:"100%",height:r,bottom:s(r).mul(-1).equal()}},[`${c}-bottom > ${c}-wrap`]:{flexDirection:"column",top:s(t).add(r).equal(),bottom:"auto","&::after":{content:'""',position:"absolute",width:"100%",height:r,top:s(r).mul(-1).equal()}},[`${c}-right > ${c}-wrap`]:{flexDirection:"row",left:{_skip_check_:!0,value:s(t).add(r).equal()},right:{_skip_check_:!0,value:"auto"},"&::after":{content:'""',position:"absolute",width:r,height:"100%",left:{_skip_check_:!0,value:s(r).mul(-1).equal()}}},[`${c}-left > ${c}-wrap`]:{flexDirection:"row",left:{_skip_check_:!0,value:"auto"},right:{_skip_check_:!0,value:s(t).add(r).equal()},"&::after":{content:'""',position:"absolute",width:r,height:"100%",right:{_skip_check_:!0,value:s(r).mul(-1).equal()}}},[`${c}-circle`]:{gap:r,[`${c}-wrap`]:{gap:r}},[`${c}-square`]:{[`${e}-square`]:{padding:0,borderRadius:0,[`&${c}-trigger`]:{borderRadius:i},"&:first-child":{borderStartStartRadius:i,borderStartEndRadius:i},"&:last-child":{borderEndStartRadius:i,borderEndEndRadius:i},"&:not(:last-child)":{borderBottom:`${K(n.lineWidth)} ${n.lineType} ${n.colorSplit}`},[`${o}-badge`]:{[`${o}-badge-count`]:{top:s(s(u).add(l)).mul(-1).equal(),insetInlineEnd:s(s(u).add(l)).mul(-1).equal()}}},[`${c}-wrap`]:{borderRadius:i,boxShadow:n.boxShadowSecondary,[`${e}-square`]:{boxShadow:"none",borderRadius:0,padding:u,[`${e}-body`]:{width:n.floatButtonBodySize,height:n.floatButtonBodySize,borderRadius:a}}}},[`${c}-top > ${c}-wrap, ${c}-bottom > ${c}-wrap`]:{[`> ${e}-square`]:{"&:first-child":{borderStartStartRadius:i,borderStartEndRadius:i},"&:last-child":{borderEndStartRadius:i,borderEndEndRadius:i},"&:not(:last-child)":{borderBottom:`${K(n.lineWidth)} ${n.lineType} ${n.colorSplit}`}}},[`${c}-left > ${c}-wrap, ${c}-right > ${c}-wrap`]:{[`> ${e}-square`]:{"&:first-child":{borderStartStartRadius:i,borderEndStartRadius:i},"&:last-child":{borderStartEndRadius:i,borderEndEndRadius:i},"&:not(:last-child)":{borderInlineEnd:`${K(n.lineWidth)} ${n.lineType} ${n.colorSplit}`}}},[`${c}-circle-shadow`]:{boxShadow:"none"},[`${c}-square-shadow`]:{boxShadow:n.boxShadowSecondary,[`${e}-square`]:{boxShadow:"none",padding:u,[`${e}-body`]:{width:n.floatButtonBodySize,height:n.floatButtonBodySize,borderRadius:a}}}}},qt=n=>{const{antCls:o,componentCls:e,floatButtonBodyPadding:t,floatButtonIconSize:r,floatButtonSize:i,borderRadiusLG:a,badgeOffset:l,dotOffsetInSquare:u,dotOffsetInCircle:d,zIndexPopupBase:s,calc:c}=n;return{[e]:Object.assign(Object.assign({},je(n)),{border:"none",position:"fixed",cursor:"pointer",zIndex:s,display:"block",width:i,height:i,insetInlineEnd:n.floatButtonInsetInlineEnd,bottom:n.floatButtonInsetBlockEnd,boxShadow:n.boxShadowSecondary,"&-pure":{position:"relative",inset:"auto"},"&:empty":{display:"none"},[`${o}-badge`]:{width:"100%",height:"100%",[`${o}-badge-count`]:{transform:"translate(0, 0)",transformOrigin:"center",top:c(l).mul(-1).equal(),insetInlineEnd:c(l).mul(-1).equal()}},[`${e}-body`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",transition:`all ${n.motionDurationMid}`,[`${e}-content`]:{overflow:"hidden",textAlign:"center",minHeight:i,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:`${K(c(t).div(2).equal())} ${K(t)}`,[`${e}-icon`]:{textAlign:"center",margin:"auto",width:r,fontSize:r,lineHeight:1}}}}),[`${e}-rtl`]:{direction:"rtl"},[`${e}-circle`]:{height:i,borderRadius:"50%",[`${o}-badge`]:{[`${o}-badge-dot`]:{top:d,insetInlineEnd:d}},[`${e}-body`]:{borderRadius:"50%"}},[`${e}-square`]:{height:"auto",minHeight:i,borderRadius:a,[`${o}-badge`]:{[`${o}-badge-dot`]:{top:u,insetInlineEnd:u}},[`${e}-body`]:{height:"auto",borderRadius:a}},[`${e}-default`]:{backgroundColor:n.floatButtonBackgroundColor,transition:`background-color ${n.motionDurationMid}`,[`${e}-body`]:{backgroundColor:n.floatButtonBackgroundColor,transition:`background-color ${n.motionDurationMid}`,"&:hover":{backgroundColor:n.colorFillContent},[`${e}-content`]:{[`${e}-icon`]:{color:n.colorText},[`${e}-description`]:{display:"flex",alignItems:"center",lineHeight:K(n.fontSizeLG),color:n.colorText,fontSize:n.fontSizeSM}}}},[`${e}-primary`]:{backgroundColor:n.colorPrimary,[`${e}-body`]:{backgroundColor:n.colorPrimary,transition:`background-color ${n.motionDurationMid}`,"&:hover":{backgroundColor:n.colorPrimaryHover},[`${e}-content`]:{[`${e}-icon`]:{color:n.colorTextLightSolid},[`${e}-description`]:{display:"flex",alignItems:"center",lineHeight:K(n.fontSizeLG),color:n.colorTextLightSolid,fontSize:n.fontSizeSM}}}}}},Ht=n=>({dotOffsetInCircle:Ce(n.controlHeightLG/2),dotOffsetInSquare:Ce(n.borderRadiusLG)}),Ue=Xe("FloatButton",n=>{const{colorTextLightSolid:o,colorBgElevated:e,controlHeightLG:t,marginXXL:r,marginLG:i,fontSize:a,fontSizeIcon:l,controlItemBgHover:u,paddingXXS:d,calc:s}=n,c=Ze(n,{floatButtonBackgroundColor:e,floatButtonColor:o,floatButtonHoverBackgroundColor:u,floatButtonFontSize:a,floatButtonIconSize:s(l).mul(1.5).equal(),floatButtonSize:t,floatButtonInsetBlockEnd:r,floatButtonInsetInlineEnd:i,floatButtonBodySize:s(t).sub(s(d).mul(2)).equal(),floatButtonBodyPadding:d,badgeOffset:s(d).mul(1.5).equal()});return[Ut(c),qt(c),St(n),Dt(c)]},Ht);var Vt=function(n,o){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&o.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)o.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(e[t[r]]=n[t[r]]);return e};const he="float-btn",Gt=v.forwardRef((n,o)=>{const{prefixCls:e,className:t,rootClassName:r,style:i,type:a="default",shape:l="circle",icon:u,description:d,tooltip:s,htmlType:c="button",badge:E={}}=n,O=Vt(n,["prefixCls","className","rootClassName","style","type","shape","icon","description","tooltip","htmlType","badge"]),{getPrefixCls:b,direction:R}=m.useContext(fe),M=m.useContext(Se),I=b(he,e),B=Ne(I),[F,C,k]=Ue(I,B),q=M||l,V=Q(C,k,B,I,t,r,`${I}-${a}`,`${I}-${q}`,{[`${I}-rtl`]:R==="rtl"}),[$]=Le("FloatButton",i==null?void 0:i.zIndex),S=Object.assign(Object.assign({},i),{zIndex:$}),h=Qe(E,["title","children","status","text"]),x=m.useMemo(()=>({prefixCls:I,description:d,icon:u,type:a}),[I,d,u,a]);let g=v.createElement("div",{className:`${I}-body`},v.createElement(zt,Object.assign({},x)));return"badge"in n&&(g=v.createElement(xt,Object.assign({},h),g)),"tooltip"in n&&(g=v.createElement(et,{title:s,placement:R==="rtl"?"right":"left"},g)),F(n.href?v.createElement("a",Object.assign({ref:o},O,{className:V,style:S}),g):v.createElement("button",Object.assign({ref:o},O,{className:V,style:S,type:c}),g))}),ne=Gt;var Kt=function(n,o){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&o.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)o.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(e[t[r]]=n[t[r]]);return e};const qe=v.forwardRef((n,o)=>{const{prefixCls:e,className:t,type:r="default",shape:i="circle",visibilityHeight:a=400,icon:l=v.createElement(Lt,null),target:u,onClick:d,duration:s=450}=n,c=Kt(n,["prefixCls","className","type","shape","visibilityHeight","icon","target","onClick","duration"]),[E,O]=m.useState(a===0),b=v.useRef(null);v.useImperativeHandle(o,()=>({nativeElement:b.current}));const R=()=>{var $;return(($=b.current)===null||$===void 0?void 0:$.ownerDocument)||window},M=Pt($=>{const S=wt($.target);O(S>=a)});m.useEffect(()=>{const S=(u||R)();return M({target:S}),S==null||S.addEventListener("scroll",M),()=>{M.cancel(),S==null||S.removeEventListener("scroll",M)}},[u]);const I=$=>{vt(0,{getContainer:u||R,duration:s}),d==null||d($)},{getPrefixCls:B}=m.useContext(fe),F=B(he,e),C=B(),q=m.useContext(Se)||i,V=Object.assign({prefixCls:F,icon:l,type:r,shape:q},c);return v.createElement(Me,{visible:E,motionName:`${C}-fade`},($,S)=>{let{className:h}=$;return v.createElement(ne,Object.assign({ref:tt(b,S)},V,{onClick:I,className:Q(t,h)}))})});var Wt=function(n,o){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&o.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)o.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(e[t[r]]=n[t[r]]);return e};const He=n=>{var o;const{prefixCls:e,className:t,style:r,shape:i="circle",type:a="default",placement:l="top",icon:u=v.createElement(De,null),closeIcon:d,description:s,trigger:c,children:E,onOpenChange:O,open:b,onClick:R}=n,M=Wt(n,["prefixCls","className","style","shape","type","placement","icon","closeIcon","description","trigger","children","onOpenChange","open","onClick"]),{direction:I,getPrefixCls:B,floatButtonGroup:F}=v.useContext(fe),C=(o=d??(F==null?void 0:F.closeIcon))!==null&&o!==void 0?o:v.createElement(nt,null),k=B(he,e),q=Ne(k),[V,$,S]=Ue(k,q),h=`${k}-group`,x=c&&["click","hover"].includes(c),g=l&&["top","left","right","bottom"].includes(l),W=Q(h,$,S,q,t,{[`${h}-rtl`]:I==="rtl",[`${h}-${i}`]:i,[`${h}-${i}-shadow`]:!x,[`${h}-${l}`]:x&&g}),[J]=Le("FloatButton",r==null?void 0:r.zIndex),re=Object.assign(Object.assign({},r),{zIndex:J}),oe=Q($,`${h}-wrap`),[X,ie]=rt(!1,{value:b}),ee=v.useRef(null),_=c==="hover",p=c==="click",A=ot(H=>{X!==H&&(ie(H),O==null||O(H))}),G=()=>{_&&A(!0)},z=()=>{_&&A(!1)},pe=H=>{p&&A(!X),R==null||R(H)};return v.useEffect(()=>{if(p){const H=ae=>{var te;!((te=ee.current)===null||te===void 0)&&te.contains(ae.target)||A(!1)};return document.addEventListener("click",H,{capture:!0}),()=>document.removeEventListener("click",H,{capture:!0})}},[p]),V(v.createElement(Mt,{value:i},v.createElement("div",{ref:ee,className:W,style:re,onMouseEnter:G,onMouseLeave:z},x?v.createElement(v.Fragment,null,v.createElement(Me,{visible:X,motionName:`${h}-wrap`},H=>{let{className:ae}=H;return v.createElement("div",{className:Q(ae,oe)},E)}),v.createElement(ne,Object.assign({type:a,icon:X?C:u,description:s,"aria-label":n["aria-label"],className:`${h}-trigger`,onClick:pe},M))):E)))};var Ve=function(n,o){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&o.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)o.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(e[t[r]]=n[t[r]]);return e};const Re=n=>{var{backTop:o}=n,e=Ve(n,["backTop"]);return o?m.createElement(qe,Object.assign({},e,{visibilityHeight:0})):m.createElement(ne,Object.assign({},e))},Yt=n=>{var{className:o,items:e}=n,t=Ve(n,["className","items"]);const{prefixCls:r}=t,{getPrefixCls:i}=m.useContext(fe),l=`${i(he,r)}-pure`;return e?m.createElement(He,Object.assign({className:Q(o,l)},t),e.map((u,d)=>m.createElement(Re,Object.assign({key:d},u)))):m.createElement(Re,Object.assign({className:Q(o,l)},t))};ne.BackTop=qe;ne.Group=He;ne._InternalPanelDoNotUseOrYouWillBeFired=Yt;var Jt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512.5 390.6c-29.9 0-57.9 11.6-79.1 32.8-21.1 21.2-32.8 49.2-32.8 79.1 0 29.9 11.7 57.9 32.8 79.1 21.2 21.1 49.2 32.8 79.1 32.8 29.9 0 57.9-11.7 79.1-32.8 21.1-21.2 32.8-49.2 32.8-79.1 0-29.9-11.7-57.9-32.8-79.1a110.96 110.96 0 00-79.1-32.8zm412.3 235.5l-65.4-55.9c3.1-19 4.7-38.4 4.7-57.7s-1.6-38.8-4.7-57.7l65.4-55.9a32.03 32.03 0 009.3-35.2l-.9-2.6a442.5 442.5 0 00-79.6-137.7l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.2 28.9c-30-24.6-63.4-44-99.6-57.5l-15.7-84.9a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52-9.4-106.8-9.4-158.8 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.3a353.44 353.44 0 00-98.9 57.3l-81.8-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a445.93 445.93 0 00-79.6 137.7l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.2 56.5c-3.1 18.8-4.6 38-4.6 57 0 19.2 1.5 38.4 4.6 57l-66 56.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.3 44.8 96.8 79.6 137.7l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.8-29.1c29.8 24.5 63 43.9 98.9 57.3l15.8 85.3a32.05 32.05 0 0025.8 25.7l2.7.5a448.27 448.27 0 00158.8 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-84.9c36.2-13.6 69.6-32.9 99.6-57.5l81.2 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.5-87.4 79.6-137.7l.9-2.6c4.3-12.4.6-26.3-9.5-35zm-412.3 52.2c-97.1 0-175.8-78.7-175.8-175.8s78.7-175.8 175.8-175.8 175.8 78.7 175.8 175.8-78.7 175.8-175.8 175.8z"}}]},name:"setting",theme:"filled"},Xt=function(o,e){return m.createElement(we,xe({},o,{ref:e,icon:Jt}))},Zt=m.forwardRef(Xt);const Qt=()=>{const{devtools:n,showDevtools:o,toggleDevtools:e,url:t,features:r,disabledFeatures:i,setDisabledFeatures:a}=ce(),[l,u]=m.useState(t),d=()=>{ce.setState({url:l}),_e("success","New URL setted!")},s=()=>!0;return n?w.jsxs(w.Fragment,{children:[w.jsx(ne,{type:"primary",icon:w.jsx(Zt,{}),onClick:e}),w.jsx(Et,{centered:!0,title:"Devtools",onCancel:e,open:o,footer:!1,children:w.jsxs(me,{layout:"vertical",children:[w.jsx(me.Item,{label:"URL",children:w.jsxs(Ot.Compact,{className:"w-100",children:[w.jsx(It,{size:"large",value:l,onChange:c=>u(c.target.value)}),w.jsx(Tt,{size:"large",onClick:d,disabled:t===l||!1,style:{background:t!==l&&s()?"var(--ant-color-success)":"var(--ant-color-default)",color:"white"},icon:w.jsx(Ct,{})})]})}),w.jsx(me.Item,{label:"Features",children:r.map(c=>w.jsx(Rt,{checkedChildren:c,unCheckedChildren:c,onChange:()=>{i.find(E=>E===c)?a({feature:c,include:!1}):a({feature:c,include:!0})},checked:!i.find(E=>E===c),style:{margin:2}},c))})]})})]}):null},en="_logo_15qc5_1",tn={logo:en};function ue(n,o){let e=document.querySelector(`meta[name="${n}"]`);e||(e=document.createElement("meta"),e.name=n,document.head.appendChild(e)),e.content=o}function nn(n,o){const e=Object.entries({rel:n,...o}).map(([r,i])=>`[${r}="${i}"]`).join("");let t=document.querySelector(`link${e}`);t?o.href&&(t.href=o.href):(t=document.createElement("link"),t.rel=n,Object.entries(o).forEach(([r,i])=>t==null?void 0:t.setAttribute(r,i)),document.head.appendChild(t))}function rn(){document.querySelectorAll('link[rel="apple-touch-icon"]').forEach(n=>n.remove())}function on(n){const o=[];return n.icons[192]&&o.push({src:n.icons[192],sizes:"192x192",type:"image/png"}),n.icons[512]&&o.push({src:n.icons[512],sizes:"512x512",type:"image/png"}),n.icons.maskable512&&o.push({src:n.icons.maskable512,sizes:"512x512",type:"image/png",purpose:"maskable"}),{name:n.appName,short_name:n.appName,start_url:".",display:"standalone",background_color:n.backgroundColor??"#ffffff",theme_color:n.themeColor??"#000000",icons:o}}function an(n){if(!n)return;ue("apple-mobile-web-app-title",n.appName),ue("apple-mobile-web-app-capable","yes"),ue("apple-mobile-web-app-status-bar-style","default"),rn(),["180","167","152","120"].forEach(a=>{const l=n.icons[a];l&&nn("apple-touch-icon",{sizes:`${a}x${a}`,href:l})});const e=on(n),t=new Blob([JSON.stringify(e)],{type:"application/manifest+json"}),r=URL.createObjectURL(t);let i=document.querySelector('link[rel="manifest"]');return i||(i=document.createElement("link"),i.rel="manifest",document.head.appendChild(i)),i.href=r,n.themeColor&&ue("theme-color",n.themeColor),()=>{URL.revokeObjectURL(r)}}var ye=function(n,o){return ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},ye(n,o)},T=function(){return T=Object.assign||function(n){for(var o,e=1,t=arguments.length;e<t;e++)for(var r in o=arguments[e])Object.prototype.hasOwnProperty.call(o,r)&&(n[r]=o[r]);return n},T.apply(this,arguments)};function N(n,o,e,t){return new(e||(e=Promise))(function(r,i){function a(d){try{u(t.next(d))}catch(s){i(s)}}function l(d){try{u(t.throw(d))}catch(s){i(s)}}function u(d){var s;d.done?r(d.value):(s=d.value,s instanceof e?s:new e(function(c){c(s)})).then(a,l)}u((t=t.apply(n,[])).next())})}function L(n,o){var e,t,r,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(d){return function(s){if(e)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(e=1,t&&(r=2&s[0]?t.return:s[0]?t.throw||((r=t.return)&&r.call(t),0):t.next)&&!(r=r.call(t,s[1])).done)return r;switch(t=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,t=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(r=i.trys,!((r=r.length>0&&r[r.length-1])||s[0]!==6&&s[0]!==2)){i=0;continue}if(s[0]===3&&(!r||s[1]>r[0]&&s[1]<r[3])){i.label=s[1];break}if(s[0]===6&&i.label<r[1]){i.label=r[1],r=s;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(s);break}r[2]&&i.ops.pop(),i.trys.pop();continue}s=o.call(n,i)}catch(c){s=[6,c],t=0}finally{e=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([u,d])}}}var Ge={exports:{}};function be(){}be.prototype={on:function(n,o,e){var t=this.e||(this.e={});return(t[n]||(t[n]=[])).push({fn:o,ctx:e}),this},once:function(n,o,e){var t=this;function r(){t.off(n,r),o.apply(e,arguments)}return r._=o,this.on(n,r,e)},emit:function(n){for(var o=[].slice.call(arguments,1),e=((this.e||(this.e={}))[n]||[]).slice(),t=0,r=e.length;t<r;t++)e[t].fn.apply(e[t].ctx,o);return this},off:function(n,o){var e=this.e||(this.e={}),t=e[n],r=[];if(t&&o)for(var i=0,a=t.length;i<a;i++)t[i].fn!==o&&t[i].fn._!==o&&r.push(t[i]);return r.length?e[n]=r:delete e[n],this}},Ge.exports=be;var sn=Ge.exports.TinyEmitter=be,ve=function(n){var o=n[1];return o!=null},cn=function(n){var o=n.properties,e=o===void 0?{}:o,t=function(i,a){var l={};for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&a.indexOf(u)<0&&(l[u]=i[u]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var d=0;for(u=Object.getOwnPropertySymbols(i);d<u.length;d++)a.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(i,u[d])&&(l[u[d]]=i[u[d]])}return l}(n,["properties"]),r=function(i){return Object.entries(i).sort(function(a,l){var u=a[0],d=l[0];return u.localeCompare(d,void 0)})};return JSON.stringify([r(t),r(e)])},$e=function(n){return N(void 0,void 0,void 0,function(){var o;return L(this,function(e){switch(e.label){case 0:o=cn(n),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,(t=o,N(void 0,void 0,void 0,function(){var r,i,a,l,u;return L(this,function(d){switch(d.label){case 0:if(r=typeof globalThis<"u"&&(!((l=globalThis.crypto)===null||l===void 0)&&l.subtle)?(u=globalThis.crypto)===null||u===void 0?void 0:u.subtle:void 0,typeof TextEncoder>"u"||!(r!=null&&r.digest)||typeof Uint8Array>"u")throw new Error("Hashing function not available");return i=new TextEncoder().encode(t),[4,r.digest("SHA-256",i)];case 1:return a=d.sent(),[2,Array.from(new Uint8Array(a)).map(function(s){return s.toString(16).padStart(2,"0")}).join("")]}})}))];case 2:return[2,e.sent()];case 3:return e.sent(),[2,o];case 4:return[2]}var t})})},Ke=function(n){var o,e=n.clientKey,t=n.appName,r=n.connectionId,i=n.customHeaders,a=n.headerName,l=a===void 0?"authorization":a,u=n.etag,d=n.isPost,s=((o={accept:"application/json"})[l.toLocaleLowerCase()]=e,o["unleash-sdk"]="unleash-client-js:3.7.8",o["unleash-appname"]=t,o);return d&&(s["content-type"]="application/json"),u&&(s["if-none-match"]=u),Object.entries(i||{}).filter(ve).forEach(function(c){var E=c[0],O=c[1];return s[E.toLocaleLowerCase()]=O}),s["unleash-connection-id"]=r,s},ln=function(){},un=function(){function n(o){var e=o.onError,t=o.onSent,r=o.appName,i=o.metricsInterval,a=o.disableMetrics,l=a!==void 0&&a,u=o.url,d=o.clientKey,s=o.fetch,c=o.headerName,E=o.customHeaders,O=E===void 0?{}:E,b=o.metricsIntervalInitial,R=o.connectionId;this.onError=e,this.onSent=t||ln,this.disabled=l,this.metricsInterval=1e3*i,this.metricsIntervalInitial=1e3*b,this.appName=r,this.url=u instanceof URL?u:new URL(u),this.clientKey=d,this.bucket=this.createEmptyBucket(),this.fetch=s,this.headerName=c,this.customHeaders=O,this.connectionId=R}return n.prototype.start=function(){var o=this;if(this.disabled)return!1;typeof this.metricsInterval=="number"&&this.metricsInterval>0&&(this.metricsIntervalInitial>0?setTimeout(function(){o.startTimer(),o.sendMetrics()},this.metricsIntervalInitial):this.startTimer())},n.prototype.stop=function(){this.timer&&(clearInterval(this.timer),delete this.timer)},n.prototype.createEmptyBucket=function(){return{start:new Date,stop:null,toggles:{}}},n.prototype.getHeaders=function(){return Ke({clientKey:this.clientKey,appName:this.appName,connectionId:this.connectionId,customHeaders:this.customHeaders,headerName:this.headerName,isPost:!0})},n.prototype.sendMetrics=function(){return N(this,void 0,void 0,function(){var o,e,t;return L(this,function(r){switch(r.label){case 0:if(o="".concat(this.url,"/client/metrics"),e=this.getPayload(),this.bucketIsEmpty(e))return[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.fetch(o,{cache:"no-cache",method:"POST",headers:this.getHeaders(),body:JSON.stringify(e)})];case 2:return r.sent(),this.onSent(e),[3,4];case 3:return t=r.sent(),console.error("Unleash: unable to send feature metrics",t),this.onError(t),[3,4];case 4:return[2]}})})},n.prototype.count=function(o,e){return!(this.disabled||!this.bucket)&&(this.assertBucket(o),this.bucket.toggles[o][e?"yes":"no"]++,!0)},n.prototype.countVariant=function(o,e){return!(this.disabled||!this.bucket)&&(this.assertBucket(o),this.bucket.toggles[o].variants[e]?this.bucket.toggles[o].variants[e]+=1:this.bucket.toggles[o].variants[e]=1,!0)},n.prototype.assertBucket=function(o){if(this.disabled||!this.bucket)return!1;this.bucket.toggles[o]||(this.bucket.toggles[o]={yes:0,no:0,variants:{}})},n.prototype.startTimer=function(){var o=this;this.timer=setInterval(function(){o.sendMetrics()},this.metricsInterval)},n.prototype.bucketIsEmpty=function(o){return Object.keys(o.bucket.toggles).length===0},n.prototype.getPayload=function(){var o=T(T({},this.bucket),{stop:new Date});return this.bucket=this.createEmptyBucket(),{bucket:o,appName:this.appName,instanceId:"browser"}},n}(),dn=function(){function n(){this.store=new Map}return n.prototype.save=function(o,e){return N(this,void 0,void 0,function(){return L(this,function(t){return this.store.set(o,e),[2]})})},n.prototype.get=function(o){return N(this,void 0,void 0,function(){return L(this,function(e){return[2,this.store.get(o)]})})},n}(),fn=function(){function n(o){o===void 0&&(o="unleash:repository"),this.prefix=o}return n.prototype.save=function(o,e){return N(this,void 0,void 0,function(){var t,r;return L(this,function(i){t=JSON.stringify(e),r="".concat(this.prefix,":").concat(o);try{window.localStorage.setItem(r,t)}catch(a){console.error(a)}return[2]})})},n.prototype.get=function(o){try{var e="".concat(this.prefix,":").concat(o),t=window.localStorage.getItem(e);return t?JSON.parse(t):void 0}catch(r){console.error(r)}},n}();let de;const hn=new Uint8Array(16);function pn(){if(!de&&(de=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!de))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return de(hn)}const j=[];for(let n=0;n<256;++n)j.push((n+256).toString(16).slice(1));var Be={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function mn(n,o,e){if(Be.randomUUID&&!n)return Be.randomUUID();const t=(n=n||{}).random||(n.rng||pn)();return t[6]=15&t[6]|64,t[8]=63&t[8]|128,function(r,i=0){return j[r[i+0]]+j[r[i+1]]+j[r[i+2]]+j[r[i+3]]+"-"+j[r[i+4]]+j[r[i+5]]+"-"+j[r[i+6]]+j[r[i+7]]+"-"+j[r[i+8]]+j[r[i+9]]+"-"+j[r[i+10]]+j[r[i+11]]+j[r[i+12]]+j[r[i+13]]+j[r[i+14]]+j[r[i+15]]}(t)}var gn=function(){function n(){}return n.prototype.generateEventId=function(){return mn()},n.prototype.createImpressionEvent=function(o,e,t,r,i,a){var l=this.createBaseEvent(o,e,t,r,i);return a?T(T({},l),{variant:a}):l},n.prototype.createBaseEvent=function(o,e,t,r,i){return{eventType:r,eventId:this.generateEventId(),context:o,enabled:e,featureName:t,impressionData:i}},n}(),yn=["userId","sessionId","remoteAddress","currentTime"],ke=function(n){return yn.includes(n)},U={INIT:"initialized",ERROR:"error",READY:"ready",UPDATE:"update",IMPRESSION:"impression",SENT:"sent",RECOVERED:"recovered"},bn="isEnabled",vn="getVariant",wn={name:"disabled",enabled:!1,feature_enabled:!1},ge="repo",Pe="repoLastUpdateTimestamp",xn=function(){try{if(typeof window<"u"&&"fetch"in window)return fetch.bind(window);if("fetch"in globalThis)return fetch.bind(globalThis)}catch(n){console.error('Unleash failed to resolve "fetch"',n)}},Sn=function(n){function o(e){var t,r=e.storageProvider,i=e.url,a=e.clientKey,l=e.disableRefresh,u=l!==void 0&&l,d=e.refreshInterval,s=d===void 0?30:d,c=e.metricsInterval,E=c===void 0?30:c,O=e.metricsIntervalInitial,b=O===void 0?2:O,R=e.disableMetrics,M=R!==void 0&&R,I=e.appName,B=e.environment,F=B===void 0?"default":B,C=e.context,k=e.fetch,q=k===void 0?xn():k,V=e.createAbortController,$=V===void 0?function(){try{if(typeof window<"u"&&"AbortController"in window)return function(){return new window.AbortController};if("fetch"in globalThis)return function(){return new globalThis.AbortController}}catch(G){console.error('Unleash failed to resolve "AbortController" factory',G)}}():V,S=e.bootstrap,h=e.bootstrapOverride,x=h===void 0||h,g=e.headerName,W=g===void 0?"Authorization":g,J=e.customHeaders,re=J===void 0?{}:J,oe=e.impressionDataAll,X=oe!==void 0&&oe,ie=e.usePOSTrequests,ee=ie!==void 0&&ie,_=e.experimental,p=n.call(this)||this;if(p.toggles=[],p.etag="",p.readyEventEmitted=!1,p.fetchedFromServer=!1,p.usePOSTrequests=!1,p.started=!1,!i)throw new Error("url is required");if(!a)throw new Error("clientKey is required");if(!I)throw new Error("appName is required.");p.eventsHandler=new gn,p.impressionDataAll=X,p.toggles=S&&S.length>0?S:[],p.url=i instanceof URL?i:new URL(i),p.clientKey=a,p.headerName=W,p.customHeaders=re,p.storage=r||(typeof window<"u"?new fn:new dn),p.refreshInterval=u?0:1e3*s,p.context=T({appName:I,environment:F},C),p.usePOSTrequests=ee,p.sdkState="initializing";var A=_==null?void 0:_.metricsUrl;return!A||A instanceof URL||(A=new URL(A)),p.experimental=T(T({},_),{metricsUrl:A}),_!=null&&_.togglesStorageTTL&&(_==null?void 0:_.togglesStorageTTL)>0&&(p.experimental.togglesStorageTTL=1e3*_.togglesStorageTTL),p.lastRefreshTimestamp=0,p.ready=new Promise(function(G){p.init().then(G).catch(function(z){console.error(z),p.sdkState="error",p.emit(U.ERROR,z),p.lastError=z,G()})}),q||console.error('Unleash: You must either provide your own "fetch" implementation or run in an environment where "fetch" is available.'),$||console.error('Unleash: You must either provide your own "AbortController" implementation or run in an environment where "AbortController" is available.'),p.fetch=q,p.createAbortController=$,p.bootstrap=S&&S.length>0?S:void 0,p.bootstrapOverride=x,p.connectionId="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(G){var z=16*Math.random()|0;return(G==="x"?z:3&z|8).toString(16)}),p.metrics=new un({onError:p.emit.bind(p,U.ERROR),onSent:p.emit.bind(p,U.SENT),appName:I,metricsInterval:E,disableMetrics:M,url:((t=p.experimental)===null||t===void 0?void 0:t.metricsUrl)||p.url,clientKey:a,fetch:q,headerName:W,customHeaders:re,metricsIntervalInitial:b,connectionId:p.connectionId}),p}return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}ye(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}(o,n),o.prototype.getAllToggles=function(){return function(e,t,r){for(var i,a=0,l=t.length;a<l;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))}([],this.toggles)},o.prototype.isEnabled=function(e){var t,r=this.toggles.find(function(l){return l.name===e}),i=!!r&&r.enabled;if(this.metrics.count(e,i),(r==null?void 0:r.impressionData)||this.impressionDataAll){var a=this.eventsHandler.createImpressionEvent(this.context,i,e,bn,(t=r==null?void 0:r.impressionData)!==null&&t!==void 0?t:void 0);this.emit(U.IMPRESSION,a)}return i},o.prototype.getVariant=function(e){var t,r=this.toggles.find(function(u){return u.name===e}),i=(r==null?void 0:r.enabled)||!1,a=r?r.variant:wn;if(a.name&&this.metrics.countVariant(e,a.name),this.metrics.count(e,i),(r==null?void 0:r.impressionData)||this.impressionDataAll){var l=this.eventsHandler.createImpressionEvent(this.context,i,e,vn,(t=r==null?void 0:r.impressionData)!==null&&t!==void 0?t:void 0,a.name);this.emit(U.IMPRESSION,l)}return T(T({},a),{feature_enabled:i})},o.prototype.updateToggles=function(){return N(this,void 0,void 0,function(){var e=this;return L(this,function(t){switch(t.label){case 0:return this.timerRef||this.fetchedFromServer?[4,this.fetchToggles()]:[3,2];case 1:return t.sent(),[3,4];case 2:return this.started?[4,new Promise(function(r){var i=function(){e.fetchToggles().then(function(){e.off(U.READY,i),r()})};e.once(U.READY,i)})]:[3,4];case 3:t.sent(),t.label=4;case 4:return[2]}})})},o.prototype.updateContext=function(e){return N(this,void 0,void 0,function(){var t;return L(this,function(r){switch(r.label){case 0:return(e.appName||e.environment)&&console.warn("appName and environment are static. They can't be updated with updateContext."),t={environment:this.context.environment,appName:this.context.appName,sessionId:this.context.sessionId},this.context=T(T({},t),e),[4,this.updateToggles()];case 1:return r.sent(),[2]}})})},o.prototype.getContext=function(){return T({},this.context)},o.prototype.setContextField=function(e,t){return N(this,void 0,void 0,function(){var r,i,a;return L(this,function(l){switch(l.label){case 0:return ke(e)?this.context=T(T({},this.context),((i={})[e]=t,i)):(r=T(T({},this.context.properties),((a={})[e]=t,a)),this.context=T(T({},this.context),{properties:r})),[4,this.updateToggles()];case 1:return l.sent(),[2]}})})},o.prototype.removeContextField=function(e){return N(this,void 0,void 0,function(){var t;return L(this,function(r){switch(r.label){case 0:return ke(e)?this.context=T(T({},this.context),((t={})[e]=void 0,t)):typeof this.context.properties=="object"&&delete this.context.properties[e],[4,this.updateToggles()];case 1:return r.sent(),[2]}})})},o.prototype.setReady=function(){this.readyEventEmitted=!0,this.emit(U.READY)},o.prototype.init=function(){return N(this,void 0,void 0,function(){var e,t,r;return L(this,function(i){switch(i.label){case 0:return[4,this.resolveSessionId()];case 1:return e=i.sent(),this.context=T({sessionId:e},this.context),[4,this.storage.get(ge)];case 2:return t=i.sent()||[],r=this,[4,this.getLastRefreshTimestamp()];case 3:return r.lastRefreshTimestamp=i.sent(),!this.bootstrap||!this.bootstrapOverride&&t.length!==0?[3,6]:[4,this.storage.save(ge,this.bootstrap)];case 4:return i.sent(),this.toggles=this.bootstrap,this.sdkState="healthy",[4,this.storeLastRefreshTimestamp()];case 5:return i.sent(),this.setReady(),[3,7];case 6:this.toggles=t,i.label=7;case 7:return this.sdkState="healthy",this.emit(U.INIT),[2]}})})},o.prototype.start=function(){return N(this,void 0,void 0,function(){var e,t=this;return L(this,function(r){switch(r.label){case 0:return this.started=!0,this.timerRef?(console.error("Unleash SDK has already started, if you want to restart the SDK you should call client.stop() before starting again."),[2]):[4,this.ready];case 1:return r.sent(),this.metrics.start(),e=this.refreshInterval,[4,this.initialFetchToggles()];case 2:return r.sent(),e>0&&(this.timerRef=setInterval(function(){return t.fetchToggles()},e)),[2]}})})},o.prototype.stop=function(){this.timerRef&&(clearInterval(this.timerRef),this.timerRef=void 0),this.metrics.stop()},o.prototype.isReady=function(){return this.readyEventEmitted},o.prototype.getError=function(){return this.sdkState==="error"?this.lastError:void 0},o.prototype.sendMetrics=function(){return this.metrics.sendMetrics()},o.prototype.resolveSessionId=function(){return N(this,void 0,void 0,function(){var e;return L(this,function(t){switch(t.label){case 0:return this.context.sessionId?[2,this.context.sessionId]:[4,this.storage.get("sessionId")];case 1:return(e=t.sent())?[3,3]:(e=Math.floor(1e9*Math.random()),[4,this.storage.save("sessionId",e.toString(10))]);case 2:t.sent(),t.label=3;case 3:return[2,e.toString(10)]}})})},o.prototype.getHeaders=function(){return Ke({clientKey:this.clientKey,connectionId:this.connectionId,appName:this.context.appName,customHeaders:this.customHeaders,headerName:this.headerName,etag:this.etag,isPost:this.usePOSTrequests})},o.prototype.storeToggles=function(e){return N(this,void 0,void 0,function(){return L(this,function(t){switch(t.label){case 0:return this.toggles=e,this.emit(U.UPDATE),[4,this.storage.save(ge,e)];case 1:return t.sent(),[2]}})})},o.prototype.isTogglesStorageTTLEnabled=function(){var e;return!!(!((e=this.experimental)===null||e===void 0)&&e.togglesStorageTTL&&this.experimental.togglesStorageTTL>0)},o.prototype.isUpToDate=function(){var e;if(!this.isTogglesStorageTTLEnabled())return!1;var t=Date.now(),r=((e=this.experimental)===null||e===void 0?void 0:e.togglesStorageTTL)||0;return this.lastRefreshTimestamp>0&&this.lastRefreshTimestamp<=t&&t-this.lastRefreshTimestamp<=r},o.prototype.getLastRefreshTimestamp=function(){return N(this,void 0,void 0,function(){var e,t;return L(this,function(r){switch(r.label){case 0:return this.isTogglesStorageTTLEnabled()?[4,this.storage.get(Pe)]:[3,3];case 1:return e=r.sent(),[4,$e(this.context)];case 2:return t=r.sent(),[2,(e==null?void 0:e.key)===t?e.timestamp:0];case 3:return[2,0]}})})},o.prototype.storeLastRefreshTimestamp=function(){return N(this,void 0,void 0,function(){var e,t;return L(this,function(r){switch(r.label){case 0:return this.isTogglesStorageTTLEnabled()?(this.lastRefreshTimestamp=Date.now(),t={},[4,$e(this.context)]):[3,3];case 1:return t.key=r.sent(),t.timestamp=this.lastRefreshTimestamp,e=t,[4,this.storage.save(Pe,e)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},o.prototype.initialFetchToggles=function(){if(!this.isUpToDate())return this.fetchToggles();this.fetchedFromServer||(this.fetchedFromServer=!0,this.setReady())},o.prototype.fetchToggles=function(){return N(this,void 0,void 0,function(){var e,t,r,i,a,l,u,d,s;return L(this,function(c){switch(c.label){case 0:if(!this.fetch)return[3,9];this.abortController&&!this.abortController.signal.aborted&&this.abortController.abort(),this.abortController=(s=this.createAbortController)===null||s===void 0?void 0:s.call(this),e=this.abortController?this.abortController.signal:void 0,c.label=1;case 1:return c.trys.push([1,7,8,9]),t=this.usePOSTrequests,r=t?this.url:function(E,O){var b=new URL(E.toString());return Object.entries(O).filter(ve).forEach(function(R){var M=R[0],I=R[1];M==="properties"&&I?Object.entries(I).filter(ve).forEach(function(B){var F=B[0],C=B[1];return b.searchParams.append("properties[".concat(F,"]"),C)}):b.searchParams.append(M,I)}),b}(this.url,this.context),i=t?"POST":"GET",a=t?JSON.stringify({context:this.context}):void 0,[4,this.fetch(r.toString(),{method:i,cache:"no-cache",headers:this.getHeaders(),body:a,signal:e})];case 2:return l=c.sent(),this.sdkState==="error"&&l.status<400&&(this.sdkState="healthy",this.emit(U.RECOVERED)),l.ok?(this.etag=l.headers.get("ETag")||"",[4,l.json()]):[3,5];case 3:return u=c.sent(),[4,this.storeToggles(u.toggles)];case 4:return c.sent(),this.sdkState!=="healthy"&&(this.sdkState="healthy"),this.fetchedFromServer||(this.fetchedFromServer=!0,this.setReady()),this.storeLastRefreshTimestamp(),[3,6];case 5:l.status===304?this.storeLastRefreshTimestamp():(console.error("Unleash: Fetching feature toggles did not have an ok response"),this.sdkState="error",this.emit(U.ERROR,{type:"HttpError",code:l.status}),this.lastError={type:"HttpError",code:l.status}),c.label=6;case 6:return[3,9];case 7:return typeof(d=c.sent())=="object"&&d!==null&&"name"in d&&d.name==="AbortError"||(console.error("Unleash: unable to fetch feature toggles",d),this.sdkState="error",this.emit(U.ERROR,d),this.lastError=d),[3,9];case 8:return this.abortController=null,[7];case 9:return[2]}})})},o}(sn);const En=1*60*1e3;function On(){const n=it();window.addEventListener("message",o=>{var e;if(!(!n||o.origin!==n)&&((e=o.data)==null?void 0:e.type)==="broker-handshake"){const t=Fe.getState().token;t&&window.parent.postMessage({type:"broker-auth",version:1,bearer:t},n)}})}const In={"not-landscape":"_not-landscape_1qc4u_1"},Tn=()=>{const{t:n}=Ae(),[o,e]=m.useState(!1);return m.useEffect(()=>{const t=()=>{const r=window.self!==window.top,i=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),a=window.innerWidth>window.innerHeight,l=window.innerHeight<=500,u="ontouchstart"in window||navigator.maxTouchPoints>0;e(!r&&i&&a&&(l||u))};return t(),window.addEventListener("orientationchange",t),window.addEventListener("resize",t),()=>{window.removeEventListener("orientationchange",t),window.removeEventListener("resize",t)}},[]),o?w.jsxs(ze,{gap:12,className:`${In["not-landscape"]}`,align:"center",justify:"center",children:[w.jsx(kt,{style:{color:"var(--ant-color-text)"}}),w.jsx(at.Text,{className:"Body-16-Medium",children:n("general.landscapeWarning")})]}):null},Yn=()=>{var Ee;const{t:n}=Ae();window.t=n;const{token:o}=st.useToken(),{getWallet:e}=ct(f=>f),{loading:t,setLoading:r,loadingPayout:i,loadingTraderVip:a,setShowFutures:l,setShowCopyTrade:u,setShowTraderBot:d,setShowTradeBooster:s,tenantConfigs:c,setShowTraderVip:E,globalLoading:O,setLoaderAuthentication:b,loaderAuthentication:R,authenticated:M,setAuthenticated:I,maintenanceMode:B,setMaintenanceMode:F}=lt(f=>f),C=ut(),k=dt(),{updatePlatforms:q}=ft(f=>f),{me:V,setTenant:$,setOptionConfigs:S,tenant:h,tenantImages:x,userLogged:g,token:W,themeConfig:J,refreshTenant:re}=Fe(f=>f),[oe,X]=m.useState([]),[ie]=ht(),ee=ie.get("coupon"),[_,p]=m.useState(!1),{pathname:A}=C,G=m.useRef(null),z=m.useMemo(()=>{const{pathname:f}=C;return!g||!W||!h?t:f.includes("auth")&&h&&!R&&!M||_?!1:(p(!O&&!t&&!i&&!a&&!R),(!!f.includes("traderoom")||!!f.includes("auth"))&&(O||t||i||a))},[t,i,a,g,W,h,C,O,_,R]);m.useEffect(()=>{if(z){const f=setTimeout(()=>{p(!0)},1e4);return()=>clearTimeout(f)}},[z]),m.useEffect(()=>{const f=h.configs||c||[],y=(se(f,"FUTURES_ENABLED")??!1)&&!!(g!=null&&g.influencer),P=se(f,"COPY_TRADE_ENABLED")??!1,D=se(f,"TRADER_BOT_ENABLED")??!1,Y=se(f,"TRADE_PAYOUT_BOOSTER")??!1,Ye=se(f,"TRADER_VIP_ENABLED")??!1;l(y),u(P),d(D),s(Y),E(Ye)},[c,g,h]),m.useEffect(()=>{On()},[]),m.useEffect(()=>{const f=new URLSearchParams(window.location.search);Bt.getState().setUtmsFromUrl(f)},[]);const pe=()=>{var y,P;if(!g||!((y=g==null?void 0:g.affiliateLink)!=null&&y.gtmCode)||!(g!=null&&g.affiliateId))return;const f=(P=g.affiliateLink)==null?void 0:P.gtmCode;f&&Ie(f)},H=()=>{var y,P;if(!h||!((y=h==null?void 0:h.pixels)!=null&&y.length))return;((P=h==null?void 0:h.pixels)==null?void 0:P.filter(D=>D.type===Te.GTM)).forEach(D=>{var Y;Ie((Y=D.config)==null?void 0:Y.followId)})},ae=()=>{var y,P;if(!h||!((y=h==null?void 0:h.pixels)!=null&&y.length))return;const f=(P=h==null?void 0:h.pixels)==null?void 0:P.filter(D=>D.type===Te.FACEBOOK);X(f.map(D=>{var Y;return(Y=D.config)==null?void 0:Y.id})),f.forEach(D=>{var Y;bt((Y=D.config)==null?void 0:Y.id)})};m.useEffect(()=>{pe()},[g]),m.useEffect(()=>{H(),ae()},[h]),m.useEffect(()=>{const f=e("REAL"),y=C.pathname+C.search;pt.dataLayer({dataLayer:{event:window.location.pathname,payload:{pagePath:y,pageTitle:document.title,userId:g==null?void 0:g.id,email:g==null?void 0:g.email,tenantId:g==null?void 0:g.tenantId,affiliateId:g==null?void 0:g.affiliateId,balance:f==null?void 0:f.balance}}})},[window.location.pathname]);const te=()=>{q()};m.useMemo(()=>(te(),window.addEventListener("resize",te),()=>{window.removeEventListener("resize",te)}),[]);const We=f=>{const y=document.querySelector("link[rel*='icon']")||document.createElement("link");y.type="image/x-icon",y.rel="shortcut icon",y.href=f,document.getElementsByTagName("head")[0].appendChild(y)};return m.useEffect(()=>{We(x.favicon)},[x.favicon]),m.useEffect(()=>{h!=null&&h.name&&(document.title=h.name)},[h]),m.useEffect(()=>{if(!B&&!(!W&&C.pathname.includes("auth"))){if(!W)return k("/auth/login");b(!0),V().then(f=>{if(f&&(S().then(()=>{}),I(!0)),f&&(C.pathname.includes("auth")||C.pathname.includes("maintenance")||["/"].includes(C.pathname))){const y=new URLSearchParams(C.search).get("ticker"),P=new URLSearchParams;return y&&P.append("ticker",y),k(ee?`/finance/deposit?coupon=${ee}`:`/traderoom?${P.toString()}`)}if(!f&&!C.pathname.includes("auth")){const y=new URLSearchParams(C.search);return k(`/auth/login?${y.toString()}`)}}).finally(()=>{b(!1)}),ce.setState({url:ce.getState().devtools?ce.getState().url:"https://broker-api.mybroker.dev"})}},[W,B]),m.useEffect(()=>{const f=()=>{const P=!!document.querySelector("input");try{window.parent.postMessage({type:"load-status",inputExists:P,domain:window.location.hostname},"*")}catch(D){console.error(D)}};f();const y=new MutationObserver(()=>{f()});return y.observe(document.body,{childList:!0,subtree:!0}),()=>y.disconnect()},[]),m.useEffect(()=>{h&&an({appName:h.name,icons:{120:x.icon_120||x.logo,152:x.icon_152||x.logo,167:x.icon_167||x.logo,180:x.icon_180||x.logo,192:x.icon_192||x.logo,512:x.icon_512||x.logo,maskable512:x.maskable_icon_512||x.logo},themeColor:J.COLOR.COLOR_PRIMARY||"#FFFFFF",backgroundColor:J.COLOR.COLOR_BACKGROUND_V1||"#000000"})},[h,x,J]),m.useEffect(()=>{const f=(h==null?void 0:h.brokerMaintenanceMode)||B,y=A==="/maintenance";if(f&&!y){k("/maintenance",{replace:!0});return}!f&&y&&k("/auth/login",{replace:!0})},[h,A,k,B]),m.useEffect(()=>{try{let f=window.location.hostname;if(f==="localhost"&&(f=void 0,!f))return;$(f).then(y=>{y||k("/auth/login")}).finally(()=>{r(!1)})}catch(f){const y=mt(f);_e("error",y)}},[]),m.useEffect(()=>{const f=async()=>{try{await re()}catch(y){console.error("Error checking maintenance status:",y)}};if(h!=null&&h.brokerMaintenanceMode){const y=setInterval(f,En);return()=>{clearInterval(y)}}},[h]),m.useEffect(()=>{if(h!=null&&h.id)try{const f=new Sn({url:"https://us.app.unleash-hosted.com/usnn0023/api/frontend/",clientKey:"broker-client:production.bf79103336dc5f4ba03db34f8c3037cc7134a5a025281da1f23ef659",appName:"broker-client",environment:"production",refreshInterval:600,metricsInterval:900,context:{userId:g==null?void 0:g.id,properties:{tenantId:(h==null?void 0:h.id)??"",domain:window.location.hostname,project:"broker-client"}}});G.current=f;const y=()=>{const P=f.isEnabled("site_maintenance");F(P)};return f.on("ready",y),f.on("update",y),f.start(),()=>{f.stop(),G.current=null}}catch(f){console.error(f)}},[h]),w.jsxs(w.Fragment,{children:[w.jsx("div",{style:{display:z?"block":"none"},children:w.jsxs(ze,{gap:18,style:{background:(Ee=o.Layout)==null?void 0:Ee.bodyBg,height:"100%",width:"100%",position:"fixed"},vertical:!0,justify:"center",align:"center",children:[x.logo?w.jsx("img",{alt:"logo",src:x.logo,height:80,className:tn.logo}):null,w.jsx($t,{indicator:w.jsx(gt,{style:{fontSize:60},spin:!0})})]})}),w.jsxs("div",{style:{display:z?"none":"block"},children:[w.jsx(yt,{}),"/"]}),w.jsx(Qt,{}),w.jsx("noscript",{children:oe.map(f=>w.jsx("img",{alt:"fb-pixel",height:"1",width:"1",style:{display:"none"},src:`https://www.facebook.com/tr?id=${f}&ev=PageView&noscript=1`},f))}),w.jsx(Tn,{})]})};export{Yn as default};
